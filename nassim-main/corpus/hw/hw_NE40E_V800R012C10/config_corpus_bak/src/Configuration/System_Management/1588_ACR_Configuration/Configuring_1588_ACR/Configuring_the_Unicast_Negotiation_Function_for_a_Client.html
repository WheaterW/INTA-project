
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Unicast Negotiation Function for a Client">
<meta name="abstract" content="The unicast negotiation function and parameters for a connection between a client and a clock server are configured on the Router functioning as a 1588 ACR client.">
<meta name="description" content="The unicast negotiation function and parameters for a connection between a client and a clock server are configured on the Router functioning as a 1588 ACR client.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5031.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5033.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,l00587852">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="1588 ACR">
<meta name="featuretype" content="System Management">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="1588 ACR">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="1588 ACR">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="w00845984">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001778921310">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Unicast Negotiation Function for a Client</title>
</head>
<body><a name="EN-US_TASK_0000001778921310"></a><a name="EN-US_TASK_0000001778921310"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Unicast Negotiation Function for a Client</h1>
<div class="taskbody"><p>The unicast negotiation function and parameters for a connection between a client and a clock server are configured on the <span class="keyword">Router</span> functioning as a 1588 ACR client.</p>
<div class="context"><a name="EN-US_TASK_0000001778921310__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>ACR, which is an adaptive clock recovery technology, allows a 1588 ACR client to exchange 1588v2 packets with a clock server on a link where a 1588v2-incapable device resides. After receiving 1588v2 packets, the client uses clock information carried in the packets to restore clock information.</p>
<div class="p">The 1588 ACR features supported by the <span class="keyword">NE40E</span> are as follows:<ul><li><p>1588 ACR clock synchronization in single-server scenarios</p>
<p>In a 1588 ACR domain, a client establishes a client/server relationship only with the remote clock server. The client initiates unicast negotiation requests and obtains 1588v2 packets for clock restoration. If a clock server becomes faulty, the client does not automatically initiate a connection request to another clock server.</p>
</li><li><p>1588 ACR clock synchronization in dual-server scenarios</p>
<p>In a 1588 ACR domain, a client establishes a client/server relationship with two remote clock servers. The client initiates unicast negotiation requests and obtains 1588v2 packets for clock restoration. If the master clock server becomes faulty, the client automatically initiates a connection request to the slave clock server.</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001778921310__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=ptp-adaptive+enable"><b><span class="cmdname">ptp-adaptive enable</span></b></a> command to enable 1588 ACR on the device.</span></li><li><span>Run the <a href="cmdqueryname=ptp-adaptive+device-type"><b><span class="cmdname">ptp-adaptive device-type</span></b></a> <strong><span>client</span></strong> command to set the 1588 ACR clock working mode of the <span class="keyword">Router</span> to client.</span></li><li><span>(Optional) Run the <a href="cmdqueryname=ptp-adaptive+frequency+profile"><b><span class="cmdname">ptp-adaptive frequency profile</span></b></a> command to configure the 1588 ACR-enabled device to totally comply with ITU-T G.8265.1.</span><p><p>After the <b><span class="cmdname">ptp-adaptive frequency profile</span></b> command is run, the default domain value changes to 4. The domain value range changes to 4â23.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=ptp-adaptive+domain"><b><span class="cmdname">ptp-adaptive domain</span></b></a> <i><span class="varname">domain-value</span></i> command to configure a 1588 ACR domain.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The client and clock server, which exchange 1588v2 packets for clock synchronization, must be in the same 1588 ACR clock domain.</p>
</div></div>
</p></li><li><span>Run the <a href="cmdqueryname=ptp-adaptive+local-ip"><b><span class="cmdname">ptp-adaptive local-ip</span></b></a> <i><span class="varname">ip-address</span></i> command to configure a local IP address for the 1588v2 device to initiate Layer 3 unicast negotiation.</span><p><p>The clock server's and client's IP addresses uniquely identify a 1588 ACR connection, which is set up by exchanging Layer 3 unicast packets between a client and a clock server during negotiation. Configuring a loopback address as the client's IP address is recommended, not the IP address of the management network port on the device, helping the clock server direct packets to the client.</p>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=ptp-adaptive+vpn-instance"><b><span class="cmdname">ptp-adaptive vpn-instance</span></b></a> <i><span class="varname">vpn-name</span></i> command to specify the VPN instance name carried in 1588v2 packets, which identifies the VPN instance bound to the client's loopback interface.</span></li><li><span>Run the <a href="cmdqueryname=ptp-adaptive"><b><span class="cmdname">ptp-adaptive</span></b></a> { <strong><span>remote-server1-ip</span></strong> | <strong><span>remote-server2-ip</span></strong> } <i><span class="varname">ip-address</span></i> command to configure a remote clock server list for unicast negotiation.</span><p><p>If multiple clock servers exist on a network, the <span class="keyword">Router</span>, functioning as a client, traces its clock server based on the clock server's IP address.</p>
<p>Running this command twice specifies master and slave clock servers.</p>
<p>If two clock servers are configured, a client initiates connection requests to both servers. If a connection to a server fails to be established or is disconnected, the client automatically initiates a connection to the other client. The process repeats until the client is connected to a server.</p>
</p></li><li><span>Run the <a href="cmdqueryname=ptp-adaptive"><b><span class="cmdname">ptp-adaptive </span></b></a><span>{ <strong><span>acr </span></strong>[ <strong><span>one-way </span></strong>| <strong><span>two-way </span></strong>] | <strong><span>atr </span></strong>}</span> <strong><span>unicast-negotiate enable</span></strong> command to enable 1588 ACR unicast negotiation on the <span class="keyword">Router</span> and configure the frequency recovery mode.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5031.html">Configuring 1588 ACR
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5033.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>