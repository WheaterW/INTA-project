
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Clock Synchronization on a Ring Network">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5014.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5016_a.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,l00587852">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Clock Synchronization">
<meta name="featurename" content="Physical Layer Clock Synchronization">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Clock Synchronization">
<meta name="featurename" content="Physical Layer Clock Synchronization">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="Clock Synchronization">
<meta name="featurename" content="Physical Layer Clock Synchronization">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="w00845984">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001825840949">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring Clock Synchronization on a Ring Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001825840949"></a><a name="EN-US_TASK_0000001825840949"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Clock Synchronization on a Ring Network</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001825840949__1.3.1"></a><a name="1.3.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p><a href="#EN-US_TASK_0000001825840949__fig_dc_ne_clock_cfg_501501">Figure 1</a> shows a ring network. To ensure the reliability of the entire clock synchronization network, <span class="keyword">Device</span>A and <span class="keyword">Device</span>C are connected to external BITSs to import clock signals.  During network deployment, each device automatically selects a clock source based on the clock signals transmitted from <span class="keyword">Device</span>A and <span class="keyword">Device</span>C.</p>
<div class="fignone" id="EN-US_TASK_0000001825840949__fig_dc_ne_clock_cfg_501501"><a name="EN-US_TASK_0000001825840949__fig_dc_ne_clock_cfg_501501"></a><a name="fig_dc_ne_clock_cfg_501501"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring clock synchronization on a ring network</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The configuration in this example is performed on <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D.</p>
<p>In this example, interface1 and interface2 represent GE<span>0/1/0</span> and GE<span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001778921638.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001825840949__1.3.2"></a><a name="1.3.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Configure a clock synchronization mode and enable the devices to select clock sources based on SSM levels.</li><li>Configure clock sources.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001825840949__1.3.3"></a><a name="1.3.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, plan the clock source priority of each <span class="keyword">Router</span>, as listed in <a href="#EN-US_TASK_0000001825840949__tab_dc_ne_clock_cfg_501501">Table 1</a>.</p>

<div class="tableBorder"><a name="EN-US_TASK_0000001825840949__tab_dc_ne_clock_cfg_501501"></a><a name="tab_dc_ne_clock_cfg_501501"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0000001825840949__tab_dc_ne_clock_cfg_501501" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Clock source priority of each <span class="keyword">Router</span></caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="31.630000000000003%" id="mcps1.3.3.3.2.4.1.1" liSelected="liSelected"><p><span class="keyword">Router</span></p>
</th>
<th align="left" class="cellrowborder" valign="top" width="40.67%" id="mcps1.3.3.3.2.4.1.2" liSelected="liSelected"><p>Clock Source in Use</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="27.700000000000003%" id="mcps1.3.3.3.2.4.1.3" liSelected="liSelected"><p>Priority</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="3" valign="top" width="31.630000000000003%" headers="mcps1.3.3.3.2.4.1.1 "><p><span class="keyword">Device</span>A</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="40.67%" headers="mcps1.3.3.3.2.4.1.2 "><p>BITS0</p>
</td>
<td class="cellrowborder" valign="top" width="27.700000000000003%" headers="mcps1.3.3.3.2.4.1.3 "><p>10</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.3 "><p>20</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.2 "><p>GE<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="31.630000000000003%" headers="mcps1.3.3.3.2.4.1.1 "><p></p>
<p><span class="keyword">Device</span>B</p>
</td>
<td class="cellrowborder" valign="top" width="40.67%" headers="mcps1.3.3.3.2.4.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="27.700000000000003%" headers="mcps1.3.3.3.2.4.1.3 "><p>10</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.2 "><p>GE<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.3 "><p>20</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="31.630000000000003%" headers="mcps1.3.3.3.2.4.1.1 "><p><span class="keyword">Device</span>C</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="40.67%" headers="mcps1.3.3.3.2.4.1.2 "><p>BITS0</p>
</td>
<td class="cellrowborder" valign="top" width="27.700000000000003%" headers="mcps1.3.3.3.2.4.1.3 "><p>10</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.2 "><p>GE<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.3 "><p>30</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="31.630000000000003%" headers="mcps1.3.3.3.2.4.1.1 "><p><span class="keyword">Device</span>D</p>
</td>
<td class="cellrowborder" valign="top" width="40.67%" headers="mcps1.3.3.3.2.4.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="27.700000000000003%" headers="mcps1.3.3.3.2.4.1.3 "><p>10</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.2 "><p>GE<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.3.3.3.2.4.1.3 "><p>20</p>
</td>
</tr>
</tbody>
</table>
</div>
<p></p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001825840949__1.3.4"></a><a name="1.3.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable the devices to select clock sources based on SSM levels.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname <span class="keyword">Device</span>A</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> clock ssm-control on</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> commit</strong></pre>
<p># Configure other devices by using the same method for configuring <span class="keyword">Device</span>A.</p>
</p></li><li><span>Configure clock sources.</span><p><p># Configure <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>clock bits-type bits0 2mbps</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> clock source bits0 synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> clock source bits0 priority 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> clock priority 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>]<strong> commit</strong></pre>
<p># Configure <span class="keyword">Device</span>B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B]<strong> interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>]<strong> clock priority 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B]<strong> interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>]<strong> clock priority 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>]<strong> commit</strong></pre>
<p># Configure <span class="keyword">Device</span>D by using the same method for configuring <span class="keyword">Device</span>B.</p>
<p># Configure <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>clock bits-type bits0 2mbps</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C]<strong> clock source bits0 synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C]<strong> clock source bits0 priority 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C]<strong> interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C]<strong> interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>]<strong> clock priority 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>]<strong> commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>Run the <a href="cmdqueryname=display+clock+source"><b><span class="cmdname">display clock source</span></b></a> command on <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D to check the clock synchronization configurations and clock source information.</p>
<p># Verify the configuration on <span class="keyword">Device</span>A.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display clock source</strong>
System trace source State:    lock mode
                              into pull-in range
 Current system trace source: bits0
 Current 2M-1 trace source:   system PLL
 Frequency lock success:      yes

 Master board
 Source        Pri(sys/2m-1)   In-SSM     Out-SSM    State      Ref-Source
 --------------------------------------------------------------------------
 bits0     10/---          prc        --        normal     yes
 GE<span>0/1/0</span>         20/---          dnu        prc       normal     yes
 GE<span>0/2/0</span>         ---/---         prc        prc       normal     yes
 </pre>
<p># Verify the configuration on <span class="keyword">Device</span>B.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display clock source</strong>
System trace source State:    lock mode
                              into pull-in range
 Current system trace source: GigabitEthernet<span>0/1/0</span>
 Current 2M-1 trace source:   system PLL
 Frequency lock success:      yes

 Master board
 Source        Pri(sys/2m-1)   In-SSM     Out-SSM    State      Ref-Source
 --------------------------------------------------------------------------
 GE<span>0/1/0</span>          10/---         prc        dnu       normal     yes
 GE<span>0/2/0</span>          20/---         dnu        prc       normal     yes
 </pre>
<p># Verify the configuration on <span class="keyword">Device</span>C.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>C&gt; <strong>display clock source</strong>
System trace source State:    lock mode
                              into pull-in range
 Current system trace source: GigabitEthernet<span>0/2/0</span>
 Current 2M-1 trace source:   system PLL
 Frequency lock success:      yes

 Master board
 Source        Pri(sys/2m-1)   In-SSM     Out-SSM    State      Ref-Source
 --------------------------------------------------------------------------
 bits0     10/---         ssub        --        normal     yes
 GE<span>0/1/0</span>         ---/---        dnu         prc       normal     yes
 GE<span>0/2/0</span>         30/---         prc         dnu       normal     yes
 </pre>
<p># Verify the configuration on <span class="keyword">Device</span>D.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display clock source</strong>
System trace source State:    lock mode
                              into pull-in range
 Current system trace source: GigabitEthernet<span>0/1/0</span>
 Current 2M-1 trace source:   system PLL
 Frequency lock success:      yes

 Master board
 Source        Pri(sys/2m-1)   In-SSM     Out-SSM    State      Ref-Source
 --------------------------------------------------------------------------
 GE<span>0/1/0</span>          10/---         prc        dnu       normal     yes
 GE<span>0/2/0</span>          20/---         prc        prc       normal      yes</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001825840949__1.3.5"></a><a name="1.3.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">clock ssm-control on</pre>
<pre class="screen">clock bits-type bits0 2mbps </pre>
<pre class="screen">clock source bits0 synchronization enable </pre>
<pre class="screen">clock source bits0 priority 10 </pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> clock synchronization enable</pre>
<pre class="screen"> clock priority 20</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> clock synchronization enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return </pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">clock ssm-control on</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> clock synchronization enable</pre>
<pre class="screen"> clock priority 10</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> clock synchronization enable</pre>
<pre class="screen"> clock priority 20</pre>
<pre class="screen">#</pre>
<pre class="screen">return </pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">clock ssm-control on</pre>
<pre class="screen">clock bits-type bits0 2mbps </pre>
<pre class="screen">clock source bits0 synchronization enable </pre>
<pre class="screen">clock source bits0 priority 10 </pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> clock synchronization enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> clock synchronization enable</pre>
<pre class="screen"> clock priority 30</pre>
<pre class="screen">#</pre>
<pre class="screen">return </pre>
</li><li><p><span class="keyword">Device</span>D configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>D</pre>
<pre class="screen">#</pre>
<pre class="screen">clock ssm-control on</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> clock synchronization enable</pre>
<pre class="screen"> clock priority 10</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> clock synchronization enable</pre>
<pre class="screen"> clock priority 20</pre>
<pre class="screen">#</pre>
<pre class="screen">return </pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5014.html">Configuration Examples for Clock Synchronization
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_clock_cfg_5016_a.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>