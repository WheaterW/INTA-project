
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Atom GPS Timing">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_gps-sfp_cfg_9016.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,l00587852">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Atom GPS Timing">
<meta name="featuretype" content="System Management">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Atom GPS Timing">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="Atom GPS Timing">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="w00845984">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001778921510">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Atom GPS Timing</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001778921510"></a><a name="EN-US_TASK_0000001778921510"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Atom GPS Timing</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0000001778921510__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the IP RAN shown in <a href="#EN-US_TASK_0000001778921510__fig_dc_ne_gps-sfp_cfg_901701">Figure 1</a>, clock synchronization and time synchronization need to be performed between gNodeBs. In this case, you can deploy the Atom GPS timing solution as follows: Insert the Atom GPS module into the access aggregation node ASG. The Atom GPS module functions as a lightweight BITS to provide GPS access for the transport network. The Atom GPS module can receive clock and time signals from the GPS. The clock and time signals are converted into SyncE and 1588v2 signals, respectively, and then output to the ASG. The ASG transmits the clock/time signals to downstream devices which then transmit the signals to gNodeBs, achieving network-wide clock and time synchronization.</p>
<div class="fignone" id="EN-US_TASK_0000001778921510__fig_dc_ne_gps-sfp_cfg_901701"><a name="EN-US_TASK_0000001778921510__fig_dc_ne_gps-sfp_cfg_901701"></a><a name="fig_dc_ne_gps-sfp_cfg_901701"></a><span class="figcap"><b>Figure 1 </b>Atom GPS timing</span><br><span><img class="vsd" src="figure/en-us_image_0000001779081250.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001778921510__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This section describes Atom GPS timing configuration only on ASGs. For details about how to configure SyncE to implement clock synchronization for downstream devices of ASGs, see <a href="dc_ne_clock_cfg_0001.html">Physical-Layer Clock Synchronization Configuration</a>. For details about how to configure 1588v2 to implement time synchronization for downstream devices of ASGs, see <a href="dc_ne_1588v2_cfg_5000.html">1588v2 Configuration</a>.</p>
</div></div>
<p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure SyncE.</p>
</li><li><p>Configure time synchronization.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001778921510__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Information about the optical interface to which the Atom GPS module is inserted</p>
</li><li><p>Priority of the clock source</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001778921510__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure SyncE on ASG1 and ASG2.</span><p><p>ASG1 configuration is similar to ASG2 configuration. ASG1 configuration is used as an example.</p>
<ol type="a"><li><div class="p">Configure SyncE on the Atom GPS module.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The SyncE function has been enabled on the Atom GPS module by default, with no need for manual configuration.</p>
</div></div>
</div>
</li><li><p>Configure SyncE on ASG1 where the Atom GPS module resides.</p>
<div class="p"># Configure clock source selection based on SSM levels.<pre class="screen">&lt;ASG1&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1]<strong> clock ssm-control on</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1]<strong> commit</strong></pre>
</div>
<div class="p"># Configure the SyncE function for the Atom GPS module and set the priority of the clock source.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1]<strong> interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1-GigabitEthernet<span>0/1/0</span>]<strong> clock synchronization enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-GigabitEthernet<span>0/1/0</span>]<strong> clock priority 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-GigabitEthernet<span>0/1/0</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1-GigabitEthernet<span>0/1/0</span>]<strong> quit</strong></pre>
</div>
</li></ol>
</p></li><li><span>Configure time synchronization on ASG1 and ASG2.</span><p><p>ASG1 configuration is similar to ASG2 configuration. ASG1 configuration is used as an example.</p>
<ol type="a"><li><p>Configure time synchronization on ASG1 where the Atom GPS module resides.</p>
<div class="p"># Configure 1588v2 globally.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1] <strong>ptp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>ptp device-type bc</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>commit</strong></pre>
</div>
<div class="p"># Configure 1588v2 on the involved interface.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-GigabitEthernet<span>0/1/0</span>] <strong>ptp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
</div>
</li></ol>
</p></li><li><span>Verify the configuration.</span><p><p>Run the <a href="cmdqueryname=display+clock+source"><b><span class="cmdname">display clock source</span></b></a> command to check the status information about all clock sources or the clock source being tracked.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display clock source</strong>
 System trace source State:   lock mode
                              into pull-in range
 Current system trace source: GE<span>0/1/0</span>
 Current 2M-1 trace source:   system PLL
 Frequency lock success:      yes

 Master board
 Source        Pri(sys/2m-1)   In-SSM     Out-SSM    State      Ref
 --------------------------------------------------------------------------
 GE<span>0/1/0</span>         10 /---        prc        dnu       normal     yes
 GE<span>0/2/0</span>         ---/---        dnu        prc       initial    no
 </pre>
<p>Run the <strong>display ptp all</strong> command to check whether BITS information has been successfully input.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display ptp all</strong>
  Device config info
  ------------------------------------------------------------------------------
  PTP state         :enabled              Domain  value      :0
  Slave only        :no                   Device type        :BC
  Set port state    :no                   Local clock ID     :0aa1c6fffe699700
  Acl               :no                   Virtual clock ID   :no
  Acr               :no                   Time lock success  :yes
  Asymmetry measure :disable              Passive measure    :enabled
  Send GM WTR       :no

  BMC run info
  ------------------------------------------------------------------------------
  Grand clock ID    :0a05d7fffe341500               
  Receive number    :GigabitEthernet<span>0/1/0</span>           
  Parent clock ID   :0a05d7fffe341500               
  Parent portnumber :1                          
  Priority1         :128                 Priority2           :128               
  Step removed      :0                   Clock accuracy      :0x21              
  Clock class       :6                   Time Source         :0x20              
  UTC Offset        :37                  UTC Offset Valid    :True             
  Timescale         :PTP                 Time traceable      :True          
  Leap              :None                Frequency traceable :True          
  Offset scaled     :0xffff              Sync uncertain      :False           

  Port info
  Name                        State        Delay-mech Ann-timeout Type   Domain 
  ------------------------------------------------------------------------------
  GigabitEthernet<span>0/1/0</span>        slave        delay      3           BC     0

  Time Performance Statistics(ns): Slot <em>X</em>  Card <em>X</em>  Port <em>X</em> 
  ------------------------------------------------------------------------------
  Realtime(T2-T1)   :8                Pathdelay     :0 
  Max(T2-T1)        :8
  Min(T2-T1)        :2

  Clock source info
  Clock     Pri1 Pri2 Accuracy Class TimeSrc  Signal Switch Direction In-Status
  ------------------------------------------------------------------------------
  local     128  128  0x31     187   0xa0     -      -      -         -
  bits1/11  128  128  0x20     6     0x20     1pps   off    in/-      abnormal
  bits1/12  128  128  0x20     6     0x20     1pps   off    in/-      abnormal</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001778921510__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>ASG1 configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname ASG1</pre>
<pre class="screen">#
clock ssm-control on
#
ptp enable
ptp device-type bc
#
interface gigabitEthernet <span>0/1/0</span> 
 clock synchronization enable 
 clock priority 10
 ptp enable
#</pre>
<pre class="screen">return</pre>
</li><li><p>ASG2 configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname ASG2</pre>
<pre class="screen">#
clock ssm-control on
#
ptp enable
ptp device-type bc
#
interface gigabitEthernet <span>0/1/0</span> 
 clock synchronization enable 
 clock priority 10
 ptp enable
#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_gps-sfp_cfg_9016.html">Configuration Examples for Atom GPS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
</div>
</div>
</body>
</html>