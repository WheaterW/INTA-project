
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring a 1588v2 Packet Encapsulation Mode">
<meta name="abstract" content="1588v2 packets can be encapsulated into Layer 2 or Layer 3 packets. You can configure an encapsulation mode for 1588v2 packets based on the actual network conditions, as well as the source and destination addresses and transmission priority for the 1588v2 packets.">
<meta name="description" content="1588v2 packets can be encapsulated into Layer 2 or Layer 3 packets. You can configure an encapsulation mode for 1588v2 packets based on the actual network conditions, as well as the source and destination addresses and transmission priority for the 1588v2 packets.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5009.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="1588v2">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="1588v2">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="featurename" content="1588v2">
<meta name="featuretype" content="Clock and Time Synchronization">
<meta name="featuretype" content="System Management">
<meta name="OWNER" content="w00845984,l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00845984">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001778921806">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>(Optional) Configuring a 1588v2 Packet Encapsulation Mode</title>
</head>
<body><a name="EN-US_TASK_0000001778921806"></a><a name="EN-US_TASK_0000001778921806"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring a 1588v2 Packet Encapsulation Mode</h1>
<div class="taskbody"><p>1588v2 packets can be encapsulated into Layer 2 or Layer 3 packets. You can configure an encapsulation mode for 1588v2 packets based on the actual network conditions, as well as the source and destination addresses and transmission priority for the 1588v2 packets.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001778921806__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><div class="p">Before configuring a 1588v2 packet encapsulation mode, check the link type used for 1588v2 packet transmission.<ul><li>For the 1588v2 packets transmitted over a Layer 2 link, configure the MAC encapsulation mode.</li><li>For the 1588v2 packets transmitted over a Layer 3 link, configure the UDP encapsulation mode.</li></ul>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001778921806__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Perform the following steps on each 1588v2 device:</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001778921806__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure the MAC encapsulation mode.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the interface view.</span></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ptp+mac-egress"><b><span class="cmdname">ptp mac-egress</span></b></a> { <strong><span>destination-mac</span></strong> <i><span class="varname">destination-mac</span></i> | <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> [<strong><span> priority</span></strong> <i><span class="varname">priority-value</span></i> ] }The MAC encapsulation mode is configured for 1588v2 packets to be sent from the interface, and a destination MAC address is configured.</span><p><div class="p"><ul><li><p>For unicast MAC encapsulation</p>
<p>Run this command to specify the destination MAC address for the 1588v2 packets to be sent from the interface.</p>
<p>The configured destination MAC address must be the same as the MAC address of the peer.</p>
</li><li><p>For multicast MAC encapsulation</p>
<div class="p">A default multicast destination MAC address is adopted, which means that no extra configuration is required. Default multicast destination MAC addresses for different delay measurement mechanisms For details, see the following table.
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Default multicast destination MAC addresses for different delay measurement mechanisms</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="51.73%" id="mcps1.4.3.1.2.3.2.1.1.2.2.1.2.3.1.1" liSelected="liSelected"><p>Delay Measurement Mechanism</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="48.27%" id="mcps1.4.3.1.2.3.2.1.1.2.2.1.2.3.1.2" liSelected="liSelected"><p>MAC Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="51.73%" headers="mcps1.4.3.1.2.3.2.1.1.2.2.1.2.3.1.1 "><p>Non-peer delay measurement mechanism</p>
</td>
<td class="cellrowborder" valign="top" width="48.27%" headers="mcps1.4.3.1.2.3.2.1.1.2.2.1.2.3.1.2 "><p>01-1B-19-00-00-00</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="51.73%" headers="mcps1.4.3.1.2.3.2.1.1.2.2.1.2.3.1.1 "><p>Peer delay measurement mechanism</p>
</td>
<td class="cellrowborder" valign="top" width="48.27%" headers="mcps1.4.3.1.2.3.2.1.1.2.2.1.2.3.1.2 "><p>01-80-C2-00-00-0E</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</li></ul>
</div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If no unicast destination MAC address is specified, the interface uses the multicast destination MAC address by default.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ptp+mac-egress"><b><span class="cmdname">ptp mac-egress</span></b></a> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> [ <strong><span>priority</span></strong> <i><span class="varname">priority-value</span></i> ] command to set a VLAN ID and 802.1p value for sending MAC-encapsulated 1588v2 packets.</span><p><p>1588v2 services require a greater <i><span class="varname">priority-value</span></i> value than other services. A high transmission priority minimizes the delay or congestion impact on clock signal recovery. Using the default maximum priority value is recommended.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>Configure the UDP encapsulation mode.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the interface view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ptp+udp-egress"><b><span class="cmdname">ptp udp-egress</span></b></a> <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> [ <strong><span>destination-ip</span></strong> <i><span class="varname">destination-ip</span></i> ] command to configure the interface to use UDP to encapsulate 1588v2 packets with the specified source and destination IP addresses.</span><p><div class="p"><ul><li><p>For UDP unicast encapsulation:</p>
<p>Specify a destination IP address for unicast encapsulation.</p>
</li><li><p>For UDP multicast encapsulation:</p>
<div class="p">Multicast 1588v2 packets have a default multicast destination IP address. Therefore, the <strong><span>destination-ip</span></strong> <i><span class="varname">destination-ip</span></i> parameter does not need to be specified. The multicast destination IP address used by UDP encapsulation varies according to the delay measurement mechanism. For details, see the following table.
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Multicast destination IP addresses used for UDP encapsulation in different delay measurement mechanisms</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.3.2.2.3.2.1.1.2.2.3.2.3.1.1" liSelected="liSelected"><p>Delay Measurement Mechanism</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50%" id="mcps1.4.3.2.2.3.2.1.1.2.2.3.2.3.1.2" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.3.2.2.3.2.1.1.2.2.3.2.3.1.1 "><p>Non-peer delay measurement mechanism</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.3.2.2.3.2.1.1.2.2.3.2.3.1.2 "><p>224.0.1.129</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.3.2.2.3.2.1.1.2.2.3.2.3.1.1 "><p>Peer delay measurement mechanism</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.4.3.2.2.3.2.1.1.2.2.3.2.3.1.2 "><p>224.0.0.107</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</li></ul>
</div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the <strong><span>destination-ip</span></strong> <i><span class="varname">destination-ip</span></i> parameter is not specified, the multicast IP address is used by default.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ptp+udp-egress"><b><span class="cmdname">ptp udp-egress</span></b></a> <strong><span>destination-mac</span></strong> <i><span class="varname">destination-mac</span></i> command to specify the next-hop MAC address of 1588v2 packets.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ptp+udp-egress"><b><span class="cmdname">ptp udp-egress</span></b></a> <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> [ <strong><span>dscp</span></strong> <i><span class="varname">dscp</span></i> ] command to set a DSCP value for the UDP 1588v2 packets to be sent from the interface.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ptp+udp-egress"><b><span class="cmdname">ptp udp-egress</span></b></a> <strong><span>source-ip</span></strong> <i><span class="varname">source-ip</span></i> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> [ <strong><span>priority</span></strong> <i><span class="varname">priority-value</span></i> ] command to set a VLAN ID and a priority value for UDP 1588v2 packets to be sent or received by the interface.</span><p><p>1588v2 services require a greater <i><span class="varname">dscp</span></i> value and a greater <i><span class="varname">priority</span></i> value than other services. A high transmission priority minimizes the delay or congestion impact on clock signal recovery. Using the default maximum priority value is recommended.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5004.html">Configuring Dynamic 1588v2 Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5009.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_1588v2_cfg_5012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>