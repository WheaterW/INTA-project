
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring VLAN Mapping for Inter-VLAN Communication">
<meta name="abstract" content="The configuration of VLAN mapping is simple and independent of Layer 3 routing.">
<meta name="description" content="The configuration of VLAN mapping is simple and independent of Layer 3 routing.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_0017.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_0021.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363110">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring VLAN Mapping for Inter-VLAN Communication</title>
</head>
<body><a name="EN-US_TASK_0172363110"></a><a name="EN-US_TASK_0172363110"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring VLAN Mapping for Inter-VLAN Communication</h1>
<div class="taskbody"><p>The configuration of VLAN mapping is simple and independent of Layer 3 routing. </p>
<div class="context"><a name="EN-US_TASK_0172363110__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">VLAN mapping is also called VLAN translation. With VLAN mapping, a device maps the VLAN ID of a frame to another VLAN ID after receiving the frame and before sending the frame. On the network shown in <a href="#EN-US_TASK_0172363110__fig_dc_vrp_vlan_cfg_005901">Figure 1</a>, ports connecting CE 1 to users are added to VLAN 2 and ports connecting CE 2 to users are added to VLAN 3. To allow users in VLAN 2 and VLAN 3 to communicate with each other, configure VLAN mapping on the uplink interface interface1 of CE1.<ul><li><p>Before sending a frame to VLAN 3, interface1 on CE 1 replaces the VLAN ID 2 in the frame with the VLAN ID 3.</p>
</li><li><p>After receiving a frame from VLAN 3, interface1 on CE 1 replaces the VLAN ID 3 in the frame with the VLAN ID 2.</p>
</li></ul>
</div>
<div class="fignone" id="EN-US_TASK_0172363110__fig_dc_vrp_vlan_cfg_005901"><a name="EN-US_TASK_0172363110__fig_dc_vrp_vlan_cfg_005901"></a><a name="fig_dc_vrp_vlan_cfg_005901"></a><span class="figcap"><b>Figure 1 </b>Configuring VLAN mapping for inter-VLAN communication</span><br><span><img class="vsd" src="figure/en-us_image_0000001623111040.png" width="NaN" height="NaN"></span></div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before configuring VLAN mapping to allow PCs in two VLANs to communicate, IP addresses of the PCs must belong to the same network segment. Otherwise, communication between these devices must be implemented using Layer 3 routes, making VLAN mapping invalid.</p>
</div></div>
<div class="p">Currently, the <span class="keyword">NE40E</span> supports the following mapping modes:<ul><li><p>1 to 1 VLAN mapping </p>
<p>After receiving a single-tagged frame, the device replaces the tag with a specified tag.</p>
<p>1 to 1 VLAN mapping is applicable to the networking environment shown in <a href="#EN-US_TASK_0172363110__fig_dc_vrp_vlan_cfg_005902">Figure 2</a>. </p>
<div class="fignone" id="EN-US_TASK_0172363110__fig_dc_vrp_vlan_cfg_005902"><a name="EN-US_TASK_0172363110__fig_dc_vrp_vlan_cfg_005902"></a><a name="fig_dc_vrp_vlan_cfg_005902"></a><span class="figcap"><b>Figure 2 </b>1 to 1 VLAN mapping</span><br><span><img class="vsd" src="figure/en-us_image_0000001591309738.png" width="NaN" height="NaN"></span></div>
<p>On the network shown in <a href="#EN-US_TASK_0172363110__fig_dc_vrp_vlan_cfg_005902">Figure 2</a>, different types of services (Internet, IPTV, and VoIP) of each household are transmitted in separate VLANs. To differentiate between households, you need to configure 1 to 1 VLAN mapping on each corridor switch to transmit the same type of services for different households in separate VLANs. In this case, the aggregation switch must provide a large number of VLAN IDs to separate services of different households. As the number of available VLAN IDs on the aggregation switch is limited, you need to implement VLAN aggregation to transmit the same type of services for different households in one VLAN.</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172363110__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Add the ports connected to users to the specified VLANs.</span></li><li><span>Configure the Layer 2 port type.</span><p><ol type="a"><li><p><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span> command to enter the view of an Ethernet port to be configured with VLAN mapping.</p>
</li><li><p>Run the <a href="cmdqueryname=port+link-type"><b><span class="cmdname">port link-type</span></b></a> <strong><span>trunk</span></strong> command to configure the Layer 2 Ethernet port as a trunk port.</p>
</li></ol>
</p></li><li><span>Run <span><a href="cmdqueryname=port+vlan-mapping"><b><span class="cmdname">port vlan-mapping</span></b></a> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">vlan-id2</span></i> ] <strong><span>map-vlan</span></strong> <i><span class="varname">vlan-id3</span></i></span></span><p><p>VLAN mapping is configured to change the outer VLAN tag to <i><span class="varname">vlan-id3</span></i>.</p>
</p></li><li><span>Run the <a href="cmdqueryname=port+trunk+allow-pass+vlan"><b><span class="cmdname">port trunk allow-pass vlan</span></b></a> { { <i><span class="varname">vlan-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">vlan-id2</span></i> ] } &amp;&lt;1-10&gt; | <strong><span>all</span></strong> } command to specify the VLAN IDs permitted by the port configured with VLAN mapping.</span><p><p>The VLAN ID specified in this command must be private VLAN IDs and cannot be public VLAN IDs.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_0017.html">Configuring Inter-VLAN Communication
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_0020.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_0021.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>