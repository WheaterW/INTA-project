
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Port-based VLAN Assignment">
<meta name="abstract" content="The networking in this example is simple. After VLANs are assigned, users in different VLANs cannot directly communicate with each other at Layer 2, but users in the same VLAN can do so.">
<meta name="description" content="The networking in this example is simple. After VLANs are assigned, users in different VLANs cannot directly communicate with each other at Layer 2, but users in the same VLAN can do so.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_0033.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_0035.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="VLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363164">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Port-based VLAN Assignment</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172363164"></a><a name="EN-US_TASK_0172363164"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Port-based VLAN Assignment</h1>
<div class="taskbody"><p>The networking in this example is simple. After VLANs are assigned, users in different VLANs cannot directly communicate with each other at Layer 2, but users in the same VLAN can do so.</p>
<div class="context"><a name="EN-US_TASK_0172363164__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172363164__fig_dc_vrp_vlan_cfg_003401">Figure 1</a>, a department has multiple project teams. To improve service security, it is required that employees in the same project team can communicate with each other but employees in different project teams cannot communicate with each other.</p>
<div class="fignone" id="EN-US_TASK_0172363164__fig_dc_vrp_vlan_cfg_003401"><a name="EN-US_TASK_0172363164__fig_dc_vrp_vlan_cfg_003401"></a><a name="fig_dc_vrp_vlan_cfg_003401"></a><span class="figcap"><b>Figure 1 </b>Networking for port-based VLAN assignment</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interfaces 1 through 4 represent GE<span>0/1/1</span>, GE<span>0/1/2</span>, GE<span>0/1/3</span>, and GE<span>0/1/4</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001367586377.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172363164__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Create VLANs and determine mappings between employees and VLANs.</li><li>Configure port types to determine the device connected to each port.</li><li>Add the port connected to group 1 to VLAN 2 and the port connected to group 2 to VLAN 3 to prevent employees in group 1 from communicating with employees in group 2.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172363164__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li>Number of each port connecting CE to a PC</li><li>ID of each VLAN</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172363164__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create VLANs.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE] <strong>vlan batch 2 3</strong></pre>
</p></li><li><span>Configure port types.</span><p><pre class="screen">[<span class="keyword">*</span>CE] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> port link-type access</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/2</span>]<strong> portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/2</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/2</span>]<strong> port link-type access</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/2</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>interface GigabitEthernet <span>0/1/3</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/3</span>]<strong> portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/3</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/3</span>]<strong> port link-type access</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/3</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>interface GigabitEthernet <span>0/1/4</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/4</span>]<strong> portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/4</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/4</span>]<strong> port link-type access</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-GigabitEthernet<span>0/1/4</span>]<strong> quit</strong></pre>
</p></li><li><span>Add ports to VLANs.</span><p><p># Add GE <span>0/1/1</span> and GE <span>0/1/2</span> to VLAN 2.</p>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-vlan2] <strong>port gigabitethernet <span>0/1/1</span> to <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-vlan2] <strong>quit</strong></pre>
<p># Add GE <span>0/1/3</span> and GE <span>0/1/4</span> to VLAN 3.</p>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>vlan 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-vlan3]<strong> port gigabitethernet <span>0/1/3</span> to <span>0/1/4</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE-vlan3]<strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>After the configurations are complete, run the <a href="cmdqueryname=display+vlan"><b><span class="cmdname">display vlan</span></b></a> command to view the VLAN status.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE] <strong>display vlan</strong></pre>
<pre class="screen">The total number of vlans is : 2                                               
VID  Type     Status  Property  MAC-LRN STAT    BC  MC  UC  Description         
--------------------------------------------------------------------------------
   2 common   enable  default   enable  disable FWD FWD FWD VLAN 0002
   3 common   enable  default   enable  disable FWD FWD FWD VLAN 0003</pre>
<p>Ping a PC in group 2 from a PC in group 1. The ping fails. PCs in the same group can ping each other successfully.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172363164__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><pre class="screen">#</pre>
<pre class="screen">sysname CE</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 2 3</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> port link-type access</pre>
<pre class="screen"> port default vlan 2</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/2</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> port link-type access</pre>
<pre class="screen"> port default vlan 2</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/3</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> port link-type access</pre>
<pre class="screen"> port default vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/4</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> port link-type access</pre>
<pre class="screen"> port default vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_0033.html">Configuration Examples for VLANs
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vlan_cfg_0035.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>