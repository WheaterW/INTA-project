
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Ethernet Sub-interfaces to Support Communication Between VLANs">
<meta name="abstract" content="You can configure Ethernet sub-interfaces to enable users in different VLANs and network segments to communicate with each other.">
<meta name="description" content="You can configure Ethernet sub-interfaces to enable users in different VLANs and network segments to communicate with each other.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethernet_cfg_0014.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethernet_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethernet_cfg_0017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="Ethernet Interface">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x60031980">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362797">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Ethernet Sub-interfaces to Support Communication Between VLANs</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172362797"></a><a name="EN-US_TASK_0172362797"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Ethernet Sub-interfaces to Support Communication Between VLANs</h1>
<div class="taskbody"><p>You can configure Ethernet sub-interfaces to enable users in different VLANs and network segments to communicate with each other.</p>
<div class="context"><a name="EN-US_TASK_0172362797__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Users in different communities and network segments require the same services, such as Internet, IPTV, and VoIP services. The network administrator in each community configures a VLAN for each service to simplify management. After the configuration, users in different communities belong to different VLANs, but the users need to communicate with each other for the same services.</p>
<p>On the network shown in <a href="#EN-US_TASK_0172362797__fig_dc_vrp_ethernet_cfg_001601">Figure 1</a>, users in communities 1 to 4 belong to different VLANs and network segments but all require the Internet service. These users must be able to communicate with each other.</p>
<div class="fignone" id="EN-US_TASK_0172362797__fig_dc_vrp_ethernet_cfg_001601"><a name="EN-US_TASK_0172362797__fig_dc_vrp_ethernet_cfg_001601"></a><a name="fig_dc_vrp_ethernet_cfg_001601"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring Ethernet sub-interfaces for inter-VLAN communication</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, subinterface1.1, subinterface1.2, subinterface2.1, subinterface2.2 represent GE<span>0/1/1</span>.1, GE<span>0/1/1</span>.2, GE<span>0/2/1</span>.1, and GE<span>0/2/1</span>.2, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_ethernet_cfg_001601.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362797__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>IP addresses of hosts in a VLAN must be in the same network segment as the IP address of the PE sub-interface associated with the VLAN.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362797__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Create sub-interfaces on the PE and associate the sub-interfaces with VLANs so that the sub-interfaces can identify packets carrying VLAN tags.</p>
</li><li><p>Assign an IP address to each sub-interface for communication at the network layer.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362797__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>VLAN IDs associated with the PE sub-interfaces</p>
</li><li><p>VLAN IDs associated with the PE sub-interfaces</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362797__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create sub-interfaces on the PE and associate the sub-interfaces with VLANs.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname PE</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE]<strong> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE-GigabitEthernet<span>0/1/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE]<strong> interface gigabitethernet <span>0/1/1</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.1]<strong> vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE] <strong>interface gigabitethernet <span>0/1/1</span>.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.2] <strong>vlan-type dot1q 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE]<strong> interface gigabitethernet <span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE]<strong> interface gigabitethernet <span>0/2/1</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>.1] <strong>vlan-type dot1q 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>.1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE] <strong>interface gigabitethernet <span>0/2/1</span>.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>.2] <strong>vlan-type dot1q 40</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>.2]<strong> quit</strong></pre>
</p></li><li><span>Configure IP addresses.</span><p><pre class="screen">[<span class="keyword">*</span>PE]<strong> interface gigabitethernet <span>0/1/1</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.1]<strong> ip address 10.110.6.3 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE] <strong>interface gigabitethernet <span>0/1/1</span>.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.2] <strong>ip address 10.110.5.3 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/1/1</span>.2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE]<strong> interface gigabitethernet <span>0/2/1</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>.1]<strong> ip address 10.110.4.3 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>.1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE] <strong>interface gigabitethernet <span>0/2/1</span>.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>.2] <strong>ip address 10.110.3.3 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE-GigabitEthernet<span>0/2/1</span>.2]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE]<strong> commit</strong></pre>
</p></li><li><span>For detailed configurations on the switch, see the related Configuration Guide.</span></li><li><span>Verify the configuration.</span><p><p>On PCs in VLAN 10, configure the IP address 10.110.6.3/24 of GE <span>0/1/1</span>.1 as the default gateway address.</p>
<p>On PCs in VLAN 20, configure the IP address 10.110.5.3/24 of GE <span>0/1/1</span>.2 as the default gateway address.</p>
<p>On PCs in VLAN 30, configure the IP address 10.110.4.3/24 of GE <span>0/2/1</span>.1 as the default gateway address.</p>
<p>On PCs in VLAN 40, configure the IP address 10.110.3.3/24 of GE <span>0/2/1</span>.2 as the default gateway address.</p>
<p>After the configurations are complete, PCs in VLANs 10, 20, 30, and 40 can ping each other.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172362797__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">PE Configuration File</h4><pre class="screen">#
sysname PE
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/1</span>.1
 vlan-type dot1q 10
 ip address 10.110.6.3 255.255.255.0
#
interface GigabitEthernet<span>0/1/1</span>.2
 vlan-type dot1q 20
 ip address 10.110.5.3 255.255.255.0
#
interface GigabitEthernet<span>0/2/1</span>
 undo shutdown
#
interface GigabitEthernet<span>0/2/1</span>.1
 vlan-type dot1q 30
 ip address 10.110.4.3 255.255.255.0
#
interface GigabitEthernet<span>0/2/1</span>.2
 vlan-type dot1q 40
 ip address 10.110.3.3 255.255.255.0
#
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethernet_cfg_0014.html">Configuration Examples for Ethernet Interfaces or Sub-interfaces
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethernet_cfg_0015.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ethernet_cfg_0017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>