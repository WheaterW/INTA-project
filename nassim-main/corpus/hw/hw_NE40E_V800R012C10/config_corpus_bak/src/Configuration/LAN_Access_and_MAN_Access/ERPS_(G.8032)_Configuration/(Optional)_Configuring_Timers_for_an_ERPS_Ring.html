
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Timers for an ERPS Ring">
<meta name="abstract" content="To prevent the blocked port from alternating between Up and Down in case a faulty device or link on an ERPS ring recovers, enable timers for the ERPS ring to reduce the traffic interruption time.">
<meta name="description" content="To prevent the blocked port from alternating between Up and Down in case a faulty device or link on an ERPS ring recovers, enable timers for the ERPS ring to reduce the traffic interruption time.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_erps_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_erps_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_erps_cfg_0004.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="ERPS(G.8032)">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ERPS(G.8032)">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="ERPS">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363464">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring Timers for an ERPS Ring</title>
</head>
<body><a name="EN-US_TASK_0172363464"></a><a name="EN-US_TASK_0172363464"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring Timers for an ERPS Ring</h1>
<div class="taskbody"><p>To prevent the blocked port from alternating between Up and Down in case a faulty <span class="keyword">device</span> or link on an ERPS ring recovers, enable timers for the ERPS ring to reduce the traffic interruption time.</p>
<div class="context"><a name="EN-US_TASK_0172363464__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">ERPS defines the following timers:<ul><li id="EN-US_TASK_0172363464__en-us_concept_0172352646_li1539348001214252"><p id="EN-US_TASK_0172363464__en-us_concept_0172352646_p1086357398214252"><a name="EN-US_TASK_0172363464__en-us_concept_0172352646_li1539348001214252"></a><a name="en-us_concept_0172352646_li1539348001214252"></a>Guard timer</p>
<p id="EN-US_TASK_0172363464__en-us_concept_0172352646_p570984399214252">After a faulty link or node recovers or a clear operation is executed, the nodes on the two ends of the link or the recovered node sends R-APS No Request (NR) messages to inform the other nodes of the link or node recovery and starts a guard timer. Before the timer expires, each involved node does not process any R-APS PDUs to avoid receiving out-of-date R-APS (SF) messages. After the timer expires, if the involved node still receives an R-APS (SF) message, the local port enters the Forwarding state.</p>
</li><li id="EN-US_TASK_0172363464__en-us_concept_0172352646_li882774015214252"><p id="EN-US_TASK_0172363464__en-us_concept_0172352646_p1965836629214252"><a name="EN-US_TASK_0172363464__en-us_concept_0172352646_li882774015214252"></a><a name="en-us_concept_0172352646_li882774015214252"></a>WTR Timer</p>
<p id="EN-US_TASK_0172363464__en-us_concept_0172352646_p63303727214252">If the RPL owner port is unblocked due to a link or node failure, the involved port may not go Up immediately after the link or node recovers. To prevent the RPL owner port from alternating between Up and Down, the node where the RPL owner port resides starts a WTR timer after receiving an R-APS (NR) message. If the node receives an R-APS Signal Fail (SF) message before the timer expires, it terminates the WTR timer (R-APS SF message: a message sent by a node to other nodes after the node in an ERPS ring detects that one of its ring ports becomes Down). If the node does not receive any R-APS (SF) message before the timer expires, it blocks the RPL owner port when the timer expires and sends an R-APS (NR, RB) message. After receiving this R-APS (NR, RB) message, the nodes set their recovered ports on the ring to the Forwarding state.</p>
</li><li id="EN-US_TASK_0172363464__en-us_concept_0172352646_li487826903214252"><p id="EN-US_TASK_0172363464__en-us_concept_0172352646_p1961678122214252"><a name="EN-US_TASK_0172363464__en-us_concept_0172352646_li487826903214252"></a><a name="en-us_concept_0172352646_li487826903214252"></a>Hold-off timer</p>
<p id="EN-US_TASK_0172363464__en-us_concept_0172352646_p465403131214252">Protection switching sequence requirements vary for Layer 2 networks running ERPS. For example, in a multi-layer service application, a certain period of time is required for a server to recover should it fail. (During this period, no protection switching is performed, and the client does not detect the failure.) A hold-off timer can be set to ensure that the server is given adequate time to recover. If a fault occurs, the fault is not immediately reported to ERPS. Instead, the hold-off timer starts. If the fault persists after the timer expires, the fault will be reported to ERPS.</p>
</li><li id="EN-US_TASK_0172363464__en-us_concept_0172352646_li1466549247214252"><p id="EN-US_TASK_0172363464__en-us_concept_0172352646_p1623377710214252"><a name="EN-US_TASK_0172363464__en-us_concept_0172352646_li1466549247214252"></a><a name="en-us_concept_0172352646_li1466549247214252"></a>WTB timer</p>
<p id="EN-US_TASK_0172363464__en-us_concept_0172352646_p632043879214252">The WTB timer starts after an FS or MS operation is performed. When multiple nodes on an ERPS ring are in the FS or MS state, the clear operation takes effect only after the WTB timer expires. This ensures that the RPL owner port will not be blocked immediately.</p>
<p id="EN-US_TASK_0172363464__en-us_concept_0172352646_p1041011206214252">The WTB timer value cannot be configured. Its value is the guard timer value plus 5.</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172363464__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=erps+ring"><b><span class="cmdname">erps ring</span></b></a> <i><span class="varname">ring-id</span></i></span></span><p><p>The ERPS ring view is displayed.</p>
</p></li><li><span>Run the following commands to configure one or more timers for the ERPS ring:</span><p><ul><li><p>To configure the WTR timer for an ERPS ring, run the <a href="cmdqueryname=wtr-timer"><b><span class="cmdname">wtr-timer</span></b></a> <i><span class="varname">time-value</span></i> command.</p>
</li><li><p>To configure the guard timer for an ERPS ring, run the <a href="cmdqueryname=guard-timer"><b><span class="cmdname">guard-timer</span></b></a> <i><span class="varname">time-value</span></i> command.</p>
</li><li><p>To configure the hold-off timer for an ERPS ring, run the <a href="cmdqueryname=holdoff-timer"><b><span class="cmdname">holdoff-timer</span></b></a> <i><span class="varname">time-value</span></i> command.</p>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_erps_cfg_0000.html">ERPS (G.8032) Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_erps_cfg_0003.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_erps_cfg_0004.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>