
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IPv6 VXLAN in Centralized Gateway Mode Using BGP EVPN">
<meta name="abstract" content="IPv6 VXLAN can be deployed in centralized gateway mode so that all inter-subnet traffic is forwarded through Layer 3 gateways, thereby implementing centralized traffic management.">
<meta name="description" content="IPv6 VXLAN can be deployed in centralized gateway mode so that all inter-subnet traffic is forwarded through Layer 3 gateways, thereby implementing centralized traffic management.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan_cfg_1082.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan_cfg_0017b.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan_cfg_1216.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan6_cfg_0002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan6_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan6_cfg_0004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan6_cfg_0014.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan6_cfg_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="h00847023">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="VXLAN">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0229407586">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring IPv6 VXLAN in Centralized Gateway Mode Using BGP EVPN</title>
</head>
<body><a name="EN-US_TASK_0229407586"></a><a name="EN-US_TASK_0229407586"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IPv6 VXLAN in Centralized Gateway Mode Using BGP EVPN</h1>
<div class="taskbody"><p>IPv6 VXLAN can be deployed in centralized gateway mode so that all inter-subnet traffic is forwarded through Layer 3 gateways, thereby implementing centralized traffic management.</p>
<div class="context"><a name="EN-US_TASK_0229407586__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>To allow intra- and inter-subnet communication between a tenant's VMs located in different geological locations on an IPv6 network, properly deploy Layer 2 and Layer 3 gateways on the network and establish IPv6 VXLAN tunnels.</p>
<div class="p">On the network shown in <a href="#EN-US_TASK_0229407586__fig_dc_vrp_vxlan_cfg_103901">Figure 1</a>, Server2 and Server3 belong to the same network segment and access the IPv6 VXLAN through Device1 and Device2, respectively. Server1 and Server2 belong to different network segments and both access the IPv6 VXLAN through Device1.<ul><li>To allow VM1 on Server2 and VM1 on Server3 to communicate, deploy Layer 2 gateways on Device1 and Device2 and establish an IPv6 VXLAN tunnel between Device1 and Device2. This ensures that the VMs on the same network segment can communicate.</li><li>To allow VM1 on Server1 and VM1 on Server3 to communicate, deploy a Layer 3 gateway on Device3 and establish one IPv6 VXLAN tunnel between Device1 and Device3 and another one between Device2 and Device3. This ensures that the VMs on different network segments can communicate.</li></ul>
</div>
<p>The VMs and Layer 3 VXLAN gateway can be allocated either IPv4 or IPv6 addresses. This means that either an IPv4 or IPv6 overlay network can be used with IPv6 VXLAN. <a href="#EN-US_TASK_0229407586__fig_dc_vrp_vxlan_cfg_103901">Figure 1</a> shows an IPv4 overlay network.</p>
<div class="fignone" id="EN-US_TASK_0229407586__fig_dc_vrp_vxlan_cfg_103901"><a name="EN-US_TASK_0229407586__fig_dc_vrp_vxlan_cfg_103901"></a><a name="fig_dc_vrp_vxlan_cfg_103901"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring IPv6 VXLAN in centralized gateway mode</span><br><span><img class="vsd" src="figure/en-us_image_0000002126361165.png" width="NaN" height="NaN"></span></div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Layer 3 gateways must be deployed on the IPv6 VXLAN if VMs must communicate with VMs on other network segments or with external networks. Layer 3 gateways do not need to be deployed for VMs communicating on the same network segment.</p>
</div></div>
<div class="p">The following table lists the difference in centralized gateway configuration between IPv4 and IPv6 overlay networks.
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.7.1.1.4.1.1" liSelected="liSelected"><p>Configuration Task</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.7.1.1.4.1.2" liSelected="liSelected"><p>IPv4 Overlay Network</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.7.1.1.4.1.3" liSelected="liSelected"><p>IPv6 Overlay Network</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.1.1.4.1.1 "><p>Configure a Layer 3 gateway on an IPv6 VXLAN.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.1.1.4.1.2 "><p>Configure an IPv4 address for the VBDIF interface of the Layer 3 gateway.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.7.1.1.4.1.3 "><p>Configure an IPv6 address for the VBDIF interface of the Layer 3 gateway.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0229407586__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><div class="p">Before configuring IPv6 VXLAN in centralized gateway mode using BGP EVPN, complete the following task:<ul><li>Configure an IPv6 routing protocol to achieve Layer 3 connectivity on the IPv6 network.</li></ul>
</div>
</div></div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan6_cfg_0002.html">Configuring a VXLAN Service Access Point</a>
</dt>
<dd>
Layer 2 sub-interfaces are used for service access on VXLANs. These Layer 2 sub-interfaces can have different encapsulation types configured to transmit various types of data packets. After a Layer 2 sub-interface is associated with a BD, which is used as a broadcast domain, the sub-interface can transmit data packets through this BD.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan6_cfg_0003.html">Configuring an IPv6 VXLAN Tunnel</a>
</dt>
<dd>
Using BGP EVPN to establish an IPv6 VXLAN tunnel between VTEPs involves a series of operations. These include establishing a BGP EVPN peer relationship, configuring an EVPN instance, and configuring ingress replication.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan6_cfg_0004.html">Configuring a Layer 3 IPv6 VXLAN Gateway</a>
</dt>
<dd>
To allow users on different network segments to communicate, deploy a Layer 3 gateway and specify the IP address of its VBDIF interface as the default gateway address of the users.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan6_cfg_0014.html">(Optional) Configuring a Limit on the Number of MAC Addresses Learned by an Interface</a>
</dt>
<dd>
MAC address learning limiting helps improve VXLAN network security.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan6_cfg_0005.html">Verifying the Configuration</a>
</dt>
<dd>
After configuring IPv6 VXLAN in centralized gateway mode using BGP EVPN, verify information about the IPv6 VXLAN tunnels, VNI status, and VBDIF interfaces.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan_cfg_1082.html">VXLAN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan_cfg_0017b.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vxlan_cfg_1216.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>