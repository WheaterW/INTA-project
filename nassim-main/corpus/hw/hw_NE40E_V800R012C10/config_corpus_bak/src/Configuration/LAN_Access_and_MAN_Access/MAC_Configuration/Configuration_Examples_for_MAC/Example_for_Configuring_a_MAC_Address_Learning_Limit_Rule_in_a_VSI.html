
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring a MAC Address Learning Limit Rule in a VSI">
<meta name="abstract" content="Configuring a MAC address learning limit rule for a Virtual Switching Instance (VSI) can control the number of access users in the VSI. When the number of MAC addresses learned in this VSI reaches the maximum number, no new MAC addresses can be learned. You can also configure the system to discard packets to defend against MAC address attacks and therefore improve network security.">
<meta name="description" content="Configuring a MAC address learning limit rule for a Virtual Switching Instance (VSI) can control the number of access users in the VSI. When the number of MAC addresses learned in this VSI reaches the maximum number, no new MAC addresses can be learned. You can also configure the system to discard packets to defend against MAC address attacks and therefore improve network security.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MAC">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362758">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring a MAC Address Learning Limit Rule in a VSI</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172362758"></a><a name="EN-US_TASK_0172362758"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring a MAC Address Learning Limit Rule in a VSI</h1>
<div class="taskbody"><p>Configuring a MAC address learning limit rule for a Virtual Switching Instance (VSI) can control the number of access users in the VSI. When the number of MAC addresses learned in this VSI reaches the maximum number, no new MAC addresses can be learned. You can also configure the system to discard packets to defend against MAC address attacks and therefore improve network security.</p>
<div class="context"><a name="EN-US_TASK_0172362758__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Networks with poor security management, such as community networks, are vulnerable to hackers' MAC address attacks. The capacity of a MAC address table is limited. When hackers forge a large number of packets with different source MAC addresses and send the packets to a device, the MAC address table of the device will be filled up. Even if the device can receive valid packets, it cannot learn the source MAC addresses of the packets.</p>
<p>As shown in <a href="#EN-US_TASK_0172362758__fig_dc_vrp_mac_cfg_002001">Figure 1</a>, user network 1 accesses the VPLS network through S1, and user network 2 accesses the VPLS network through S2. A VSI named huawei is created on the VPLS network. A MAC address learning limit rule is configured for the VSI to control the number of users in this VSI and defend against MAC address attacks.</p>
<div class="fignone" id="EN-US_TASK_0172362758__fig_dc_vrp_mac_cfg_002001"><a name="EN-US_TASK_0172362758__fig_dc_vrp_mac_cfg_002001"></a><a name="fig_dc_vrp_mac_cfg_002001"></a><span class="figcap"><b>Figure 1 </b>Networking for configuring a MAC address learning limit rule in a VSI</span><br><span><img class="vsd" src="figure/en-us_image_0000001671749649.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362758__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Create a VSI.</p>
</li><li><p>Configure a MAC address learning limit rule for the VSI.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362758__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>VSI name</p>
</li><li><p>Maximum number of MAC addresses that can be learned</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362758__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create a VSI.</span><p><p># Create a VSI named huawei.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>]<strong> sysname PE1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> vsi huawei static</strong></pre>
</p></li><li><span>Configure a MAC address learning limit rule for the VSI.</span><p><p># Configure a MAC address learning limit rule for the VSI: A maximum of 300 MAC addresses can be learned; the packets received after the maximum number of MAC addresses have been learned are immediately discarded. </p>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-huawei]<strong> mac-limit maximum 300 rate 100 action discard</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-huawei]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-vsi-huawei]<strong> quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>Run the <a href="cmdqueryname=display+mac-limit"><b><span class="cmdname">display mac-limit</span></b></a> command in any view to check whether the MAC address learning limit rule is configured successfully.</p>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> display mac-limit</strong></pre>
<pre class="screen">MAC limit is enabled
Total MAC limit rule count : 1

PORT                   VLAN/BD/VSI/EVPN      SLOT Maximum Rate(ms) Action  Alarm
----------------------------------------------------------------------------
-                      huawei                -    300     100      discard disable</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172362758__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><pre class="screen">#
sysname PE1
#
vsi huawei static
 mac-limit maximum 300 rate 100 action discard
#  
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0008.html">Configuration Examples for MAC
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mac_cfg_0010.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>