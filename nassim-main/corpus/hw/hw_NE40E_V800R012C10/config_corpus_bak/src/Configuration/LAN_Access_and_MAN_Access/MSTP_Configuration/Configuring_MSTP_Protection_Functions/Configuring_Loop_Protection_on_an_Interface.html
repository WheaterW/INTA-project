
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Loop Protection on an Interface">
<meta name="abstract" content="The loop protection function suppresses the loops caused by link congestion.">
<meta name="description" content="The loop protection function suppresses the loops caused by link congestion.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0026.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0030.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0032.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363639">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Loop Protection on an Interface</title>
</head>
<body><a name="EN-US_TASK_0172363639"></a><a name="EN-US_TASK_0172363639"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Loop Protection on an Interface</h1>
<div class="taskbody"><p>The loop protection function suppresses the loops caused by link congestion.</p>
<div class="context"><a name="EN-US_TASK_0172363639__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On a network running Multiple Spanning Tree Protocol (MSTP), a <span class="keyword">device</span> maintains the root port status and status of blocked ports by receiving Bridge Protocol Data Units (BPDUs) from an upstream <span class="keyword">device</span>. If the <span class="keyword">device</span> cannot receive BPDUs from the upstream because of link congestion or unidirectional-link failure, the <span class="keyword">device</span> re-selects a root port. The original root port becomes a designated port and the original blocked ports change to the Forwarding state. This may cause network loops. To address such a problem, configure loop protection.</p>
<p>After loop protection is configured, if the root port or alternate port does not receive BPDUs from the upstream device, the root port is blocked and the device notifies the NMS that the port enters the Discarding state. The blocked port remains in the Blocked state and no longer forwards packets. This prevents loops on the network. The root port restores the Forwarding state after receiving new BPDUs.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>An alternate port is a backup port of a root port. If a <span class="keyword">device</span> has an alternate port, you need to configure loop protection on both the root port and the alternate port.</p>
</div></div>
<p>Do as follows on a root port and an alternate port on a <span class="keyword">device</span> in an MST region:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172363639__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span></span><p><p>The view of the Ethernet interface participating in spanning tree protocol calculation is displayed.</p>
</p><p><div class="note" id="EN-US_TASK_0172363639__en-us_task_0172363544_note64068115214313"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363639__en-us_task_0172363544_p773718156479">The following configuration can be configured both on a Layer 2 interface and a Layer 3 interface.</p>
</div></div>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=stp+binding+process"><b><span class="cmdname">stp binding process</span></b></a> <i><span class="varname">process-id</span></i></span></span><p><p>The interface is bound to an MSTP process.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This step is performed only when the interface needs to be bound to an MSTP process with a non-zero ID. If the interface belongs to process 0, skip this step.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=stp+loop-protection"><b><span class="cmdname">stp loop-protection</span></b></a></span></span><p><p>Loop protection for the root port is configured on the <span class="keyword">device</span>.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0026.html">Configuring MSTP Protection Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0030.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0032.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>