
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring MSTP Multi-process">
<meta name="abstract" content="After a Multiple Spanning Tree Protocol (MSTP) device binds its ports to different processes, the MSTP device performs the MSTP calculation based on processes, and only relevant ports in each process take part in MSTP calculation.">
<meta name="description" content="After a Multiple Spanning Tree Protocol (MSTP) device binds its ports to different processes, the MSTP device performs the MSTP calculation based on processes, and only relevant ports in each process take part in MSTP calculation.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0017.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0018.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0019.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0020.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="MSTP">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363620">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring MSTP Multi-process</title>
</head>
<body><a name="EN-US_TASK_0172363620"></a><a name="EN-US_TASK_0172363620"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">Configuring MSTP Multi-process</h1>



<div class="taskbody"><p>After a Multiple Spanning Tree Protocol (MSTP) device binds its ports to different processes, the MSTP device performs the MSTP calculation based on processes, and only relevant ports in each process take part in MSTP calculation.</p>

<div class="context"><a name="EN-US_TASK_0172363620__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Applicable Environment</h4><ul><li><p>Background</p>
<p>On a network with both Layer 2 single-access rings and multi-access rings deployed, <span class="keyword">device</span>s transmit both Layer 2 and Layer 3 services. To enable different rings to transmit different services, configure MSTP multi-process. Spanning trees of different processes are calculated independently.</p>
<p>On the network shown in <a href="#EN-US_TASK_0172363620__fig_dc_vrp_mstp_cfg_0003_07">Figure 1</a>, <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, and <span class="keyword">Device</span>C are connected through Layer 2 links, and are all enabled with MSTP. The CEs on the rings support only STP/RSTP. Multiple access rings exist and these rings access the MST region by using different interfaces on <span class="keyword">Device</span>A and <span class="keyword">Device</span>B.</p>
<div class="fignone" id="EN-US_TASK_0172363620__fig_dc_vrp_mstp_cfg_0003_07"><a name="EN-US_TASK_0172363620__fig_dc_vrp_mstp_cfg_0003_07"></a><a name="fig_dc_vrp_mstp_cfg_0003_07"></a><span class="figcap"><b>Figure 1 </b>Networking diagram of MSTP multi-process</span>

<br><span><img class="vsd" src="images/fig_dc_vrp_mstp_cfg_0003_07.png" width="NaN" height="NaN"></span><br>
</div>
<p>On the network shown in <a href="#EN-US_TASK_0172363620__fig_dc_vrp_mstp_cfg_0003_07">Figure 1</a>, multiple Layer 2 rings, Ring 1, Ring 2, and Ring 3 exists. STP must be enabled on these rings to prevent loops. <span class="keyword">Device</span>A and <span class="keyword">Device</span>B are connected to multiple access rings and these rings are isolated from each other and do not need intercommunication. STP then will not calculate out one spanning tree for all these access rings. Instead, STP on each access ring calculates the trees independently.</p>
<p>MSTP supports multiple spanning tree instances (MSTIs) only when all devices support MSTP and the devices are configured with the same MST region. In the networking, the CEs connected to <span class="keyword">device</span>s, however, support only STP/RSTP. According to MSTP, <span class="keyword">device</span>s consider that they are in different regions with CEs after receiving STP/RSTP messages sent from the CEs. Therefore, only one spanning tree is calculated for the ring formed by <span class="keyword">device</span>s and CEs and the access rings are not independent of each other.</p>
<p>In this case, MSTP multi-process can be used. Multiple MSTP processes can be configured on <span class="keyword">Device</span>A and <span class="keyword">Device</span>B. Each MSTP process has the same function and supports MSTIs. Each MSTP process corresponds to one access ring.</p>
<p>After MSTP multi-process is enabled, each MSTP process can manage some interfaces on a <span class="keyword">device</span>. That is, Layer 2 interfaces on the <span class="keyword">device</span> are divided and managed by multiple MSTP processes. Each MSTP process runs the standard MSTP.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>CEs that support MSTP can also be configured with MSTP multi-process.</p>
<p>After a <span class="keyword">device</span> properly starts, there is a default MSTP process with the ID 0. MSTP configurations in the system view and interface view both belong to this process.</p>
</div></div>
</li><li><p>Share link</p>
<p>On the network shown in <a href="#EN-US_TASK_0172363620__fig_dc_vrp_mstp_cfg_0003_07">Figure 1</a>, the link between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B is a Layer 2 link running MSTP. The share link between <span class="keyword">Device</span>A and <span class="keyword">Device</span>B is different from the links connecting devices to CEs. The ports on the share link need to participate in the calculation for multiple access rings and MSTP processes. This allows <span class="keyword">Device</span>A and <span class="keyword">Device</span>B to identify from which MST BPDUs are sent.</p>
<p>In addition, a port on the share link participates in the calculation for multiple MSTP processes, and obtains different status. As a result, the port cannot determine its status.</p>
<p>To prevent this situation, a port on a share link always adopts its status in MSTP process 0 when participating in the calculation for multiple MSTP processes.</p>
</li></ul>
</div></div>

<div class="context"><a name="EN-US_TASK_0172363620__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring MSTP multi-process, complete the following task:</p>
<ul><li><p>Configuring basic MSTP functions</p>
</li></ul>
</div></div>

<div class="context"><a name="EN-US_TASK_0172363620__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Procedures</h4><div class="fignone"><span class="figcap"><b>Figure 2 </b>Flowchart for configuring MSTP multi-process</span>

<br><span><img class="vsd" src="images/fig_dc_vrp_mstp_cfg_0013_02.png" width="NaN" height="NaN"></span></div>
</div></div>

</div>


<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0015.html">Creating an MSTP Process</a>
</dt>
<dd>
A process ID uniquely identifies a Multiple Spanning Tree Protocol (MSTP) multi-process. After an MSTP device binds its ports to different processes, the MSTP device performs the MSTP calculation based on processes, and only relevant ports in each process take part in MSTP calculation.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0016.html">Adding an Interface to an MSTP Process - Access Links</a>
</dt>
<dd>
The links connecting Multiple Spanning Tree Protocol (MSTP) devices and access rings are called access links. After being added to MSTP processes, interfaces on the access links can participate in MSTP calculation.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0017.html">Adding an Interface to an MSTP Process - Share Link</a>
</dt>
<dd>
The link shared by multiple access rings is called a share link. The interfaces on the share link need to participate in Multiple Spanning Tree Protocol (MSTP) calculation in multiple access rings in different MSTP processes. After being added to MSTP processes, interfaces on the access links can participate in MSTP calculation.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0018.html">Configuring Priorities and Root Protection in MSTP Multi-process</a>
</dt>
<dd>
You can configure priorities and root protection in Multiple Spanning Tree Protocol (MSTP) multi-process to protect links over access rings.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0019.html">Configuring TC Notification in MSTP Multi-process</a>
</dt>
<dd>
After the Topology Change (TC) notification function is configured for Multiple Spanning Tree Protocol (MSTP) multi-process, the current MSTP process can notify the Multiple Spanning Tree Instances (MSTIs) in other specified MSTP processes to refresh MAC address entries and ARP entries after receiving a TC-BPDU. Nonstop services are ensured.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0020.html">Verifying the MSTP Multi-process Configuration</a>
</dt>
<dd>
After Multiple Spanning Tree Protocol (MSTP) multi-process is configured, verify the configuration.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0001.html">MSTP Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0004.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mstp_cfg_0021.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>