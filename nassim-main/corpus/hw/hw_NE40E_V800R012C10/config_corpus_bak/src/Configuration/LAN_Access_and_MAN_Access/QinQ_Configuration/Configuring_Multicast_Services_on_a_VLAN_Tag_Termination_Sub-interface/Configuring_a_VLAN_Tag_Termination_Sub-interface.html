
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a VLAN Tag Termination Sub-interface">
<meta name="abstract" content="A VLAN tag termination sub-interface can be a dot1q VLAN tag termination sub-interface or a QinQ VLAN tag termination sub-interface. In dot1q/QinQ termination, a device identifies whether a packet has one tag or two tags. The device then forwards the packet after stripping one or both tags or discards the packet.">
<meta name="description" content="A VLAN tag termination sub-interface can be a dot1q VLAN tag termination sub-interface or a QinQ VLAN tag termination sub-interface. In dot1q/QinQ termination, a device identifies whether a packet has one tag or two tags. The device then forwards the packet after stripping one or both tags or discards the packet.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0039.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0041.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wwx1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363275">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a VLAN Tag Termination Sub-interface</title>
</head>
<body><a name="EN-US_TASK_0172363275"></a><a name="EN-US_TASK_0172363275"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a VLAN Tag Termination Sub-interface</h1>
<div class="taskbody"><p>A VLAN tag termination sub-interface can be a dot1q VLAN tag termination sub-interface or a QinQ VLAN tag termination sub-interface. In dot1q/QinQ termination, a device identifies whether a packet has one tag or two tags. The device then forwards the packet after stripping one or both tags or discards the packet.</p>
<div class="steps-unordered"><a name="EN-US_TASK_0172363275__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a dot1q VLAN tag termination sub-interface.</span><p><ol><li><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p1147144422011">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname2068608992214028">system-view</span></b></a></p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p573277117214028">The system view is displayed.</p>
</li><li><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p524102702116">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname271602996214028">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363275__en-us_task_0172363258_varname647930865214028">interface-type interface-number.subinterface-number</span></i></p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p2048295801214028">The view of the PE's Ethernet sub-interface connecting to the user side is displayed.</p>
</li><li><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p2104807058214028">(Optional) Create a user VLAN group.</p>
<ol type="a" id="EN-US_TASK_0172363275__en-us_task_0172363258_ol_1"><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li1771904166214028"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p948954094214312"><a name="EN-US_TASK_0172363275__en-us_task_0172363258_li1771904166214028"></a><a name="en-us_task_0172363258_li1771904166214028"></a>Run <a href="cmdqueryname=vlan-group"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname1712192296214028">vlan-group</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363275__en-us_task_0172363258_varname1028502291214028">group-id</span></i></p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p739469088214312">A user VLAN group is created.</p>
</li><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li967913461214028"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p182182833511"><a name="EN-US_TASK_0172363275__en-us_task_0172363258_li967913461214028"></a><a name="en-us_task_0172363258_li967913461214028"></a>Run <a href="cmdqueryname=group+mode"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname38288312351">group mode</span></b></a> { <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname2828123123514">single</span></strong> | <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname148281931183513">multiple</span></strong> }</p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p274165163513">The working mode of the VLAN group is configured.</p>
<ul id="EN-US_TASK_0172363275__en-us_task_0172363258_ul332236645214028"><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li909258174214028"><strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname408498366214028">single</span></strong>: A VLAN group is considered as a user. This means that you cannot collect statistics about QinQ packets or deploy quality of service (QoS) policies based on a VLAN or a VLAN range.</li><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li980140465214028"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_li980140465214028p0"><a name="EN-US_TASK_0172363275__en-us_task_0172363258_li980140465214028"></a><a name="en-us_task_0172363258_li980140465214028"></a><strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname2021222765214028">multiple</span></strong>: VLANs and VLAN ranges in a VLAN group are considered as different users. This means that you can collect statistics about QinQ packets or deploy QoS policies based on a VLAN or VLAN range to implement refined management.</p>
</li></ul>
</li><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li1511047054214028"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p1818445943214312"><a name="EN-US_TASK_0172363275__en-us_task_0172363258_li1511047054214028"></a><a name="en-us_task_0172363258_li1511047054214028"></a>Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname565663257214028">quit</span></b></a></p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p935179603214312">Return to the view of the PE's Ethernet sub-interface connecting to the user side.</p>
</li></ol>
<div class="note" id="EN-US_TASK_0172363275__en-us_task_0172363258_note_1"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p1583683060214028">Configuring a VLAN group allows you to achieve the following purposes:</p>
<ul id="EN-US_TASK_0172363275__en-us_task_0172363258_ul1787138538214028"><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li845962212214028">Deploy QoS policies based on services or users so that higher priority service traffic is preferentially forwarded, improving user experience.</li><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li1638708273214028">View statistics about QinQ packets to check whether a device is functioning properly.</li></ul>
</div></div>
</li><li><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p1295014357554">Run <a href="cmdqueryname=control-vid"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname29501335185516">control-vid</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363275__en-us_task_0172363258_varname9950635115511">vid</span></i> <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname19501351555">dot1q-termination</span></strong> [ <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname2095023513557">rt-protocol</span></strong> ] or <a href="cmdqueryname=encapsulation"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname9950135155513">encapsulation</span></b></a> <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname10950103519556">dot1q-termination</span></strong> [ <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname159509359556">rt-protocol</span></strong> ]</p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p24912504552">The encapsulation type is configured as dot1q VLAN tag termination for the sub-interface.</p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p14151125915557">Specify <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname142084739214028">rt-protocol</span></strong> so that the dot1q VLAN tag termination sub-interface supports routing protocols.</p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p_1">To enable the dot1q VLAN tag termination sub-interface to support routing protocols, specify <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname1552419141566">rt-protocol</span></strong>.</p>
</li><li><p>Run <a href="cmdqueryname=dot1q+termination+vid"><b><span class="cmdname">dot1q termination vid</span></b></a> <i><span class="varname">low-pe-vid</span></i> [ <strong><span>to</span></strong> <i><span class="varname">high-pe-vid</span></i> ] [ <strong><span>vlan-group</span></strong> <i><span class="varname">group-id</span></i> ]</p>
<p>The VLAN tag termination function is configured for the dot1q VLAN tag termination sub-interface.</p>
<p>After you specify <strong><span>rt-protocol</span></strong>, the dot1q VLAN tag termination sub-interface terminates packets carrying a fixed-value VLAN tag.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ol>
</p></li><li><span>Configure a QinQ VLAN tag termination sub-interface.</span><p><ol><li><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p1147144422011_1">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname2068608992214028_1">system-view</span></b></a></p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p573277117214028_1">The system view is displayed.</p>
</li><li><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p524102702116_1">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname271602996214028_1">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363275__en-us_task_0172363258_varname647930865214028_1">interface-type interface-number.subinterface-number</span></i></p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p2048295801214028_1">The view of the PE's Ethernet sub-interface connecting to the user side is displayed.</p>
</li><li><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p2104807058214028_1">(Optional) Create a user VLAN group.</p>
<ol type="a" id="EN-US_TASK_0172363275__en-us_task_0172363258_ol_1_1"><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li1771904166214028_1"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p948954094214312_1"><a name="EN-US_TASK_0172363275__en-us_task_0172363258_li1771904166214028_1"></a><a name="en-us_task_0172363258_li1771904166214028_1"></a>Run <a href="cmdqueryname=vlan-group"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname1712192296214028_1">vlan-group</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363275__en-us_task_0172363258_varname1028502291214028_1">group-id</span></i></p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p739469088214312_1">A user VLAN group is created.</p>
</li><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li967913461214028_1"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p182182833511_1"><a name="EN-US_TASK_0172363275__en-us_task_0172363258_li967913461214028_1"></a><a name="en-us_task_0172363258_li967913461214028_1"></a>Run <a href="cmdqueryname=group+mode"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname38288312351_1">group mode</span></b></a> { <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname2828123123514_1">single</span></strong> | <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname148281931183513_1">multiple</span></strong> }</p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p274165163513_1">The working mode of the VLAN group is configured.</p>
<ul id="EN-US_TASK_0172363275__en-us_task_0172363258_ul332236645214028_1"><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li909258174214028_1"><strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname408498366214028_1">single</span></strong>: A VLAN group is considered as a user. This means that you cannot collect statistics about QinQ packets or deploy quality of service (QoS) policies based on a VLAN or a VLAN range.</li><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li980140465214028_1"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_li980140465214028p0_1"><a name="EN-US_TASK_0172363275__en-us_task_0172363258_li980140465214028_1"></a><a name="en-us_task_0172363258_li980140465214028_1"></a><strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname2021222765214028_1">multiple</span></strong>: VLANs and VLAN ranges in a VLAN group are considered as different users. This means that you can collect statistics about QinQ packets or deploy QoS policies based on a VLAN or VLAN range to implement refined management.</p>
</li></ul>
</li><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li1511047054214028_1"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p1818445943214312_1"><a name="EN-US_TASK_0172363275__en-us_task_0172363258_li1511047054214028_1"></a><a name="en-us_task_0172363258_li1511047054214028_1"></a>Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname565663257214028_1">quit</span></b></a></p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p935179603214312_1">Return to the view of the PE's Ethernet sub-interface connecting to the user side.</p>
</li></ol>
<div class="note" id="EN-US_TASK_0172363275__en-us_task_0172363258_note_1_1"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p1583683060214028_1">Configuring a VLAN group allows you to achieve the following purposes:</p>
<ul id="EN-US_TASK_0172363275__en-us_task_0172363258_ul1787138538214028_1"><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li845962212214028_1">Deploy QoS policies based on services or users so that higher priority service traffic is preferentially forwarded, improving user experience.</li><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li1638708273214028_1">View statistics about QinQ packets to check whether a device is functioning properly.</li></ul>
</div></div>
</li><li><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p19824348105816">Run <a href="cmdqueryname=control-vid"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname544014478214028">control-vid</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363275__en-us_task_0172363258_varname1992763496214028">vid</span></i> <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname974057367214028">qinq-termination</span></strong> [ <span><strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname1880245753214028">local-switch</span></strong> | </span><strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname3023363214028">rt-protocol</span></strong> ] or <a href="cmdqueryname=encapsulation"><b><span class="cmdname" id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdname373077056214028">encapsulation</span></b></a> <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname220019265214028">qinq-termination</span></strong> [ <span><strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname1971283362214028">local-switch</span></strong> | </span><strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname1893475673214028">rt-protocol</span></strong> ]</p>
<p id="EN-US_TASK_0172363275__en-us_task_0172363258_p9715193320586">The encapsulation type is configured as QinQ VLAN tag termination for the sub-interface.</p>
<ul id="EN-US_TASK_0172363275__en-us_task_0172363258_ul1953423517542"><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li1534535115416">Specify <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname4123574495">local-switch</span></strong> so that the QinQ VLAN tag termination sub-interface supports local switching.</li><li id="EN-US_TASK_0172363275__en-us_task_0172363258_li1653413357541"><p id="EN-US_TASK_0172363275__en-us_task_0172363258_p4534203535418"><a name="EN-US_TASK_0172363275__en-us_task_0172363258_li1653413357541"></a><a name="en-us_task_0172363258_li1653413357541"></a>Specify <strong><span id="EN-US_TASK_0172363275__en-us_task_0172363258_cmdparmname5611165911497">rt-protocol</span></strong> so that the QinQ VLAN tag termination sub-interface supports routing protocols.</p>
</li></ul>
</li><li><p>Run <a href="cmdqueryname=qinq+termination+pe-vid"><b><span class="cmdname">qinq termination pe-vid</span></b></a> <i><span class="varname">pe-vid</span></i> [ <strong><span>to</span></strong> <i><span class="varname">high-pe-vid</span></i> ] <strong><span>ce-vid</span></strong> <i><span class="varname">ce-vid</span></i> [ <strong><span>to</span></strong> <i><span class="varname">high-ce-vid</span></i> ] [ <strong><span>vlan-group</span></strong> <i><span class="varname">group-id</span></i> ]</p>
<p>The VLAN tag termination function is configured for the QinQ VLAN tag termination sub-interface.</p>
<p>After you specify <strong><span>rt-protocol</span></strong>, the QinQ VLAN tag termination sub-interface terminates packets carrying two fixed-value VLAN tags.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ol>
</p></li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0039.html">Configuring Multicast Services on a VLAN Tag Termination Sub-interface
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0041.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>