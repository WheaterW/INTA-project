
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring the Compatibility of the EtherType Field in the Outer Tag of QinQ Packets">
<meta name="abstract" content="This example shows how to configure the EtherType of an outer tag to enable the interworking between Huawei devices and non-Huawei devices.">
<meta name="description" content="This example shows how to configure the EtherType of an outer tag to enable the interworking between Huawei devices and non-Huawei devices.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0023_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0024_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0051_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363293">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring the Compatibility of the EtherType Field in the Outer Tag of QinQ Packets</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172363293"></a><a name="EN-US_TASK_0172363293"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring the Compatibility of the EtherType Field in the Outer Tag of QinQ Packets</h1>
<div class="taskbody"><p>This example shows how to configure the EtherType of an outer tag to enable the interworking between Huawei devices and non-Huawei devices.</p>
<div class="context"><a name="EN-US_TASK_0172363293__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0172363293__en-us_task_0172363201_context232886886214028"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p1140373888214028">PE2 is a Huawei device. PE1 and CE1 are non-Huawei devices. CE2 is a non-Huawei switch. <a href="#EN-US_TASK_0172363293__en-us_task_0172363201_fig_dc_vrp_qinq_cfg_002501">Figure 1</a> shows the networking and the EtherType value in the outer tag of QinQ packets. In this situation, you can enable Huawei devices and non-Huawei devices to interwork with each other by setting the EtherType value in the outer tag of the interface on PE2.</p>
<div class="fignone" id="EN-US_TASK_0172363293__en-us_task_0172363201_fig_dc_vrp_qinq_cfg_002501"><a name="EN-US_TASK_0172363293__en-us_task_0172363201_fig_dc_vrp_qinq_cfg_002501"></a><a name="en-us_task_0172363201_fig_dc_vrp_qinq_cfg_002501"></a><span class="figcap"><b>Figure 1 </b>Networking of configuring the compatibility of the EtherType field in the outer tag of QinQ packets</span><div class="note" id="EN-US_TASK_0172363293__en-us_task_0172363201_note919817323214028"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p1782456555214028">In this example, interfaces 1 and 2 represent GE<span>0/1/0</span> and GE<span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0172363293__en-us_task_0172363201_image18722120115812" src="figure/en-us_image_0000001556429561.png" width="NaN" height="NaN"></span><div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TASK_0172363293__en-us_task_0172363201_simpletable797596108214028"><tr id="EN-US_TASK_0172363293__en-us_task_0172363201_strow1885314423214028"><td valign="top" id="en-us_task_0172363201_stentry334641744214028" width="18%"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p173344511126">Device Name</p>
</td>
<td valign="top" id="en-us_task_0172363201_stentry1707309258214028" width="28.249999999999996%"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p1933194571212">EtherType Value in the Outer Tag</p>
</td>
<td valign="top" id="en-us_task_0172363201_stentry2099494067214028" width="21.75%"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p4342457126">Device Name</p>
</td>
<td valign="top" id="en-us_task_0172363201_stentry2023135061214028" width="32%"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p1334194510124">EtherType Value in the Outer Tag</p>
</td>
</tr>
<tr id="EN-US_TASK_0172363293__en-us_task_0172363201_strow1345625324214028"><td valign="top" id="en-us_task_0172363201_stentry1693057710214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p3341945191217">PE1</p>
</td>
<td valign="top" id="en-us_task_0172363201_stentry986414678214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p143424551216">0x9100</p>
</td>
<td valign="top" id="en-us_task_0172363201_stentry1262935034214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p19346453124">CE1</p>
</td>
<td valign="top" id="en-us_task_0172363201_stentry594778331214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p193413458128">0x8100</p>
</td>
</tr>
<tr id="EN-US_TASK_0172363293__en-us_task_0172363201_strow2101009925214028"><td valign="top" id="en-us_task_0172363201_stentry861870219214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p234134518124">PE2</p>
</td>
<td valign="top" id="en-us_task_0172363201_stentry1111964559214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p123424520124">0x8100</p>
</td>
<td valign="top" id="en-us_task_0172363201_stentry1874008121214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p153444571211">CE2</p>
</td>
<td valign="top" id="en-us_task_0172363201_stentry138112863214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p18341945191213">0x9100</p>
</td>
</tr>
</table></div>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172363293__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0172363293__en-us_task_0172363201_context223172976214028"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p935668112214028">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0172363293__en-us_task_0172363201_ol1908194577214028"><li id="EN-US_TASK_0172363293__en-us_task_0172363201_li11520655214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p354120355214028"><a name="EN-US_TASK_0172363293__en-us_task_0172363201_li11520655214028"></a><a name="en-us_task_0172363201_li11520655214028"></a>Switch PE2's interfaces connected to the CEs into Layer 2 interfaces to ensure Layer 2 connectivity.</p>
</li><li id="EN-US_TASK_0172363293__en-us_task_0172363201_li2009173987214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p1154334081214028"><a name="EN-US_TASK_0172363293__en-us_task_0172363201_li2009173987214028"></a><a name="en-us_task_0172363201_li2009173987214028"></a>Configure the compatibility of the EtherType field in the outer tag of QinQ packets on PE2's interface that connects to CE2 to ensure that the Huawei device and non-Huawei device can interwork with each other.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172363293__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0172363293__en-us_task_0172363201_context1147580032214028"><h4 class="sectiontitle">Data Preparation</h4><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p1769411723214028">To complete the configuration, you need the following data:</p>
<ul id="EN-US_TASK_0172363293__en-us_task_0172363201_ul768817939214028"><li id="EN-US_TASK_0172363293__en-us_task_0172363201_li388367494214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p1089668425214028"><a name="EN-US_TASK_0172363293__en-us_task_0172363201_li388367494214028"></a><a name="en-us_task_0172363201_li388367494214028"></a>Names of the physical interfaces through which PE2 connects to non-Huawei devices</p>
</li><li id="EN-US_TASK_0172363293__en-us_task_0172363201_li768540158214028"><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p1887782448214028"><a name="EN-US_TASK_0172363293__en-us_task_0172363201_li768540158214028"></a><a name="en-us_task_0172363201_li768540158214028"></a>EtherType encapsulation value in the outer tag of non-Huawei devices</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172363293__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172363293__en-us_task_0172363201_steps1756581588214028"><li id="EN-US_TASK_0172363293__en-us_task_0172363201_step1671881580214028"><span id="EN-US_TASK_0172363293__en-us_task_0172363201_cmd1637677712214028">Switch PE2's interfaces connected to CEs to Layer 2 interfaces.</span><p><pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen1410666090214028">&lt;<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword616690051214028">HUAWEI</span>&gt; <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b1460989975214028">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen1741265092214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword1659117682214028"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword1863208726214028">HUAWEI</span>] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b1432557736214028">sysname PE2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen2106298939214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword1297848570214028">*</span><span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword949513411214028">HUAWEI</span>] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b1922455568214028">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen468654641214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword1890149891214028"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b1978233514214028">interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen1552593685214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword450859432214028">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b2073892417214028">portswitch</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen814035846214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword1400354976214028">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b1035213090214028">undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen247932330214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword638622080214028">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b518032293214028">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen17078123214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword1127551181214028">*</span>PE2] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b788029633214028">interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen1593859761214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword1229081300214028">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b836755300214028">portswitch</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen814049873214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword1573343984214028">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b1766445497214028">undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen1182911302214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword503870406214028">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b395613632214028">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen241730494214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword1089879988214028">*</span>PE2] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b2068070918214028">commit</strong></pre>
</p></li><li id="EN-US_TASK_0172363293__en-us_task_0172363201_step789734691214028"><span id="EN-US_TASK_0172363293__en-us_task_0172363201_cmd1622013177214028">Configure the compatibility of the EtherType field in the outer tag of QinQ packets on the interface of PE2 that connects to CE2.</span><p><pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen1315598087214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword964994949214028"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b345288554214028">interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen204928199214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword52876657214028">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b1521966711214028">qinq protocol 9100</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen1701815341214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword1682012734214028">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b743075758214028">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen1353186715214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword935910046214028">*</span>PE2] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b755504015214028">commit</strong></pre>
</p></li><li id="EN-US_TASK_0172363293__en-us_task_0172363201_step1987178408214028"><span id="EN-US_TASK_0172363293__en-us_task_0172363201_cmd841825112214028">Verify the configuration.</span><p><p id="EN-US_TASK_0172363293__en-us_task_0172363201_p1450136590214028">After the configurations are complete, run the <a href="cmdqueryname=display+this"><b><span class="cmdname" id="EN-US_TASK_0172363293__en-us_task_0172363201_cmdname666838534214028">display this</span></b></a> command on GE <span>0/1/0</span> of PE2. The command output shows the information of the interface.</p>
<p id="EN-US_TASK_0172363293__en-us_task_0172363201_p719693967214028">Run the <a href="cmdqueryname=display+interface"><b><span class="cmdname" id="EN-US_TASK_0172363293__en-us_task_0172363201_cmdname1200788839214028">display interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363293__en-us_task_0172363201_varname1247247508214028">interface-type interface-number</span></i> command on PE2. The command output shows the EtherType value of the outer VLAN tag.</p>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen299127899214028">[<span class="keyword" id="EN-US_TASK_0172363293__en-us_task_0172363201_keyword443181417214028"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b726567192214028">display interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen445604077214028">GigabitEthernet<span>0/1/0</span> current state : UP
Line protocol current state : UP (ifindex: 12)
Switch Port, <strong id="EN-US_TASK_0172363293__en-us_task_0172363201_b1688083904214028">TPID : 9100(Hex)</strong>, The Maximum Transmit Unit is 1500
Internet protocol processing : disabled
IP Sending Frames' Format is PKTFMT_ETHNT_2, Hardware address is 00e0-fc12-3456
Last physical up time   : 0000-00-00 00:00:00
Last physical down time : 0000-00-00 00:00:00
Current system time: 2012-06-28 03:59:19
Statistics last cleared:never
    Last 300 seconds input rate: 0 bits/sec, 0 packets/sec
    Last 300 seconds output rate: 0 bits/sec, 0 packets/sec
    Input peak rate 0 bits/sec, Record time: -
    Output peak rate 0 bits/sec, Record time: -
    Input: 0 bytes, 0 packets
    Output: 0 bytes, 0 packets
    Input:
      Unicast: 0 packets, Multicast: 0 packets
      Broadcast: 0 packets, JumboOctets: 0 packets
      CRC: 0 packets, Symbol: 0 packets
      Overrun: 0 packets, InRangeLength: 0 packets
      LongPacket: 0 packets, Jabber: 0 packets, Alignment: 0 packets
      Fragment: 0 packets, Undersized Frame: 0 packets
      RxPause: 0 packets
    Output:
      Unicast: 0 packets, Multicast: 0 packets
      Broadcast: 0 packets, JumboOctets: 0 packets
      Lost: 0 packets, Overflow: 0 packets, Underrun: 0 packets
      System: 0 packets, Overruns: 0 packets
      TxPause: 0 packets
    Last 300 seconds input utility rate:  0.00%
    Last 300 seconds output utility rate: 0.00%</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172363293__en-us_task_0172363201_example563559913214028"><a name="EN-US_TASK_0172363293__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">PE2 configuration file</h4><pre class="screen" id="EN-US_TASK_0172363293__en-us_task_0172363201_screen1371318406214028">#
 sysname PE2
#
interface GigabitEthernet <span>0/1/0</span>
 portswitch
 undo shutdown
 qinq protocol 9100
#
interface GigabitEthernet <span>0/2/0</span>
 portswitch
 undo shutdown
#
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0023_1.html">Configuration Examples for QinQ
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0024_1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0051_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>