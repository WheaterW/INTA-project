
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a QinQ Tunnel">
<meta name="abstract" content="After the QinQ tunnel is configured, the interface adds an outer VLAN tag to packets that carry an inner VLAN tag. These packets can then be forwarded on the public network.">
<meta name="description" content="After the QinQ tunnel is configured, the interface adds an outer VLAN tag to packets that carry an inner VLAN tag. These packets can then be forwarded on the public network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0003_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0046_1.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="wwx1238417">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="featurename" content="QinQ">
<meta name="featuretype" content="LAN Access and MAN Access">
<meta name="OWNER" content="c00648116,w00437000">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="wWX1238417">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172363245">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a QinQ Tunnel</title>
</head>
<body><a name="EN-US_TASK_0172363245"></a><a name="EN-US_TASK_0172363245"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a QinQ Tunnel</h1>
<div class="taskbody"><p>After the QinQ tunnel is configured, the interface adds an outer VLAN tag to packets that carry an inner VLAN tag. These packets can then be forwarded on the public network. </p>
<div class="context"><a name="EN-US_TASK_0172363245__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172363245__en-us_task_0172363195_context1027950792214028"><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p263021029214028">Perform the following steps on the device on which the QinQ tunnel is to be configured:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172363245__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172363245__en-us_task_0172363195_steps776560534214028"><li id="EN-US_TASK_0172363245__en-us_task_0172363195_step3513381214028"><span id="EN-US_TASK_0172363245__en-us_task_0172363195_cmd1067335998214028">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdname821410150214028">system-view</span></b></a></span><p><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p104681188213">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172363245__en-us_task_0172363195_step1418971869214028"><span id="EN-US_TASK_0172363245__en-us_task_0172363195_cmd854302348214028">Run <a href="cmdqueryname=vlan"><b><span class="cmdname" id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdname561424125214028">vlan</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363245__en-us_task_0172363195_varname1844021893214028">vlan-id</span></i></span><p><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p1419848987214028">A VLAN is created, and its view is displayed.</p>
<p id="EN-US_TASK_0172363245__en-us_task_0172363195_p1887219268590">The VLAN ID refers to the value of the outer tag specified in the QinQ tunnel. The VLAN ID ranges from 1 to 4094.</p>
</p></li><li id="EN-US_TASK_0172363245__en-us_task_0172363195_step427189971214028"><span id="EN-US_TASK_0172363245__en-us_task_0172363195_cmd744010676214028">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdname1451574178214028">quit</span></b></a></span><p><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p1631655162118">Return to the system view.</p>
</p></li><li id="EN-US_TASK_0172363245__en-us_task_0172363195_step507605988214028"><span id="EN-US_TASK_0172363245__en-us_task_0172363195_cmd1528794432214028">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdname238087582214028">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363245__en-us_task_0172363195_varname231383618214028">interface-type interface-number</span></i></span><p><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p1348614392229">The user-side Ethernet interface view is displayed.</p>
</p></li><li id="EN-US_TASK_0172363245__en-us_task_0172363195_step_1"><span id="EN-US_TASK_0172363245__en-us_task_0172363195_cmd1561069600214028">(Optional) Run <a href="cmdqueryname=portswitch"><b><span class="cmdname" id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdname690496026214028">portswitch</span></b></a></span><p><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p464074160214028">The interface is configured as a Layer 2 interface.</p>
<p id="EN-US_TASK_0172363245__en-us_task_0172363195_p137311756616">Skip this step if the interface is already a Layer 2 interface.</p>
</p></li><li id="EN-US_TASK_0172363245__en-us_task_0172363195_step1516690202214028"><span id="EN-US_TASK_0172363245__en-us_task_0172363195_cmd381335124214028">Run <a href="cmdqueryname=port+link-type"><b><span class="cmdname" id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdname1615466110214028">port link-type</span></b></a> <strong><span id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdparmname1163306900214028">dot1q-tunnel</span></strong></span><p><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p623883232">The interface is configured as a QinQ interface.</p>
</p></li><li id="EN-US_TASK_0172363245__en-us_task_0172363195_step806411459214028"><span id="EN-US_TASK_0172363245__en-us_task_0172363195_cmd588095196214028">Run <a href="cmdqueryname=port+default+vlan"><b><span class="cmdname" id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdname643089377214028">port default vlan</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363245__en-us_task_0172363195_varname1950534036214028">vlan-id</span></i></span><p><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p995082142410">An outer VLAN tag is configured for packets passing through the QinQ Layer 2 interface.</p>
</p><p><div class="note" id="EN-US_TASK_0172363245__en-us_task_0172363195_note1799867517214028"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p918706577214028"><em id="EN-US_TASK_0172363245__en-us_task_0172363195_i104431535112416">vlan-id</em> must be the same as the VLAN ID created in Step 2.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172363245__en-us_task_0172363195_step_3"><span id="EN-US_TASK_0172363245__en-us_task_0172363195_cmd18971916185612">(Optional) Run <a href="cmdqueryname=qinq+protocol"><b><span class="cmdname" id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdname1663348046214028">qinq protocol</span></b></a> <i><span class="varname" id="EN-US_TASK_0172363245__en-us_task_0172363195_varname473109866214028">ethertype-value</span></i></span><p><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p165108315568">The protocol type of the outer tag is configured.</p>
</p><p><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p646954288214028">The value of <i><span class="varname" id="EN-US_TASK_0172363245__en-us_task_0172363195_varname855718297306">ethertype-value</span></i> ranges from 0x0600 to 0xFFFF. </p>
<div class="note" id="EN-US_TASK_0172363245__en-us_task_0172363195_note_1"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p402172420214028">The <a href="cmdqueryname=qinq+protocol"><b><span class="cmdname" id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdname1180825831214028">qinq protocol</span></b></a> command takes effect both on double-tagged and single-tagged packets.</p>
</div></div>
</p></li><li id="EN-US_TASK_0172363245__en-us_task_0172363195_step1818487025214028"><span id="EN-US_TASK_0172363245__en-us_task_0172363195_cmd324165071214028">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172363245__en-us_task_0172363195_cmdname929028147214028">commit</span></b></a></span><p><p id="EN-US_TASK_0172363245__en-us_task_0172363195_p18951759202413">The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0003_1.html">Configuring the QinQ Function
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_qinq_cfg_0046_1.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>