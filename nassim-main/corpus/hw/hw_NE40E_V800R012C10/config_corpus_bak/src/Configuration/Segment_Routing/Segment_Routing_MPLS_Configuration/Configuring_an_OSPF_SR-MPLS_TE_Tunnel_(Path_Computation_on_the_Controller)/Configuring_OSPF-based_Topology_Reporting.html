
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring OSPF-based Topology Reporting">
<meta name="abstract" content="Before creating an SR-MPLS TE tunnel, enable OSPF to report network topology information.">
<meta name="description" content="Before creating an SR-MPLS TE tunnel, enable OSPF to report network topology information.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0027_1.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="segment_routing_vrp,w00604599,l00455378,l00587852,w00606909,w00800033">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00468467">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368778">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring OSPF-based Topology Reporting</title>
</head>
<body><a name="EN-US_TASK_0172368778"></a><a name="EN-US_TASK_0172368778"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring OSPF-based Topology Reporting</h1>
<div class="taskbody"><p>Before creating an SR-MPLS TE tunnel, enable OSPF to report network topology information.</p>
<div class="context"><a name="EN-US_TASK_0172368778__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Before an SR-MPLS TE tunnel is established, a device must assign labels, collect network topology information, and report the information to the controller so that the controller uses the information to calculate a path and a label stack for the path. SR-MPLS TE labels can be assigned by the controller or the extended OSPF protocol on forwarders. Network topology information (including labels allocated by OSPF) is collected by OSPF and reported to the controller through BGP-LS.</p>
<p>OSPF collects network topology information including the link cost, latency, and packet loss rate and advertises the information to BGP-LS, which then reports the information to a controller. The controller can compute an SR-MPLS TE tunnel based on link cost, latency, and other factors to meet various service requirements.</p>
<p>Before the configuration, pay attention to the following points:</p>
<ul><li><p>If the controller computes an SR-MPLS TE tunnel based on the link cost, no additional configuration is required.</p>
</li><li>If the controller computes an SR-MPLS TE tunnel based on the link latency, run the <a href="cmdqueryname=metric-delay+advertisement+enable"><b><span class="cmdname">metric-delay advertisement enable</span></b></a> command in the OSPF view to configure the latency advertisement function.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172368778__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure OSPF to advertise network topology information to BGP-LS.</span><p><p>Perform the following steps on one or more nodes of an SR-MPLS TE tunnel:</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>A forwarder can report network-wide topology information to the controller after they establish a BGP-LS peer relationship. The following steps can be configured on one or multiple nodes, depending on the network scale.</p>
</div></div>
</p><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ospf"><b><span class="cmdname">ospf</span></b></a> [ <i><span class="varname">process-id</span></i> ]</span></span><p><p>The OSPF view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp-ls+enable"><b><span class="cmdname">bgp-ls enable</span></b></a></span><p><p>OSPF is enabled to advertise network topology information to BGP-LS.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a BGP-LS peer relationship between the forwarder and controller so that the forwarder can report topology information to the controller through BGP-LS.</span><ol type="a" id="EN-US_TASK_0172368778__en-us_task_0172368771_substeps546317526412"><li class="substepexpand" id="EN-US_TASK_0172368778__en-us_task_0172368771_substep64632521414"><span id="EN-US_TASK_0172368778__en-us_task_0172368771_cmd5463452446">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0172368778__en-us_task_0172368771_cmdname4364001455">bgp</span></b></a> { <i><span class="varname" id="EN-US_TASK_0172368778__en-us_task_0172368771_varname4364301455">as-number-plain</span></i> | <i><span class="varname" id="EN-US_TASK_0172368778__en-us_task_0172368771_varname43647013519">as-number-dot</span></i> }</span><p><p id="EN-US_TASK_0172368778__en-us_task_0172368771_p62951081882">BGP is enabled, and the BGP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368778__en-us_task_0172368771_substep1986533455"><span id="EN-US_TASK_0172368778__en-us_task_0172368771_cmd118651039520">Run <a href="cmdqueryname=peer+as-number"><b><span class="cmdname" id="EN-US_TASK_0172368778__en-us_task_0172368771_cmdname17182174758">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172368778__en-us_task_0172368771_varname1182114453">ipv4-address</span></i> <strong><span id="EN-US_TASK_0172368778__en-us_task_0172368771_cmdparmname71821445516">as-number</span></strong> <i><span class="varname" id="EN-US_TASK_0172368778__en-us_task_0172368771_varname9182947516">as-number-plain</span></i></span><p><p id="EN-US_TASK_0172368778__en-us_task_0172368771_p157531229141714">A BGP peer is created.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368778__en-us_task_0172368771_substep399577558"><span id="EN-US_TASK_0172368778__en-us_task_0172368771_cmd129954717517">Run <a href="cmdqueryname=link-state-family+unicast"><b><span class="cmdname" id="EN-US_TASK_0172368778__en-us_task_0172368771_cmdname72623815517">link-state-family unicast</span></b></a></span><p><p id="EN-US_TASK_0172368778__en-us_task_0172368771_p1678443018810">BGP-LS is enabled, and the BGP-LS address family view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368778__en-us_task_0172368771_substep858711118516"><span id="EN-US_TASK_0172368778__en-us_task_0172368771_cmd658714112510">Run <a href="cmdqueryname=peer+enable"><b><span class="cmdname" id="EN-US_TASK_0172368778__en-us_task_0172368771_cmdname387014112510">peer</span></b></a> { <i><span class="varname" id="EN-US_TASK_0172368778__en-us_task_0172368771_varname12870811458">group-name</span></i> | <i><span class="varname" id="EN-US_TASK_0172368778__en-us_task_0172368771_varname108704111253">ipv4âaddress</span></i> } <strong><span id="EN-US_TASK_0172368778__en-us_task_0172368771_cmdparmname15870911252">enable</span></strong></span><p><p id="EN-US_TASK_0172368778__en-us_task_0172368771_p1424123712184">The device is enabled to exchange BGP-LS routing information with a specified peer or peer group.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172368778__en-us_task_0172368771_substep1996210200517"><span id="EN-US_TASK_0172368778__en-us_task_0172368771_cmd1296310205517">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172368778__en-us_task_0172368771_cmdname12286122110516">commit</span></b></a></span><p><p id="EN-US_TASK_0172368778__en-us_task_0172368771_p1499025012812">The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0006.html">Configuring an OSPF SR-MPLS TE Tunnel (Path Computation on the Controller)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0027_1.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>