
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring a BGP Virtual Link">
<meta name="abstract" content="An SRv6 EPE virtual link can be created for a BGP multi-hop peer relationship to implement communication across a third-party network.">
<meta name="description" content="An SRv6 EPE virtual link can be created for a BGP multi-hop peer relationship to implement communication across a third-party network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0101.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0246.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0310.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00369725">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00615954">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001241440579">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring a BGP Virtual Link</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001241440579"></a><a name="EN-US_TASK_0000001241440579"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring a BGP Virtual Link</h1>
<div class="taskbody"><p>An SRv6 EPE virtual link can be created for a BGP multi-hop peer relationship to implement communication across a third-party network.</p>
<div class="context"><a name="EN-US_TASK_0000001241440579__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_context1707905382214050"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1591344674918">In <a href="#EN-US_TASK_0000001241440579__en-us_task_0000001196932245_fig_dc_vrp_seamless_mpls_cfg_003102">Figure 1</a>, a third-party network is deployed between DeviceC and DeviceD. The two devices run IS-IS for basic routing and establish an IBGP peer relationship. IPv6 EBGP peer relationships are established between directly connected interfaces of DeviceB and DeviceC, and between directly connected interfaces of DeviceD and DeviceE. To establish an SRv6 TE Policy across the third-party network, you can configure a BGP peer relationship-based virtual link between DeviceB and DeviceE. In addition, attribute information required for SRv6 TE Policy path computation is provided, such as the link latency, metric, affinity, and SRLG. This prevents the mismatch of the address information in the link information reported by DeviceB and DeviceE through BGP-LS, which would otherwise cause a link combination failure on the controller.</p>
<div class="note" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_note164509167118"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p84501116101117">In this example, interfaces 1 and 2 represent GE<span>0/1/0</span> and GE<span>0/2/0</span>, respectively.</p>
</div></div>
<div class="fignone" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_fig_dc_vrp_seamless_mpls_cfg_003102"><a name="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_fig_dc_vrp_seamless_mpls_cfg_003102"></a><a name="en-us_task_0000001196932245_fig_dc_vrp_seamless_mpls_cfg_003102"></a><span class="figcap"><b>Figure 1 </b>Configuring a BGP virtual link</span><br><span><img class="vsd" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_image177187631214047" src="figure/en-us_image_0000001173355208.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001241440579__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_context706293176214038"><h4 class="sectiontitle">Precautions</h4><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1751559194214038">To improve security, you are advised to deploy BGP security measures. For details, see "Configuring BGP Security." Keychain authentication is used as an example. For details, see "Example for Configuring BGP Keychain."</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001241440579__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_context794131978214050"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p219191591214050">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_ol128251040214050"><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li276296834214050"><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p861244224214050"><a name="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li276296834214050"></a><a name="en-us_task_0000001196932245_li276296834214050"></a>Assign an IPv6 address to each interface on DeviceA through DeviceE.</p>
</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li2115320615214050"><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p601800220214050"><a name="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li2115320615214050"></a><a name="en-us_task_0000001196932245_li2115320615214050"></a>Enable IS-IS, configure an IS-IS level, and specify a network entity title (NET) for DeviceC and DeviceD.</p>
</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li279477557214050"><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p632564510214050"><a name="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li279477557214050"></a><a name="en-us_task_0000001196932245_li279477557214050"></a>Configure a VPN instance on DeviceC and DeviceD.</p>
</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li94543319815">Establish an IBGP peer relationship between DeviceC and DeviceD.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li14864247181510">Establish an EBGP peer relationship between DeviceB and DeviceC and another one between DeviceD and DeviceE.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li9562456181615">Configure SRv6 SIDs and IS-IS SRv6 and configure VPN routes to carry the SID attribute on DeviceC and DeviceD.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li155511014101819">Configure an SRv6 TE Policy on DeviceC and DeviceD.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li01297304185">Configure a tunnel policy on DeviceC and DeviceD to import VPN traffic.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li158312564182">Establish an EBGP peer relationship between DeviceB and DeviceE.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li0422191013410">Configure a VPN instance on DeviceA and DeviceE.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li427316151248">Establish an EBGP peer relationship between DeviceA and DeviceE.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li143811319349">Configure SRv6 SIDs and enable IS-IS SRv6 on DeviceA, DeviceB, and DeviceE. Configure VPN routes to carry the SID attribute on DeviceA and DeviceE.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li74617231448">Configure the BGP EPE and virtual link functions on DeviceB and DeviceE.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li16914283410">Configure an SRv6 TE Policy on DeviceA and DeviceE.</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li1069175818417">Configure a tunnel policy on DeviceA and DeviceE to import VPN traffic.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001241440579__1.4.4"></a><a name="1.4.4"></a>
<div class="p" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_context2109037058214050"><h4 class="sectiontitle">Data Preparation</h4><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1570572859214050">To complete the configuration, you need the following data:</p>
<ul id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_ul2127187578214050"><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li2095383366214050">IPv6 addresses of interfaces on DeviceA through DeviceE</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li834390237214050">IS-IS process IDs and levels on DeviceA through DeviceD</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li1147234815411">VPN instance names, RDs, and RTs on DeviceA, DeviceE, DeviceC, and DeviceD</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001241440579__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_steps1015285432214050"><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step884221515196"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd1384241591913">Configure IPv6 addresses and enable IPv6 forwarding for interfaces.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p2590954154618"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen65901454194616">&lt;DeviceA&gt; <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15590185413465">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword359012549465"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18590754104617">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b95901154204617">gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword7591454174614"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b559155434611">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1591254124610">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b115911554154615">ipv6 address 2001:db8:44::1/96</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword155911654104612">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1959175417466">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword15591654204616">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19591125454610">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6591185494617">loopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword145910547467">*</span>DeviceA-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b75911654164616">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6591185444614">*</span>DeviceA-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b75917549464">ipv6 address 2001:db8:1::1/128</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword145911454144617">*</span>DeviceA-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b135914542463">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1259175444618"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b35913547469">quit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p113746422511"># Configure DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen6374642165113">&lt;DeviceB&gt; <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1437414235119">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword550115228536"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14501222125314">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b11501822165314">gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword9501822135319"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b13501112215310">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10313104111138">*</span>DeviceB-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b35011422175315">ipv6 address 2001:db8:11::1/96</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword115013229537">*</span>DeviceB-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b3501142219536">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword187675144719"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17767131411713">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b137673144714">gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword9767121413720"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b976717141717">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1576751418714">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1676720141172">ipv6 address 2001:db8:44::2/96</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1776711141574">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b97681014878">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword837517425516">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b163751542205116">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15375242145111">loopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword133754424510">*</span>DeviceB-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1237574285120">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword5375442135113">*</span>DeviceB-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b3375114210517">ipv6 address 2001:db8:2::2/128</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword8375342165117">*</span>DeviceB-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b737554245111">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword12375174275110"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7375204225110">quit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p173068811400"># Configure DeviceC.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen13064834010">&lt;DeviceC&gt; <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b0306188124012">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1730610812402"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1562461215818">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17306158194011">gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19306108134018"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15306184404">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword8450947131310">*</span>DeviceC-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b13306128134018">ipv6 address 2001:db8:22::1/96</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword330708154012">*</span>DeviceC-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b4307198154016">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1713245914132">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b103069894019">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b430658134010">gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword183625118144">*</span>DeviceC-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1930618814013">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword4333113111412">*</span>DeviceC-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1730610818402">ipv6 address 2001:db8:11::2/96</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword73067884019">*</span>DeviceC-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b123062844013">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword16307088406">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1730738134020">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b73071819409">loopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword630714810405">*</span>DeviceC-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1430713854016">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword730798194014">*</span>DeviceC-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b830738144013">ipv6 address 2001:db8:3::3/128</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword23072812405">*</span>DeviceC-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1030710814016">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword193072814401"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8307286408">quit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p117018133242"># Configure DeviceD.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen11191455293">&lt;DeviceD&gt; <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7191125192919">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14191125112914"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b173061641123411">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1030620414346">gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1830694193419"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2306104111346">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1694231161411">*</span>DeviceD-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b530674113416">ipv6 address 2001:db8:33::1/96</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword430664110349">*</span>DeviceD-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1430611419349">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword207479142140">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1875541819617">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b41913592911">gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword131134175147">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b819116522915">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword949232018147">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b151911255296">ipv6 address 2001:db8:22::2/96</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword41919502918">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b819119520293">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1819118572913">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1719175162916">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1619114515291">loopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword5191359293">*</span>DeviceD-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b71918511291">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword101911532917">*</span>DeviceD-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1019165102916">ipv6 address 2001:db8:4::4/128</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword12191757291">*</span>DeviceD-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19191651295">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10191185152918"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1519118552917">quit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p19272842112813"># Configure DeviceE.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen470161317248">&lt;DeviceE&gt; <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b147071332411">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword770131313245"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10701713172412">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b177091352418">gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword332148112510"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19154101813250">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1873011297144">*</span>DeviceE-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b118521331152516">ipv6 address 2001:db8:33::2/96</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1870813152410">*</span>DeviceE-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14701135246">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword67010138242">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14701513102418">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b57181352413">loopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword794041915276">*</span>DeviceE-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12721329172717">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword149021920122717">*</span>DeviceE-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17766203642711">ipv6 address 2001:db8:5::5/128</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword107101382411">*</span>DeviceE-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5711213122418">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword271313162410"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b371313152412">quit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1688653817250">The interfaces that directly connect the devices can ping each other, but the devices cannot ping each other's loopback interface.</p>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step127257768214050"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd2075078011214050">Configure IS-IS.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p3791825104913"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen9791325134919">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword77917258492"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b179152564910">isis 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2791192513494">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1479113256491">is-level level-1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword157918255493">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b479142534914">cost-style wide</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14791192510491">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1779115259490">network-entity 10.0000.0000.0001.00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword67911325104918">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10791102574918">ipv6 enable topology ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword61711746173718">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15171174611378">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14560338203511">*</span>DeviceA]<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19560338103517"> interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b85604381354">gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1256010384355">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>]<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5560183843513"> isis ipv6 enable 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword956023813354">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b0560173813355">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1356023812351">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15560438103515">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2560113863518">loopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword115601438143515">*</span>DeviceA-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16560938163510">isis ipv6 enable 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18561113813354">*</span>DeviceA-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b956115389352">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword147911525144914">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b279172512492">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p26151010123217"># Configure DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen773015513277">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword47301851102714"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17350131820138">isis 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword7607851161413">*</span>DeviceB-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b151174061010">is-level level-1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword198055411141">*</span>DeviceB-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7529754151415">cost-style wide</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword147304519273">*</span>DeviceB-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b26795143156">network-entity 10.0000.0000.0002.00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19511023122918">*</span>DeviceB-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16271101271616">ipv6 enable topology ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14658055113011">*</span>DeviceB-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b346642103120">ipv6 import-route bgp level-1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14430359181410">*</span>DeviceB-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1973119512277">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword3563418173810">*</span>DeviceB]<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b4563171811384"> interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b9563718123817">gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword156331823811">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>]<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b132045358382"> isis ipv6 enable 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword05634189383">*</span>DeviceB-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b20563131818387">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword17764184795616">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1476544755611">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b676143571019">loopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword0765347125614">*</span>DeviceB-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8765174785613">isis ipv6 enable 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword67659473564">*</span>DeviceB-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1765194712563">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword135670315314">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b125541721304">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1984815012202"># Configure DeviceC.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen16848150132010">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1884890182014"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1784817092012">isis 1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1617761553">00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1477521910152">*</span>DeviceC-isis-100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b188231612135512">is-level level</strong>-<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14212898551">2</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword73861116151512">*</span>DeviceC-isis-100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b58483022011">cost-style wide</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword284840172015">*</span>DeviceC-isis-100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1684818017209">network-entity 20.0000.0000.0001.00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1884812012015">*</span>DeviceC-isis-100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19848405205">ipv6 enable topology ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1256615252312">*</span>DeviceC-isis-100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b28486020200">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1313122844320">*</span>DeviceC]<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1041615804310"> interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b041611818438">gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2496204417433">*</span>DeviceC-GigabitEthernet<span>0/1/0</span>]<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1610110551432"> isis ipv6 enable 1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17577155212">00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword64361457432">*</span>DeviceC-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b26079114448">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1386543620468">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14865113674611">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12865163617468">loopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword271984913464">*</span>DeviceC-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1016712590460">isis ipv6 enable 1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b0751163217524">00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword156992874712">*</span>DeviceC-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1638321394716">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword132981328193112">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b158481305209">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p15869185392017"># Configure DeviceD.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen17869115342013">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword174362121615"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1374342171615">isis 1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b61506496535">00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword438316302151">*</span>DeviceD-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5743142151617">is-level level-2</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword715013312157">*</span>DeviceD-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2074312212160">cost-style wide</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18743102101618">*</span>DeviceD-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b274342101611">network-entity 20.0000.0000.0002.00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword174312151615">*</span>DeviceD-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1874311211167">ipv6 enable topology </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b471929185520">ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword167431621171616">*</span>DeviceD-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18743172114164">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword17743102114164">*</span>DeviceD]<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b3743162113162"> interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1974312119168">gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1474372113168">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>]<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1974342115163"> isis ipv6 enable 1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6231165215315">00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword574302191619">*</span>DeviceD-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8743102141614">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword0743102114161">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b874332114162">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b274319210164">loopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1874319218167">*</span>DeviceD-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b974319216167">isis ipv6 enable 1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1818135414539">00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword4743121151618">*</span>DeviceD-LoopBack1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5743102181613">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword147431421161613">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b074392119167">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p10760183116311">After the configuration is complete, perform the following operations to check whether IS-IS is successfully configured.</p>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p18680185619315"># Display IS-IS neighbor information. DeviceC is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen220706858214049">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1995759365214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1155582401214049">display isis peer</strong>

                          Peer information for ISIS(100)

  System Id     Interface          Circuit Id        State HoldTime Type     PRI
--------------------------------------------------------------------------------
0000.0000.0002* GE<span>0/1/0</span>            0000.0000.0002.02  Up   28s      L2       64

Total Peer(s): 1</pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p105321618152117"># Display IS-IS routing table information. DeviceC is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen953291813217">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword75321185211"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1689835411321">display isis route</strong>

                        ISIS(100) Level-2 Forwarding Table
                        --------------------------------

 IPV6 Dest.     ExitInterface      NextHop                    Cost     Flags
--------------------------------------------------------------------------------
2001:db8:3::3/1 Loop1              Direct                     0        D/-/L/-
28
2001:db8:4::4/1 GE<span>0/1/0</span>            FE80::865B:12FF:FE75:E73D  10       A/-/-/-
28
2001:db8:11::/9 GE<span>0/2/0</span>            Direct                     10       D/-/L/-
6
2001:db8:22::/9 GE<span>0/1/0</span>            Direct                     10       D/-/L/-
6
     Flags: D-Direct, A-Added to URT, L-Advertised in LSPs, S-IGP Shortcut,
            U-Up/Down Bit Set, LP-Local Prefix-Sid
     Protect Type: L-Link Protect, N-Node Protect</pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step11005123347"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd17100171293412">Create a VPN instance and configure the IPv6 address family capability for it on DeviceC and DeviceD, and implement access of DeviceB to DeviceC and access of DeviceE to DeviceD.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p91004125349"># Configure DeviceC.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen11100141253420">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2010081233419"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14509155719265">ip vpn-instance vrftest</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword92113274318">*</span>DeviceC-vpn-instance-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b71876113277">ipv6-family</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword77556284316">*</span>DeviceC-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1578123102714">route-distinguisher 1:1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18533163003117">*</span>DeviceC-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b568936192710">vpn-target 100:1 export-extcommunity</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18522143218310">*</span>DeviceC-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b3482212122712">vpn-target 100:1 import-extcommunit</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b116912035142712">y</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword948519345315">*</span>DeviceC-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1612644082715">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18181240123115">*</span>DeviceC-vpn-instance-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16483125852710">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1847410421310">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b4103848173015">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5104448153010">gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword5888114423113">*</span>DeviceC-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1885996318214049">ip binding vpn-instance vrftest</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2029911286324">*</span>DeviceC-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10164631113219">quit</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword181835326164">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1128873472819">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p0988154918286"># Configure DeviceD.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen19988249182815">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword59889491289"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b098844915283">ip vpn-instance vrftest</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword155117741620">*</span>DeviceD-vpn-instance-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b179899490281">ipv6-family</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword32581599169">*</span>DeviceD-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7989164917286">route-distinguisher 1:1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11508141121615">*</span>DeviceD-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7989164911289">vpn-target 100:1 export-extcommunity</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword194733132163">*</span>DeviceD-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b9989194952810">vpn-target 100:1 import-extcommunit</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6989049152819">y</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19930715151614">*</span>DeviceD-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2989149162816">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword163981801619">*</span>DeviceD-vpn-instance-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19989949152816">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword141311220131620">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18934338113218">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16934238203212">gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword149341638143210">*</span>DeviceD-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15934143863213">ip binding vpn-instance vrftest</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword993413816326">*</span>DeviceD-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14934838173219">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword148761427121615">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b198916494289">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step016519421015"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd216611421809">Establish an IBGP peer relationship between DeviceC and DeviceD.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1416664210016"># Configure DeviceC.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen3166542804">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword33019311715"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b41663424011">bgp 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14713175753913">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15713155783912">router-id 2.22.2.2</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword161662421102">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10166942907">peer 2001:db8:4::4 </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b531344914213">as-number 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1828285317217">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b28320214313">peer 2001:db8:4::4 connect-interface LoopBack1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword13166114211011">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12905756135915">ipv6-family vpnv6</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword516615421904">*</span>DeviceC-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1816694220011">peer 2001:db8:4::4</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b151664421301">enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword3166154214015">*</span>DeviceC-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b201667421408">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword105916381801">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b015194619014">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword416614421708">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b416674211015">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p916614211019"># Configure DeviceD.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen516694214016">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword526916161710"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b96336543014">bgp 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword648413186503">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8484118135019">router-id 3.33.3.3</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword196333541802">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b136331654001">peer 2001:db8:3::3 </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18633854301">as-number 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword16633185419015">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b116336542010">peer 2001:db8:3::3 connect-interface LoopBack1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1663465417014">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8634145412015">ipv6-family vpnv6</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword5634195416010">*</span>DeviceD-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b116342546014">peer 2001:db8:3::3</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b104630456117"> </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b86341354501">enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11634105415010">*</span>DeviceD-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8634115419018">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword663414541808">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b4634254508">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword176341054909">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b163417541305">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1413419327327">After the configuration is complete, run the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8767564613">display bgp vpnv6 all peer</strong> command on DeviceC. The command output shows that the IBGP peer relationship between DeviceC and DeviceD is in Established state.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen13951728141118">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword112521414201311"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1479917431116">display bgp vpnv6 all peer</strong>

 BGP local router ID : 2.22.2.2
 Local AS number : 100
 Total number of peers : 1                 Peers in established state : 1

  Peer                             V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv
  2001:db8:4::4                    4         100       37       40     0 00:29:43 Established        0</pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step421910282069"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd52195280616">Establish an EBGP peer relationship between DeviceB and DeviceC and another one between DeviceD and DeviceE.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p33187501615"># Configure DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen179254151469">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10319164261614"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6925151574614">bgp 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword4925815114612">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b139251415184612">router-id 1.11.1.1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10925181594613">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b89251915174617">peer 2001:db8:11::2 as-number 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword119256155460">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b20294135518384">ipv6-family unicast</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword139251157461">*</span>DeviceB-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b139251115164619">peer 2001:db8:11::2</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b892517152462">enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword41211259105719">*</span>DeviceB-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6334849589">network 2001:db8:2::2 128</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1692531524611">*</span>DeviceB-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b109251815174610">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword8659123212394">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b348013813393">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11925161513461">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b119257156465">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p971325723913"># Configure DeviceC.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1871345773918">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword13513745161614"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1713175713917">bgp 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword471345716392">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7563142254212">ipv6-family vpn-instance vrftest</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1471151113442">*</span>DeviceC-bgp-6-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b77132057143919">peer 2001:db8:11::1 as-number 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19714125719391">*</span>DeviceC-bgp-6-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1271425713916">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword147141657153915">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2071475711393">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6714125714397">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b11714175719392">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p4482131817509"># Configure DeviceD.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen174820180506">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword379944851612"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b13484191815014">bgp 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1948415183500">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b13484201816501">ipv6-family vpn-instance vrftest</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2484131813507">*</span>DeviceD-bgp-6-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5484618185012">peer 2001:db8:33::2 as-number 300</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword3484101815015">*</span>DeviceD-bgp-6-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b194843188509">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword20484141813508">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15484121811507">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword5484131865011">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1848412184504">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p2048219183502"># Configure DeviceE.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen470932925011">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1770310519166"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7482171815017">bgp 300</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword048251825016">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16482181845017">router-id 4.44.4.4</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword104822018175020">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b348241845014">peer 2001:db8:33::1 as-number 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword348211817509">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b248211181509">ipv6-family unicast</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword3482161835013">*</span>DeviceE-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b94823188502">peer 2001:db8:33::1</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b3482818185012">enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword947716114498">*</span>DeviceE-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b650417185495">network 2001:db8:5::5 128</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword54825181507">*</span>DeviceE-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b34821189509">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword44828181505">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b124826182503">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19482141818501">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b448241855018">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p332113501669">After the configuration is complete, run the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1838842812712">display bgp vpnv6 vpn-instance peer</strong> command to check whether a BGP peer relationship has been established between DeviceB and DeviceC, and between DeviceD and DeviceE. If the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b13931728074">Established</strong> state is displayed in the command output, the BGP peer relationship has been established successfully.</p>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p183213506617">DeviceC is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen032114501869">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword183211501263"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2321165010616">display bgp vpnv6 vpn-instance vrftest peer</strong>

 BGP local router ID : 2.22.2.2
 Local AS number : 100
 Total number of peers : 1                 Peers in established state : 1

  VPN-Instance vrftest, Router ID 2.22.2.2:
  Peer                             V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv
  2001:db8:11::1                   4         200        7        5     0 00:02:29 <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19738735171212">Established</strong>       1</pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step11146746103"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd11464411013">Configure SRv6 SIDs and configure VPN routes to carry the SID attribute on DeviceC and DeviceD.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p91463416105"># Configure DeviceC.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen11146648100">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1522962861214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b343872987214049">segment-routing ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword5473351133613">*</span>DeviceC-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b0853548042">encapsulation source-address 2001:db8:3::3</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword117794997214049">*</span>DeviceC-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b109351371546">locator locator1 ipv6-prefix 2001:db8:333:: 64 static 32</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19840643122720">*</span>DeviceC-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5666523241">opcode 2001:db8:333::333 end psp</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword188193685214049">*</span>DeviceC-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b144765658214049">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword299971128214049">*</span>DeviceC-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1468729786214049">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword233645018214049">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1886328726214049">bgp 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword66340115214049">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2130869178214049">ipv6-family vpnv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1291307561214049">*</span>DeviceC-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b829973909214049">peer 2001:db8:4::4 prefix-sid</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword186214417259">*</span>DeviceC-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1692613331214049">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1199453229214049">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1554431693214049">ipv6-family vpn-instance vrftest</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword129795247214049">*</span>DeviceC-bgp-6-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b673103711472">segment-routing ipv6</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b197363774712"> </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b207413374474">traffic-engineer</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18741837114719"> best-effort</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1443911117214049">*</span>DeviceC-bgp-6-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7580174465512">segment-routing ipv6 locator locator1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1515912715171">*</span>DeviceC-bgp-6-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1564987976214049">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword791922871713">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1800031501214049">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword8367203131711">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1769292768214049">isis 1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1242635688">00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword21598330173">*</span>DeviceC-isis-100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1841370008214049">segment-routing ipv6 locator locator1</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b469414111394">auto-sid-disable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18939162021216">*</span>DeviceC-isis-100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b693992001210">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword893942071219">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b593942018122">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p158681728161511"># Configure DeviceD.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1086802812156">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword78682286150"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b0868142815153">segment-routing ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword20868122819155">*</span>DeviceD-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1186852819151">encapsulation source-address 2001:db8:4::4</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword16868152821518">*</span>DeviceD-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1148373512202">locator locator1 ipv6-prefix 2001:db8:444:: 64 static 32</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword13868728121519">*</span>DeviceD-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1395754316204">opcode 2001:db8:444::444 end psp</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1586915286158">*</span>DeviceD-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b886932813155">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1986918280154">*</span>DeviceD-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b108691828131511">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword168694283152">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b886982815159">bgp 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword68691928121518">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1686912810154">ipv6-family vpnv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2086913287153">*</span>DeviceD-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b186992831516">peer 2001:db8:3::3 prefix-sid</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword78691628201520">*</span>DeviceD-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15869228181512">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword4869202841519">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b188691328101519">ipv6-family vpn-instance vrftest</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19869122811150">*</span>DeviceD-bgp-6-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b9869628101511">segment-routing ipv6</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2869628151515"> </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14869132814155">traffic-engineer</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14869028101512"> best-effort</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1486932891518">*</span>DeviceD-bgp-6-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b386952841510">segment-routing ipv6 locator locator1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword82551241111717">*</span>DeviceD-bgp-6-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1286952814151">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword732184391713">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b88691728101520">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11836104410178">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1286916282159">isis 1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19217115119160">00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword59551846191714">*</span>DeviceD-isis-100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b986992871517">segment-routing ipv6 locator locator1</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18111043201714">auto-sid-disable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword887012841519">*</span>DeviceD-isis-100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18870122841510">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword987011288152">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19870182821516">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p0416157121916">Run the <a href="cmdqueryname=display+segment-routing+ipv6+local-sid+end+forwarding"><b><span class="cmdname" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmdname900285870214049">display segment-routing ipv6 local-sid</span></b></a> <strong><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmdparmname1866132792214049">end</span></strong> <strong><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmdparmname1198031573214049">forwarding</span></strong> command to check information about the SRv6 local SID table.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1538645125214049">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1030288653214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1212516767214049">display segment-routing ipv6 local-sid end forwarding</strong>


                    My Local-SID End Forwarding Table
                    ---------------------------------

SID         : 2001:db8:333::333/128                        FuncType    : End
Flavor      : PSP
LocatorName : locator1                                     LocatorID   : 2
ProtocolType: STATIC                                       ProcessID   : --
UpdateTime  : 2022-02-11 17:06:25.197

Total SID(s): 1</pre>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1689155016498">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1737475716493"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b4375257164914">display segment-routing ipv6 local-sid end forwarding</strong>


                    My Local-SID End Forwarding Table
                    ---------------------------------

SID         : 2001:db8:444::444/128                        FuncType    : End
Flavor      : PSP
LocatorName : locator1                                     LocatorID   : 1
ProtocolType: STATIC                                       ProcessID   : --
UpdateTime  : 2022-02-11 17:08:23.955

Total SID(s): 1</pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step55775211252"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd1557711219253">Configure an SRv6 TE Policy.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p19903310112620"># Configure DeviceC.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen12903121082616">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14903151012617"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b190341018269">segment-routing ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword990381012612">*</span>DeviceC-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b74506366265">segment-list s1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword12903910172617">*</span>DeviceC-segment-routing-ipv6-segment-list-s1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19311719765">index 5 sid ipv6 2001:db8:444::444</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19031010102614">*</span>DeviceC-segment-routing-ipv6-segment-list-s1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14903171092619">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword12682192318482">*</span>DeviceC-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1368212234484">srv6-te-policy locator locator1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword490371072611">*</span>DeviceC-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1753814516277">srv6-te policy policy1 endpoint </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b13153624183113">2001:db8</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b81532240314">:4::4</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b13538751162715"> color 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword205825336139">*</span>DeviceC-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6648163255617">candidate-path preference 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword82421235161317">*</span>DeviceC-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2500193455616">segment-list s1</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6951133771318">*</span>DeviceC-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b156922385566">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19819173941314">*</span>DeviceC-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12508840135619">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword425817418136">*</span>DeviceC-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8120184255617">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword69041210152613">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1904181017266">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p17904010102610"># Configure DeviceD.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1090471018260">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19173835172916"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10173113518295">segment-routing ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2017393519292">*</span>DeviceD-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18173335162910">segment-list s1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword31741835122919">*</span>DeviceD-segment-routing-ipv6-segment-list-s1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b541822392618">index 5 sid ipv6 2001:db8:333::333</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2174153511296">*</span>DeviceD-segment-routing-ipv6-segment-list-s1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16174133562914">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1017173444810">*</span>DeviceD-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17171133404816">srv6-te-policy locator locator1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword9174235202911">*</span>DeviceD-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16174113512916">srv6-te policy policy1 endpoint </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1317473516293">2001:db8:3::3</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1317493542920"> color 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18902104301319">*</span>DeviceD-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2017414351295">candidate-path preference 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2095194518132">*</span>DeviceD-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b017403513299">segment-list s1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1729212462133">*</span>DeviceD-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12174535122916">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword4364501135">*</span>DeviceD-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b517416356290">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword7562125111138">*</span>DeviceD-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b517443522911">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10174103542914">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b81745358294">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1390614102261">After the configuration is complete, run the <a href="cmdqueryname=display+srv6-te+policy"><b><span class="cmdname" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmdname336167155910">display srv6-te policy</span></b></a> command to check SRv6 TE Policy information.</p>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p19477131613318">DeviceC is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1938003693313">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1311914091419"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19181852205919">display srv6-te policy</strong>
PolicyName : policy1
Color                   : 200                            Endpoint             : 2001:db8:4::4
TunnelId                : 21                             
TunnelType              : SRv6-TE Policy                 DelayTimerRemain     : -
Policy State            : Up                             State Change Time    : 2022-02-11 17:09:59
Admin State             : Up                             Traffic Statistics   : Disable
Backup Hot-Standby      : Disable                        BFD                  : Disable
Interface Index         : -                              Interface Name       : -
Interface State         : -                              Encapsulation Mode   : Insert
Binding SID             : -
Candidate-path Count    : 1

 Candidate-path Preference : 100
 Path State             : Active                         Path Type            : Primary
 Protocol-Origin        : Configuration(30)              Originator           : 0, 0.0.0.0
 Discriminator          : 100                            Binding SID          : -
 GroupId                : 21                             Policy Name          : policy1
 Template ID            : 0                              Path Verification    : Disable
 DelayTimerRemain       : -                              Network Slice ID     : -
 Segment-List Count     : 1
  Segment-List          : s1
   Segment-List ID      : 21                             XcIndex              : 21
   List State           : Up                             DelayTimerRemain     : -
   Verification State   : -                              SuppressTimeRemain   : -
   PMTU                 : 9600                           Active PMTU          : 9600
   Weight               : 1                              BFD State            : -
   Loop Detection State : Up                             BFD Delay Remain     : - 
   Network Slice ID     : -
   Binding SID          : -
   Reverse Binding SID  : -
   SID :
         2001:db8:444::444</pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step078819501253"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd678812502257">Configure a tunnel policy to import VPN traffic.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p126925131116"># Configure DeviceC.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen116091636219">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1031114731412"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1926512510413">route-policy RP1 permit node 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword17220173411511">*</span>DeviceC-route-policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6759842101611">apply extcommunity color 0:200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword66851335181516">*</span>DeviceC-route-policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10284191248">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword132861137141511">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17372111111415">bgp 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword715013918152">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1534613131042">ipv6-family vpnv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19469540101519">*</span>DeviceC-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6380716344">peer 2001:db8:4::4 route-policy RP1 import</strong>      
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword20811426157">*</span>DeviceC-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6342111911410">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1534334320156">*</span>DeviceC-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b94402225413">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword96161544131516">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b22871525841">tunnel-policy tnl_policy</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword286010459152">*</span>DeviceC-tunnel-policy-tnl_policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1736072915410">tunnel select-seq ipv6 srv6-te-policy load-balance-number 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18754154716156">*</span>DeviceC-tunnel-policy-tnl_policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b29650375419">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword13145165110152">*</span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b114379411349">ip vpn-instance vrftest</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword344865261514">*</span>DeviceC-vpn-instance-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1655911445416">ipv6-family</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword153185310151">*</span>DeviceC-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b155056471413">tnl-policy tnl_policy</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword118091354101516">*</span>DeviceC-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b0263350547">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword84433333149"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b395719511843">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword9251183519144"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC-vpn-instance-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7607454642">quit</strong></pre>
</p><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p786008250"># Configure DeviceD.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen188601281259">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1871916931416"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6860988512">route-policy RP1 permit node 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword872905714154">*</span>DeviceD-route-policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b128601981514">apply extcommunity color 0:200</strong>        
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword136061108166">*</span>DeviceD-route-policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b686016812516">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword26532221612">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b198613811510">bgp 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10284411165">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2014811224407">ipv6-family vpnv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10218155171611">*</span>DeviceD-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b68616819513">peer 2001:db8:3::3 route-policy RP1 import</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword164898716162">*</span>DeviceD-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b186210813518">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14683988168">*</span>DeviceD-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1086278551">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11515111012161">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1186278155">tunnel-policy tnl_policy</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword76313129168">*</span>DeviceD-tunnel-policy-tnl_policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b686328858">tunnel select-seq ipv6 srv6-te-policy load-balance-number 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10637131341619">*</span>DeviceD-tunnel-policy-tnl_policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b198631483511">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword519921591615">*</span>DeviceD] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19863989512">ip vpn-instance vrftest</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword13367916181616">*</span>DeviceD-vpn-instance-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b539517304412">ipv6-family</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword34481319131616">*</span>DeviceD-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b78644814513">tnl-policy tnl_policy</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword67451220171614">*</span>DeviceD-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b88641686519">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword386553861415"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-vpn-instance-vrftest-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b188651784519">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword355111407143"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceD-vpn-instance-vrftest] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b188651081553">quit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p178942562268">Check whether the loopback interfaces on DeviceB and DeviceE can ping each other.</p>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1631610112331">DeviceB is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen011241763312">&lt;DeviceB&gt;<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b322073516335">ping ipv6 -a 2001:db8:2::2  2001:db8:5::5</strong>
  PING 2001:db8:5::5 : 56  data bytes, press CTRL_C to break
    Reply from 2001:db8:5::5
    bytes=56 Sequence=1 hop limit=62 time=12 ms
    Reply from 2001:db8:5::5
    bytes=56 Sequence=2 hop limit=62 time=2 ms
    Reply from 2001:db8:5::5
    bytes=56 Sequence=3 hop limit=62 time=2 ms
    Reply from 2001:db8:5::5
    bytes=56 Sequence=4 hop limit=62 time=2 ms
    Reply from 2001:db8:5::5
    bytes=56 Sequence=5 hop limit=62 time=2 ms

  --- 2001:db8:5::5 ping statistics---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max=2/4/12 ms</pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p650420353312">After the configuration is complete, run the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b158362514194">display ipv6 routing-table vpn-instance vrftest</strong> command to check the routing table of the VPN instance. The command output shows that VPN routes have successfully recursed to the SRv6 TE Policy.</p>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p37977291269">DeviceC is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen12526215973">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1161281821417"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1549116326457">display ipv6 routing-table vpn-instance vrftest</strong>
Routing Table : vrftest
         Destinations : 5        Routes : 5

Destination  : 2001:db8:2::2                           PrefixLength : 128
NextHop      : 2001:db8:11::1                          Preference   : 255
Cost         : 0                                       Protocol     : EBGP
RelayNextHop : 2001:db8:11::1                          TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/0</span>                    Flags        : RD

Destination  : 2001:db8:5::5                           PrefixLength : 128
NextHop      : 2001:db8:4::4                           Preference   : 255
Cost         : 0                                       Protocol     : IBGP
RelayNextHop : ::                                      TunnelID     : 0x000000003400000015
Interface    : <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1278294642010">policy1</strong>                                 Flags        : RD

Destination  : 2001:db8:11::                           PrefixLength : 96
NextHop      : 2001:db8:11::2                          Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/0</span>                    Flags        : D

Destination  : 2001:db8:11::2                          PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/1/0</span>                    Flags        : D

Destination  : FE80::                                  PrefixLength : 10
NextHop      : ::                                      Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : NULL0                                   Flags        : DB</pre>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1192172413716">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword13507822161413"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceC] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1957685612710">display ipv6 routing-table vpn-instance vrftest 2001:db8:5::5 verbose</strong>
Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route
------------------------------------------------------------------------------
Routing Table : vrftest
Summary Count : 1

Destination  : 2001:db8:5::5                           PrefixLength : 128
NextHop      : 2001:db8:4::4                           Preference   : 255
Neighbour    : 2001:db8:4::4                           ProcessID    : 0
Label        : 3                                       Protocol     : IBGP
State        : Active Adv Relied                       Cost         : 0
Entry ID     : 0                                       EntryFlags   : 0x00000000
Reference Cnt: 0                                       Tag          : 0
Priority     : low                                     Age          : <span>224sec</span>
IndirectID   : 0x2000306                               Instance     :
RelayNextHop : ::                                      TunnelID     : 0x000000003400000015
Interface    : <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16193194162114">policy1</strong>                                 Flags        : RD
RouteColor   : 0                                       QoSInfo      : 0x0</pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step17503119133916"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd1050321913915">Establish an EBGP peer relationship between DeviceB and DeviceE.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1350419194394"># Configure DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen2504121993911">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18513161318191"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18504111920391">bgp 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14504201923918">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b205045198398">peer 2001:db8:5::5 as-number 300</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword109734644113">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b865111120417">peer 2001:db8:5::5</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b46471724125812">ebgp-max-hop 255</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1124591993317">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1724364633315">peer 2001:db8:5::5 connect-interface LoopBack1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword13882161212570">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16947192135715">ipv6-family unicast</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1947421135713">*</span>DeviceB-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b78801239115714">peer 2001:db8:5::5</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18880539115712">enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword127255895611">*</span>DeviceB-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b514391219583">network 2001:db8:1::1 128</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword299892125814">*</span>DeviceB-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5105497580">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword550481913392">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b20504121916397">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword4504151919395">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b450491943918">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1850613198398"># Configure DeviceE.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen6506919173915">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword66194166191"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b11506171913396">bgp 300</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword135061719153916">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6506181914390">peer 2001:db8:2::2 as-number 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10824233194317">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b29869373434">peer 2001:db8:2::2 ebgp-max-hop 255</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword9557858123614">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15727173143720">peer 2001:db8:2::2</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1864357133716"> connect-interface LoopBack1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword830292115817">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b830212135815">ipv6-family unicast</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1430292115812">*</span>DeviceE-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b103021321195813">peer 2001:db8:2::2</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b93021221105810">enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18302142113584">*</span>DeviceE-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b630292118585">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6506141973910">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b125061519143911">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword3506141914395">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b65071419193919">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p25075195392">After the configuration is complete, run the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b175811272919">display bgp ipv6 peer</strong> command on DeviceB to check whether the EBGP peer relationship between DeviceB and DeviceE has been established. If the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b146442717917">Established</strong> state is displayed in the command output, the EBGP peer relationship has been established successfully.</p>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p15507819133910">DeviceB is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen421711551709">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword132001337990"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b471537163512">display bgp ipv6 peer</strong>

 BGP local router ID : 1.11.1.1
 Local AS number : 200
 Total number of peers : 2                 Peers in established state : 2

  Peer                             V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv
  2001:db8:5::5                    4         300        5        6     0 00:00:24 <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b198501388384">Established</strong>       1
  2001:db8:11::2                   4         100      106      107     0 01:28:52 Established        1</pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step15117227193213"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd5117142716322">Create a VPN instance and configure the IPv6 address family capability for it on DeviceA and DeviceE.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1011742720324"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen7117182714328">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword151171127123219"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12117102712326">ip vpn-instance vrf</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword311714277324">*</span>DeviceA-vpn-instance-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b20117132763219">ipv6-family</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword61175277327">*</span>DeviceA-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b81171827103219">route-distinguisher </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b156971592422">1:21</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11171127113211">*</span>DeviceA-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1111717278326">vpn-target 1:4 export-extcommunity</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword19117122710321">*</span>DeviceA-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1117102713321">vpn-target 1:4 import-extcommunit</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b811712716326">y</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword171171127143210">*</span>DeviceA-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b3117152793219">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword151177271322">*</span>DeviceA-vpn-instance-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1711782793219">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11117132703217">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8117152714322">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b4882352173411">loopBack 1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b64861519165313">00</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1211815275328">*</span>DeviceA-LoopBack100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17118627133211">ip binding vpn-instance vrf</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1531175435816">*</span>DeviceA-LoopBack100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19531115405815">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11531554105817">*</span>DeviceA-LoopBack100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b553115455819">ipv6 address 2001:db8:16::1/128</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword71188271320">*</span>DeviceA-LoopBack100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1211892713215">quit</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword43111444171817">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b211813274322">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p2011832714323"># Configure DeviceE.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen111188271326">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18118127153211"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b411822763218">ip vpn-instance vrf</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword54355506187">*</span>DeviceE-vpn-instance-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14118102743218">ipv6-family</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword973115201812">*</span>DeviceE-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1311852733213">route-distinguisher </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b4541172634812">1:21</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword94651254191810">*</span>DeviceE-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b211842713213">vpn-target 1:4 export-extcommunity</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1726845621819">*</span>DeviceE-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2011813272328">vpn-target 1:4 import-extcommunit</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b511852712323">y</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2927657111819">*</span>DeviceE-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15118427173213">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword58091859121814">*</span>DeviceE-vpn-instance-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1118102715321">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1290219220199">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b811813273328">interface</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b711916272328">loopBack 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword17119627143212">*</span>DeviceE-LoopBack100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b911952783215">ip binding vpn-instance vrf</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1461783255510">*</span>DeviceE-LoopBack100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1482414115510">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword9728194525518">*</span>DeviceE-LoopBack100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b54959145614">ipv6 address 2001:db8:15::1/128</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1911972753210">*</span>DeviceE-LoopBack100] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b91191527173213">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2017466191">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1711911279320">commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step10737162284817"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd15737422174816">Establish an EBGP peer relationship between DeviceA and DeviceE.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p273722254817"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen6737132244820">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14737102212480"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b773772214814">bgp 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword159581207300">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2564159123011">router-id 5.55.5.5</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword37371822154819">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18567257194811">peer 2001:db8:5::5 as-number 300</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18737102264811">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6737112210480">peer 2001:db8:5::5</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b373718221481">ebgp-max-hop 255</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword87371522184815">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b13738132204811">peer 2001:db8:5::5 connect-interface LoopBack1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword15738132215483">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1573814224483">ipv6-family vpnv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2738922134816">*</span>DeviceA-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15738822114816">peer 2001:db8:5::5</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1973842217487">enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10738202214482">*</span>DeviceA-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b187381022204815">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword97386220484">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19738622124820">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword873814227487">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b157383222484">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1073810228487"># Configure DeviceE.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen473882224811">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword17738102218486"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b97381122114816">bgp 300</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1073920222489">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10739192214814">peer 2001:db8:1::1 as-number 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword187391422184811">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1973972284812">peer 2001:db8:1::1 ebgp-max-hop 255</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword373922210487">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1173910225485">peer 2001:db8:1::1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b57398227481"> connect-interface LoopBack1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword973917224483">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b137218109512">ipv6-family </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12371131010519">vpnv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword17739622194816">*</span>DeviceE-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b673915223483">peer 2001:db8:1::1</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b137391722124815">enable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword13739122104812">*</span>DeviceE-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b173914224488">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword67394226489">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7739182254818">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword187391322204816">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b117391322154816">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p117405220487">After the configuration is complete, run the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1913721101012">display bgp vpnv6 all peer</strong> command on DeviceA to check whether the EBGP peer relationship between DeviceA and DeviceE has been established. If the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6919721131013">Established</strong> state is displayed in the command output, the EBGP peer relationship has been established successfully.</p>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p19740142224818">DeviceA is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen37405223480">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1086434517914"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b474010222487">display bgp vpnv6 all peer</strong>

 BGP local router ID : 5.55.5.5
 Local AS number : 200
 Total number of peers : 1                 Peers in established state : 1

  Peer                             V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv
  2001:db8:5::5                    4         300        4        4     0 00:00:36 Established        1</pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step14425925466"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd24265217467">Configure SRv6 SIDs and configure VPN routes to carry the SID attribute on DeviceA and DeviceE.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1442615294613"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen4426162144620">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword94261210468"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1042622144610">segment-routing ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2042620211467">*</span>DeviceA-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b11426172104611">encapsulation source-address 2001:db8:1::1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2042612212460">*</span>DeviceA-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b288719105473">locator locator1 ipv6-prefix 2001:db8:100:: 64 static 32</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword7426027468">*</span>DeviceA-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2669273479">opcode 2001:db8:100::111 end psp</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword5195818194717">*</span>DeviceA-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b066619337470">opcode 2001:db8:100:600 end-op</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1342672104618">*</span>DeviceA-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b142610234613">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword24264294614">*</span>DeviceA-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b64262218468">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2426626466">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1542716218468">bgp 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1442732194612">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b13427720465">ipv6-family vpnv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword184271254610">*</span>DeviceA-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b24271621462">peer 2001:db8:5::5 prefix-sid</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword74271220461">*</span>DeviceA-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b13427229461">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword134275204619">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b54276224611">ipv6-family vpn-instance vrf</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword8174778418">*</span>DeviceA-bgp-6-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17743414344">import-route direct</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword154270274619">*</span>DeviceA-bgp-6-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1442719220468">segment-routing ipv6</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b042717212466"> </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b20427182144612">traffic-engineer</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b452225110114">best-effort</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14279216467">*</span>DeviceA-bgp-6-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1427202124619">segment-routing ipv6 locator locator1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1542718234619">*</span>DeviceA-bgp-6-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b042772104610">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword542810210464">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19428132154617">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword042816244610">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15428112124617">isis 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword842817211462">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b114281727463">segment-routing ipv6 locator locator1</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b149061821313">auto-sid-disable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword742819219466">*</span>DeviceA-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b942812154613">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword64289210464">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b164282218468">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p2080573817484"># Configure DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen543415110411">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword16805123894816"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b380563894811">segment-routing ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword480511387486">*</span>DeviceB-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b9805193824810">encapsulation source-address 2001:db8:2::2</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword4805038204810">*</span>DeviceB-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1044174092816">locator locator1 ipv6-prefix 2001:db8:200:: 64 static 32</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword980573874816">*</span>DeviceB-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2806193810483">opcode 2001:db8:200::222 end</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18489143316217">psp</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword3806123824814">*</span>DeviceB-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1806103811483">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword8806163854816">*</span>DeviceB-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7806838134810">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1627123811917">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b380783816489">isis 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword17624841181915">*</span>DeviceB-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1780719385483">segment-routing ipv6 locator locator1</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b123831882313">auto-sid-disable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1480703844811">*</span>DeviceB-isis-1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b580793874810">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword17775917291">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b22943518295">bgp 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword429535114294">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b162951351172919">ipv6-family unicast</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword192952051132911">*</span>DeviceB-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b829515513292">network 2001:db8:100:: 64</strong>  
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1629515115294">*</span>DeviceB-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12295351192914">network 2001:db8:200:: 64</strong>  
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword44741717557">*</span>DeviceB-bgp-af-ipv6]<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b488313416554"> quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6929171775512">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b20929131775520">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword480711381482">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1680743814820">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p2428172134612"># Configure DeviceE.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen194289294618">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword142812184618"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b104285212466">segment-routing ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1142817212461">*</span>DeviceE-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b134287219462">encapsulation source-address 2001:db8:5::5</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18429425468">*</span>DeviceE-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b179728316446">locator as1 ipv6-prefix 2001:db8:555:: 64 static 32</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword13429112104616">*</span>DeviceE-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1839531282917">opcode 2001:db8:555::555 end psp</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1619617294815">*</span>DeviceE-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b49094401388">opcode 2001:db8:555::500 end-op</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword104291274613">*</span>DeviceE-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5429202184616">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword154290274610">*</span>DeviceE-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17429624462">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword342913219465">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b174294219469">bgp 300</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword8163123713310">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b9163173718317">ipv6-family unicast</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword9163173720314">*</span>DeviceE-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b171631937123110">network 2001:db8:555:: 64</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword184293217462">*</span>DeviceE-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7429121461">ipv6-family vpnv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2042917274620">*</span>DeviceE-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b154291322469">peer 2001:db8:1::1 prefix-sid</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword54292020469">*</span>DeviceE-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10429102144614">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1243015234614">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b174304244617">ipv6-family vpn-instance vrf</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1538010158522">*</span>DeviceE-bgp-6-vpna] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b545542195219">import-route direct</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword34308214464">*</span>DeviceE-bgp-6-vpna] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19430192194614">segment-routing ipv6</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b34302213463"> </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b124305212469">traffic-engineer best-effort</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword144301126468">*</span>DeviceE-bgp-6-vpna] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b3430924460">segment-routing ipv6 locator as1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18430192114616">*</span>DeviceE-bgp-6-vpna] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1943019215461">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword13430220464">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19430102104612">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword54301529464">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b943012114615">isis 2</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword74317214461">*</span>DeviceE-isis-2] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b843142114611">segment-routing ipv6 locator as1 auto-sid-disable</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword3431202164611">*</span>DeviceE-isis-2] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b943119274610">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword104311274612">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b134313213465">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1243152124612">Run the <a href="cmdqueryname=display+segment-routing+ipv6+local-sid+end+forwarding"><b><span class="cmdname" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmdname143112219465">display segment-routing ipv6 local-sid</span></b></a> <strong><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmdparmname204311127462">end</span></strong> <strong><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmdparmname1743118294612">forwarding</span></strong> command to check information about the SRv6 local SID table.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1543172194610">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14431192164614"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1043152104617">display segment-routing ipv6 local-sid end forwarding</strong>

                    My Local-SID End Forwarding Table
                    ---------------------------------

SID         : 2001:db8:200::222/128                        FuncType    : End
Flavor      : PSP
LocatorName : locator1                                     LocatorID   : 2
ProtocolType: STATIC                                       ProcessID   : --
UpdateTime  : 2022-02-11 18:03:00.703

Total SID(s): 1</pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step18684643103216"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd12684043193216">Configure the BGP EPE and virtual link functions on DeviceB and DeviceE.</span><p><div class="note" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_note218344616243"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p2825459134516">When configuring BGP EPE, you need to enable the BGP-LS address family. Otherwise, BGP EPE cannot take effect. Route advertisement is not recommended for the virtual link between DeviceB and DeviceE.</p>
</div></div>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p4961122117598"># Configure DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen29610219591">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1581257109"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12352121417177">route-policy rp deny node 10</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1930719456161">*</span>DeviceB-route-policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b9784181719528">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6667146101619">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8834525105317">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword46576914414"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB]<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b179628217594"> bgp 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword195144016596">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b11844135213594">peer 2001:db8:5::5 egress-engineering srv6 locator locator1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword77931159193414">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b97936594344">peer 2001:db8:5::5 virtual-link</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword479305911346">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b67931859113416">peer 2001:db8:5::5 virtual-link te metric 16777215</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword47934595341">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19793759113415">peer 2001:db8:5::5 virtual-link te link administrative group ff</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11793145914343">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b4793195910348">peer 2001:db8:5::5 virtual-link te srlg 4294967295</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6971144102116">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b11662124942115">link-state-family unicast</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword78451941449">*</span>DeviceB-bgp-af-ls] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b62629146417">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword45041019133918">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b450481911398">ipv6-family unicast</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11527162135614">*</span>DeviceB-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2527152165613">peer 2001:db8:5::5</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b552732114562">route-policy rp export</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1850416190395">*</span>DeviceB-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7504919163914">quit</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1742051672017">*</span>DeviceB-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b6963182110593">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10964621195913">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b79642213592">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p16340343241"># Configure DeviceE.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen8340247241">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword87548714107"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1673343715308">route-policy rp deny node 10</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword7222849171620">*</span>DeviceE-route-policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b48051037175314">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1365535051613">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1880511374535">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1580112915441"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b3340104132412">bgp 300</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword113406420246">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b434054122412">peer 2001:db8:2::2 egress-engineering srv6 locator as1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword856282519368">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b45622025163612">peer 2001:db8:2::2 virtual-link</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword9562825203611">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b156242513368">peer 2001:db8:2::2 virtual-link te metric 16777215</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword4562125193613">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1156214259361">peer 2001:db8:2::2 virtual-link te link administrative group ff</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18562162513363">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8563132573611">peer 2001:db8:2::2 virtual-link te srlg 4294967295</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1234013482420">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1934044122419">link-state-family unicast</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword26814541455">*</span>DeviceE-bgp-af-ls] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b9432126967">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword193402413249">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1634013412248">ipv6-family unicast</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1187810213567">*</span>DeviceE-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16269166195614">peer 2001:db8:2::2</strong> <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1054171515616">route-policy rp export</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword63411347244">*</span>DeviceE-bgp-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b113418413244">quit</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword42751424132017">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19341104162413">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword03418442417">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10341124142416">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p2432173619253">After the configuration is complete, run the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5784259112311">display bgp egress-engineering</strong> command to check BGP EPE information. The command output shows SRv6 SID information.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen20879520111719">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword17507151983911"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7878258132518">display bgp egress-engineering</strong>

 Peer Node                     : 2001:db8:5::5
 Peer Adj Num                  : 1
 Local ASN                     : 200
 Remote ASN                    : 300
 Local Router Id               : 1.11.1.1
 Remote Router Id              : 4.44.4.4
 Local Interface Address       : 2001:db8:2::2
 Remote Interface Address      : 2001:db8:5::5
 Usable Locator                : locator1
 <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b157305617612">SRv6 SID                      : 2001:db8:200::1:0:0</strong>
 SRv6 SID (PSP)                : 2001:db8:200::1:0:1
 SRv6 SID (PSP,USP,USD)        : 2001:db8:200::1:0:2
 SRv6 SID (PSP,USP,USD,COC)    : -(ONLY SUPPORT COMPRESS TYPE)
 Nexthop                       : 2001:db8:11::2
 Out Interface                 : GigabitEthernet<span>0/1/0</span>

 Peer Adj                      : 2001:db8:11::2
 Local ASN                     : 200
 Remote ASN                    : 300
 Local Router Id               : 1.11.1.1
 Remote Router Id              : 4.44.4.4
 Interface Identifier          : 24
 Local Interface Address       : 2001:db8:11::1
 Remote Interface Address      : 2001:db8:11::2
 Usable Locator                : locator1
 SRv6 SID                      : 2001:db8:200::1:0:3
 SRv6 SID (PSP)                : 2001:db8:200::1:0:4
 SRv6 SID (PSP,USP,USD)        : 2001:db8:200::1:0:5
 SRv6 SID (PSP,USP,USD,COC)    : -(ONLY SUPPORT COMPRESS TYPE)
 Nexthop                       : 2001:db8:11::2
 Out Interface                 : GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen0439750486">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1879121751019"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1568915543459">display bgp egress-engineering</strong>

 Peer Node                     : 2001:db8:2::2
 Peer Adj Num                  : 1
 Local ASN                     : 300
 Remote ASN                    : 200
 Local Router Id               : 4.44.4.4
 Remote Router Id              : 1.11.1.1
 Local Interface Address       : 2001:db8:5::5
 Remote Interface Address      : 2001:db8:2::2
 Usable Locator                : as1
 <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16458106298">SRv6 SID                      : 2001:db8:555::1:0:1</strong>
 SRv6 SID (PSP)                : 2001:db8:555::1:0:2
 SRv6 SID (PSP,USP,USD)        : 2001:db8:555::1:0:3
 SRv6 SID (PSP,USP,USD,COC)    : -(ONLY SUPPORT COMPRESS TYPE)
 Nexthop                       : 2001:db8:33::1
 Out Interface                 : GigabitEthernet<span>0/2/0</span>

 Peer Adj                      : 2001:db8:33::1
 Local ASN                     : 300
 Remote ASN                    : 200
 Local Router Id               : 4.44.4.4
 Remote Router Id              : 1.11.1.1
 Interface Identifier          : 17
 Local Interface Address       : 2001:db8:33::2
 Remote Interface Address      : 2001:db8:33::1
 Usable Locator                : as1
 SRv6 SID                      : 2001:db8:555::1:0:4
 SRv6 SID (PSP)                : 2001:db8:555::1:0:5
 SRv6 SID (PSP,USP,USD)        : 2001:db8:555::1:0:6
 SRv6 SID (PSP,USP,USD,COC)    : -(ONLY SUPPORT COMPRESS TYPE)
 Nexthop                       : 2001:db8:33::1
 Out Interface                 : GigabitEthernet<span>0/2/0</span></pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step1674318176126"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd11743217101218">Configure an SRv6 TE Policy.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p16141533193510"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1061413331359">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword461473333510"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b06141033163515">segment-routing ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword5615153393520">*</span>DeviceA-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10615033123520">segment-list list1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10615433123517">*</span>DeviceA-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b4426124974215">index 5 sid ipv6 2001:db8:100::111</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword17138105024114">*</span>DeviceA-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2051618557425">index 10 sid ipv6 2001:db8:200::222</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6135165144118">*</span>DeviceA-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b183941319433">index 15 sid ipv6 2001:db8:200::1:0:0</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1361516330351">*</span>DeviceA-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10615183310352">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword0615183310350">*</span>DeviceA-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10615193363513">srv6-te-policy locator locator1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword161503311355">*</span>DeviceA-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b8615183343514">srv6-te policy policy1 endpoint </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10615193316359">2001:db8</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b761533320350">:5::5</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1461543383511"> color 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword64372101710">*</span>DeviceA-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b561663333518">candidate-path preference 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1190019271717">*</span>DeviceA-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1961618330358">segment-list </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b361663318351">list1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1294519414174">*</span>DeviceA-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16616033153510">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword10623196101717">*</span>DeviceA-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17616183314353">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword102920831712">*</span>DeviceA-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b161612339352">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1461663363519">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b16163333355">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1774316177125"># Configure DeviceB.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen47431717181218">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2743121715128"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18744317141211">segment-routing ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword35223784718">*</span>DeviceB-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b20867192917478">srv6-te-policy locator locator1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword16617910101716">*</span>DeviceB-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b127441117161216">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword274491710123">*</span>DeviceB] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b5745151761218">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p7745141714127"># Configure DeviceE.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1745517141210">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2745201771212"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b117451417121215">segment-routing ipv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword16745201720125">*</span>DeviceE-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1745161721211">segment-list list1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6745121751211">*</span>DeviceE-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b11632167174819">index 10 sid ipv6 2001:db8:555::1:0:1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword15432164064716">*</span>DeviceE-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b271664615471">index 15 sid ipv6 2001:db8:200::222</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword7983134020472">*</span>DeviceE-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b11911135444719">index 20 sid ipv6 2001:db8:100::111</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword47451417181214">*</span>DeviceE-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b674521710129">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11788114710471">*</span>DeviceE-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b27880474473">srv6-te-policy locator as1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14745161711126">*</span>DeviceE-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b18745161791216">srv6-te policy policy1 endpoint </strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b07455175128">2001:db8:1::1</strong><strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1874501720129"> color 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1616819138179">*</span>DeviceE-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1674561719125">candidate-path preference 100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword09579141179">*</span>DeviceE-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1974581731212">segment-list list1</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword57511716201716">*</span>DeviceE-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17745121761217">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword32471891715">*</span>DeviceE-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b87451717171213">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword124801719141711">*</span>DeviceE-segment-routing-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b97451317171215">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword157461117131210">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1574691717121">commit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1211114370435">After the configuration is complete, run the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b4446125412111">ping srv6-te policy</strong> command to check the connectivity of the SRv6 TE Policy.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen66610167440">&lt;DeviceA&gt;<strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b15194171917488">ping srv6-te policy policy-name policy1 end-op 2001:db8:555::500</strong>
  PING srv6-te policy : 100  data bytes, press CTRL_C to break
  srv6-te policy's segment list:
  Preference: 100; Path Type: primary; Protocol-Origin: local; Originator: 0, 0.0.0.0; Discriminator: 100; Segment-List ID: 129; Xcindex: 129; end-op: 2001:db8:555::500
    Reply from 2001:db8:555::500
    bytes=100 Sequence=1 time=1 ms
    Reply from 2001:db8:555::500
    bytes=100 Sequence=2 time=1 ms
    Reply from 2001:db8:555::500
    bytes=100 Sequence=3 time=1 ms
    Reply from 2001:db8:555::500
    bytes=100 Sequence=4 time=1 ms
    Reply from 2001:db8:555::500
    bytes=100 Sequence=5 time=1 ms

  --- srv6-te policy ping statistics ---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 1/1/1 ms</pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p2746171711122">After the configuration is complete, run the <a href="cmdqueryname=display+srv6-te+policy"><b><span class="cmdname" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmdname6746181716128">display srv6-te policy</span></b></a> command to check SRv6 TE Policy information.</p>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p5746217121214">DeviceA is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1974661711126">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword2371143231017"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b127464179124">display srv6-te policy</strong>
PolicyName : policy1
Color                   : 100                            Endpoint             : 2001:db8:5::5
TunnelId                : 65                             
TunnelType              : SRv6-TE Policy                 DelayTimerRemain     : -
Policy State            : Up                             State Change Time    : 2022-02-11 18:15:17
Admin State             : Up                             Traffic Statistics   : Disable
Backup Hot-Standby      : Disable                        BFD                  : Disable
Interface Index         : -                              Interface Name       : -
Interface State         : -                              Encapsulation Mode   : Insert
Binding SID             : -
Candidate-path Count    : 1

 Candidate-path Preference : 100
 Path State             : Active                         Path Type            : Primary
 Protocol-Origin        : Configuration(30)              Originator           : 0, 0.0.0.0
 Discriminator          : 100                            Binding SID          : -
 GroupId                : 65                             Policy Name          : policy1
 Template ID            : 0                              Path Verification    : Disable
 DelayTimerRemain       : -                              Network Slice ID     : -
 Segment-List Count     : 1
  Segment-List          : list1
   Segment-List ID      : 129                            XcIndex              : 129
   List State           : Up                             DelayTimerRemain     : -
   Verification State   : -                              SuppressTimeRemain   : -
   PMTU                 : 9600                           Active PMTU          : 9600
   Weight               : 1                              BFD State            : -
   Network Slice ID     : -
   Binding SID          : -
   Reverse Binding SID  : -
   SID :
         2001:db8:100::111
         2001:db8:200::222
         2001:db8:200::1:0:0</pre>
</p></li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_step1624320352491"><span id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_cmd1924393584913">Configure a tunnel policy to import VPN traffic.</span><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p424383516491"># Configure DeviceA.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1243133517498">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword11385333111814"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1243193584911">route-policy RP1 permit node 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword924583319177">*</span>DeviceA-route-policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b624312359493">apply extcommunity color 0:100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword179011934101716">*</span>DeviceA-route-policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1224313514498">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword732613360176">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10243123518498">bgp 200</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword125421137121718">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7243123524912">ipv6-family vpnv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword9151839171717">*</span>DeviceA-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b182431935144911">peer 2001:db8:5::5 route-policy RP1 import</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6722441181717">*</span>DeviceA-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b3243835174915">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword4944312171">*</span>DeviceA-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b7243133513491">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword841434410177">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b624473513491">tunnel-policy tnl_policy</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword58061458177">*</span>DeviceA-tunnel-policy-tnl_policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b124413358499">tunnel select-seq ipv6 srv6-te-policy load-balance-number 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword891164717175">*</span>DeviceA-tunnel-policy-tnl_policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1724443594911">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword4360648121710">*</span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2024413574915">ip vpn-instance vrf</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword9729124971716">*</span>DeviceA-vpn-instance-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12244173514912">ipv6-family</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword25385213176">*</span>DeviceA-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14244113574914">tnl-policy tnl_policy</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword12482105351713">*</span>DeviceA-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b102442352495">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword324292821820"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1244935174914">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword895618305181"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-vpn-instance-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b124418356493">quit</strong></pre>
</p><p><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p1324473564915"># Configure DeviceE.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen724483510494">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword147311626191819"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b32442035124911">route-policy RP1 permit node 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1590855111716">*</span>DeviceE-route-policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b12441635194915">apply extcommunity color 0:100</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1593315616177">*</span>DeviceE-route-policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b162448355490">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword20505125817175">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1524433512493">bgp 300</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword8841185911179">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b152441335154917">ipv6-family vpnv6</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1263961101815">*</span>DeviceE-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b1244735114911">peer 2001:db8:1::1 route-policy RP1 import</strong> 
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword22512441816">*</span>DeviceE-bgp-af-vpnv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b172451935194910">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword117313511818">*</span>DeviceE-bgp] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b10245735154911">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword14478178111817">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b42458353496">tunnel-policy tnl_policy</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword127235961818">*</span>DeviceE-tunnel-policy-tnl_policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b102451035114917">tunnel select-seq ipv6 srv6-te-policy load-balance-number 1</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1430821118184">*</span>DeviceE-tunnel-policy-tnl_policy] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b22451935144918">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword831041315183">*</span>DeviceE] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b19245203574918">ip vpn-instance vrf</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword18519111410186">*</span>DeviceE-vpn-instance-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b224523584919">ipv6-family</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword6171416141819">*</span>DeviceE-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b192459355494">tnl-policy tnl_policy</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword32771418121820">*</span>DeviceE-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b2024517359499">commit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword171402242186"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-vpn-instance-vrf-af-ipv6] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b3245835144919">quit</strong>
[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword958172271812"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceE-vpn-instance-vrf] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b224515350495">quit</strong></pre>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p192454350498">After the configuration is complete, run the <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b17664112513">display ipv6 routing-table vpn-instance vrf</strong> command to check the routing table of the VPN instance. The command output shows that VPN routes have successfully recursed to the SRv6 TE Policy.</p>
<p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p9245335104912">DeviceA is used as an example.</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen02453350499">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword971847111013"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b182451135144914">display ipv6 routing-table vpn-instance vrf</strong>
Routing Table : vrf
         Destinations : 3        Routes : 3

Destination  : 2001:db8:15::1                          PrefixLength : 128
NextHop      : 2001:db8:5::5                           Preference   : 255
Cost         : 0                                       Protocol     : EBGP
RelayNextHop : ::                                      TunnelID     : 0x000000003400000041
Interface    : <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b842671164712">policy1</strong>                                Flags        : RD

Destination  : 2001:db8:16::1                          PrefixLength : 128
NextHop      : 2001:db8:11::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : LoopBack100                             Flags        : D

Destination  : FE80::                                  PrefixLength : 10
NextHop      : ::                                      Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : NULL0                                   Flags        : DB</pre>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen122475353499">[<span class="keyword" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_keyword1418917517109"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b14462622114716">display ipv6 routing-table vpn-instance vrf 2001:db8:15::1 verbose</strong>
Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route
------------------------------------------------------------------------------
Routing Table : vrf
Summary Count : 1

Destination  : 2001:db8:15::1                          PrefixLength : 128
NextHop      : 2001:db8:5::5                           Preference   : 255
Neighbour    : 2001:db8:5::5                           ProcessID    : 0
Label        : 3                                       Protocol     : EBGP
State        : Active Adv Relied                       Cost         : 0
Entry ID     : 0                                       EntryFlags   : 0x00000000
Reference Cnt: 0                                       Tag          : 0
Priority     : low                                     Age          : 117sec
IndirectID   : 0x100049D                               Instance     :
RelayNextHop : ::                                      TunnelID     : 0x000000003400000041
Interface    : <strong id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_b681374518475">policy1</strong>                                Flags        : RD
RouteColor   : 0                                       QoSInfo      : 0x0</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_example3262387572"><a name="EN-US_TASK_0000001241440579__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_ul489048399214050"><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li10667122717514">DeviceA configuration file<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen4210153710515">#
sysname DeviceA
#
ip vpn-instance vrf
 ipv6-family                        
  route-distinguisher 1:21           
  tnl-policy tnl_policy
  apply-label per-instance        
  vpn-target 1:4 export-extcommunity
  vpn-target 1:4 import-extcommunity
#
segment-routing ipv6        
 encapsulation source-address 2001:db8:1::1
 locator locator1 ipv6-prefix 2001:db8:100:: 64 static 32     
  opcode 2001:db8:100::111 end psp                  
  opcode 2001:db8:100:600 end-op                   
 srv6-te-policy locator locator1             
 segment-list list1                          
  index 5 sid ipv6 2001:db8:100::111         
  index 10 sid ipv6 2001:db8:200::222        
  index 15 sid ipv6 2001:db8:200::1:0:0     
 srv6-te policy policy1 endpoint 2001:db8:5::5 color 100
  candidate-path preference 100     
   segment-list list1                  
#
isis 1                      
 is-level level-1     
 cost-style wide        
 network-entity 10.0000.0000.0001.00    
 #
 ipv6 enable topology ipv6        
 segment-routing ipv6 locator locator1 auto-sid-disable     
 #
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:44::1/96
 isis ipv6 enable 1           
 undo dcn
#
interface LoopBack 1
 ipv6 enable                         
 ipv6 address 2001:db8:1::1/128
 isis ipv6 enable 1                  
#
interface LoopBack100            
 ip binding vpn-instance vrf
 ipv6 enable                      
 ipv6 address 2001:db8:16::1/128
#
bgp 200                   
 router-id 5.55.5.5
 private-4-byte-as enable
 peer 2001:db8:5::5 as-number 300
 peer 2001:db8:5::5 ebgp-max-hop 255
 peer 2001:db8:5::5 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #
 ipv6-family vpnv6            
  policy vpn-target
  peer 2001:db8:5::5 enable
  peer 2001:db8:5::5 route-policy RP1 import
  peer 2001:db8:5::5 prefix-sid
 #
 ipv6-family vpn-instance vrf
  import-route direct                        
  segment-routing ipv6 locator locator1      
  segment-routing ipv6 traffic-engineer best-effort      
# 
route-policy RP1 permit node 1
 apply extcommunity color 0:100      
#
tunnel-policy tnl_policy 
 tunnel select-seq ipv6 srv6-te-policy load-balance-number 1  
#
return</pre>
</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li1501985783214050"><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p204784396214050"><a name="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li1501985783214050"></a><a name="en-us_task_0000001196932245_li1501985783214050"></a>DeviceB configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1065311362214050">#
sysname DeviceB
#
segment-routing ipv6
 encapsulation source-address 2001:db8:2::2
 locator locator1 ipv6-prefix 2001:db8:200:: 64 static 32
  opcode 2001:db8:200::222 end psp
 srv6-te-policy locator locator1
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator locator1 auto-sid-disable
 ipv6 import-route bgp level-1
 #
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:11::1/96
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:44::2/96
 isis ipv6 enable 1
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:db8:2::2/128
#
bgp 200
 router-id 1.11.1.1
 private-4-byte-as enable
 peer 2001:db8:5::5 as-number 300
 peer 2001:db8:5::5 ebgp-max-hop 255
 peer 2001:db8:5::5 connect-interface LoopBack1 
 peer 2001:db8:5::5 egress-engineering srv6 locator locator1
 peer 2001:db8:5::5 virtual-link
 peer 2001:db8:5::5 virtual-link te metric 16777215
 peer 2001:db8:5::5 virtual-link te link administrative group ff
 peer 2001:db8:5::5 virtual-link te srlg 4294967295
 peer 2001:db8:11::2 as-number 100
 #
 ipv4-family unicast
  undo synchronization
 #
 link-state-family unicast
 #
 ipv6-family unicast
  undo synchronization
  network 2001:db8:1::1 128
  network 2001:db8:2::2 128
  network 2001:db8:100:: 64
  network 2001:db8:200:: 64
  peer 2001:db8:5::5 enable
  peer 2001:db8:5::5 route-policy rp export
  peer 2001:db8:11::2 enable
#
route-policy rp deny node 10
#
return</pre>
</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li1378180976214050"><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p329047090214050"><a name="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li1378180976214050"></a><a name="en-us_task_0000001196932245_li1378180976214050"></a>DeviceC configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen888081888214050">#
sysname DeviceC
#
ip vpn-instance vrftest
 ipv6-family
  route-distinguisher 1:1
  tnl-policy tnl_policy
  apply-label per-instance
  vpn-target 100:1 export-extcommunity
  vpn-target 100:1 import-extcommunity
#
segment-routing ipv6
 encapsulation source-address 2001:db8:3::3
 locator locator1 ipv6-prefix 2001:db8:333:: 64 static 32
  opcode 2001:db8:333::333 end psp
 srv6-te-policy locator locator1
 segment-list s1                         
  index 5 sid ipv6 2001:db8:444::444
 srv6-te policy policy1 endpoint 2001:db8:4::4 color 200
  candidate-path preference 100    
   segment-list s1 
#
isis 100
 is-level level-2
 cost-style wide
 network-entity 20.0000.0000.0001.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator locator1 auto-sid-disable
 #
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:22::1/96
 isis ipv6 enable 100
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip binding vpn-instance vrftest
 ipv6 enable
 ipv6 address 2001:db8:11::2/96
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:db8:3::3/128
 isis ipv6 enable 100
#
bgp 100
 router-id 2.22.2.2
 private-4-byte-as enable
 peer 2001:db8:4::4 as-number 100
 peer 2001:db8:4::4 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #
 ipv6-family unicast
  undo synchronization
 #
 ipv6-family vpnv6                     
  policy vpn-target
  peer 2001:db8:4::4 enable
  peer 2001:db8:4::4 route-policy RP1 import
  peer 2001:db8:4::4 prefix-sid
 # 
 ipv6-family vpn-instance vrftest               
  segment-routing ipv6 locator locator1             
  segment-routing ipv6 traffic-engineer best-effort      
  peer 2001:db8:11::1 as-number 200
#
route-policy RP1 permit node 1      
 apply extcommunity color 0:200
#
tunnel-policy tnl_policy     
 tunnel select-seq ipv6 srv6-te-policy load-balance-number 1
#
return</pre>
</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li244318210214050"><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p267422406214050"><a name="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li244318210214050"></a><a name="en-us_task_0000001196932245_li244318210214050"></a>DeviceD configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1686126397214050">#
sysname DeviceD
#
ip vpn-instance vrftest
 ipv6-family
  route-distinguisher 1:1
  tnl-policy tnl_policy
  apply-label per-instance
  vpn-target 100:1 export-extcommunity
  vpn-target 100:1 import-extcommunity
#
segment-routing ipv6
 encapsulation source-address 2001:db8:4::4
 locator locator1 ipv6-prefix 2001:db8:444:: 64 static 32
  opcode 2001:db8:444::444 end psp
 srv6-te-policy locator locator1
 segment-list s1         
  index 5 sid ipv6 2001:db8:333::333
 srv6-te policy policy1 endpoint 2001:db8:3::3 color 200
  candidate-path preference 100
   segment-list s1 
#
isis 100
 is-level level-2
 cost-style wide
 network-entity 20.0000.0000.0002.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator locator1 auto-sid-disable
 #
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip binding vpn-instance vrftest
 ipv6 enable
 ipv6 address 2001:db8:33::1/96
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:22::2/96
 isis ipv6 enable 100
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:db8:4::4/128
 isis ipv6 enable 100
#
bgp 100
 router-id 3.33.3.3
 private-4-byte-as enable
 peer 2001:db8:3::3 as-number 100
 peer 2001:db8:3::3 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #
 ipv6-family unicast
  undo synchronization
 #
 ipv6-family vpnv6                       
  policy vpn-target
  peer 2001:db8:3::3 enable
  peer 2001:db8:3::3 route-policy RP1 import 
  peer 2001:db8:3::3 prefix-sid
 #
 ipv6-family vpn-instance vrftest
  segment-routing ipv6 locator locator1              
  segment-routing ipv6 traffic-engineer best-effort  
  peer 2001:db8:33::2 as-number 300
#
route-policy RP1 permit node 1
 apply extcommunity color 0:200
#
tunnel-policy tnl_policy
 tunnel select-seq ipv6 srv6-te-policy load-balance-number 1
#
return</pre>
</li><li id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li59217155214050"><p id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_p977795524214050"><a name="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_li59217155214050"></a><a name="en-us_task_0000001196932245_li59217155214050"></a>DeviceE configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001241440579__en-us_task_0000001196932245_screen1037767656214050">#
sysname DeviceE
#
ip vpn-instance vrf
 ipv6-family
  route-distinguisher 1:21
  tnl-policy tnl_policy
  apply-label per-instance
  vpn-target 1:4 export-extcommunity
  vpn-target 1:4 import-extcommunity
#
segment-routing ipv6
 encapsulation source-address 2001:db8:5::5
 locator as1 ipv6-prefix 2001:db8:555:: 64 static 32
  opcode 2001:db8:555::555 end psp         
  opcode 2001:db8:555::500 end-op          
 srv6-te-policy locator as1
 segment-list list1
  index 10 sid ipv6 2001:db8:555::1:0:1    
  index 15 sid ipv6 2001:db8:200::222    
  index 20 sid ipv6 2001:db8:100::111    
 srv6-te policy policy1 endpoint 2001:db8:1::1 color 100
  candidate-path preference 100     
   segment-list list1   
#
isis 2
 #
 segment-routing ipv6 locator as1 auto-sid-disable
 #
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:db8:33::2/96
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:db8:5::5/128
#
interface LoopBack100               
 ip binding vpn-instance vrf
 ipv6 enable                        
 ipv6 address 2001:db8:15::1/128
#
bgp 300
 router-id 4.44.4.4
 private-4-byte-as enable
 peer 2001:db8:1::1 as-number 200
 peer 2001:db8:1::1 ebgp-max-hop 255
 peer 2001:db8:1::1 connect-interface LoopBack1
 peer 2001:db8:2::2 as-number 200
 peer 2001:db8:2::2 ebgp-max-hop 255  
 peer 2001:db8:2::2 connect-interface LoopBack1
 peer 2001:db8:2::2 egress-engineering srv6 locator as1
 peer 2001:db8:2::2 virtual-link
 peer 2001:db8:2::2 virtual-link te metric 16777215
 peer 2001:db8:2::2 virtual-link te link administrative group ff
 peer 2001:db8:2::2 virtual-link te srlg 4294967295
 peer 2001:db8:33::1 as-number 100
 #
 ipv4-family unicast
  undo synchronization
 #
 link-state-family unicast
 #
 ipv6-family unicast
  undo synchronization
  network 2001:db8:5::5 128
  network 2001:db8:555:: 64          
  peer 2001:db8:2::2 enable
  peer 2001:db8:2::2 route-policy rp export
  peer 2001:db8:33::1 enable
 #
 ipv6-family vpnv6
  policy vpn-target
  peer 2001:db8:1::1 enable
  peer 2001:db8:1::1 route-policy RP1 import 
  peer 2001:db8:1::1 prefix-sid
 #
 ipv6-family vpn-instance vrf
  import-route direct
  segment-routing ipv6 locator as1
  segment-routing ipv6 traffic-engineer best-effort
#
route-policy RP1 permit node 1
 apply extcommunity color 0:100         
#
route-policy rp deny node 10      
#
tunnel-policy tnl_policy                   
 tunnel select-seq ipv6 srv6-te-policy load-balance-number 1 
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0101.html">Configuration Examples for SRv6 TE Policy (IS-IS)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0246.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0310.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>