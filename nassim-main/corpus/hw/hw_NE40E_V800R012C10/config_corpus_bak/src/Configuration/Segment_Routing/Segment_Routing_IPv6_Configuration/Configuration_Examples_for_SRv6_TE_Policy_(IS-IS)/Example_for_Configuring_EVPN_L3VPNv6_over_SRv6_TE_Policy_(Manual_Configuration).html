
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring EVPN L3VPNv6 over SRv6 TE Policy (Manual Configuration)">
<meta name="abstract" content="This section provides an example for configuring an SRv6 TE Policy to carry EVPN L3VPNv6 services.">
<meta name="description" content="This section provides an example for configuring an SRv6 TE Policy to carry EVPN L3VPNv6 services.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0101.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0139.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0248.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0185069724">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring EVPN L3VPNv6 over SRv6 TE Policy (Manual Configuration)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0185069724"></a><a name="EN-US_TASK_0185069724"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring EVPN L3VPNv6 over SRv6 TE Policy (Manual Configuration)</h1>
<div class="taskbody" id="taskbody1565407433746"><p id="shortdesc10481832172748">This section provides an example for configuring an SRv6 TE Policy to carry EVPN L3VPNv6 services.</p>
<div class="context"><a name="EN-US_TASK_0185069724__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0185069724__context1677625172748"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0185069724__p280365102214049">On the network shown in <a href="#EN-US_TASK_0185069724__fig3691666259">Figure 1</a>, PE1, the P, and PE2 are in the same AS and run IS-IS to implement IPv6 network connectivity. It is required that a bidirectional SRv6 TE Policy be deployed between PE1 and PE2 to carry EVPN L3VPNv6 services.</p>
<div class="fignone" id="EN-US_TASK_0185069724__fig3691666259"><a name="EN-US_TASK_0185069724__fig3691666259"></a><a name="fig3691666259"></a><span class="figcap"><b>Figure 1 </b>EVPN L3VPNv6 over SRv6 TE Policy networking</span><div class="note" id="EN-US_TASK_0185069724__note237544264214049"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0185069724__p234345275214049">Interfaces 1 and 2 in this example represent GE <span>0/1/0</span> and GE <span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0185069724__image644045111322" src="figure/en-us_image_0185070474.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0185069724__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0185069724__context2617132225511"><h4 class="sectiontitle">Precautions</h4><ol id="EN-US_TASK_0185069724__en-us_task_0184674100_ol11781124152416"><li id="EN-US_TASK_0185069724__en-us_task_0184674100_li146921550112413">SRv6 TE Policy configuration requires End or End.X SIDs. The SIDs can either be configured manually or be generated dynamically using an IGP. In scenarios where SRv6 TE Policies are configured manually, dynamic SIDs used for the SRv6 TE Policies may change after an IGP restart. In this case, you need to manually adjust the SRv6 TE Policies so that they remain up. For this reason, dynamic SIDs are not suitable for large-scale use. You are therefore advised to configure SIDs manually and not to use dynamic SIDs.</li><li id="EN-US_TASK_0185069724__en-us_task_0184674100_li187812443242">To implement color-based traffic steering into SRv6 TE Policies, you need to configure the color attribute using an import or export route-policy. You also need to configure a tunnel policy to allow routes to recurse to SRv6 TE Policies.<p id="EN-US_TASK_0185069724__en-us_task_0184674100_p23977456248"><a name="EN-US_TASK_0185069724__en-us_task_0184674100_li187812443242"></a><a name="en-us_task_0184674100_li187812443242"></a>After the preceding configurations are complete, if the color and next hop of a route are the same as the color and endpoint of an SRv6 TE Policy, respectively, the route can successfully recurse to the SRv6 TE Policy. This enables the traffic forwarded through the route to be steered into the SRv6 TE Policy.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0185069724__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0185069724__section_dc_vrp_evpn_cfg_015102"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0185069724__p1181486406214049">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0185069724__ol1216461218214049"><li id="EN-US_TASK_0185069724__li2099513083214049"><p id="EN-US_TASK_0185069724__p1212582124214049"><a name="EN-US_TASK_0185069724__li2099513083214049"></a><a name="li2099513083214049"></a>Enable IPv6 forwarding and configure an IPv6 address for each interface on PE1, the P, and PE2.</p>
</li><li id="EN-US_TASK_0185069724__li1058618670214049"><p id="EN-US_TASK_0185069724__p301971295214049"><a name="EN-US_TASK_0185069724__li1058618670214049"></a><a name="li1058618670214049"></a>Enable IS-IS, configure an IS-IS level, and specify a network entity title (NET) on PE1, the P, and PE2.</p>
</li><li id="EN-US_TASK_0185069724__li1400430836214049"><p id="EN-US_TASK_0185069724__p620289532214049"><a name="EN-US_TASK_0185069724__li1400430836214049"></a><a name="li1400430836214049"></a>Configure an EVPN L3VPN instance on each PE and bind the EVPN L3VPN instance to an access-side interface.</p>
</li><li id="EN-US_TASK_0185069724__li02772316195">Establish an EBGP peer relationship between each PE and its connected CE.</li><li id="EN-US_TASK_0185069724__li1462578899214049"><p id="EN-US_TASK_0185069724__p1465731931214049"><a name="EN-US_TASK_0185069724__li1462578899214049"></a><a name="li1462578899214049"></a>Establish a BGP EVPN peer relationship between PEs.</p>
</li><li id="EN-US_TASK_0185069724__li1582252551919">Configure SRv6 SIDs and enable IS-IS SRv6 on PE1, the P, and PE2. In addition, configure PE1 and PE2 to advertise VPN routes carrying SIDs.</li><li id="EN-US_TASK_0185069724__li295935931214049"><p id="EN-US_TASK_0185069724__p223065865214049"><a name="EN-US_TASK_0185069724__li295935931214049"></a><a name="li295935931214049"></a>Configure an SRv6 TE Policy on PE1 and PE2.</p>
</li><li id="EN-US_TASK_0185069724__li0232459164212">Configure a tunnel policy on PE1 and PE2 to import VPN traffic.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0185069724__1.4.4"></a><a name="1.4.4"></a>
<div class="p" id="EN-US_TASK_0185069724__section_dc_vrp_srv6_cfg_all_001103"><h4 class="sectiontitle">Data Preparation</h4><p id="EN-US_TASK_0185069724__p20352504214049">To complete the configuration, you need the following data:</p>
<ul id="EN-US_TASK_0185069724__ul771665915214049"><li id="EN-US_TASK_0185069724__li1384208966214049"><p id="EN-US_TASK_0185069724__p709743611214049"><a name="EN-US_TASK_0185069724__li1384208966214049"></a><a name="li1384208966214049"></a>IPv6 address of each interface on PE1, the P, and PE2</p>
</li><li id="EN-US_TASK_0185069724__li1858692900214049"><p id="EN-US_TASK_0185069724__p1754441038214049"><a name="EN-US_TASK_0185069724__li1858692900214049"></a><a name="li1858692900214049"></a>IS-IS process ID of PE1, the P, and PE2</p>
</li><li id="EN-US_TASK_0185069724__li1696895479214049"><p id="EN-US_TASK_0185069724__p1139483393214049"><a name="EN-US_TASK_0185069724__li1696895479214049"></a><a name="li1696895479214049"></a>IS-IS level of PE1, the P, and PE2</p>
</li><li id="EN-US_TASK_0185069724__li652093437214049"><p id="EN-US_TASK_0185069724__p1125345018214049"><a name="EN-US_TASK_0185069724__li652093437214049"></a><a name="li652093437214049"></a>VPN instance name, RD, and RT on PE1 and PE2</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0185069724__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0185069724__steps10132325172748"><li id="EN-US_TASK_0185069724__step1440631525214049"><span id="EN-US_TASK_0185069724__cmd1963404397214049">Enable IPv6 forwarding and configure an IPv6 address for each interface.</span><p><p id="EN-US_TASK_0185069724__p127281329309"># Configure PE1. The configurations of the P and PE2 are similar to the configuration of PE1. For configuration details, see <a href="#EN-US_TASK_0185069724__example121226172748">Configuration Files</a> in this section.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1509961031214049">&lt;<span class="keyword" id="EN-US_TASK_0185069724__keyword429743421214049">HUAWEI</span>&gt; <strong id="EN-US_TASK_0185069724__b184470581214049">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword1700828469214049"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0185069724__keyword669253266214049">HUAWEI</span>] <strong id="EN-US_TASK_0185069724__b681246416214049">sysname PE1</strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword1408516569214049">*</span><span class="keyword" id="EN-US_TASK_0185069724__keyword1225734302214049">HUAWEI</span>] <strong id="EN-US_TASK_0185069724__b2010662632214049">commit</strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword1885219041214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0185069724__b1757760535214049">interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword574629683214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0185069724__b1965119001214049">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword1937431448214049">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0185069724__b467806501214049">ipv6 address 2001:DB8:10::1 64</strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword1960730166214049">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0185069724__b648940825214049">quit</strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword342814998214049">*</span>PE1] <strong id="EN-US_TASK_0185069724__b1243873980214049">interface LoopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword918947587214049">*</span>PE1-LoopBack1] <strong id="EN-US_TASK_0185069724__b28947712214049">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword542387861214049">*</span>PE1-LoopBack1] <strong id="EN-US_TASK_0185069724__b1184644536214049">ipv6 address 2001:DB8:1::1 128</strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword667578876214049">*</span>PE1-LoopBack1] <strong id="EN-US_TASK_0185069724__b1632390468214049">quit</strong>
[<span class="keyword" id="EN-US_TASK_0185069724__keyword1119356689214049">*</span>PE1] <strong id="EN-US_TASK_0185069724__b30747720214049">commit</strong></pre>
</p></li><li id="EN-US_TASK_0185069724__step1791742845214049"><span id="EN-US_TASK_0185069724__cmd1806297681214049">Configure IS-IS.</span><p><p id="EN-US_TASK_0185069724__p1468171255214049"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1069611142214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1700734257214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0185069724__b826977159214049">isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen729670929214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword156829221214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0185069724__b1817964733214049">is-level level-1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1935101344214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1337084006214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0185069724__b1526525910214049">cost-style wide</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1599089463214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword13021210214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0185069724__b348638983214049">network-entity 10.0000.0000.0001.00</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1469529367214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1173830009214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0185069724__b85755300214049">ipv6 enable topology ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1038423586214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1413334087214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0185069724__b1527550830214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen975940591214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1501680457214049">*</span>PE1] <strong id="EN-US_TASK_0185069724__b1742895718214049">interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1184839254214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1667218548214049">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0185069724__b2116176702214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1505773104214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1171731135214049">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0185069724__b1388483397214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1964710855214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword445751055214049">*</span>PE1] <strong id="EN-US_TASK_0185069724__b1797836466214049">interface loopback1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen388193530214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword660754624214049">*</span>PE1-LoopBack1] <strong id="EN-US_TASK_0185069724__b1602730329214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1002078427214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1790063510214049">*</span>PE1-LoopBack1] <strong id="EN-US_TASK_0185069724__b1591698872214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen27600925214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1342618417214049">*</span>PE1] <strong id="EN-US_TASK_0185069724__b1916541601214049">commit</strong></pre>
<p id="EN-US_TASK_0185069724__p171589628214049"># Configure the P.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen290830932214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1114319789214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>P] <strong id="EN-US_TASK_0185069724__b706993941214049">isis 1</strong> </pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1243911245214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1747433554214049">*</span>P-isis-1] <strong id="EN-US_TASK_0185069724__b1332109978214049">is-level level-1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen149382922214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword314054725214049">*</span>P-isis-1] <strong id="EN-US_TASK_0185069724__b1894961764214049">cost-style wide</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen112598123214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword104136151214049">*</span>P-isis-1] <strong id="EN-US_TASK_0185069724__b2079371413214049">network-entity 10.0000.0000.0002.00</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen846431185214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1911902870214049">*</span>P-isis-1] <strong id="EN-US_TASK_0185069724__b1426726952214049">ipv6 enable topology ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1181806019214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1618216328214049">*</span>P-isis-1] <strong id="EN-US_TASK_0185069724__b1121580060214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen682641420214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1034464706214049">*</span>P] <strong id="EN-US_TASK_0185069724__b728879041214049">interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1322875339214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword174378299214049">*</span>P-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0185069724__b1805897779214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen992817018214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1242564244214049">*</span>P-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0185069724__b931924214214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1775150183214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1489831351214049">*</span>P] <strong id="EN-US_TASK_0185069724__b1324750759214049">interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen176758979214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword283691976214049">*</span>P-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0185069724__b468202994214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen499865764214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2072437544214049">*</span>P-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0185069724__b2058812408214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen751674982214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1148547910214049">*</span>P] <strong id="EN-US_TASK_0185069724__b1412735793214049">interface loopback1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen948977230214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1787627115214049">*</span>P-LoopBack1] <strong id="EN-US_TASK_0185069724__b1571634783214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen2108178027214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1468028845214049">*</span>P-LoopBack1] <strong id="EN-US_TASK_0185069724__b433076656214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen916285929214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword874812393214049">*</span>P] <strong id="EN-US_TASK_0185069724__b462675968214049">commit</strong></pre>
<p id="EN-US_TASK_0185069724__p982942701214049"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1634255673214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1045484305214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0185069724__b38859574214049">isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen885076132214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1592550336214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0185069724__b1512035108214049">is-level level-1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1505672701214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1625831717214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0185069724__b2034066904214049">cost-style wide</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1046636429214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1848386541214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0185069724__b508390690214049">network-entity 10.0000.0000.0003.00</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1879430668214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword79786341214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0185069724__b1759167963214049">ipv6 enable topology ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1772402673214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword655960808214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0185069724__b1702791641214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen270180047214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1681043108214049">*</span>PE2] <strong id="EN-US_TASK_0185069724__b428710168214049">interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1331282716214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1837960283214049">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0185069724__b575547492214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen148233640214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword287785085214049">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0185069724__b431324381214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen105141484214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword531395050214049">*</span>PE2] <strong id="EN-US_TASK_0185069724__b1089262187214049">interface loopback1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1687853277214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1646636531214049">*</span>PE2-LoopBack1] <strong id="EN-US_TASK_0185069724__b351062450214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen371774284214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword12604267214049">*</span>PE2-LoopBack1] <strong id="EN-US_TASK_0185069724__b864031244214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1551231330214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword100034084214049">*</span>PE2] <strong id="EN-US_TASK_0185069724__b318445402214049">commit</strong></pre>
</p><p><p id="EN-US_TASK_0185069724__p2031113622412">After the configuration is complete, perform the following operations to check whether IS-IS is successfully configured:</p>
<p id="EN-US_TASK_0185069724__p193590641214049"># Display IS-IS neighbor information. The following example uses the command output on PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1551251461214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword72574447214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0185069724__b502711849214049">display isis peer</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1483527613214049">                          Peer information for ISIS(1)
                         
  System Id     Interface         Circuit Id        State HoldTime Type     PRI
--------------------------------------------------------------------------------
0000.0000.0002* GE<span>0/1/0</span>           0000.0000.0002.01  Up   8s       L1       64 

Total Peer(s): 1</pre>
</p></li><li id="EN-US_TASK_0185069724__step2073563070214049"><span id="EN-US_TASK_0185069724__cmd1009893974214049">Configure an EVPN L3VPN instance on each PE and bind the EVPN L3VPN instance to an access-side interface.</span><p><p id="EN-US_TASK_0185069724__p867146304214049"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1770990314214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1560214430214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0185069724__b324808785214049">ip vpn-instance vpna</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen318620502214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword193585506214049">*</span>PE1-vpn-instance-vpna] <strong id="EN-US_TASK_0185069724__b592309571214049">ipv6-family</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1858362949214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1886933004214049">*</span>PE1-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b1547262525214049">route-distinguisher 100:1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen462375695214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword454105283214049">*</span>PE1-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b1095101879214049">vpn-target 1:1 evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen2051030005214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword586192595214049">*</span>PE1-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b799299536214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen62919293214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1358824149214049">*</span>PE1-vpn-instance-vpna] <strong id="EN-US_TASK_0185069724__b75119320214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen428677917214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword60129118214049">*</span>PE1] <strong id="EN-US_TASK_0185069724__b396681985214049">interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen182300612214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword600491295214049">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0185069724__b1440173193214049">ip binding vpn-instance vpna</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen752266245214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2066019266214049">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0185069724__b1948385852214049">ipv6 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen905203993214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword123656700214049">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0185069724__b1649736433214049">ipv6 address 2001:DB8:11::1 64</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen893389210214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1362300610214049">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0185069724__b1064927342214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen569459382214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1171783849214049">*</span>PE1] <strong id="EN-US_TASK_0185069724__b1458884216214049">commit</strong></pre>
<p id="EN-US_TASK_0185069724__p1996337690214049"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen277965742214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1894626052214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0185069724__b512173708214049">ip vpn-instance vpna</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1493368480214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1593265778214049">*</span>PE2-vpn-instance-vpna] <strong id="EN-US_TASK_0185069724__b778078290214049">ipv6-family</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen577280251214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword762940450214049">*</span>PE2-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b596897197214049">route-distinguisher 200:1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen90700614214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword319517860214049">*</span>PE2-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b1238320356214049">vpn-target 1:1 evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1376318404214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1380601530214049">*</span>PE2-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b1209615633214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1864479509214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1400409771214049">*</span>PE2-vpn-instance-vpna] <strong id="EN-US_TASK_0185069724__b1656607438214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen463936796214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2113268511214049">*</span>PE2] <strong id="EN-US_TASK_0185069724__b1480780984214049">interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1107239008214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword124883802214049">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0185069724__b563503832214049">ip binding vpn-instance vpna</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1441988759214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1903033874214049">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0185069724__b783601253214049">ipv6 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1301017772214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword137074228214049">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0185069724__b1622434560214049">ipv6 address 2001:DB8:22::1 64</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen922196349214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2107032352214049">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0185069724__b454784714214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1116730264214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1887840220214049">*</span>PE2] <strong id="EN-US_TASK_0185069724__b1946711858214049">commit</strong></pre>
</p></li><li id="EN-US_TASK_0185069724__step1865447642214049"><span id="EN-US_TASK_0185069724__cmd1464756541214049">Establish an EBGP peer relationship between each PE and its connected CE.</span><p><p id="EN-US_TASK_0185069724__p1643652318214049"># Configure CE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen829160852214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1045788500214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong id="EN-US_TASK_0185069724__b334061718214049">interface loopback 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1050175649214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword67160647214049">*</span>CE1-LoopBack1] <strong id="EN-US_TASK_0185069724__b2054377289214049">ipv6 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen735418415115">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1847011525114">*</span>CE1-LoopBack1] <strong id="EN-US_TASK_0185069724__b1547015125117">ipv6 address 2001:DB8:111::111 128</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1302694093214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1332273304214049">*</span>CE1-LoopBack1] <strong id="EN-US_TASK_0185069724__b1310712595214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1369428110214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1310988422214049">*</span>CE1] <strong id="EN-US_TASK_0185069724__b668253579214049">bgp 65410</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen665610215564">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1464194175614">*</span>CE1-bgp] <strong id="EN-US_TASK_0185069724__b14651642564">router-id 10.11.1.1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1504128912214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword357914958214049">*</span>CE1-bgp] <strong id="EN-US_TASK_0185069724__b114705114552">peer 2001:DB8:11::1 as-number 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen7817030165615">[<span class="keyword" id="EN-US_TASK_0185069724__keyword969723913565">*</span>CE1-bgp] <strong id="EN-US_TASK_0185069724__b569710392567">ipv6-family unicast</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen106971637115716">[<span class="keyword" id="EN-US_TASK_0185069724__keyword3381739175715">*</span>CE1-bgp-af-ipv6] <strong id="EN-US_TASK_0185069724__b580674505710">peer 2001:DB8:11::1</strong><strong id="EN-US_TASK_0185069724__b33165551571"> enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1511991290214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2100953327214049">*</span>CE1-bgp-af-ipv6] <strong id="EN-US_TASK_0185069724__b347741685416">import-route direct</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1274659726214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2132911534214049">*</span>CE1-bgp-af-ipv6] <strong id="EN-US_TASK_0185069724__b1046700111214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen630142619575">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1625462765716">*</span>CE1-bgp] <strong id="EN-US_TASK_0185069724__b225492735716">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen966682440214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2135541517214049">*</span>CE1] <strong id="EN-US_TASK_0185069724__b1361680404214049">commit</strong></pre>
<p id="EN-US_TASK_0185069724__p1073855680214049"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen2001832120214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword641550737214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0185069724__b1989854405214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen344963436214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword14656318151815"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bgp] <strong id="EN-US_TASK_0185069724__b923775213214049">router-id 1.1.1.1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen557276881214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword665854073214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0185069724__b2122869940214049">ipv6-family vpn-instance vpna</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen908849508214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword80154554214049">*</span>PE1-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b68411521125312">peer 2001:DB8:11::2 as-number 65410</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1645756820214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1579811275216">*</span>PE1-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b1303343006214049">import-route direct</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen177807995919">[<span class="keyword" id="EN-US_TASK_0185069724__keyword19792171114598">*</span>PE1-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b7792201165913">advertise l2vpn evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen431870662214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1381701621214049">*</span>PE1-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b215107804214049">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1611673008214049">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b1581970325214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen984891506214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword558843844214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bgp] <strong id="EN-US_TASK_0185069724__b337551455214049">quit</strong></pre>
<p id="EN-US_TASK_0185069724__p1664745458214049"># Configure CE2.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen787487097214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1998583583214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong id="EN-US_TASK_0185069724__b1990855006214049">interface loopback 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen05550291808">[<span class="keyword" id="EN-US_TASK_0185069724__keyword17331123318015">*</span>CE2-LoopBack1] <strong id="EN-US_TASK_0185069724__b203312331502">ipv6 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen6420886214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword305714531214049">*</span>CE2-LoopBack1] <strong id="EN-US_TASK_0185069724__b453044808214049">ipv6 address 2001:DB8:222::222 128</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen2091789575214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2053925844214049">*</span>CE2-LoopBack1] <strong id="EN-US_TASK_0185069724__b1137835442214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen669117079214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1246563211214049">*</span>CE2] <strong id="EN-US_TASK_0185069724__b1193105490214049">bgp 65420</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen975981375914">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1861812171591">*</span>CE2-bgp] <strong id="EN-US_TASK_0185069724__b13618161717599">router-id </strong><strong id="EN-US_TASK_0185069724__b1014325295914">10.22.2.2</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen378104331214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword831272890214049">*</span>CE2-bgp] <strong id="EN-US_TASK_0185069724__b94391353115412">peer 2001:DB8:22::1 as-number 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen14508124719589">[<span class="keyword" id="EN-US_TASK_0185069724__keyword35081147165812">*</span>CE2-bgp] <strong id="EN-US_TASK_0185069724__b6509124795815">ipv6-family unicast</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen4509144745818">[<span class="keyword" id="EN-US_TASK_0185069724__keyword3509144725818">*</span>CE2-bgp-af-ipv6] <strong id="EN-US_TASK_0185069724__b2509114712581">peer 2001:DB8:22::1</strong><strong id="EN-US_TASK_0185069724__b9509184745812"> enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen550917476589">[<span class="keyword" id="EN-US_TASK_0185069724__keyword185093475588">*</span>CE2-bgp-af-ipv6] <strong id="EN-US_TASK_0185069724__b7510184717585">import-route direct</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen16510144755814">[<span class="keyword" id="EN-US_TASK_0185069724__keyword165104475580">*</span>CE2-bgp-af-ipv6] <strong id="EN-US_TASK_0185069724__b14510164795815">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen4510447195812">[<span class="keyword" id="EN-US_TASK_0185069724__keyword19510747155819">*</span>CE2-bgp] <strong id="EN-US_TASK_0185069724__b13510947145815">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1175273400214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1072665239214049">*</span>CE2] <strong id="EN-US_TASK_0185069724__b2053253747214049">commit</strong></pre>
<p id="EN-US_TASK_0185069724__p809704971214049"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen2005463179214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1649745641214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0185069724__b1322785485214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1900062193214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword243942291810"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bgp] <strong id="EN-US_TASK_0185069724__b1035534569214049">router-id 3.3.3.3</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1615008559214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1467036700214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0185069724__b1380509286214049">ipv6-family vpn-instance vpna</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen2129319575214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword312344586214049">*</span>PE2-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b2106537509214049">peer 2001:DB8:22::2 as-number 65420</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1233675993214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword868752140214049">*</span>PE2-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b2019154962214049">import-route direct</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen3237025145920">[<span class="keyword" id="EN-US_TASK_0185069724__keyword139882685914">*</span>PE2-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b49822618591">advertise l2vpn evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1330965019214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1492903213214049">*</span>PE2-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b1180785695214049">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1270003169214049">[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b10841915214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1113118548214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1599988755214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bgp] <strong id="EN-US_TASK_0185069724__b1904041288214049">quit</strong></pre>
<p id="EN-US_TASK_0185069724__p1195687499214049">After the configuration is complete, run the <strong id="EN-US_TASK_0185069724__b438124918409">display bgp vpnv6 vpn-instance peer</strong> command on the PEs and check whether BGP peer relationships have been established between the PEs and CEs. If the <strong id="EN-US_TASK_0185069724__b73813492406">Established</strong> state is displayed in the command output, the BGP peer relationships have been established successfully.</p>
<p id="EN-US_TASK_0185069724__p1396929195214049">The following example uses the peer relationship between PE1 and CE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1079999083214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1233660237214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0185069724__b1922329127214049">display bgp vpnv6 vpn-instance vpna peer</strong>
 BGP local router ID : 1.1.1.1
 Local AS number : 100
 Total number of peers : 1                 Peers in established state : 1

  VPN-Instance vpna, Router ID 1.1.1.1:
  Peer            V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv
  2001:DB8:11::2  4       65410      131      132     0 01:51:37 <strong id="EN-US_TASK_0185069724__b119366371317">Established</strong>        2</pre>
</p></li><li id="EN-US_TASK_0185069724__step1049353014214049"><span id="EN-US_TASK_0185069724__cmd1340397134214049">Establish a BGP EVPN peer relationship between PEs.</span><p><p id="EN-US_TASK_0185069724__p727810838214049"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1754803993214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1855460612214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0185069724__b1909640340214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1577155664214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1755616475482"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bgp] <strong id="EN-US_TASK_0185069724__b767543421214049">peer 2001:DB8:3::3 as-number 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1937414768214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword641293541214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0185069724__b2004974258214049">peer 2001:DB8:3::3 connect-interface loopback 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen389351529214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2007510335214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0185069724__b301606972214049">l2vpn-family evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen2116211717214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1066938757214049">*</span>PE1-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b386545185214049">peer 2001:DB8:3::3 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1400784259214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword203203730214049">*</span>PE1-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b400808827214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1228010541214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword815255579214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0185069724__b1359435166214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1846144516214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword488071882214049">*</span>PE1] <strong id="EN-US_TASK_0185069724__b1746231553214049">commit</strong></pre>
<p id="EN-US_TASK_0185069724__p144796605214049"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen327147070214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2115953383214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0185069724__b1747772298214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen498347582214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword17499115213483"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bgp] <strong id="EN-US_TASK_0185069724__b489694908214049">peer 2001:DB8:1::1 as-number 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen135916997214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword335955266214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0185069724__b1298559870214049">peer 2001:DB8:1::1 connect-interface loopback 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen153067259214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1473167675214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0185069724__b1145705676214049">l2vpn-family evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1039620594214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword951001635214049">*</span>PE2-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b1263653918214049">peer 2001:DB8:1::1 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen756270655214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword421515752214049">*</span>PE2-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b1472279145214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen563954831214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword176937882214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0185069724__b1367982619214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1979025802214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1445977326214049">*</span>PE2] <strong id="EN-US_TASK_0185069724__b359080801214049">commit</strong></pre>
<p id="EN-US_TASK_0185069724__p704839431214049">After the configuration is complete, run the <strong id="EN-US_TASK_0185069724__b18289159154117">display bgp evpn peer</strong> command on the PEs and check whether BGP EVPN peer relationships have been established between the PEs. If the <strong id="EN-US_TASK_0185069724__b112909913412">Established</strong> state is displayed in the command output, the BGP EVPN peer relationships have been established successfully.</p>
<p id="EN-US_TASK_0185069724__p193425436389">The following example uses the command output on PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1885513013917">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong id="EN-US_TASK_0185069724__b1458801143920">display bgp evpn peer</strong>

 BGP local router ID : 1.1.1.1
 Local AS number : 100
 Total number of peers : 1                 Peers in established state : 1

  Peer                             V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv
  2001:DB8:3::3                    4         100       40       40     0 00:30:41 <strong id="EN-US_TASK_0185069724__b973451410398">Established</strong>        2</pre>
</p></li><li id="EN-US_TASK_0185069724__step147861674214049"><span id="EN-US_TASK_0185069724__cmd472575339214049">Configure SRv6 SIDs, and configure the PEs to carry SIDs in VPN routes.</span><p><p id="EN-US_TASK_0185069724__p1237205635214049"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1516470191214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1522962861214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0185069724__b343872987214049">segment-routing ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen240869839214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword18195130133811">*</span>PE1-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b6941255135612">encapsulation source-address 2001:DB8:1::</strong><strong id="EN-US_TASK_0185069724__b1674011544587">1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen2058187247214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword117794997214049">*</span>PE1-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b772473282214049">locator PE1 ipv6-prefix 2001:DB8:100:: 64 static 32</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1521512454432">[<span class="keyword" id="EN-US_TASK_0185069724__keyword19840643122720">*</span>PE1-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0185069724__b1622552193010">opcode ::10 end</strong><span> <strong id="EN-US_TASK_0185069724__b1718335813710">psp</strong></span></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen914509228214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword188193685214049">*</span>PE1-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0185069724__b144765658214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen971543204214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword299971128214049">*</span>PE1-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b1468729786214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen924332565214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword233645018214049">*</span>PE1] <strong id="EN-US_TASK_0185069724__b1886328726214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen706429098214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword66340115214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0185069724__b2130869178214049">l2vpn-family evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1066369076214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword765604723118">*</span>PE1-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b15421359133111">peer 2001:DB8:3::3 advertise encap-type srv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen443235337214049">[*PE1-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b1692613331214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1592094808214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1199453229214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0185069724__b1554431693214049">ipv6-family vpn-instance vpna</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1539439175214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword129795247214049">*</span>PE1-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b673103711472">segment-routing ipv6</strong><strong id="EN-US_TASK_0185069724__b197363774712"> </strong><strong id="EN-US_TASK_0185069724__b207413374474">traffic-engineer</strong><strong id="EN-US_TASK_0185069724__b18741837114719"> best-effort</strong><strong id="EN-US_TASK_0185069724__b62592046598"> evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen342709797214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword8608171010330">*</span>PE1-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b1300319655214049">segment-routing ipv6 locator PE1</strong><strong id="EN-US_TASK_0185069724__b12912311564"> evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen639488458214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword662292683214049">*</span>PE1-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b1342656509214049">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen923171392214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword2106097074214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b1564987976214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1790336792214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1398037381214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bgp] <strong id="EN-US_TASK_0185069724__b1800031501214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen492983935214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword859024463214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0185069724__b1769292768214049">isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen602197753214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword13369153919381"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-isis-1] <strong id="EN-US_TASK_0185069724__b1841370008214049">segment-routing ipv6 locator PE1 auto-sid-disable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen11777506214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword191304005214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0185069724__b1461640110214049">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen280749561214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword592930817214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-isis-1] <strong id="EN-US_TASK_0185069724__b408237657214049">quit</strong></pre>
<p id="EN-US_TASK_0185069724__p5420443175117"># Configure the P.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen5420743195117">[<span class="keyword" id="EN-US_TASK_0185069724__keyword18421124325119"><font style="font-size:8pt" Face="Courier New" >~</font></span>P] <strong id="EN-US_TASK_0185069724__b142114437518">segment-routing ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen144213439510">[<span class="keyword" id="EN-US_TASK_0185069724__keyword318394419383">*</span>P-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b1742104315118">encapsulation source-address 2001:DB8:2::2</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen15421043125112">[<span class="keyword" id="EN-US_TASK_0185069724__keyword3421343185110">*</span>P-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b114211043115114">locator P ipv6-prefix 2001:DB8:120:: 64 static 32</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen31822119447">[<span class="keyword" id="EN-US_TASK_0185069724__keyword24345535369">*</span>P-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0185069724__b24342539367">opcode ::20 end</strong><span> <strong id="EN-US_TASK_0185069724__b258433313465">psp</strong></span></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen14421443145114">[<span class="keyword" id="EN-US_TASK_0185069724__keyword11422194375120">*</span>P-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0185069724__b1442264305113">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1642216437517">[<span class="keyword" id="EN-US_TASK_0185069724__keyword10422114318511">*</span>P-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b442234305114">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen13427164385112">[<span class="keyword" id="EN-US_TASK_0185069724__keyword12279121217494">*</span>P] <strong id="EN-US_TASK_0185069724__b1842712435515">isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen342864365113">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1428243115114">*</span>P-isis-1] <strong id="EN-US_TASK_0185069724__b1842824325113">segment-routing ipv6 locator P</strong><strong id="EN-US_TASK_0185069724__b993411318444"> auto-sid-disable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1642814437515">[<span class="keyword" id="EN-US_TASK_0185069724__keyword94281943195119">*</span>P-isis-1] <strong id="EN-US_TASK_0185069724__b84285432510">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen17429643145110">[<span class="keyword" id="EN-US_TASK_0185069724__keyword12429243185118"><font style="font-size:8pt" Face="Courier New" >~</font></span>P-isis-1] <strong id="EN-US_TASK_0185069724__b1542964318516">quit</strong></pre>
<p id="EN-US_TASK_0185069724__p941732927214049"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen513613321214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword440676609214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0185069724__b932632619214049">segment-routing ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1832723274214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword578685310383">*</span>PE2-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b857438455214049">encapsulation source-address 2001:DB8:3::3</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1803013916214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1078012170214049">*</span>PE2-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b930321938214049">locator PE2 ipv6-prefix 2001:DB8:130:: 64 static 32</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen16829171364418">[<span class="keyword" id="EN-US_TASK_0185069724__keyword163582816370">*</span>PE2-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0185069724__b193581185373">opcode ::30 end</strong><span> <strong id="EN-US_TASK_0185069724__b152351436114610">psp</strong></span></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1744176284214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1136291486214049">*</span>PE2-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0185069724__b1619957618214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen2055984155214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword442589219214049">*</span>PE2-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b1982710249214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1465112961214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword579444743214049">*</span>PE2] <strong id="EN-US_TASK_0185069724__b1815494294214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1759431565214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword965013493214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0185069724__b853690977214049">l2vpn-family evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1873375839214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1094815663012">*</span>PE2-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b01921596315">peer 2001:DB8:1::1 advertise encap-type srv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen846416905214049">[*PE2-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b301694915214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1746206028214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1214152506214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0185069724__b231332049214049">ipv6-family vpn-instance vpna</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen111855019214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword11579180184711">*</span>PE2-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b757960124719">segment-routing ipv6</strong><strong id="EN-US_TASK_0185069724__b25730019477"> </strong><strong id="EN-US_TASK_0185069724__b257311014474">traffic-engineer</strong><strong id="EN-US_TASK_0185069724__b12578209474"> best-effort evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen2033566267214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1726008707214049">*</span>PE2-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b14461105325417">segment-routing ipv6 locator PE2 evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen357710919214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword171625390214049">*</span>PE2-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b407610182214049">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1642639091214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1605547195214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bgp-6-vpna] <strong id="EN-US_TASK_0185069724__b1696007033214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1709555806214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword920299411214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bgp] <strong id="EN-US_TASK_0185069724__b2045260583214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen567413876214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword452648322214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0185069724__b177372905214049">isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1288979712214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword6703115763814"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-isis-1] <strong id="EN-US_TASK_0185069724__b2051812538214049">segment-routing ipv6 locator PE2 auto-sid-disable</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen2003465308214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword506564127214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0185069724__b1757186995214049">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1452207725214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword152298301214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-isis-1] <strong id="EN-US_TASK_0185069724__b1399090242214049">quit</strong></pre>
<p id="EN-US_TASK_0185069724__p58877297214049">Run the <a href="cmdqueryname=display+segment-routing+ipv6+local-sid"><b><span class="cmdname" id="EN-US_TASK_0185069724__cmdname900285870214049">display segment-routing ipv6 local-sid</span></b></a> <strong><span id="EN-US_TASK_0185069724__cmdparmname93173524118">end</span></strong> <strong><span id="EN-US_TASK_0185069724__cmdparmname33221452914">forwarding</span></strong> command to check information about the SRv6 local SID table.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1538645125214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1030288653214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0185069724__b1212516767214049">display segment-routing ipv6 local-sid end forwarding</strong>
                    My Local-SID End Forwarding Table
                    ---------------------------------

SID         : 2001:DB8:100::10/128                         FuncType    : End
Flavor      : PSP                                          SidCompress : NO
LocatorName : PE1                                          LocatorID   : 1
ProtocolType: STATIC                                       ProcessID   : --
UpdateTime  : 2021-08-30 01:46:05.713

Total SID(s): 1</pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1689155016498">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1737475716493"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0185069724__b4375257164914">display segment-routing ipv6 local-sid end forwarding</strong>
                    My Local-SID End Forwarding Table
                    ---------------------------------

SID         : 2001:DB8:130::30/128                         FuncType    : End
Flavor      : PSP                                          SidCompress : NO
LocatorName : PE2                                          LocatorID   : 1
ProtocolType: STATIC                                       ProcessID   : --
UpdateTime  : 2021-08-30 01:47:26.426

Total SID(s): 1</pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen202741624165012">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1733872535016"><font style="font-size:8pt" Face="Courier New" >~</font></span>P] <strong id="EN-US_TASK_0185069724__b633982512506">display segment-routing ipv6 local-sid end forwarding</strong>
                    My Local-SID End Forwarding Table
                    ---------------------------------

SID         : 2001:DB8:120::20/128                         FuncType : End
Flavor      : PSP                                          SidCompress : NO
LocatorName : P                                            LocatorID: 1
ProtocolType: STATIC                                       ProcessID: --
UpdateTime  : 2021-08-30 01:49:44.292

Total SID(s): 1</pre>
</p></li><li id="EN-US_TASK_0185069724__step2767155115501"><span id="EN-US_TASK_0185069724__cmd3767205115014">Configure an SRv6 TE Policy.</span><p><p id="EN-US_TASK_0185069724__p26595885220"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen116081839145213">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong id="EN-US_TASK_0185069724__b57993625615">segment-routing ipv6</strong> 
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b10413129145610">segment-list list1</strong> 
[*PE1-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0185069724__b2010951219564">index 5 sid ipv6 2001:DB8:120::20</strong>
[*PE1-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0185069724__b153960143568">index 10 sid ipv6 2001:DB8:130::30</strong>
[*PE1-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0185069724__b78581165568">commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0185069724__b17435101865620">quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b1068362115566">srv6-te-policy locator PE1</strong> 
[*PE1-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b8276625105611">srv6-te policy policy1 endpoint 2001:DB8:3::3 color 101</strong>
[*PE1-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0185069724__b1269715279560">binding-sid 2001:DB8:100::450</strong>
[*PE1-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0185069724__b6648163255617">candidate-path preference 100</strong>
[*PE1-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0185069724__b2500193455616">segment-list list1</strong> 
[*PE1-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0185069724__b14753113605618">commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0185069724__b156922385566">quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0185069724__b12508840135619">quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b8120184255617">quit</strong></pre>
</p><p><p id="EN-US_TASK_0185069724__p201991054155512"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1246354995615">[<font style="font-size:8pt" Face="Courier New" >~</font>PE2] <strong id="EN-US_TASK_0185069724__b12463749145612">segment-routing ipv6</strong> 
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b13464949115613">segment-list list1</strong> 
[*PE2-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0185069724__b194644492563">index 5 sid ipv6 2001:DB8:120::20</strong>
[*PE2-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0185069724__b12216125334915">index 10 sid ipv6 2001:DB8:100::10</strong>
[*PE2-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0185069724__b7464164955611">commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6-segment-list-list1] <strong id="EN-US_TASK_0185069724__b5465114915568">quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b12465249135620">srv6-te-policy locator PE2</strong> 
[*PE2-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b104651849165618">srv6-te policy policy1 endpoint 2001:DB8:1::1 color 101</strong>
[*PE2-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0185069724__b11466174915612">binding-sid 2001:DB8:130::350</strong>
[*PE2-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0185069724__b646616499564">candidate-path preference 100</strong>
[*PE2-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0185069724__b1146624995615">segment-list list1</strong> 
[*PE2-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0185069724__b124661349155615">commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6-policy-policy1-path] <strong id="EN-US_TASK_0185069724__b1146734916563">quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6-policy-policy1] <strong id="EN-US_TASK_0185069724__b104671949175612">quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6] <strong id="EN-US_TASK_0185069724__b9467249195613">quit</strong></pre>
<p id="EN-US_TASK_0185069724__p1918534073319">After the configuration is complete, run the <a href="cmdqueryname=display+srv6-te+policy"><b><span class="cmdname" id="EN-US_TASK_0185069724__cmdname336167155910">display srv6-te policy</span></b></a> command to check SRv6 TE Policy information.</p>
<p id="EN-US_TASK_0185069724__p13270165318583">The following example uses the command output on PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen19135742145917">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong id="EN-US_TASK_0185069724__b19181852205919">display srv6-te policy </strong>
PolicyName : policy1
Color                   : 101                            Endpoint             : 2001:DB8:3::3
TunnelId                : 1                              
TunnelType              : SRv6-TE Policy                 DelayTimerRemain     : -
Policy State            : Up                             State Change Time    : 2019-03-24 19:45:30
Admin State             : Up                             Traffic Statistics   : Disable
Backup Hot-Standby      : Disable                        BFD                  : Disable
Interface Index         : -                              Interface Name       : - 
Interface State         : -                              Encapsulation Mode   : Insert
Binding SID             : 2001:DB8:100::450(Insert, Preferred)
Candidate-path Count    : 1

 Candidate-path Preference : 100
 Path State             : Active                         Path Type            : Primary
 Protocol-Origin        : Configuration(30)              Originator           : 0, 0.0.0.0
 Discriminator          : 100                            Binding SID          : 2001:DB8:100::450
 GroupId                : 1                              Policy Name          : policy1
 Template ID            : 0                              Path Verification    : Disable                   
 DelayTimerRemain       : -                              Network Slice ID     : -
 Segment-List Count     : 1
  Segment-List          : list1
   Segment-List ID      : 1                              XcIndex              : 1  
   List State           : Up                             DelayTimerRemain     : -  
   Verification State   : -                              SuppressTimeRemain   : -
   PMTU                 : 9600                           Active PMTU          : 9600
   Weight               : 1                              BFD State            : - 
   Loop Detection State : Up                             BFD Delay Remain     : -   
   Network Slice ID     : -
   Binding SID          : -
   Reverse Binding ID   : -
   SID :  
         2001:DB8:120::20
         2001:DB8:130::30</pre>
</p></li><li id="EN-US_TASK_0185069724__step941516515515"><span id="EN-US_TASK_0185069724__cmd1241595105119">Configure a tunnel policy to import VPN traffic.</span><p><p id="EN-US_TASK_0185069724__p126925131116"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen116091636219">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong id="EN-US_TASK_0185069724__b1926512510413">route-policy p1 permit node 10</strong>
[*PE1-route-policy] <strong id="EN-US_TASK_0185069724__b36695713419">apply extcommunity color 0:101</strong>
[*PE1-route-policy] <strong id="EN-US_TASK_0185069724__b10284191248">quit</strong>
[*PE1] <strong id="EN-US_TASK_0185069724__b17372111111415">bgp 100</strong>
[*PE1-bgp] <strong id="EN-US_TASK_0185069724__b137221344124719">l2vpn-family evpn</strong>
[*PE1-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b6380716344">peer 2001:DB8:3::3 route-policy p1 import</strong> 
[*PE1-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b6342111911410">quit</strong>
[*PE1-bgp] <strong id="EN-US_TASK_0185069724__b94402225413">quit</strong>
[*PE1] <strong id="EN-US_TASK_0185069724__b22871525841">tunnel-policy p1</strong>
[*PE1-tunnel-policy-p1] <strong id="EN-US_TASK_0185069724__b1736072915410">tunnel select-seq ipv6 srv6-te-policy load-balance-number 1</strong>
[*PE1-tunnel-policy-p1] <strong id="EN-US_TASK_0185069724__b29650375419">quit</strong>
[*PE1] <strong id="EN-US_TASK_0185069724__b114379411349">ip vpn-instance vpna</strong>
[*PE1-vpn-instance-vpna] <strong id="EN-US_TASK_0185069724__b1655911445416">ipv6-family</strong>
[*PE1-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b155056471413">tnl-policy p1 evpn</strong>
[*PE1-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b0263350547">commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b395719511843">quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-vpn-instance-vpna] <strong id="EN-US_TASK_0185069724__b7607454642">quit</strong></pre>
</p><p><p id="EN-US_TASK_0185069724__p786008250"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen188601281259">[<font style="font-size:8pt" Face="Courier New" >~</font>PE2] <strong id="EN-US_TASK_0185069724__b6860988512">route-policy p1 permit node 10</strong>
[*PE2-route-policy] <strong id="EN-US_TASK_0185069724__b128601981514">apply extcommunity color 0:101</strong>
[*PE2-route-policy] <strong id="EN-US_TASK_0185069724__b686016812516">quit</strong>
[*PE2] <strong id="EN-US_TASK_0185069724__b198613811510">bgp 100</strong>
[*PE2-bgp] <strong id="EN-US_TASK_0185069724__b13268131517478">l2vpn-family evpn</strong>
[*PE2-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b68616819513">peer 2001:DB8:1::1 route-policy p1 import</strong> 
[*PE2-bgp-af-evpn] <strong id="EN-US_TASK_0185069724__b186210813518">quit</strong>
[*PE2-bgp] <strong id="EN-US_TASK_0185069724__b1086278551">quit</strong>
[*PE2] <strong id="EN-US_TASK_0185069724__b1186278155">tunnel-policy p1</strong>
[*PE2-tunnel-policy-p1] <strong id="EN-US_TASK_0185069724__b686328858">tunnel select-seq ipv6 srv6-te-policy load-balance-number 1</strong>
[*PE2-tunnel-policy-p1] <strong id="EN-US_TASK_0185069724__b198631483511">quit</strong>
[*PE2] <strong id="EN-US_TASK_0185069724__b19863989512">ip vpn-instance vpna</strong>
[*PE2-vpn-instance-vpna] <strong id="EN-US_TASK_0185069724__b11864781352">ipv6-family</strong>
[*PE2-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b78644814513">tnl-policy p1 evpn</strong>
[*PE2-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b88641686519">commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-vpn-instance-vpna-af-ipv6] <strong id="EN-US_TASK_0185069724__b188651784519">quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-vpn-instance-vpna] <strong id="EN-US_TASK_0185069724__b188651081553">quit</strong></pre>
<p id="EN-US_TASK_0185069724__p19518134843319">After the configuration is complete, run the <strong id="EN-US_TASK_0185069724__b151211122820">display ipv6 routing-table vpn-instance vpna</strong> command to check the routing table of the VPN instance. The command output shows that the VPN route has successfully recursed to the SRv6 TE Policy.</p>
<p id="EN-US_TASK_0185069724__p37977291269">The following example uses the command output on PE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen12526215973">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong id="EN-US_TASK_0185069724__b3965712082">display ipv6 routing-table vpn-instance vpna</strong>
Routing Table : vpna
         Destinations : 6        Routes : 6         

Destination  : 2001:DB8:111::111                       PrefixLength : 128
NextHop      : 2001:DB8:11::2                          Preference   : 255
Cost         : 0                                       Protocol     : EBGP
RelayNextHop : 2001:DB8:11::2                          TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/2/0</span>                    Flags        : RD

Destination  : 2001:DB8:222::222                       PrefixLength : 128
NextHop      : 2001:DB8:3::3                           Preference   : 255
Cost         : 0                                       Protocol     : IBGP
RelayNextHop : ::                                      TunnelID     : 0x000000003400000001
Interface    : <strong id="EN-US_TASK_0185069724__b72801293455">policy1</strong>                                Flags        : RD

Destination  : 2001:DB8:11::                           PrefixLength : 64
NextHop      : 2001:DB8:11::1                          Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/2/0</span>                    Flags        : D

Destination  : 2001:DB8:11::1                          PrefixLength : 128
NextHop      : ::1                                     Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : GigabitEthernet<span>0/2/0</span>                    Flags        : D

Destination  : 2001:DB8:22::                           PrefixLength : 64
NextHop      : 2001:DB8:3::3                           Preference   : 255
Cost         : 0                                       Protocol     : IBGP
RelayNextHop : ::                                      TunnelID     : 0x000000003400000001
Interface    : <strong id="EN-US_TASK_0185069724__b103183444912">policy1</strong>                                Flags        : RD

Destination  : FE80::                                  PrefixLength : 10
NextHop      : ::                                      Preference   : 0
Cost         : 0                                       Protocol     : Direct
RelayNextHop : ::                                      TunnelID     : 0x0
Interface    : NULL0                                   Flags        : DB</pre>
<pre class="screen" id="EN-US_TASK_0185069724__screen1192172413716">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong id="EN-US_TASK_0185069724__b1957685612710">display ipv6 routing-table vpn-instance vpna 2001:DB8:222::222 verbose</strong> 
Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route
------------------------------------------------------------------------------
Routing Table : vpna
Summary Count : 1

Destination  : 2001:DB8:222::222                       PrefixLength : 128
NextHop      : 2001:DB8:3::3                           Preference   : 255
Neighbour    : 2001:DB8:3::3                           ProcessID    : 0
Label        : NULL                                    Protocol     : IBGP
State        : Active Adv Relied                       Cost         : 0
Entry ID     : 0                                       EntryFlags   : 0x00000000
Reference Cnt: 0                                       Tag          : 0
Priority     : low                                     Age          : <span>1867sec</span>
IndirectID   : 0x10000DC                               Instance     : 
RelayNextHop : ::                                      TunnelID     : 0x000000003400000001
Interface    : <strong id="EN-US_TASK_0185069724__b7821122734411">policy1       </strong>                         Flags        : RD</pre>
</p></li><li id="EN-US_TASK_0185069724__step141971408214049"><span id="EN-US_TASK_0185069724__cmd259122439214049">Verify the configuration.</span><p><p id="EN-US_TASK_0185069724__p580947734214049">Check that CEs belonging to the same VPN instance can ping each other. The following example uses the command output on CE1.</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen2055452153214049">[<span class="keyword" id="EN-US_TASK_0185069724__keyword1803304134214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong id="EN-US_TASK_0185069724__b119120452422">ping ipv6 -a 2001:DB8:111::111 2001:DB8:222::222</strong>
  PING 2001:DB8:222::222 : 56  data bytes, press CTRL_C to break
    Reply from 2001:DB8:222::222 
    bytes=56 Sequence=1 hop limit=62 time=148 ms
    Reply from 2001:DB8:222::222 
    bytes=56 Sequence=2 hop limit=62 time=31 ms
    Reply from 2001:DB8:222::222 
    bytes=56 Sequence=3 hop limit=62 time=46 ms
    Reply from 2001:DB8:222::222 
    bytes=56 Sequence=4 hop limit=62 time=28 ms
    Reply from 2001:DB8:222::222 
    bytes=56 Sequence=5 hop limit=62 time=26 ms

  --- 2001:DB8:222::222 ping statistics---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0185069724__example121226172748"><a name="EN-US_TASK_0185069724__example121226172748"></a><a name="example121226172748"></a><a name="EN-US_TASK_0185069724__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul id="EN-US_TASK_0185069724__ul906018846214049"><li id="EN-US_TASK_0185069724__li40510049214049"><p id="EN-US_TASK_0185069724__p100077444214049"><a name="EN-US_TASK_0185069724__li40510049214049"></a><a name="li40510049214049"></a>PE1 configuration file</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen1346003201214049">#
sysname PE1
#
ip vpn-instance vpna
 ipv6-family
  route-distinguisher 100:1
  apply-label per-instance
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
  tnl-policy p1 evpn      
#               
segment-routing ipv6
 encapsulation source-address 2001:DB8:1::1
 locator PE1 ipv6-prefix 2001:DB8:100:: 64 static 32
  opcode ::10 end<span> psp</span>
 srv6-te-policy locator PE1
 segment-list list1
  index 5 sid ipv6 2001:DB8:120::20
  index 10 sid ipv6 2001:DB8:130::30
 srv6-te policy policy1 endpoint 2001:DB8:3::3 color 101
  binding-sid 2001:DB8:100::450
  candidate-path preference 100
   segment-list list1 
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0001.00
 #              
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE1 auto-sid-disable
 #              
#               
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ip binding vpn-instance vpna
 ipv6 enable    
 ipv6 address 2001:DB8:11::1/64
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:10::1/64
 isis ipv6 enable 1 
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:1::1/128
 isis ipv6 enable 1
#               
bgp 100         
 router-id 1.1.1.1
 peer 2001:DB8:3::3 as-number 100
 peer 2001:DB8:3::3 connect-interface LoopBack1
 #              
 ipv4-family unicast
  undo synchronization
 #              
 ipv6-family vpn-instance vpna
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE1 evpn
  segment-routing ipv6 traffic-engineer best-effort evpn
  peer 2001:DB8:11::2 as-number 65410
 #              
 l2vpn-family evpn
  policy vpn-target
  peer 2001:DB8:3::3 enable
  peer 2001:DB8:3::3 route-policy p1 import
  peer 2001:DB8:3::3 advertise encap-type srv6  
#               
route-policy p1 permit node 10
 apply extcommunity color 0:101
#               
tunnel-policy p1
 tunnel select-seq ipv6 srv6-te-policy load-balance-number 1
#               
return </pre>
</li><li id="EN-US_TASK_0185069724__li1695727257214049"><p id="EN-US_TASK_0185069724__p832529062214049"><a name="EN-US_TASK_0185069724__li1695727257214049"></a><a name="li1695727257214049"></a>P configuration file</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen816870381214049">sysname P
#               
segment-routing ipv6
 encapsulation source-address 2001:DB8:2::2
 locator P ipv6-prefix 2001:DB8:120:: 64 static 32
  opcode ::20 end<span> psp</span>
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 #              
 ipv6 enable topology ipv6
 segment-routing ipv6 locator P auto-sid-disable
 #              
#               
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:20::1/64
 isis ipv6 enable 1
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:10::2/64
 isis ipv6 enable 1
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:2::2/128
 isis ipv6 enable 1
#               
return </pre>
</li><li id="EN-US_TASK_0185069724__li1532259504214049"><p id="EN-US_TASK_0185069724__p61588904214049"><a name="EN-US_TASK_0185069724__li1532259504214049"></a><a name="li1532259504214049"></a>PE2 configuration file</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen443072700214049">#
sysname PE2
#
ip vpn-instance vpna
 ipv6-family
  route-distinguisher 200:1
  apply-label per-instance
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
  tnl-policy p1 evpn        
#               
segment-routing ipv6
 encapsulation source-address 2001:DB8:3::3
 locator PE2 ipv6-prefix 2001:DB8:130:: 64 static 32
  opcode ::30 end<span> psp</span>
 srv6-te-policy locator PE2
 segment-list list1
  index 5 sid ipv6 2001:DB8:120::20
  index 10 sid ipv6 2001:DB8:100::10
 srv6-te policy policy1 endpoint 2001:DB8:1::1 color 101
  binding-sid 2001:DB8:130::350
  candidate-path preference 100
   segment-list list1 
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 #              
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE2 auto-sid-disable
 #              
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:20::2/64
 isis ipv6 enable 1  
#               
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ip binding vpn-instance vpna
 ipv6 enable    
 ipv6 address 2001:DB8:22::1/64 
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:3::3/128
 isis ipv6 enable 1
#               
bgp 100         
 router-id 3.3.3.3
 peer 2001:DB8:1::1 as-number 100
 peer 2001:DB8:1::1 connect-interface LoopBack1
 #              
 ipv4-family unicast
  undo synchronization
 #              
 ipv6-family vpn-instance vpna
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE2 evpn
  segment-routing ipv6 traffic-engineer best-effort evpn
  peer 2001:DB8:22::2 as-number 65420
 #              
 l2vpn-family evpn
  policy vpn-target
  peer 2001:DB8:1::1 enable
  peer 2001:DB8:1::1 route-policy p1 import
  peer 2001:DB8:1::1 advertise encap-type srv6
#               
route-policy p1 permit node 10
 apply extcommunity color 0:101
#               
tunnel-policy p1
 tunnel select-seq ipv6 srv6-te-policy load-balance-number 1
#               
return</pre>
</li><li id="EN-US_TASK_0185069724__li542914323214049"><p id="EN-US_TASK_0185069724__p103010558214049"><a name="EN-US_TASK_0185069724__li542914323214049"></a><a name="li542914323214049"></a>CE1 configuration file</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen2050231282214049">sysname CE1
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:11::2/64
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:111::111/128
#               
bgp 65410       
 router-id 10.11.1.1
 peer 2001:DB8:11::1 as-number 100
 #              
 ipv4-family unicast
  undo synchronization
 #              
 ipv6-family unicast
  undo synchronization
  import-route direct
  peer 2001:DB8:11::1 enable
#  
return </pre>
</li><li id="EN-US_TASK_0185069724__li1841529282214049"><p id="EN-US_TASK_0185069724__p1048322010214049"><a name="EN-US_TASK_0185069724__li1841529282214049"></a><a name="li1841529282214049"></a>CE2 configuration file</p>
<pre class="screen" id="EN-US_TASK_0185069724__screen981825664214049">sysname CE2
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:22::2/64
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:222::222/128
#               
bgp 65420       
 router-id 10.22.2.2
 peer 2001:DB8:22::1 as-number 100
 #              
 ipv4-family unicast
  undo synchronization
 #              
 ipv6-family unicast
  undo synchronization
  import-route direct
  peer 2001:DB8:22::1 enable
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0101.html">Configuration Examples for SRv6 TE Policy (IS-IS)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0139.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0248.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>