
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Disabling Local Protection for SRv6 TE Policies">
<meta name="abstract" content="Local protection for SRv6 TE Policies can be disabled to prevent SRv6 traffic from bypassing key value-added service (VAS) devices.">
<meta name="description" content="Local protection for SRv6 TE Policies can be disabled to prevent SRv6 traffic from bypassing key value-added service (VAS) devices.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0225.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0223.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001172181556">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Disabling Local Protection for SRv6 TE Policies</title>
</head>
<body><a name="EN-US_TASK_0000001172181556"></a><a name="EN-US_TASK_0000001172181556"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Disabling Local Protection for SRv6 TE Policies</h1>
<div class="taskbody"><p>Local protection for SRv6 TE Policies can be disabled to prevent SRv6 traffic from bypassing key value-added service (VAS) devices.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0000001172181556__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before disabling local protection for SRv6 TE Policies, complete the following task:</p>
<ul><li>Configure an SRv6 TE Policy.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001172181556__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If the segment lists of an SRv6 TE Policy's primary candidate path all fail and a local protection path (for example, a TI-LFA or TE FRR path) exists, data traffic is switched to the TI-LFA or TE FRR path for forwarding.</p>
<p>In SRv6 TE Policy-based SFC scenarios, the SIDs in the segment lists of an SRv6 TE Policy belong to dedicated devices such as firewalls and traffic cleaning devices. For this reason, traffic steered into the SRv6 TE Policy is not allowed to bypass any of the SIDs during forwarding.</p>
<p>In this case, you need to disable local protection for SRv6 TE Policies, so that data traffic will not be switched to the TI-LFA or TE FRR path when the segment lists of the primary candidate path fail, preventing the traffic from bypassing dedicated devices such as firewalls and traffic cleaning devices.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001172181556__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>On the headend, disable local protection for SRv6 TE Policies.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a></span><p><p>SRv6 is enabled, and the SRv6 view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=srv6-te+policy"><b><span class="cmdname">srv6-te policy</span></b></a> <i><span class="varname">name-value</span></i> [ <strong><span>endpoint</span></strong> <i><span class="varname">endpoint-ip</span></i> <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> ]</span><p><p>The SRv6 TE Policy view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=forward+no-bypass"><b><span class="cmdname">forward no-bypass</span></b></a></span><p><p>Local protection for SRv6 TE Policies is disabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>On the SFF of an SFC, disable local protection for SRv6 TE Policies.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a></span><p><p>SRv6 is enabled, and the SRv6 view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=locator"><b><span class="cmdname">locator</span></b></a> <i><span class="varname">locator-name</span></i> [ <strong><span>ipv6-prefix</span></strong> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> [ <strong><span>static</span></strong> <i><span class="varname">static-length</span></i> | <strong><span>args</span></strong> <i><span class="varname">args-length</span></i> ] <sup>*</sup> [ <strong><span>default</span></strong> ] ]</span></span><p><p>The SRv6 locator view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=opcode"><b><span class="cmdname">opcode</span></b></a> <em>func-opcode1</em> <strong>end-as</strong></span><p><p>An opcode for static End.AS SIDs is configured, and the static SRv6 SFC proxy view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=cache+forward+no-bypass"><b><span class="cmdname">cache forward no-bypass</span></b></a></span><p><p>A bypass protection path is configured to protect traffic against SF service failures.</p>
</p><p><p>If the <a href="cmdqueryname=forward+no-bypass"><b><span class="cmdname">forward no-bypass</span></b></a> command is run on the headend of an SRv6 TE Policy to disable local protection, you need to run the <a href="cmdqueryname=cache+forward+no-bypass"><b><span class="cmdname">cache forward no-bypass</span></b></a> command on the SFF of the SFC to prevent the loss of the No-bypass flag during packet forwarding.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0225.html">Configuring SRv6 SFC
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0223.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>