
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring BGP Peer Relationships Between the Controller and Forwarder">
<meta name="abstract" content="Configuring BGP peer relationships between a controller and a forwarder allows the controller to deliver SRv6 TE Policies to the forwarder. This improves the efficiency of automated SRv6 TE Policy deployment.">
<meta name="description" content="Configuring BGP peer relationships between a controller and a forwarder allows the controller to deliver SRv6 TE Policies to the forwarder. This improves the efficiency of automated SRv6 TE Policy deployment.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0203.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0301.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0115c.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001216518413">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring BGP Peer Relationships Between the Controller and Forwarder</title>
</head>
<body><a name="EN-US_TASK_0000001216518413"></a><a name="EN-US_TASK_0000001216518413"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring BGP Peer Relationships Between the Controller and Forwarder</h1>
<div class="taskbody"><p>Configuring BGP peer relationships between a controller and a forwarder allows the controller to deliver SRv6 TE Policies to the forwarder. This improves the efficiency of automated SRv6 TE Policy deployment.</p>
<div class="context"><a name="EN-US_TASK_0000001216518413__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_context1720938886214048"><div class="p" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p1510099206214048">The process for a controller to deliver an SRv6 TE Policy is as follows:<ol id="EN-US_TASK_0000001216518413__en-us_task_0173983686_en-us_task_0173596577_ol77314223288"><li id="EN-US_TASK_0000001216518413__en-us_task_0173983686_en-us_task_0173596577_li67328227283">The controller collects information, such as network topology and SID information, through BGP-LS.</li><li id="EN-US_TASK_0000001216518413__en-us_task_0173983686_en-us_task_0173596577_li1943593432813">The controller and headend forwarder establish an IPv6 SR Policy address family-specific BGP peer relationship.</li><li id="EN-US_TASK_0000001216518413__en-us_task_0173983686_en-us_task_0173596577_li174471387281">The controller computes an SRv6 TE Policy path based on network topology information and delivers it to the headend forwarder through the BGP peer relationship. The headend then generates an SRv6 TE Policy entry.</li></ol>
</div>
<p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p1624402310610">To implement the preceding operations, you need to establish a BGP-LS peer relationship and a BGP IPv6 SR Policy peer relationship between the controller and the specified forwarder.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001216518413__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001216518413__en-us_task_0173983686_steps10132325172748"><li id="EN-US_TASK_0000001216518413__en-us_task_0173983686_step1170100432214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd1370205045214048">Configure a BGP-LS peer relationship.</span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p11488685613">BGP-LS is used to collect network topology information in a more efficient and easier manner. To ensure that topology information can be reported correctly, you need to configure a BGP-LS peer relationship between the controller and forwarder. This example provides the procedure for configuring BGP-LS on the forwarder. The procedure on the controller is similar to that on the forwarder.</p>
</p><ol type="a" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substeps1623163533214048"><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep1987425737214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd703716321214048">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname739993593214048">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p129593145913">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep111577321214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd526810216214048">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname1253837634214048">bgp</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname899426599214048">as-number</span></i></span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p10164934204415">BGP is enabled, and the BGP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep350159043214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd1017842921214048">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname1085594847214048">peer</span></b></a> { <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname43786265449">ipv4-address</span></i> |<i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname11973718161214">group-name</span></i> | <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname8973181818127">ipv6-address</span></i> } <strong><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdparmname818379676214048">as-number</span></strong> { <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname14923139889">as-number-plain</span></i> | <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname1892349985">as-number-dot</span></i> }</span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p139571839194612">A BGP peer is configured.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep82735239214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd1109242264214048">Run <a href="cmdqueryname=link-state-family+unicast"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname1978859105214048">link-state-family unicast</span></b></a></span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p05404241118">BGP-LS is enabled and the BGP-LS address family view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep1215838207214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd1285843844214048">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname294777571214048">peer</span></b></a> { <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname11797142374419">ipv4-address</span></i> |<i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname1098060536214048">group-name</span></i> | <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname201715033214048">ipv6-address</span></i> } <strong><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdparmname1077063465214048">enable</span></strong></span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p1153012529468">The device is enabled to exchange route information with a specified BGP-LS peer.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep1975928947214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd750695021214048">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname1358128215214048">commit</span></b></a></span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p6759191916210">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0000001216518413__en-us_task_0173983686_step1901858224214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd1384568820214048">Configure a BGP IPv6 SR Policy peer relationship.</span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p1651028468">This example provides the procedure for configuring a BGP IPv6 SR Policy peer relationship on the forwarder. The procedure on the controller is similar to that on the forwarder.</p>
</p><ol type="a" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substeps520644926214048"><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep2091654367214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd127644779214048">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname1927760154214048">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p1166711372025">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep2037680476214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd1374041423214048">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname1285287584214048">bgp</span></b></a> { <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname46376699214048">as-number-plain</span></i> | <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname1267524467214048">as-number-dot</span></i> }</span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p174512116313">BGP is enabled and the BGP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep12347478214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd1365632634214048">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname198612354214048">peer</span></b></a> { <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname66391227104318">ipv4-address</span></i> | <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname542686125">group-name</span></i> | <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname1342188101217">ipv6-address</span></i> } <strong><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdparmname916001935214048">as-number</span></strong> { <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname1059719201487">as-number-plain</span></i> | <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname55973201988">as-number-dot</span></i> }</span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p145771419432">A BGP peer is created.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep546765012214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd397031171214048">Run <a href="cmdqueryname=ipv6-family+sr-policy"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname122903085214048">ipv6-family sr-policy</span></b></a></span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p1239003619314">The BGP IPv6 SR Policy address family view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep139335211214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd1049716047214048">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname1649134214048">peer</span></b></a> { <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname20194404439">ipv4-address</span></i> | <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname917861964214048">group-name</span></i> | <i><span class="varname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_varname83292277214048">ipv6-address</span></i> } <strong><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdparmname1715716932214048">enable</span></strong></span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p867616561035">A specified BGP IPv6 SR Policy peer is enabled.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_substep440439597214048"><span id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmd92175570214048">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001216518413__en-us_task_0173983686_cmdname1285560140214048">commit</span></b></a></span><p><p id="EN-US_TASK_0000001216518413__en-us_task_0173983686_p4303112216419">The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0203.html">Configuring an SRv6 TE Policy (Dynamic Delivery by a Controller + OSPFv3 as an IGP)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0301.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0115c.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>