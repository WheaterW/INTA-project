
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring L3VPNv6 over SRv6 TE Policy">
<meta name="abstract" content="This section describes how to configure L3VPNv6 over SRv6 TE Policy.">
<meta name="description" content="This section describes how to configure L3VPNv6 over SRv6 TE Policy.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0131.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_l3vpnv4_over_srv6-te_policy.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_evpn-l3vpn_over_srv6-te_policy.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0290562100">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring L3VPNv6 over SRv6 TE Policy</title>
</head>
<body><a name="EN-US_TASK_0290562100"></a><a name="EN-US_TASK_0290562100"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring L3VPNv6 over SRv6 TE Policy</h1>
<div class="taskbody"><p>This section describes how to configure L3VPNv6 over SRv6 TE Policy.</p>
<div class="context"><a name="EN-US_TASK_0290562100__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Context</h4><p>L3VPNv6 over SRv6 TE Policy uses public network SRv6 TE Policies to carry L3VPNv6 data. The key implementation of L3VPNv6 over SRv6 TE Policy involves establishing SRv6 TE Policies, advertising VPN routes, and forwarding data.</p>
<p><a href="#EN-US_TASK_0290562100__fig_dc_vrp_srv6_cfg_all_001201">Figure 1</a> shows an example where an IPv6 public network is established between PE1 and PE2 and the involved VPNs are also IPv6 networks. SRv6 TE Policies can be deployed on the IPv6 public network to carry L3VPNv6 services.</p>
<div class="fignone" id="EN-US_TASK_0290562100__fig_dc_vrp_srv6_cfg_all_001201"><a name="EN-US_TASK_0290562100__fig_dc_vrp_srv6_cfg_all_001201"></a><a name="fig_dc_vrp_srv6_cfg_all_001201"></a><span class="figcap"><b>Figure 1 </b>L3VPNv6 over SRv6 TE Policy networking</span><br><span><img class="vsd" src="figure/en-us_image_0290562119.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0290562100__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring L3VPNv6 over SRv6 TE Policy, complete the following tasks:</p>
<ul><li><p>Configure a link-layer protocol.</p>
</li><li><p>Configure network-layer addresses for interfaces to ensure that neighboring devices are reachable at the network layer.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0290562100__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure IPv6 IS-IS on the PEs and P. For configuration details, see <a href="dc_vrp_isis_cfg_1023.html">Configuring Basic IS-IS Functions (IPv6)</a>.</span></li><li><span>Configure a VPN instance on each PE and enable the IPv6 address family.</span><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to create a VPN instance and enter the VPN instance view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> command to enable the VPN instance IPv6 address family and enter the VPN instance IPv6 address family view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=route-distinguisher"><b><span class="cmdname">route-distinguisher</span></b></a> <i><span class="varname">route-distinguisher</span></i> command to set an RD for the VPN instance IPv6 address family.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=vpn-target"><b><span class="cmdname">vpn-target</span></b></a> <i><span class="varname">vpn-target</span></i> &amp;&lt;1-8&gt; [ <strong><span>both</span></strong> | <strong><span>export-extcommunity</span></strong> | <strong><span>import-extcommunity</span></strong> ] command to configure VPN targets for the VPN instance IPv6 address family.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=default-color"><b><span class="cmdname">default-color</span></b></a> <em>color-value</em> command to specify the default color value for the L3VPNv6 service to be recursed to an SRv6 TE Policy.</span><p><p>If a remote VPN route without carrying the color extended community is leaked to a local VPN instance, the default color value is used for the recursion to an SRv6 TE Policy.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the VPN instance IPv6 address family view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the VPN instance view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the view of the interface to be bound to the VPN instance.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ip+binding+vpn-instance"><b><span class="cmdname">ip binding vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to bind the interface to the VPN instance.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=ip+binding+vpn-instance"><b><span class="cmdname">ip binding vpn-instance</span></b></a> command deletes IPv4<span> and IPv6</span> Layer 3 configurations on the interface, such as the configured IP addresses and routing protocols. You have to reconfigure them if they are required.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a> command to enable IPv6 on the interface.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv6+address"><b><span class="cmdname">ipv6 address</span></b></a> { <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> } command to configure an IPv6 address for the interface.</span><p><p>Layer 3 features such as PE-CE route exchange can be configured for PE-CE communication only after an IPv6 address is configured for the involved VPN interface.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the interface view.</span></li></ol>
</li><li><span>Configure PE-CE IPv6 route exchange. For configuration details, see <a href="dc_vrp_mpls-l3vpn-v6_cfg_2061.html">Configuring Route Exchange Between PEs and CEs</a>.</span></li><li><span>Establish an MP-IBGP peer relationship between the PEs.</span><ol type="a"><li><span>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> { <i><span class="varname">as-number-plain</span></i> | <i><span class="varname">as-number-dot</span></i> } command to enter the BGP view.</span></li><li><span>Run the <a href="cmdqueryname=router-id"><b><span class="cmdname">router-id</span></b></a> <i><span class="varname">ipv4-address</span></i> command to configure a router ID.</span></li><li><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <strong><span>as-number</span></strong> { <i><span class="varname">as-number-plain</span></i> | <i><span class="varname">as-number-dot</span></i> } command to configure the remote PE as a peer.</span></li><li><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <a href="cmdqueryname=connect-interface"><b><span class="cmdname">connect-interface</span></b></a> <strong><span>loopback</span></strong> <i><span class="varname">interface-number</span></i> command to specify the interface used to establish a TCP connection with the specified BGP peer.</span></li><li><span>Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> <strong><span>vpnv6</span></strong> command to enter the BGP-VPNv6 address family view.</span></li><li><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <strong><span>enable</span></strong> command to enable the device to exchange VPN-IPv6 routing information with the specified peer.</span></li><li><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <strong><span>prefix-sid</span></strong> [ <strong><span>advertise-srv6-locator</span></strong> ] command to enable the device to exchange IPv6 prefix SID and locator information with the specified IPv6 peer.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the BGP-VPNv6 address family view.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the BGP view.</span></li></ol>
</li><li><span>Configure the device to carry SIDs in VPN routes.</span><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a> command to enable SRv6 and enter its view.</span></li><li class="substepexpand"><span>Configure a source address for SRv6 encapsulation. Note that you only need to perform one of the following operations. If both of the operations are performed, the latest configuration overrides the previous one.</span><p><ul id="EN-US_TASK_0290562100__en-us_task_0172368959_ul261475310544"><li id="EN-US_TASK_0290562100__en-us_task_0172368959_li761411538546">Run the <a href="cmdqueryname=encapsulation+source-address"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0172368959_cmdname23368553547">encapsulation source-address</span></b></a> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0172368959_varname6336145515412">ipv6-address</span></i> [ <strong><span id="EN-US_TASK_0290562100__en-us_task_0172368959_cmdparmname1633612551542">ip-ttl</span></strong> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0172368959_varname2033635519549">ttl-value</span></i> ] command to directly configure a source address for SRv6 encapsulation.</li><li id="EN-US_TASK_0290562100__en-us_task_0172368959_li1554119145516">Run the <a href="cmdqueryname=encapsulation+source-interface"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0172368959_cmdname10488513573">encapsulation source-interface</span></b></a> { <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0172368959_varname0729113313571">intfname</span></i> | <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0172368959_varname17377153912578">interfaceType</span></i> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0172368959_varname1951134465716">interfaceNum</span></i> } [ <strong id="EN-US_TASK_0290562100__en-us_task_0172368959_b7945154716571">ip-ttl</strong> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0172368959_varname2091014584572">ttl-value</span></i> ] command to specify the interface to which the source address used for SRv6 encapsulation belongs.<p id="EN-US_TASK_0290562100__en-us_task_0172368959_p2488153115910">If no IPv6 global address is configured for the interface specified using the <a href="cmdqueryname=encapsulation+source-interface"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0172368959_cmdname2054948195915">encapsulation source-interface</span></b></a> command, the source address for SRv6 encapsulation is not configured.</p>
</li></ul>
</p></li><li class="substepexpand"><span>Run the <span><a href="cmdqueryname=locator"><b><span class="cmdname">locator</span></b></a> <i><span class="varname">locator-name</span></i> [ <strong><span>ipv6-prefix</span></strong> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> [ <strong><span>static</span></strong> <i><span class="varname">static-length</span></i> | <strong><span>args</span></strong> <i><span class="varname">args-length</span></i> ] <sup>*</sup> ]</span> command to configure an SRv6 locator.</span></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=opcode"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname1766088994214048">opcode</span></b></a> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname722568341214048">func-opcode</span></i> <strong><span id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdparmname234581745214048">end-dt6</span></strong> <strong><span id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdparmname25336280214048">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname27108924214048">vpn-instance-name</span></i> or <a href="cmdqueryname=opcode"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname95542061814">opcode</span></b></a> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname855820101812">func-opcode</span></i> <strong><span id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdparmname955132010187">end-dt46</span></strong> <strong><span id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdparmname185502013182">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname25513202183">vpn-instance-name</span></i></span><p><p id="EN-US_TASK_0290562100__en-us_task_0290562099_p9872143182616">An opcode for static SIDs is configured.</p>
</p><p><p id="EN-US_TASK_0290562100__en-us_task_0290562099_p16765656135513">A SID can be either dynamically allocated by BGP or manually configured. If you want to run the <span><a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname175640204576">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname165646206572">locator-name</span></i></span> command to enable dynamic End.DT6 SID allocation through BGP or the <span><a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname19854157121913">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname13854478194">locator-name</span></i></span> <a href="cmdqueryname=end-dt46"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname485497121913">end-dt46</span></b></a> command to enable dynamic End.DT46 SID allocation through BGP in the future, skip this step.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the SRv6 locator view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the SRv6 view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> { <i><span class="varname">as-number-plain</span></i> | <i><span class="varname">as-number-dot</span></i> } command to enter the BGP view.</span></li><li class="substepexpand"><span>Configure the device to add SIDs to VPN routes. Note that you need to perform configurations only in one of the following two views. If you perform configurations in both views, the configurations in these views are mutually exclusive.</span><p><ul id="EN-US_TASK_0290562100__en-us_task_0290562099_ul152411240193320"><li id="EN-US_TASK_0290562100__en-us_task_0290562099_li8685185120348">Configurations in the BGP-VPN instance IPv6 address family view<ol class="substepthirdol" id="EN-US_TASK_0290562100__en-us_task_0290562099_ol1776719892010"><li id="EN-US_TASK_0290562100__en-us_task_0290562099_li376788182019">Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname195814633514">ipv6-family</span></b></a> <strong><span id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdparmname758518914506">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname15858917504">vpn-instance-name</span></i> command to enter the BGP-VPN instance IPv6 address family view.</li><li id="EN-US_TASK_0290562100__en-us_task_0290562099_li155331713112014">Run the <span id="EN-US_TASK_0290562100__en-us_task_0290562099_ph937511229209"><a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname16375222112019">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname0375122211207">locator-name</span></i></span> command to enable the device to add SIDs to VPN routes.</li></ol>
</li><li id="EN-US_TASK_0290562100__en-us_task_0290562099_li62656718365">Configurations in the BGP-VPN instance view<ol class="substepthirdol" id="EN-US_TASK_0290562100__en-us_task_0290562099_ol13959932182010"><li id="EN-US_TASK_0290562100__en-us_task_0290562099_li14959143242018">Run the <a href="cmdqueryname=vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname91490730384515">vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname118794411484515">vpn-instance-name</span></i> command to create a BGP-VPN instance and enter its view.</li><li id="EN-US_TASK_0290562100__en-us_task_0290562099_li4213143915208">Run the <a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname137109216447">segment-routing ipv6 locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname54852370102">locator-name</span></i> <strong><span id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdparmname64911637151012">end-dt46</span></strong> command to enable the device to add SIDs to VPN routes.</li><li id="EN-US_TASK_0290562100__en-us_task_0290562099_li7649164310205">Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname384182164215">quit</span></b></a> command to exit the BGP-VPN instance view.</li><li id="EN-US_TASK_0290562100__en-us_task_0290562099_li33374913209">Run the <a href="cmdqueryname=ipv4-family+vpn-instance"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0290562099_cmdname1853071483115">ipv4-family vpn-instance</span></b></a> <i><span class="varname" id="EN-US_TASK_0290562100__en-us_task_0290562099_varname81841430144210">vpn-instance-name</span></i> command to enter the BGP-VPN instance IPv6 address family view.</li></ol>
</li></ul>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6 </span></b></a><strong><span>traffic-engineer</span></strong> [ <strong><span>best-effort</span></strong> ] command to enable the device to recurse VPN routes based on the SIDs carried in the routes.</span><p><p>If an SRv6 BE path exists on the network, you can set the <strong><span>best-effort</span></strong> parameter, allowing the SRv6 BE path to function as a best-effort path in the case of an SRv6 TE Policy fault.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=segment-routing+ipv6+color-only"><b><span class="cmdname" id="EN-US_TASK_0290562100__en-us_task_0184364555_cmdname12745135181714">segment-routing ipv6 color-only</span></b></a></span><p><p id="EN-US_TASK_0290562100__en-us_task_0184364555_p732163414453">The device is enabled to recurse VPN routes to color-only SRv6 TE Policies.</p>
</p><p><div class="note" id="EN-US_TASK_0290562100__en-us_task_0184364555_note112921244101920"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0290562100__en-us_task_0184364555_p82921449191">This command applies only to color-only scenarios and supports only statically configured SRv6 TE Policies.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the BGP-VPN instance IPv6 address family view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the BGP view.</span></li></ol>
</li><li><span>Configure an SRv6 TE Policy. For configuration details, see <a href="dc_vrp_srv6_cfg_all_0110.html">Configuring an SRv6 TE Policy (Manual Configuration + IS-IS as an IGP)</a> or <a href="dc_vrp_srv6_cfg_all_0116.html">Configuring an SRv6 TE Policy (Dynamic Delivery by a Controller + IS-IS as an IGP)</a>.</span></li><li><span>Configure VPNv6 routes to recurse to the SRv6 TE Policy.</span><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>node</span></strong> <i><span class="varname">node</span></i> command to create a route-policy with a specified node and enter the route-policy view.</span></li><li class="substepexpand"><span>(Optional) Configure an if-match clause for the route-policy. The community attributes of routes can be added or modified only if the routes match specified if-match clauses.</span><p><p>For configuration details, see <a href="dc_vrp_route-policy_cfg_0009.html">(Optional) Configuring an if-match Clause</a>.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=apply+extcommunity"><b><span class="cmdname">apply extcommunity</span></b></a> <strong><span>color</span></strong> <i><span class="varname">color</span></i> command to configure the BGP color extended community.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the route-policy view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i> command to enter the BGP view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> <strong><span>vpnv6</span></strong> command to enter the BGP-VPNv6 address family view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i> <a href="cmdqueryname=route-policy"><b><span class="cmdname">route-policy</span></b></a> <i><span class="varname">route-policy-name</span></i> { <strong><span>import</span></strong> | <strong><span>export</span></strong> } command to configure a BGP import or export route-policy.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the BGP-VPNv6 address family view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the BGP view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=tunnel-policy"><b><span class="cmdname">tunnel-policy</span></b></a> <i><span class="varname">policy-name</span></i> command to create a tunnel policy and enter the tunnel policy view.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description-text</span></i> command to configure a description for the tunnel policy.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=tunnel+select-seq"><b><span class="cmdname">tunnel select-seq</span></b></a> <strong><span>ipv6 srv6-te-policy</span></strong> <strong><span>load-balance-number</span></strong> <em>loadBalanceNumber</em> command to configure the tunnel selection sequence and the number of tunnels for load balancing.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the tunnel policy view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to enter the VPN instance view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> command to enter the VPN instance IPv6 address family view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=tnl-policy"><b><span class="cmdname">tnl-policy</span></b></a> <i><span class="varname">policy-name</span></i> command to apply the specified tunnel policy to the VPN instance IPv6 address family.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0290562100__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring L3VPNv6 over SRv6 TE Policy, verify the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+segment-routing+ipv6+locator"><b><span class="cmdname">display segment-routing ipv6 locator</span></b></a> [ <i><span class="varname">locator-name</span></i> ] <strong><span>verbose</span></strong> command to check SRv6 locator information.</p>
</li><li><p>Run the <a href="cmdqueryname=display+segment-routing+ipv6+local-sid"><b><span class="cmdname">display segment-routing ipv6 local-sid</span></b></a> { <strong><span>end</span></strong> | <strong><span>end-x</span></strong> | <strong><span>end-dt6</span></strong> | <strong><span>end-dt46</span></strong> } [ <i><span class="varname">sid</span></i> ] <strong><span>forwarding</span></strong> command to check information about the SRv6 local SID table.</p>
</li><li>Run the <a href="cmdqueryname=display+ip+vpn-instance"><b><span class="cmdname">display ip vpn-instance</span></b></a><strong> </strong><em>vpn-instance-name</em> <strong><span>tunnel-info nexthop</span></strong><em> nexthopIpv6Addr</em> command to check information about the tunnel to which the route with the specified next hop recurses in each address family of the current VPN instance.</li><li>Run the <a href="cmdqueryname=ping+srv6-te+policy"><b><span class="cmdname">ping srv6-te policy </span></b></a>{ <strong><span>policy-name</span></strong> <i><span class="varname">policyname</span></i> | <strong><span>endpoint-ip</span></strong> <i><span class="varname">endpointipv6</span></i> <strong><span>color</span></strong> <i><span class="varname">colorid</span></i> | <strong><span>binding-sid</span></strong> <i><span class="varname">bsid</span></i> } [ <strong><span>end-op</span></strong> <i><span class="varname">endop</span></i> ] [ <strong><span>-a</span></strong> <i><span class="varname">sourceaddr6</span></i> | <strong><span>-c </span></strong><i><span class="varname">count</span></i> | <strong><span>-m</span></strong> <i><span class="varname">interval</span></i> | <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-tc </span></strong><i><span class="varname">tc</span></i> | <strong><span>-h</span></strong> <i><span class="varname">hoplimit</span></i> ] command with the <strong><span>policy-name</span></strong> <i><span class="varname">policyname</span></i>, <strong><span>endpoint-ip</span></strong> <i><span class="varname">endpointipv6</span></i> <strong><span>color</span></strong> <i><span class="varname">colorid</span></i>, or <strong><span>binding-sid</span></strong> <i><span class="varname">bsid</span></i> parameter to initiate a ping operation on the specified SRv6 TE Policy for connectivity check.</li><li><p>Run the <a href="cmdqueryname=ping+ipv6"><b><span class="cmdname">ping ipv6</span></b></a> command to check the connectivity between CEs.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0131.html">Configuring SRv6 TE Policy Services
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_l3vpnv4_over_srv6-te_policy.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_evpn-l3vpn_over_srv6-te_policy.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>