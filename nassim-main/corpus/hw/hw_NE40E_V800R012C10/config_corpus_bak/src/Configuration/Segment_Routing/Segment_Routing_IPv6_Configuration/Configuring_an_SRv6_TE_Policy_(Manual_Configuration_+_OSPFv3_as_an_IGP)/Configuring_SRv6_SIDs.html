
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring SRv6 SIDs">
<meta name="abstract" content="The headend can orchestrate network paths only if SIDs are allocated to adjacencies and nodes on the network.">
<meta name="description" content="The headend can orchestrate network paths only if SIDs are allocated to adjacencies and nodes on the network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0200.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0071b.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0202.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001216676925">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring SRv6 SIDs</title>
</head>
<body><a name="EN-US_TASK_0000001216676925"></a><a name="EN-US_TASK_0000001216676925"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring SRv6 SIDs</h1>
<div class="taskbody"><p>The headend can orchestrate network paths only if SIDs are allocated to adjacencies and nodes on the network.</p>
<div class="context"><a name="EN-US_TASK_0000001216676925__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p" id="EN-US_TASK_0000001216676925__en-us_task_0173667621_p700238213214048">An SRv6 TE Policy can contain multiple candidate paths defined using segment lists. SIDs, such as End and End.X SIDs, are mandatory for SRv6 TE Policies. The SIDs can either be configured manually or be generated dynamically using an IGP.<ul id="EN-US_TASK_0000001216676925__en-us_task_0173667621_ul1174972709214048"><li id="EN-US_TASK_0000001216676925__en-us_task_0173667621_li580774324214048">In scenarios where SRv6 TE Policies are configured manually, dynamic SIDs used for the SRv6 TE Policies may change after an IGP restart. In this case, you need to manually adjust the SRv6 TE Policies so that they remain up. For this reason, dynamic SIDs are not suitable for large-scale use. You are therefore advised to configure SIDs manually and not to use dynamic SIDs.</li><li id="EN-US_TASK_0000001216676925__en-us_task_0173667621_li687950852214048">In scenarios where SRv6 TE Policies are delivered dynamically by a controller, you are also advised to configure SIDs manually. Although the controller can detect SID changes through BGP-LS, SIDs that are generated dynamically using an IGP change randomly, complicating routine maintenance and fault locating.</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000001216676925__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure SRv6 SIDs.</span><p><p>SRv6 paths are established based on SIDs, which can either be configured manually or be generated dynamically using OSPFv3. Use either of the following configuration methods:</p>
</p><ul><li>Configure SIDs manually.<ol><li><p>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></p>
<p>The system view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a></p>
<p>The SRv6 view is displayed.</p>
</li><li><p>Run <span><a href="cmdqueryname=locator"><b><span class="cmdname">locator</span></b></a> <i><span class="varname">locator-name</span></i> [ <strong><span>ipv6-prefix</span></strong> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> [ <strong><span>static</span></strong> <i><span class="varname">static-length</span></i> | <strong><span>args</span></strong> <i><span class="varname">args-length</span></i> ] <sup>*</sup> </span><span>]</span></p>
<p>An SRv6 locator is configured, and the SRv6 locator view is displayed.</p>
<div class="note" id="EN-US_TASK_0000001216676925__note157641582234"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001216676925__p1576417882316"><span><strong><span id="EN-US_TASK_0000001216676925__cmdparmname187644812235">ipv6-prefix</span></strong> <i><span class="varname" id="EN-US_TASK_0000001216676925__varname576419872314">ipv6-address</span></i></span><span> <i><span class="varname" id="EN-US_TASK_0000001216676925__varname37642822310">prefix-length</span></i></span> specifies the locator prefix and prefix length.</p>
<p id="EN-US_TASK_0000001216676925__p47641487236"><span><strong><span id="EN-US_TASK_0000001216676925__cmdparmname8764138172317">static</span></strong> <i><span class="varname" id="EN-US_TASK_0000001216676925__varname107645892318">static-length</span></i></span> specifies the static segment length, which determines the number of static SIDs that can be configured in the locator.</p>
<p id="EN-US_TASK_0000001216676925__p12764182238"><span><strong><span id="EN-US_TASK_0000001216676925__cmdparmname676411892315">args</span></strong> <i><span class="varname" id="EN-US_TASK_0000001216676925__varname137651387233">args-length</span></i></span> specifies the argument segment length. Arguments can be used to define flow, service, and other information for packets.</p>
</div></div>
</li><li>Run <a href="cmdqueryname=opcode"><b><span class="cmdname">opcode</span></b></a> <em>func-opcode</em> <strong>end</strong><span> { <strong><span>no-flavor</span></strong> | <strong><span>psp</span></strong> | <strong><span>psp-usp-usd</span></strong> }</span><div class="p">An opcode for static End SIDs is configured.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the <strong><span>no-flavor</span></strong> parameter is specified, SRv6 SIDs carry only the ultimate segment POP of the SRH (USP) flavor.</p>
<p>If the <span><strong><span>psp</span></strong></span> parameter is specified, SRv6 SIDs carry only the penultimate segment POP of the SRH (PSP) flavor.</p>
<p>If the <span><strong><span>psp-usp-usd</span></strong></span> parameter is specified, SRv6 SIDs carry all the PSP, USP, and ultimate segment decapsulation (USD) flavors. The USD flavor is often used in SRv6 TE Policy scenarios without service SIDs (for example, a scenario where IPv4 public network services without End.DT4 SIDs are redirected to an SRv6 TE Policy). When the packets of such services are forwarded to the device identified by the last SID, the USD flavor of the SID instructs this device to decapsulate the packets.</p>
</div></div>
</div>
</li><li><p>Run <a href="cmdqueryname=opcode"><b><span class="cmdname">opcode</span></b></a> <i><span class="varname">func-opcode</span></i> <strong><span>end-x</span></strong> <strong><span>interface</span></strong> <i><span class="varname">interface-name</span></i> <strong><span>nexthop</span></strong> <i><span class="varname">nexthop-address</span></i><span> { <strong><span>no-flavor</span></strong> | <strong><span>psp</span></strong> | <strong><span>psp-usp-usd</span></strong> }</span></p>
<p>An opcode for static End.X SIDs is configured.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The functions of the <span><strong><span>no-flavor</span></strong>, <strong><span>psp</span></strong>, and <strong><span>psp-usp-usd</span></strong></span> parameters are the same as those in the <a href="cmdqueryname=opcode"><b><span class="cmdname">opcode</span></b></a> <strong>end</strong> command described in the previous step.</p>
<p>A GRE tunnel interface can be specified using <strong><span>interface</span></strong> <i><span class="varname">interface-name</span></i>.</p>
</div></div>
</li><li>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a><p>Exit the Segment Routing IPv6 locator view.</p>
</li><li><p>(Optional) Run <a href="cmdqueryname=timer+end-x+update-delay"><b><span class="cmdname">timer end-x update-delay</span></b></a> <i><span class="varname">delay-time</span></i></p>
<p>A delay in delivering a static End.X SID to the forwarding table is configured.</p>
<p>The <a href="cmdqueryname=timer+end-x+update-delay"><b><span class="cmdname">timer end-x update-delay</span></b></a> command is mainly used in scenarios where the outbound interface associated with a static End.X SID changes from down to up and IGP routes reconverge.</p>
</li><li>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a><p>Exit the SRv6 view.</p>
</li><li>Run <a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <em>process-id</em> ]<p>The OSPFv3 process view is displayed.</p>
</li><li>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a> <strong>locator</strong> <em>locator-name</em> [ <strong>auto-sid-disable</strong> ]<p>OSPFv3 SRv6 is enabled.</p>
</li><li>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a><p>The configuration is committed.</p>
</li></ol>
</li><li>Configure OSPFv3 to dynamically generate SIDs.<ol><li><p>Run <span><a href="cmdqueryname=locator"><b><span class="cmdname">locator</span></b></a> <i><span class="varname">locator-name</span></i> [ <strong><span>ipv6-prefix</span></strong> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> [ <strong><span>static</span></strong> <i><span class="varname">static-length</span></i> | <strong><span>args</span></strong> <i><span class="varname">args-length</span></i></span><span> ] <sup>*</sup> ]</span></p>
<p>An SRv6 locator is configured, and the SRv6 locator view is displayed.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001216676925__en-us_task_0000001216676925_p1576417882316"><span><strong><span id="EN-US_TASK_0000001216676925__en-us_task_0000001216676925_cmdparmname187644812235">ipv6-prefix</span></strong> <i><span class="varname" id="EN-US_TASK_0000001216676925__en-us_task_0000001216676925_varname576419872314">ipv6-address</span></i></span><span> <i><span class="varname" id="EN-US_TASK_0000001216676925__en-us_task_0000001216676925_varname37642822310">prefix-length</span></i></span> specifies the locator prefix and prefix length.</p>
<p id="EN-US_TASK_0000001216676925__en-us_task_0000001216676925_p47641487236"><span><strong><span id="EN-US_TASK_0000001216676925__en-us_task_0000001216676925_cmdparmname8764138172317">static</span></strong> <i><span class="varname" id="EN-US_TASK_0000001216676925__en-us_task_0000001216676925_varname107645892318">static-length</span></i></span> specifies the static segment length, which determines the number of static SIDs that can be configured in the locator.</p>
<p id="EN-US_TASK_0000001216676925__en-us_task_0000001216676925_p12764182238"><span><strong><span id="EN-US_TASK_0000001216676925__en-us_task_0000001216676925_cmdparmname676411892315">args</span></strong> <i><span class="varname" id="EN-US_TASK_0000001216676925__en-us_task_0000001216676925_varname137651387233">args-length</span></i></span> specifies the argument segment length. Arguments can be used to define flow, service, and other information for packets.</p>
</div></div>
</li><li><p>(Optional) Run <a href="cmdqueryname=index+local-block+sid-reserve"><b><span class="cmdname">index</span></b></a> <i><span class="varname">index-id</span></i> <strong><span>local-block sid-reserve</span></strong> <i><span class="varname">number-value</span></i></p>
<p>A range reserved for binding SIDs (BSIDs) is configured in the locator.</p>
<p>In a scenario where a controller dynamically delivers SRv6 TE Policies, you can run this command to configure a range reserved for BSIDs. Forwarders use BGP-LS to report the range to the controller, which then allocates BSIDs within this range to SRv6 TE Policies or segment lists.</p>
</li><li>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a><p>Exit the Segment Routing IPv6 locator view.</p>
</li><li>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a><p>Exit the SRv6 view.</p>
</li><li>Run <a href="cmdqueryname=ospfv3"><b><span class="cmdname">ospfv3</span></b></a> [ <em>process-id</em> ]<p>The OSPFv3 process view is displayed.</p>
</li><li>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a> <strong>locator</strong> <em>locator-name</em><p>OSPFv3 SRv6 is enabled.</p>
</li><li><p>(Optional) Run <a href="cmdqueryname=segment-routing+ipv6+compatible+locator-fixed-length"><b><span class="cmdname">segment-routing ipv6 compatible locator-fixed-length</span></b></a></p>
<p>A fixed length is configured for the Locator field in the SRv6 Locator TLV carried in an SRv6 Locator LSA.</p>
<p>As defined in <em>draft-ietf-lsr-ospfv3-srv6-extensions-12</em> and later versions, the length of the Locator field in the SRv6 Locator TLV carried in an SRv6 Locator LSA is variable. To facilitate the interworking between protocols defining different lengths for the Locator field, you can run this command to configure the Locator field to be fixed at 128 bits.</p>
</li><li>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a><p>The configuration is committed.</p>
</li></ol>
</li></ul>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0200.html">Configuring an SRv6 TE Policy (Manual Configuration + OSPFv3 as an IGP)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0071b.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0202.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>