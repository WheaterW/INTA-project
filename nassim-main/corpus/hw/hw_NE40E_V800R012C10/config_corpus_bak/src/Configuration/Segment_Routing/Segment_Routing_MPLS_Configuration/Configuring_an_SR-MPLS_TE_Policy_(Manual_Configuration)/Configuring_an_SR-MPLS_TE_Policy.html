
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an SR-MPLS TE Policy">
<meta name="abstract" content="SR-MPLS TE Policy is a tunneling technology developed based on SR.">
<meta name="description" content="SR-MPLS TE Policy is a tunneling technology developed based on SR.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0059.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0061.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0267.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="segment_routing_vrp,w00604599,l00455378,l00587852,w00606909,w00800033">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="featurename" content="Segment Routing MPLS">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00468467">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172368846">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an SR-MPLS TE Policy</title>
</head>
<body><a name="EN-US_TASK_0172368846"></a><a name="EN-US_TASK_0172368846"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an SR-MPLS TE Policy</h1>
<div class="taskbody"><p>SR-MPLS TE Policy is a tunneling technology developed based on SR.</p>
<div class="context"><a name="EN-US_TASK_0172368846__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>SR-MPLS TE Policies are used to direct traffic to traverse an SR-MPLS TE network. Each SR-MPLS TE Policy can have multiple candidate paths with different preferences. From the valid candidate paths, the one with the highest preference is selected as the primary path, and the one with the second highest preference is selected as the backup path.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172368846__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a segment list.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=segment-routing"><b><span class="cmdname">segment-routing</span></b></a></span><p><p>SR is enabled globally and the Segment Routing view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=segment-list+%28Segment+Routing+view%29"><b><span class="cmdname">segment-list (Segment Routing view)</span></b></a> <i><span class="varname">list-name</span></i></span><p><p>A segment list is created for an SR-MPLS TE candidate path and the segment list view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=index"><b><span class="cmdname">index</span></b></a> <i><span class="varname">index</span></i> <strong><span>sid</span></strong> <strong><span>label</span></strong> <i><span class="varname">label</span></i></span><p><p>A next-hop SID is configured for the segment list.</p>
</p><p><p>You can run the command multiple times to configure multiple SIDs. The system generates a segment list with a label stack containing SIDs that are placed by index in ascending order. If a candidate path in the SR-MPLS TE Policy is preferentially selected, traffic is forwarded using the segment list of the candidate path. A maximum of 10 SIDs can be configured for each segment list.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an SR-MPLS TE Policy.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=segment-routing"><b><span class="cmdname">segment-routing</span></b></a></span><p><p>SR is enabled globally and the Segment Routing view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=sr-te-policy+bgp-ls+enable"><b><span class="cmdname">sr-te-policy bgp-ls enable</span></b></a></span><p><p>The SR-MPLS TE Policy is enabled to report information to BGP-LS.</p>
<p>After the <a href="cmdqueryname=sr-te-policy+bgp-ls+enable"><b><span class="cmdname">sr-te-policy bgp-ls enable</span></b></a> command is run, the system sends the path information to BGP-LS with the candidate paths of the SR-MPLS TE Policy as the granularity.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=sr-te+policy"><b><span class="cmdname">sr-te policy</span></b></a> <i><span class="varname">policy-name</span></i><i><span class="varname"> </span></i>[ <strong><span>endpoint</span></strong> <i><span class="varname">ipv4-address</span></i> <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> ]</span><p><p>An SR-MPLS TE Policy is created, the endpoint and color value are configured for the SR-MPLS TE Policy, and the SR-MPLS TE Policy view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=binding-sid"><b><span class="cmdname">binding-sid</span></b></a> <i><span class="varname">label-value</span></i></span><p><p>A binding SID is configured for the SR-MPLS TE Policy.</p>
<p>The value of <i><span class="varname">label-value</span></i> needs to be within the scope defined by the <a href="cmdqueryname=local-block"><b><span class="cmdname">local-block</span></b></a> <i><span class="varname">begin-value</span></i> <i><span class="varname">end-value</span></i> command.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=mtu"><b><span class="cmdname">mtu</span></b></a> <i><span class="varname">mtu</span></i></span><p><p>An MTU is configured for the SR-MPLS TE Policy.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=diffserv-mode"><b><span class="cmdname">diffserv-mode</span></b></a> { <strong><span>pipe</span></strong> <i><span class="varname">service-class</span></i> <i><span class="varname">service-color</span></i> | <strong><span>uniform</span></strong> }</span><p><p>A DiffServ mode is configured for the SR-MPLS TE Policy to implement end-to-end QoS guarantee.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=candidate-path+preference"><b><span class="cmdname">candidate-path preference</span></b></a> <i><span class="varname">preference</span></i></span><p><p>A candidate path and its preference are configured for the SR-MPLS TE Policy.</p>
</p><p><p>Each SR-MPLS TE Policy supports multiple candidate paths. A larger <i><span class="varname">preference</span></i> value indicates a higher preference. The candidate path with the highest preference takes effect.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=segment-list+%28candidate+path+view%29"><b><span class="cmdname">segment-list (candidate path view)</span></b></a> <i><span class="varname">list-name</span></i><span> [ <strong><span>weight</span></strong> <i><span class="varname">weight-value</span></i> ]</span></span><p><p>A segment list is configured to reference the SR-MPLS TE candidate path.</p>
</p><p><p>The segment list must have been created using the <a href="cmdqueryname=segment-list+%28Segment+Routing+view%29"><b><span class="cmdname">segment-list (Segment Routing view)</span></b></a> command.</p>
<p>You can use the <span><strong><span>weight</span></strong> <i><span class="varname">weight-value</span></i></span> parameter to configure a weight for the segment list. If the weight configured for a segment list of a candidate path is less than the average weight, the segment list does not forward traffic. The average weight is calculated using the following formula: Average weight = Sum of weights of all segment lists of a candidate path/Maximum number of channels supported for load balancing For example, if the maximum number of channels supported for load balancing is M and a candidate path has a total of N segment lists, the average weight of the N segment lists is calculated as follows: (Weight 1 + Weight 2 + ... + Weight N)/M = X. In this example, X represents the average weight, and segment lists whose weights are less than X do not forward traffic.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Because UCMP for the headend of an SR-MPLS TE Policy is implemented among multiple segment lists of the SR-MPLS TE Policy, you only need to configure weights for the segment lists, without the need to run the <span><a href="cmdqueryname=load-balance+unequal-cost+enable"><b><span class="cmdname">load-balance unequal-cost enable</span></b></a></span> command. To implement UCMP for a transit P node of an SR-MPLS TE Policy, run the <a href="cmdqueryname=load-balance+mpls+unequal-cost+enable"><b><span class="cmdname">load-balance mpls unequal-cost enable</span></b></a> command.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0059.html">Configuring an SR-MPLS TE Policy (Manual Configuration)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0061.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sr_all_cfg_0267.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>