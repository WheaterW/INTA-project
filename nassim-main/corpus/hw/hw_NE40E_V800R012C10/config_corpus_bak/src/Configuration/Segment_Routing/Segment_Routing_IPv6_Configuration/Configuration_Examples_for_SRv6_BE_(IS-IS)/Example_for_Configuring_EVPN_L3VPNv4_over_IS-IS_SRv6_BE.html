
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring EVPN L3VPNv4 over IS-IS SRv6 BE">
<meta name="abstract" content="This section provides an example for configuring SRv6 BE to carry EVPN L3VPNv4 services.">
<meta name="description" content="This section provides an example for configuring SRv6 BE to carry EVPN L3VPNv4 services.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0010.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0031.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0216499740">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring EVPN L3VPNv4 over IS-IS SRv6 BE</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0216499740"></a><a name="EN-US_TASK_0216499740"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring EVPN L3VPNv4 over IS-IS SRv6 BE</h1>
<div class="taskbody" id="taskbody1577762700322"><p id="shortdesc528230685214049">This section provides an example for configuring SRv6 BE to carry EVPN L3VPNv4 services.</p>
<div class="context"><a name="EN-US_TASK_0216499740__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0216499740__section_dc_vrp_evpn_cfg_015101"><h4 class="sectiontitle">Networking Requirements</h4><p id="EN-US_TASK_0216499740__p1961945123710"></p>
<p id="EN-US_TASK_0216499740__p280365102214049">On the network shown in <a href="#EN-US_TASK_0216499740__fig_dc_vrp_evpn_cfg_015101">Figure 1</a>, PE1, the P, and PE2 are in the same AS and run IS-IS to implement IPv6 network connectivity. It is required that a bidirectional SRv6 BE path be deployed between PE1 and PE2 to carry EVPN L3VPNv4 services.</p>
<div class="fignone" id="EN-US_TASK_0216499740__fig_dc_vrp_evpn_cfg_015101"><a name="EN-US_TASK_0216499740__fig_dc_vrp_evpn_cfg_015101"></a><a name="fig_dc_vrp_evpn_cfg_015101"></a><span class="figcap"><b>Figure 1 </b>EVPN L3VPNv4 over SRv6 BE networking</span><div class="note" id="EN-US_TASK_0216499740__note237544264214049"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0216499740__p234345275214049">Interfaces 1 and 2 in this example represent GE <span>0/1/0</span> and GE <span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0216499740__image37008574318" src="figure/en-us_image_0216502181.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0216499740__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0216499740__section_dc_vrp_evpn_cfg_015102"><h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0216499740__p1181486406214049">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0216499740__ol1216461218214049"><li id="EN-US_TASK_0216499740__li2099513083214049"><p id="EN-US_TASK_0216499740__p1212582124214049"><a name="EN-US_TASK_0216499740__li2099513083214049"></a><a name="li2099513083214049"></a>Enable IPv6 forwarding and configure an IPv6 address for each interface on PE1, the P, and PE2.</p>
</li><li id="EN-US_TASK_0216499740__li1058618670214049"><p id="EN-US_TASK_0216499740__p301971295214049"><a name="EN-US_TASK_0216499740__li1058618670214049"></a><a name="li1058618670214049"></a>Enable IS-IS, configure an IS-IS level, and specify a network entity title (NET) on PE1, the P, and PE2.</p>
</li><li id="EN-US_TASK_0216499740__li1400430836214049"><p id="EN-US_TASK_0216499740__p620289532214049"><a name="EN-US_TASK_0216499740__li1400430836214049"></a><a name="li1400430836214049"></a>Configure an EVPN L3VPN instance on each PE and bind the EVPN L3VPN instance to an access-side interface.</p>
</li><li id="EN-US_TASK_0216499740__li1052713491354"><p id="EN-US_TASK_0216499740__p1527184911354"><a name="EN-US_TASK_0216499740__li1052713491354"></a><a name="li1052713491354"></a>Establish an EBGP peer relationship between each PE and its connected CE.</p>
</li><li id="EN-US_TASK_0216499740__li1462578899214049"><p id="EN-US_TASK_0216499740__p1465731931214049"><a name="EN-US_TASK_0216499740__li1462578899214049"></a><a name="li1462578899214049"></a>Establish a BGP EVPN peer relationship between PEs.</p>
</li><li id="EN-US_TASK_0216499740__li2093373954214049"><p id="EN-US_TASK_0216499740__p1111456077214049"><a name="EN-US_TASK_0216499740__li2093373954214049"></a><a name="li2093373954214049"></a>Configure SRv6 BE on PEs, and enable IS-IS SRv6.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0216499740__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0216499740__section_dc_vrp_evpn_cfg_015103"><h4 class="sectiontitle">Data Preparation</h4><p id="EN-US_TASK_0216499740__p1249241360214049">To complete the configuration, you need the following data:</p>
<ul id="EN-US_TASK_0216499740__ul754541725214049"><li id="EN-US_TASK_0216499740__li1220262922214049"><p id="EN-US_TASK_0216499740__p490101204214049"><a name="EN-US_TASK_0216499740__li1220262922214049"></a><a name="li1220262922214049"></a>L3VPN instance name: vpn1</p>
</li><li id="EN-US_TASK_0216499740__li336282426214049"><p id="EN-US_TASK_0216499740__p1869258525214049"><a name="EN-US_TASK_0216499740__li336282426214049"></a><a name="li336282426214049"></a>RD and RT of the L3VPN instance</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0216499740__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0216499740__section_dc_vrp_evpn_cfg_015104"><li id="EN-US_TASK_0216499740__step1440631525214049"><span id="EN-US_TASK_0216499740__cmd1963404397214049">Enable IPv6 forwarding and configure an IPv6 address for each interface. The following example uses the configuration of PE1. The configurations of other devices are similar to the configuration of PE1. For configuration details, see <a href="#EN-US_TASK_0216499740__section_dc_vrp_evpn_cfg_015105">Configuration Files</a> in this section.</span><p><pre class="screen" id="EN-US_TASK_0216499740__screen1509961031214049">&lt;<span class="keyword" id="EN-US_TASK_0216499740__keyword429743421214049">HUAWEI</span>&gt; <strong id="EN-US_TASK_0216499740__b184470581214049">system-view</strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword1700828469214049"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0216499740__keyword669253266214049">HUAWEI</span>] <strong id="EN-US_TASK_0216499740__b681246416214049">sysname PE1</strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword1408516569214049">*</span><span class="keyword" id="EN-US_TASK_0216499740__keyword1225734302214049">HUAWEI</span>] <strong id="EN-US_TASK_0216499740__b2010662632214049">commit</strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword1885219041214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b1757760535214049">interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword574629683214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0216499740__b1965119001214049">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword1937431448214049">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0216499740__b467806501214049">ipv6 address 2001:DB8:10::1 64</strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword1960730166214049">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0216499740__b648940825214049">quit</strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword342814998214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b1243873980214049">interface LoopBack 1</strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword918947587214049">*</span>PE1-LoopBack1] <strong id="EN-US_TASK_0216499740__b28947712214049">ipv6 enable</strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword542387861214049">*</span>PE1-LoopBack1] <strong id="EN-US_TASK_0216499740__b1184644536214049">ipv6 address 2001:DB8:1::1 128</strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword667578876214049">*</span>PE1-LoopBack1] <strong id="EN-US_TASK_0216499740__b1632390468214049">quit</strong>
[<span class="keyword" id="EN-US_TASK_0216499740__keyword1119356689214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b30747720214049">commit</strong></pre>
</p></li><li id="EN-US_TASK_0216499740__step1791742845214049"><span id="EN-US_TASK_0216499740__cmd1806297681214049">Configure IS-IS.</span><p><p id="EN-US_TASK_0216499740__p1468171255214049"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen1069611142214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1700734257214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b826977159214049">isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen729670929214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword156829221214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0216499740__b1817964733214049">is-level level-1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1935101344214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1337084006214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0216499740__b1526525910214049">cost-style wide</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1599089463214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword13021210214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0216499740__b348638983214049">network-entity 10.0000.0000.0001.00</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1469529367214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1173830009214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0216499740__b85755300214049">ipv6 enable topology ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1038423586214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1413334087214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0216499740__b1527550830214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen975940591214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1501680457214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b1742895718214049">interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1184839254214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1667218548214049">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0216499740__b2116176702214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1505773104214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1171731135214049">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0216499740__b1388483397214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1964710855214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword445751055214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b1797836466214049">interface loopback1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen388193530214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword660754624214049">*</span>PE1-LoopBack1] <strong id="EN-US_TASK_0216499740__b1602730329214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1002078427214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1790063510214049">*</span>PE1-LoopBack1] <strong id="EN-US_TASK_0216499740__b1591698872214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen27600925214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1342618417214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b1916541601214049">commit</strong></pre>
<p id="EN-US_TASK_0216499740__p171589628214049"># Configure the P.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen290830932214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1114319789214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>P] <strong id="EN-US_TASK_0216499740__b706993941214049">isis 1</strong> </pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1243911245214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1747433554214049">*</span>P-isis-1] <strong id="EN-US_TASK_0216499740__b1332109978214049">is-level level-1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen149382922214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword314054725214049">*</span>P-isis-1] <strong id="EN-US_TASK_0216499740__b1894961764214049">cost-style wide</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen112598123214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword104136151214049">*</span>P-isis-1] <strong id="EN-US_TASK_0216499740__b2079371413214049">network-entity 10.0000.0000.0002.00</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen846431185214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1911902870214049">*</span>P-isis-1] <strong id="EN-US_TASK_0216499740__b1426726952214049">ipv6 enable topology ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1181806019214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1618216328214049">*</span>P-isis-1] <strong id="EN-US_TASK_0216499740__b1121580060214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen682641420214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1034464706214049">*</span>P] <strong id="EN-US_TASK_0216499740__b728879041214049">interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1322875339214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword174378299214049">*</span>P-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0216499740__b1805897779214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen992817018214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1242564244214049">*</span>P-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0216499740__b931924214214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1775150183214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1489831351214049">*</span>P] <strong id="EN-US_TASK_0216499740__b1324750759214049">interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen176758979214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword283691976214049">*</span>P-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0216499740__b468202994214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen499865764214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2072437544214049">*</span>P-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0216499740__b2058812408214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen751674982214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1148547910214049">*</span>P] <strong id="EN-US_TASK_0216499740__b1412735793214049">interface loopback1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen948977230214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1787627115214049">*</span>P-LoopBack1] <strong id="EN-US_TASK_0216499740__b1571634783214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen2108178027214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1468028845214049">*</span>P-LoopBack1] <strong id="EN-US_TASK_0216499740__b433076656214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen916285929214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword874812393214049">*</span>P] <strong id="EN-US_TASK_0216499740__b462675968214049">commit</strong></pre>
<p id="EN-US_TASK_0216499740__p982942701214049"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen1634255673214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1045484305214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0216499740__b38859574214049">isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen885076132214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1592550336214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0216499740__b1512035108214049">is-level level-1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1505672701214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1625831717214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0216499740__b2034066904214049">cost-style wide</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1046636429214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1848386541214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0216499740__b508390690214049">network-entity 10.0000.0000.0003.00</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1879430668214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword79786341214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0216499740__b1759167963214049">ipv6 enable topology ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1772402673214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword655960808214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0216499740__b1702791641214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen270180047214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1681043108214049">*</span>PE2] <strong id="EN-US_TASK_0216499740__b428710168214049">interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1331282716214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1837960283214049">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0216499740__b575547492214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen148233640214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword287785085214049">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong id="EN-US_TASK_0216499740__b431324381214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen105141484214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword531395050214049">*</span>PE2] <strong id="EN-US_TASK_0216499740__b1089262187214049">interface loopback1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1687853277214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1646636531214049">*</span>PE2-LoopBack1] <strong id="EN-US_TASK_0216499740__b351062450214049">isis ipv6 enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen371774284214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword12604267214049">*</span>PE2-LoopBack1] <strong id="EN-US_TASK_0216499740__b864031244214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1551231330214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword100034084214049">*</span>PE2] <strong id="EN-US_TASK_0216499740__b318445402214049">commit</strong></pre>
</p><p><p id="EN-US_TASK_0216499740__p1364552175812">After the configuration is complete, perform the following operations to check whether IS-IS is successfully configured:</p>
<p id="EN-US_TASK_0216499740__p193590641214049"># Display IS-IS neighbor information. The following example uses the command output on PE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen1551251461214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword72574447214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b502711849214049">display isis peer</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1483527613214049">                          Peer information for ISIS(1)
                         
  System Id     Interface         Circuit Id        State HoldTime Type     PRI
--------------------------------------------------------------------------------
0000.0000.0002* GE<span>0/1/0</span>           0000.0000.0002.01  Up   8s       L1       64 

Total Peer(s): 1</pre>
</p></li><li id="EN-US_TASK_0216499740__step2073563070214049"><span id="EN-US_TASK_0216499740__cmd1009893974214049">Configure an EVPN L3VPN instance on each PE and bind the EVPN L3VPN instance to an access-side interface.</span><p><p id="EN-US_TASK_0216499740__p867146304214049"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen1770990314214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1560214430214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b324808785214049">ip vpn-instance vpn1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen318620502214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword193585506214049">*</span>PE1-vpn-instance-vpn1] <strong id="EN-US_TASK_0216499740__b592309571214049">ipv4-family</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1858362949214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1886933004214049">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong id="EN-US_TASK_0216499740__b1547262525214049">route-distinguisher 100:1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen462375695214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword454105283214049">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong id="EN-US_TASK_0216499740__b1095101879214049">vpn-target 1:1 evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen2051030005214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword586192595214049">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong id="EN-US_TASK_0216499740__b799299536214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen62919293214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1358824149214049">*</span>PE1-vpn-instance-vpn1] <strong id="EN-US_TASK_0216499740__b75119320214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen428677917214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword60129118214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b396681985214049">interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen182300612214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword600491295214049">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0216499740__b1440173193214049">ip binding vpn-instance vpn1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen905203993214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword123656700214049">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0216499740__b1649736433214049">ip address 10.1.1.1 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen893389210214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1362300610214049">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0216499740__b1064927342214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen214450169214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1926696981214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b650378296214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1099858370214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword559522891214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b1068609118214049">ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen717203782214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword283883565214049">*</span>PE1-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b494558533214049">advertise l2vpn evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1155666372214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword868265322214049">*</span>PE1-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b2098722925214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1030483288214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword906275388214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b2117654639214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen569459382214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1171783849214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b1458884216214049">commit</strong></pre>
<p id="EN-US_TASK_0216499740__p1996337690214049"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen277965742214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1894626052214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0216499740__b512173708214049">ip vpn-instance vpn1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1493368480214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1593265778214049">*</span>PE2-vpn-instance-vpn1] <strong id="EN-US_TASK_0216499740__b778078290214049">ipv4-family</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen577280251214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword762940450214049">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong id="EN-US_TASK_0216499740__b596897197214049">route-distinguisher 200:1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen90700614214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword319517860214049">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong id="EN-US_TASK_0216499740__b1238320356214049">vpn-target 1:1 evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1376318404214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1380601530214049">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong id="EN-US_TASK_0216499740__b1209615633214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1864479509214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1400409771214049">*</span>PE2-vpn-instance-vpn1] <strong id="EN-US_TASK_0216499740__b1656607438214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen463936796214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2113268511214049">*</span>PE2] <strong id="EN-US_TASK_0216499740__b1480780984214049">interface gigabitethernet<span>0/2/0</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1107239008214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword124883802214049">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0216499740__b563503832214049">ip binding vpn-instance vpn1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1301017772214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword137074228214049">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0216499740__b1622434560214049">ip address 10.2.1.1 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen922196349214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2107032352214049">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong id="EN-US_TASK_0216499740__b454784714214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen774989161214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword156483169214049">*</span>PE2] <strong id="EN-US_TASK_0216499740__b2001225578214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen226880380214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword769402699214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b467812788214049">ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1874750899214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1232381709214049">*</span>PE2-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b322026233214049">advertise l2vpn evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen886687171214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword533137336214049">*</span>PE2-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b2048656529214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1051657765214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword626390293214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b1407825486214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1116730264214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1887840220214049">*</span>PE2] <strong id="EN-US_TASK_0216499740__b1946711858214049">commit</strong></pre>
</p></li><li id="EN-US_TASK_0216499740__step1865447642214049"><span id="EN-US_TASK_0216499740__cmd1464756541214049">Establish an EBGP peer relationship between each PE and its connected CE.</span><p><p id="EN-US_TASK_0216499740__p1643652318214049"># Configure CE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen829160852214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1045788500214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong id="EN-US_TASK_0216499740__b334061718214049">interface loopback 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1050175649214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword67160647214049">*</span>CE1-LoopBack1] <strong id="EN-US_TASK_0216499740__b2054377289214049">ip address 11.11.11.11 32</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1302694093214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1332273304214049">*</span>CE1-LoopBack1] <strong id="EN-US_TASK_0216499740__b1310712595214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1369428110214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1310988422214049">*</span>CE1] <strong id="EN-US_TASK_0216499740__b668253579214049">bgp 65410</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1504128912214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword357914958214049">*</span>CE1-bgp] <strong id="EN-US_TASK_0216499740__b1972837915214049">peer 10.1.1.1 as-number 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1511991290214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2100953327214049">*</span>CE1-bgp] <strong id="EN-US_TASK_0216499740__b1343479232214049">network 11.11.11.11 32</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1274659726214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2132911534214049">*</span>CE1-bgp] <strong id="EN-US_TASK_0216499740__b1046700111214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen966682440214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2135541517214049">*</span>CE1] <strong id="EN-US_TASK_0216499740__b1361680404214049">commit</strong></pre>
<p id="EN-US_TASK_0216499740__p1073855680214049"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen2001832120214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword641550737214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b1989854405214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen344963436214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword776759195214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b923775213214049">router-id 1.1.1.1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen557276881214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword665854073214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b2122869940214049">ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen908849508214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword80154554214049">*</span>PE1-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b1595069202214049">peer 10.1.1.2 as-number 65410</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1645756820214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1984985663214049">*</span>PE1-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b1303343006214049">import-route direct</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen431870662214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1381701621214049">*</span>PE1-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b215107804214049">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1611673008214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword218203214522"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b1581970325214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen984891506214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword558843844214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b337551455214049">quit</strong></pre>
<p id="EN-US_TASK_0216499740__p1664745458214049"># Configure CE2.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen787487097214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1998583583214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong id="EN-US_TASK_0216499740__b1990855006214049">interface loopback 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen6420886214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword305714531214049">*</span>CE2-LoopBack1] <strong id="EN-US_TASK_0216499740__b453044808214049">ip address 22.22.22.22 32</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen2091789575214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2053925844214049">*</span>CE2-LoopBack1] <strong id="EN-US_TASK_0216499740__b1137835442214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen669117079214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1246563211214049">*</span>CE2] <strong id="EN-US_TASK_0216499740__b1193105490214049">bgp 65420</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen378104331214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword831272890214049">*</span>CE2-bgp] <strong id="EN-US_TASK_0216499740__b631311951214049">peer 10.2.1.1 as-number 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1423538880214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1312112835214049">*</span>CE2-bgp] <strong id="EN-US_TASK_0216499740__b236565175214049">network 22.22.22.22 32</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1870890002214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1551006894214049">*</span>CE2-bgp] <strong id="EN-US_TASK_0216499740__b497276254214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1175273400214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1072665239214049">*</span>CE2] <strong id="EN-US_TASK_0216499740__b2053253747214049">commit</strong></pre>
<p id="EN-US_TASK_0216499740__p809704971214049"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen2005463179214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1649745641214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0216499740__b1322785485214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1900062193214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword433091291214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b1035534569214049">router-id 3.3.3.3</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1615008559214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1467036700214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b1380509286214049">ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen2129319575214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword312344586214049">*</span>PE2-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b2106537509214049">peer 10.2.1.2 as-number 65420</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1233675993214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword868752140214049">*</span>PE2-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b2019154962214049">import-route direct</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1330965019214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1492903213214049">*</span>PE2-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b1180785695214049">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1270003169214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1743604695213"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b10841915214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1113118548214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1599988755214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b1904041288214049">quit</strong></pre>
<p id="EN-US_TASK_0216499740__p1195687499214049">After the configuration is complete, run the <strong id="EN-US_TASK_0216499740__b573071564217">display bgp vpnv4 vpn-instance peer</strong> command on the PEs and check whether BGP peer relationships have been established between the PEs and CEs. If the <strong id="EN-US_TASK_0216499740__b37311315104211">Established</strong> state is displayed in the command output, the BGP peer relationships have been established successfully.</p>
<p id="EN-US_TASK_0216499740__p1396929195214049">The following example uses the peer relationship between PE1 and CE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen1079999083214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1233660237214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b1922329127214049">display bgp vpnv4 vpn-instance vpn1 peer</strong>

 BGP local router ID : 1.1.1.1                          
 Local AS number : 100                                  

 VPN-Instance vpn1, Router ID 1.1.1.1:                  
 Total number of peers : 1                 Peers in established state : 1       

  Peer            V          AS  MsgRcvd  MsgSent  OutQ  Up/Down       State  PrefRcv                                               
  10.1.1.2        4       65410       43       47     0 00:35:32 <strong id="EN-US_TASK_0216499740__b9531834184320">Established</strong>        1 </pre>
</p></li><li id="EN-US_TASK_0216499740__step1049353014214049"><span id="EN-US_TASK_0216499740__cmd1340397134214049">Establish a BGP EVPN peer relationship between PEs.</span><p><p id="EN-US_TASK_0216499740__p727810838214049"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen1754803993214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1855460612214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b1909640340214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1577155664214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword19275118530"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b767543421214049">peer 2001:DB8:3::3 as-number 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1937414768214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword641293541214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b2004974258214049">peer 2001:DB8:3::3 connect-interface loopback 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen389351529214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2007510335214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b301606972214049">l2vpn-family evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen2116211717214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1066938757214049">*</span>PE1-bgp-af-evpn] <strong id="EN-US_TASK_0216499740__b386545185214049">peer 2001:DB8:3::3 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1400784259214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword203203730214049">*</span>PE1-bgp-af-evpn] <strong id="EN-US_TASK_0216499740__b400808827214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1228010541214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword815255579214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b1359435166214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1846144516214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword488071882214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b1746231553214049">commit</strong></pre>
<p id="EN-US_TASK_0216499740__p144796605214049"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen327147070214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2115953383214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0216499740__b1747772298214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen498347582214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1276113716531"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b489694908214049">peer 2001:DB8:1::1 as-number 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen135916997214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword335955266214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b1298559870214049">peer 2001:DB8:1::1 connect-interface loopback 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen153067259214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1473167675214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b1145705676214049">l2vpn-family evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1039620594214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword951001635214049">*</span>PE2-bgp-af-evpn] <strong id="EN-US_TASK_0216499740__b1263653918214049">peer 2001:DB8:1::1 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen756270655214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword421515752214049">*</span>PE2-bgp-af-evpn] <strong id="EN-US_TASK_0216499740__b1472279145214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen563954831214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword176937882214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b1367982619214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1979025802214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1445977326214049">*</span>PE2] <strong id="EN-US_TASK_0216499740__b359080801214049">commit</strong></pre>
<p id="EN-US_TASK_0216499740__p704839431214049">After the configuration is complete, run the <strong id="EN-US_TASK_0216499740__b193785291816">display bgp evpn peer</strong> command on the PEs to check whether BGP EVPN peer relationships have been established between the PEs. If the <strong id="EN-US_TASK_0216499740__b23716527186">Established</strong> state is displayed in the command output, the BGP EVPN peer relationships have been established successfully.</p>
</p></li><li id="EN-US_TASK_0216499740__step1125779164214049"><span id="EN-US_TASK_0216499740__cmd1639479278214049">Deploy SRv6 BE between PEs.</span><p><p id="EN-US_TASK_0216499740__p301638535214049"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen1530393560214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1870342239214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b405438904214049">segment-routing ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1415942304214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1731942750214049">*</span>PE1-segment-routing-ipv6] <strong id="EN-US_TASK_0216499740__b1128701804214049">encapsulation source-address 2001:DB8:1::1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1656486310214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword658923575214049">*</span>PE1-segment-routing-ipv6] <strong id="EN-US_TASK_0216499740__b1311871372214049">locator PE1 ipv6-prefix 2001:DB8:100:: 64 static 32</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1291111902214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1791852657214049">*</span>PE1-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0216499740__b387052848214049">opcode ::100 end-dt4 vpn-instance vpn1 evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen19164025123810">[<span class="keyword" id="EN-US_TASK_0216499740__keyword118775250388">*</span>PE1-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0216499740__b887762517387">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1117621627214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1710571151214049">*</span>PE1-segment-routing-ipv6] <strong id="EN-US_TASK_0216499740__b1426036584214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen151604810214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword814465323214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b229199778214049">isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1806086865214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword894481248214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0216499740__b1927278404214049">segment-routing ipv6 locator PE1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen855238710214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword532178214214049">*</span>PE1-isis-1] <strong id="EN-US_TASK_0216499740__b359790671214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen124308436214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1543989932214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b1225349128214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen595914214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword449862491214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b74549960214049">l2vpn-family evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1813682048214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2123620524214049">*</span>PE1-bgp-af-evpn] <strong id="EN-US_TASK_0216499740__b1250676614214049">peer 2001:DB8:3::3 advertise encap-type srv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1047852841214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword10034894214049">*</span>PE1-bgp-af-evpn] <strong id="EN-US_TASK_0216499740__b1634258957214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen981266517214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword483460064214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b1018151187214049">ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen286300878214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword505875174214049">*</span>PE1-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b997504779214049">segment-routing ipv6 locator PE1 evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen626845887214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1036420976214049">*</span>PE1-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b1649743290214049">segment-routing ipv6 best-effort evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen795922009214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1284893701214049">*</span>PE1-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b920469024214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1012021003214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword620727159214049">*</span>PE1-bgp] <strong id="EN-US_TASK_0216499740__b1149443772214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen781292951214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1431055537214049">*</span>PE1] <strong id="EN-US_TASK_0216499740__b100955353214049">commit</strong></pre>
<p id="EN-US_TASK_0216499740__p1792789276214049"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen2086985579214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2036555669214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0216499740__b280646465214049">segment-routing ipv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen550396880214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword421120884214049">*</span>PE2-segment-routing-ipv6] <strong id="EN-US_TASK_0216499740__b1336282193214049">encapsulation source-address 2001:DB8:3::3</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen4981269214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword228505406214049">*</span>PE2-segment-routing-ipv6] <strong id="EN-US_TASK_0216499740__b1468870629214049">locator PE2 ipv6-prefix 2001:DB8:130:: 64 static 32</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen2038695211389">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1792415223818">*</span>PE2-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0216499740__b592445273816">opcode ::200 end-dt4 vpn-instance vpn1 evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1303783150214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1652123453214049">*</span>PE2-segment-routing-ipv6-locator] <strong id="EN-US_TASK_0216499740__b1604321189214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1443698641214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2109763134214049">*</span>PE2-segment-routing-ipv6] <strong id="EN-US_TASK_0216499740__b327178694214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1581256239214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword355713155214049">*</span>PE2] <strong id="EN-US_TASK_0216499740__b1336008108214049">isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1004284395214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2115266846214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0216499740__b548491920214049">segment-routing ipv6 locator PE2</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen2085632869214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1002758883214049">*</span>PE2-isis-1] <strong id="EN-US_TASK_0216499740__b1096788672214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen2094571043214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword225367133214049">*</span>PE2] <strong id="EN-US_TASK_0216499740__b418730899214049">bgp 100</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen604859259214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword143397188214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b2008906056214049">l2vpn-family evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen415863771214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1301839379214049">*</span>PE2-bgp-af-evpn] <strong id="EN-US_TASK_0216499740__b926280787214049">peer 2001:DB8:1::1 advertise encap-type srv6</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1978887488214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword334377011214049">*</span>PE2-bgp-af-evpn] <strong id="EN-US_TASK_0216499740__b929566575214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen445213418214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword548422046214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b1932283820214049">ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1605518847214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword2054168044214049">*</span>PE2-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b2109117116214049">segment-routing ipv6 locator PE2 evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen802157684214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1063873907214049">*</span>PE2-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b1267033703214049">segment-routing ipv6 best-effort evpn</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen1708248977214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword69592349214049">*</span>PE2-bgp-vpn1] <strong id="EN-US_TASK_0216499740__b1415508020214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen106757262214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword239874980214049">*</span>PE2-bgp] <strong id="EN-US_TASK_0216499740__b644430292214049">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0216499740__screen477030763214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword947613550214049">*</span>PE2] <strong id="EN-US_TASK_0216499740__b819251420214049">commit</strong></pre>
</p></li><li id="EN-US_TASK_0216499740__step1849999523214049"><span id="EN-US_TASK_0216499740__cmd1673741795214049">Verify the configuration.</span><p><p id="EN-US_TASK_0216499740__p177255045214049">Run the <strong id="EN-US_TASK_0216499740__b56451252107">display bgp evpn all routing-table prefix-route</strong> command on each PE. The command output shows IP prefix route information sent from the peer end. The following example uses the command output on PE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen1378726890214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1211409415214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b2115071577214049">display bgp evpn all routing-table prefix-route</strong>

 Local AS number : 100                                  

 BGP Local router ID is 1.1.1.1                         
 Status codes: * - valid, &gt; - best, d - damped, x - best external, a - add path,
               h - history,  i - internal, s - suppressed, S - Stale
               Origin : i - IGP, e - EGP, ? - incomplete


 EVPN address family:                                   
 Number of Ip Prefix Routes: 4                          
 Route Distinguisher: 100:1                             
       Network(EthTagId/IpPrefix/IpPrefixLen)                 NextHop           
 *&gt;    0:10.1.1.0:24                                          0.0.0.0           
 *&gt;    0:11.11.11.11:32                                       10.1.1.2          
 Route Distinguisher: 200:1                             
       Network(EthTagId/IpPrefix/IpPrefixLen)                 NextHop           
 *&gt;i   0:10.2.1.0:24                                          2001:DB8:3::3     
 *&gt;i   0:22.22.22.22:32                                       2001:DB8:3::3 </pre>
<p id="EN-US_TASK_0216499740__p392627737214049">Run the <strong id="EN-US_TASK_0216499740__b190346065214049">display ip routing-table vpn-instance vpn1</strong> command on each PE. The command output shows the VPN route sent from the peer end. The following example uses the command output on PE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen1659750892214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword434494341214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b1236655581214049">display ip routing-table vpn-instance vpn1</strong>
Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route                                              
------------------------------------------------------------------------------  
Routing Table : vpn1                                    
         Destinations : 8        Routes : 8             

Destination/Mask    Proto   Pre  Cost        Flags NextHop           Interface    

       10.1.1.0/24  Direct  0    0             D   10.1.1.1          GigabitEthernet<span>0/2/0</span>
       10.1.1.1/32  Direct  0    0             D   127.0.0.1         GigabitEthernet<span>0/2/0</span>
     10.1.1.255/32  Direct  0    0             D   127.0.0.1         GigabitEthernet<span>0/2/0</span>
       10.2.1.0/24  IBGP    255  0             RD  2001:DB8:130::200 GigabitEthernet<span>0/1/0</span>   
    11.11.11.11/32  EBGP    255  0             RD  10.1.1.2          GigabitEthernet<span>0/2/0</span>
    22.22.22.22/32  IBGP    255  0             RD  2001:DB8:130::200 GigabitEthernet<span>0/1/0</span>         
      127.0.0.0/8   Direct  0    0             D   127.0.0.1         InLoopBack0  
255.255.255.255/32  Direct  0    0             D   127.0.0.1         InLoopBack0 </pre>
<p id="EN-US_TASK_0216499740__p58877297214049">Run the <a href="cmdqueryname=display+segment-routing+ipv6+local-sid"><b><span class="cmdname" id="EN-US_TASK_0216499740__cmdname900285870214049">display segment-routing ipv6 local-sid</span></b></a> <strong><span id="EN-US_TASK_0216499740__cmdparmname1866132792214049">end-dt4</span></strong> <strong><span id="EN-US_TASK_0216499740__cmdparmname1198031573214049">forwarding</span></strong> command to check information about the SRv6 local SID table. The following example uses the command output on PE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen1538645125214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1030288653214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0216499740__b1212516767214049">display segment-routing ipv6 local-sid end-dt4 forwarding</strong>

                    My Local-SID End.DT4 Forwarding Table  
                    -------------------------------------                       

SID        : 2001:DB8:100::100/128                        FuncType    : End.DT4    
VPN Name   : vpn1                                         VPN ID      : 4          
LocatorName: PE1                                          LocatorID   : 7          
Flavor     : NO-FLAVOR                                    SidCompress : NO
UpdateTime : 2023-05-10 01:46:05.713

Total SID(s): 1  </pre>
<p id="EN-US_TASK_0216499740__p580947734214049">Check that CEs belonging to the same VPN instance can ping each other. The following example uses the command output on CE1.</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen2055452153214049">[<span class="keyword" id="EN-US_TASK_0216499740__keyword1803304134214049"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong id="EN-US_TASK_0216499740__b291602227214049">ping -a 11.11.11.11 22.22.22.22</strong>
  PING 22.22.22.22: 56  data bytes, press CTRL_C to break         
    Reply from 22.22.22.22: bytes=56 Sequence=1 ttl=253 time=127 ms             
    Reply from 22.22.22.22: bytes=56 Sequence=2 ttl=253 time=19 ms              
    Reply from 22.22.22.22: bytes=56 Sequence=3 ttl=253 time=26 ms              
    Reply from 22.22.22.22: bytes=56 Sequence=4 ttl=253 time=17 ms              
    Reply from 22.22.22.22: bytes=56 Sequence=5 ttl=253 time=16 ms              

  --- 22.22.22.22 ping statistics ---                   
    5 packet(s) transmitted                             
    5 packet(s) received                                
    0.00% packet loss                                   
    round-trip min/avg/max = 16/41/127 ms </pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0216499740__section_dc_vrp_evpn_cfg_015105"><a name="EN-US_TASK_0216499740__section_dc_vrp_evpn_cfg_015105"></a><a name="section_dc_vrp_evpn_cfg_015105"></a><a name="EN-US_TASK_0216499740__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul id="EN-US_TASK_0216499740__ul1298889831214049"><li id="EN-US_TASK_0216499740__li883455454214049"><p id="EN-US_TASK_0216499740__p533880020214049"><a name="EN-US_TASK_0216499740__li883455454214049"></a><a name="li883455454214049"></a>PE1 configuration file</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen2071525768214049">#
sysname PE1
#
ip vpn-instance vpn1
 ipv4-family
  route-distinguisher 100:1
  apply-label per-instance
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
#
segment-routing ipv6
 encapsulation source-address 2001:DB8:1::1
 locator PE1 ipv6-prefix 2001:DB8:100:: 64 static 32
  opcode ::100 end-dt4 vpn-instance vpn1 evpn
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0001.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE1
 #
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:10::1/64
 isis ipv6 enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip binding vpn-instance vpn1
 ip address 10.1.1.1 255.255.255.0
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:1::1/128
 isis ipv6 enable 1
#
bgp 100
 router-id 1.1.1.1
 peer 2001:DB8:3::3 as-number 100
 peer 2001:DB8:3::3 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #
 ipv4-family vpn-instance vpn1
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE1 evpn
  segment-routing ipv6 best-effort evpn
  peer 10.1.1.2 as-number 65410
 #
 l2vpn-family evpn
  policy vpn-target
  peer 2001:DB8:3::3 enable
  peer 2001:DB8:3::3 advertise encap-type srv6
#
return</pre>
</li><li id="EN-US_TASK_0216499740__li453118995214049"><p id="EN-US_TASK_0216499740__p593936703214049"><a name="EN-US_TASK_0216499740__li453118995214049"></a><a name="li453118995214049"></a>P configuration file</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen450251407214049">#
sysname P
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 #
 ipv6 enable topology ipv6
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:10::2/64
 isis ipv6 enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:20::1/64
 isis ipv6 enable 1
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:2::2/128
 isis ipv6 enable 1
#
return</pre>
</li><li id="EN-US_TASK_0216499740__li468606788214049"><p id="EN-US_TASK_0216499740__p1051752367214049"><a name="EN-US_TASK_0216499740__li468606788214049"></a><a name="li468606788214049"></a>PE2 configuration file</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen63392923214049">#
sysname PE2
#
ip vpn-instance vpn1
 ipv4-family
  route-distinguisher 200:1
  apply-label per-instance
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
#
segment-routing ipv6
 encapsulation source-address 2001:DB8:3::3
 locator PE2 ipv6-prefix 2001:DB8:130:: 64 static 32
  opcode ::200 end-dt4 vpn-instance vpn1 evpn
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE2
 #
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable
 ipv6 address 2001:DB8:20::2/64
 isis ipv6 enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip binding vpn-instance vpn1
 ip address 10.2.1.1 255.255.255.0
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:3::3/128
 isis ipv6 enable 1
#
bgp 100
 router-id 3.3.3.3
 peer 2001:DB8:1::1 as-number 100
 peer 2001:DB8:1::1 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #
 ipv4-family vpn-instance vpn1
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE2 evpn
  segment-routing ipv6 best-effort evpn
  peer 10.2.1.2 as-number 65420
 #
 l2vpn-family evpn
  policy vpn-target
  peer 2001:DB8:1::1 enable
  peer 2001:DB8:1::1 advertise encap-type srv6
#
return</pre>
</li><li id="EN-US_TASK_0216499740__li542914323214049"><p id="EN-US_TASK_0216499740__p103010558214049"><a name="EN-US_TASK_0216499740__li542914323214049"></a><a name="li542914323214049"></a>CE1 configuration file</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen2050231282214049">#
sysname CE1
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ip address 10.1.1.2 255.255.255.0
#               
interface LoopBack1
 ip address 11.11.11.11 255.255.255.255
#               
bgp 65410       
 peer 10.1.1.1 as-number 100
 #              
 ipv4-family unicast
  undo synchronization
  network 11.11.11.11 255.255.255.255
  peer 10.1.1.1 enable
#               
return </pre>
</li><li id="EN-US_TASK_0216499740__li1841529282214049"><p id="EN-US_TASK_0216499740__p1048322010214049"><a name="EN-US_TASK_0216499740__li1841529282214049"></a><a name="li1841529282214049"></a>CE2 configuration file</p>
<pre class="screen" id="EN-US_TASK_0216499740__screen981825664214049">#
sysname CE2
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.2.1.2 255.255.255.0
#
interface LoopBack1
 ip address 22.22.22.22 255.255.255.255
#
bgp 65420
 peer 10.2.1.1 as-number 100
#
 ipv4-family unicast
  undo synchronization
  network 22.22.22.22 255.255.255.255
  peer 10.2.1.1 enable
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0010.html">Configuration Examples for SRv6 BE (IS-IS)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0031.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0015.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>