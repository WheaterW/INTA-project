
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an SRv6 TE Policy">
<meta name="abstract" content="An SRv6 TE Policy can either be configured manually or be delivered by a controller. This section describes how to configure an SRv6 TE Policy manually.">
<meta name="description" content="An SRv6 TE Policy can either be configured manually or be delivered by a controller. This section describes how to configure an SRv6 TE Policy manually.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0110.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0111.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0115.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0173667622">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an SRv6 TE Policy</title>
</head>
<body><a name="EN-US_TASK_0173667622"></a><a name="EN-US_TASK_0173667622"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an SRv6 TE Policy</h1>
<div class="taskbody"><p>An SRv6 TE Policy can either be configured manually or be delivered by a controller. This section describes how to configure an SRv6 TE Policy manually.</p>
<div class="context"><a name="EN-US_TASK_0173667622__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0173667622__context1677625172748"><p id="EN-US_TASK_0173667622__p37701311607">SRv6 TE Policies are used to direct traffic to traverse an SRv6 TE network. Each SRv6 TE Policy can have multiple candidate paths with different preferences. From the valid candidate paths, the one with the highest preference is selected as the primary path, and the one with the second highest preference is selected as the backup path.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0173667622__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure a segment list.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a></span><p><p>SRv6 is enabled, and the SRv6 view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=segment-list"><b><span class="cmdname">segment-list</span></b></a> <i><span class="varname">list-name</span></i></span><p><p>A segment list is created for the SRv6 TE Policy candidate path, and the segment list view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=index"><b><span class="cmdname">index</span></b></a> <i><span class="varname">index</span></i> <strong><span>sid</span></strong> <strong><span>ipv6</span></strong> <em>ipv6address</em> [ <strong><span>compress</span></strong> <strong><span>block</span></strong> <i><span class="varname">block-value</span></i> ] [ <strong><span>compress</span></strong><strong>-16</strong> <strong><span>block</span></strong> <i><span class="varname">block-value</span></i> <strong><span>node-length </span></strong><i><span class="varname">node-length-value</span></i> <strong><span>function-length</span></strong> <i><span class="varname">function-length-value</span></i> [ <strong><span>compress-flavor</span></strong> { <strong><strong><span>coc-next</span></strong></strong> | <strong><strong><span>next</span></strong></strong> | <strong><strong><span>coc</span></strong></strong> } ] ]  [ <strong><span>verification</span></strong> ]</span><p><p>The next-hop SID in the segment list is specified.</p>
</p><p><p>You can run the command multiple times to specify multiple SIDs. According to <a href="cmdqueryname=index"><b><span class="cmdname">index</span></b></a> <i><span class="varname">index</span></i>, the system generates a SID stack in ascending order. If a candidate path in the SRv6 TE Policy is preferentially selected, traffic is forwarded using the segment lists of the candidate path. A maximum of 10 SIDs can be configured for each segment list.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In SRv6 SRH compression scenarios, pay attention to the following points:</p>
<ol><li>When configuring a segment list in 32-bit compression mode, you need to configure the <strong><span>compress</span></strong> <strong><span>block</span></strong> <i><span class="varname">block-value</span></i> parameter, with the value of <i><span class="varname">block-value</span></i> being the same as that of <span><i><span class="varname">block-length</span></i></span> specified in the <span><a href="cmdqueryname=locator"><b><span class="cmdname">locator</span></b></a> <i><span class="varname">locator-name</span></i> [ <strong><span>ipv6-prefix</span></strong> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> <strong><span>compress</span></strong> <strong><span>block</span></strong> <i><span class="varname">block-length</span></i> [ <strong><span>compress-static</span></strong> <i><span class="varname">compress-length</span></i> | <strong><span>static</span></strong> <i><span class="varname">static-length</span></i> | <strong><span>args</span></strong> <i><span class="varname">args-length</span></i> | <strong><span>flex-algo</span></strong> <i><span class="varname">flexAlgoId</span></i> ] <sup>*</sup> </span><span>]</span> command.</li><li>When configuring a segment list in 16-bit compression mode, you need to configure the <strong><strong><span>compress-16</span></strong></strong><strong><span> </span></strong><strong><strong><span>block</span></strong></strong> <em><i><span class="varname">block-value</span></i></em> parameter, with the value of <em>block-value</em> being the same as the value obtained by subtracting 16 from the value of <em>mask-length</em> specified in the <strong>locator</strong> <em>locator-name</em> <strong>compress-16</strong> <strong>ipv6-prefix</strong> <em>ipv6-address</em> <em>mask-length</em> [ <strong>compress-static</strong> <em>compress-length</em> | <strong>static</strong> <em>static-length</em> | <strong>args</strong> <em>args-length</em> | <strong>flex-algo</strong> <em>flexAlgoId</em> ] <sup>*</sup> command.</li><li>In 32-bit compression mode, the last SID in a segment list cannot be of the COC type.</li><li>If the <strong><span>verification</span></strong> parameter is configured, the system performs IGP route reachability verification for the specified SID in the SRv6 TE Policy. Do not configure this parameter for any cross-domain or binding SID. Otherwise, the verification fails due to IGP route unreachability.</li><li>In the SRv6 SRH, 16-bit compressed SIDs with the <strong>node-length</strong> value of 0 do not support fault detection or enhanced fault detection. If the <strong><span>verification</span></strong> parameter is configured in the command, the command configuration fails to be delivered. If fault detection is enabled, the verification result is Up regardless of whether 16-bit compressed SIDs with the <strong>node-length</strong> value of 0 are reachable.</li></ol>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0173667622__step1289147000214048"><span id="EN-US_TASK_0173667622__cmd731114417214048">Configure an SRv6 TE Policy.</span><ol type="a" id="EN-US_TASK_0173667622__substeps1328688673214048"><li class="substepexpand" id="EN-US_TASK_0173667622__substep380746034214048"><span id="EN-US_TASK_0173667622__cmd1844809025214048">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname1492610819214048">system-view</span></b></a></span><p><p id="EN-US_TASK_0173667622__p563614507195">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep96030499214048"><span id="EN-US_TASK_0173667622__cmd1224377796214048">Run <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname295160495214048">segment-routing ipv6</span></b></a></span><p><p id="EN-US_TASK_0173667622__p432195202016">SRv6 is enabled, and the SRv6 view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep16041328173619"><span id="EN-US_TASK_0173667622__cmd17337142917489">(Optional) Run <a href="cmdqueryname=local-end-x+encapsulation"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname159741404373">local-end-x encapsulation</span></b></a></span><p><p id="EN-US_TASK_0173667622__p17943102054814">The function of encapsulating the first-hop local End.X SID is enabled.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep752376191611"><span id="EN-US_TASK_0173667622__cmd9523367167">(Optional) Run <a href="cmdqueryname=ttl-mode"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname1819174721220">ttl-mode</span></b></a> { <strong id="EN-US_TASK_0173667622__b148315931819">uniform</strong> | <strong id="EN-US_TASK_0173667622__b16831059121811">pipe</strong> }</span><p><p id="EN-US_TASK_0173667622__p6398125611019">A TTL processing mode is configured for SRv6 TE Policies to which public network IP routes recurse.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep11106104917339"><span id="EN-US_TASK_0173667622__cmd610618492338">(Optional) Run <a href="cmdqueryname=srv6-te-policy+switch-delay"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdnamefc5367f986dc71dfaaf2337e5bb35e37">srv6-te-policy switch-delay </span></b></a><i><span class="varname" id="EN-US_TASK_0173667622__varnamee2be38f1aeccc6258190fcb86dd5365b">switchDelay</span></i> <strong><span id="EN-US_TASK_0173667622__cmdpar9311a1085f4ecb5f2a0fb868b4435ee9">delete-delay</span></strong> <i><span class="varname" id="EN-US_TASK_0173667622__varname086a8d786a0dd0a55d399ab462f99c0b">deleteDelay</span></i></span><p><p id="EN-US_TASK_0173667622__p13833609187">Switching and deletion delays are configured for all SRv6 TE Policies.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep10953523173810"><span id="EN-US_TASK_0173667622__cmd12372428152418">Run <a href="cmdqueryname=srv6-te-policy+locator"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname2ed3797cdbdf9d9c622270b49b8232c1">srv6-te-policy locator </span></b></a><i><span class="varname" id="EN-US_TASK_0173667622__varname6cbc9de622eb589c51d331790fc563d2">locator-name</span></i></span><p><p id="EN-US_TASK_0173667622__p20319236152313">A locator to be associated with the SRv6 TE Policy is configured. This configuration allows you to specify a binding SID for the SRv6 TE Policy in the locator range.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep2083790557214048"><span id="EN-US_TASK_0173667622__cmd16103115665216">Run <a href="cmdqueryname=srv6-te+policy"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname1176914208343">srv6-te policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0173667622__varname33517860214048">name-value</span></i> <strong><span id="EN-US_TASK_0173667622__cmdparmname976914206342">endpoint</span></strong> <i><span class="varname" id="EN-US_TASK_0173667622__varname1769172053415">endpoint-ip</span></i> <strong><span id="EN-US_TASK_0173667622__cmdparmname107692209346">color</span></strong> <i><span class="varname" id="EN-US_TASK_0173667622__varname14769192014343">color-value</span></i></span><p><p id="EN-US_TASK_0173667622__p19670114515521">An SRv6 TE Policy is created, and the SRv6 TE Policy view is displayed.</p>
</p><p><div class="note" id="EN-US_TASK_0173667622__note128111454132317"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0173667622__p8811145412233">In color-only scenarios, <i><span class="varname" id="EN-US_TASK_0173667622__varname16290159182520">endpoint-ip</span></i> needs to be set to <strong id="EN-US_TASK_0173667622__b107791676522">::</strong>.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep199872192212"><span id="EN-US_TASK_0173667622__cmd6695134641515">(Optional) Run <a href="cmdqueryname=encapsulation-mode"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname898350122318">encapsulation-mode</span></b></a> { <strong><span id="EN-US_TASK_0173667622__cmdparmname87316134234">insert</span></strong> | <strong><span id="EN-US_TASK_0173667622__cmdparmname197970177238">encaps</span></strong> | <strong><span id="EN-US_TASK_0173667622__cmdparmname611569152015">insert-encaps </span></strong>}</span><p><p id="EN-US_TASK_0173667622__p68098403153">An SRv6 TE Policy encapsulation mode is configured.</p>
</p><p><p id="EN-US_TASK_0173667622__p428817752411">When forwarded data enters an SRv6 TE Policy, new SID stack encapsulation is required. If no service SID is available, the SRv6 TE Policy needs to support the <strong id="EN-US_TASK_0173667622__b2755539171314">encaps</strong> encapsulation mode. Otherwise, the endpoint cannot remove the SRv6 encapsulation. The headend of the SRv6 TE Policy encapsulates IPv6 header and SRH information into data when the data enters the SRv6 TE Policy, and the endpoint implements the USD flavor to remove the encapsulated IPv6 header and SRH information.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep1463708620214048"><span id="EN-US_TASK_0173667622__cmd1837222813247">(Optional) Run <a href="cmdqueryname=binding-sid"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdnamec45d732782ab2ce4a1b4927a8266d64d">binding-sid </span></b></a><i><span class="varname" id="EN-US_TASK_0173667622__varname18461150143915">binding-sid</span></i></span><p><p id="EN-US_TASK_0173667622__p68590411240">A binding SID is specified for the SRv6 TE Policy.</p>
</p><p><p id="EN-US_TASK_0173667622__p1309568288214048">The value of <i><span class="varname" id="EN-US_TASK_0173667622__varname14342132713211">binding-sid</span></i> must be within the static range defined using the <span><a href="cmdqueryname=locator"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname14789124620524">locator</span></b></a> <i><span class="varname" id="EN-US_TASK_0173667622__varname127891046205220">locator-name</span></i> [ <strong><span id="EN-US_TASK_0173667622__cmdparmname197901746135214">ipv6-prefix</span></strong> <i><span class="varname" id="EN-US_TASK_0173667622__varname16790144635214">ipv6-address</span></i> <i><span class="varname" id="EN-US_TASK_0173667622__varname57902466527">prefix-length</span></i> [ <strong><span id="EN-US_TASK_0173667622__cmdparmname879018460524">static</span></strong> <i><span class="varname" id="EN-US_TASK_0173667622__varname10790184619523">static-length</span></i> | <strong><span id="EN-US_TASK_0173667622__cmdparmname1179084618529">args</span></strong> <i><span class="varname" id="EN-US_TASK_0173667622__varname1079014619527">args-length</span></i> ] <sup id="EN-US_TASK_0173667622__sup279134675211">*</sup> ]</span> command.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep633170391214048"><span id="EN-US_TASK_0173667622__cmd913290652214048">Run <a href="cmdqueryname=candidate-path+preference"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname635462244214048">candidate-path preference</span></b></a> <i><span class="varname" id="EN-US_TASK_0173667622__varname1332296321214048">preference</span></i></span><p><p id="EN-US_TASK_0173667622__p4518173932115">A candidate path with a specified preference is configured for the SRv6 TE Policy.</p>
</p><p><p id="EN-US_TASK_0173667622__p32289514588">Each SRv6 TE Policy supports multiple candidate paths. A larger <i><span class="varname" id="EN-US_TASK_0173667622__varname846255166214048">preference</span></i> value indicates a higher candidate path preference. If multiple candidate paths are configured, the one with the highest preference takes effect.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep2009178558214048"><span id="EN-US_TASK_0173667622__cmd93767181890">Run <span><a href="cmdqueryname=segment-list"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname1427952617214048">segment-list</span></b></a> <i><span class="varname" id="EN-US_TASK_0173667622__varname531557782214048">list-name</span></i> [ <strong><span id="EN-US_TASK_0173667622__cmdparmname3214162441213">weight</span></strong> <i><span class="varname" id="EN-US_TASK_0173667622__varname256533019128">weight-value</span></i> | <strong><span id="EN-US_TASK_0173667622__cmdparmname11145122674519">path-mtu</span></strong> <i><span class="varname" id="EN-US_TASK_0173667622__varname19109201534513">mtu-value</span></i> | <strong id="EN-US_TASK_0173667622__b20591922193410">binding-sid </strong><em id="EN-US_TASK_0173667622__i259422113412">binding-sid-value</em> | <strong id="EN-US_TASK_0173667622__b15593226342">reverse-binding-sid</strong><em id="EN-US_TASK_0173667622__i1359822153415"> reverse-binding-sid-value</em> ] <sup id="EN-US_TASK_0173667622__sup8964106184511">*</sup></span></span><p><p id="EN-US_TASK_0173667622__p8849179991">A segment list is configured for the candidate path of the SRv6 TE Policy.</p>
</p><p><p id="EN-US_TASK_0173667622__p8235145155817">The segment list must have been created using the <a href="cmdqueryname=segment-list+%28Segment-routing+IPv6+view%29"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname930041731214048">segment-list (Segment-routing IPv6 view)</span></b></a> command.</p>
<p id="EN-US_TASK_0173667622__p0821757153412">In unaffiliated BFD (U-BFD) for SRv6 TE Policy scenarios, return packets are forwarded through IPv6 routes by default, which may cause the U-BFD status to be incorrect. To enable U-BFD return packets to be forwarded through an SRv6 TE Policy, use the <span><strong id="EN-US_TASK_0173667622__b194431224173616">reverse-binding-sid</strong><em id="EN-US_TASK_0173667622__i14443112414361"> reverse-binding-sid-value</em></span> parameter to specify a binding SID for the reverse segment list. Alternatively, use the <span><strong id="EN-US_TASK_0173667622__b356845693517">binding-sid </strong><em id="EN-US_TASK_0173667622__i1568956133510">binding-sid-value</em></span> parameter to specify a binding SID for the local segment list so that the peer end can reference this SID.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0173667622__substep1509470169214048"><span id="EN-US_TASK_0173667622__cmd1440808372214048">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0173667622__cmdname839743966214048">commit</span></b></a></span><p><p id="EN-US_TASK_0173667622__p61271712162218">The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0110.html">Configuring an SRv6 TE Policy (Manual Configuration + IS-IS as an IGP)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0111.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0115.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>