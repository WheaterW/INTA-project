
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring the Shortcut Function for Static SRv6 TE Flow Groups (IS-IS)">
<meta name="abstract" content="This section provides an example for configuring the shortcut function for static SRv6 TE flow groups.">
<meta name="description" content="This section provides an example for configuring the shortcut function for static SRv6 TE flow groups.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0101.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0272.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0224.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001166787565">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring the Shortcut Function for Static SRv6 TE Flow Groups (IS-IS)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001166787565"></a><a name="EN-US_TASK_0000001166787565"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring the Shortcut Function for Static SRv6 TE Flow Groups (IS-IS)</h1>
<div class="taskbody"><p>This section provides an example for configuring the shortcut function for static SRv6 TE flow groups.</p>
<div class="context"><a name="EN-US_TASK_0000001166787565__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><div class="p">On the network shown in <a href="#EN-US_TASK_0000001166787565__fig184238288365">Figure 1</a>:<ul><li><p>All devices are Level-1 devices that belong to IS-IS process 1.</p>
</li><li>A bidirectional SRv6 TE flow group is established between PE1 and PE2.</li></ul>
</div>
<p>It is required that IS-IS routes recurse to the SRv6 TE flow group between PE1 and PE2 for traffic forwarding.</p>
<div class="fignone" id="EN-US_TASK_0000001166787565__fig184238288365"><a name="EN-US_TASK_0000001166787565__fig184238288365"></a><a name="fig184238288365"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring the shortcut function for SRv6 TE flow groups</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, and interface3 represent GE <span>0/1/0</span>, GE <span>0/2/0</span>, and GE <span>0/3/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001166747615.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001166787565__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><ol><li>To ensure that the shortcut function is correctly configured, the endpoint of the SRv6 TE flow group configured on the local device must be the same as the global TE IPv6 router ID advertised by IS-IS on the remote device.</li><li>During SRv6 TE flow group configuration, ensure that the last SID of each SRv6 TE Policy in the SRv6 TE flow group has the USD capability. Otherwise, a forwarding error will occur.</li><li>By default, an SRv6 TE flow group's metric is its IGP metric minus 1. If rules for the mapping between DSCP values and native IP links are configured for an SRv6 TE flow group, the SRv6 TE flow group's metric is equal to its IGP metric.</li><li>In SRv6 TE flow group shortcut scenarios, the Encaps or Insert-Encaps mode must be set for the SRv6 TE Policies in the specified SRv6 TE flow group.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001166787565__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Enable IPv6 forwarding and configure an IPv6 address for each interface on PE1, P1, P2, and PE2.</p>
</li><li><p>Enable IS-IS, configure an IS-IS level, and specify a network entity title (NET) on PE1, P1, P2, and PE2.</p>
</li><li>Configure SRv6 SIDs and enable IS-IS SRv6 on PE1, P1, and PE2.</li><li><p>Deploy SRv6 TE Policies between PE1 and PE2.</p>
</li><li>Deploy an SRv6 TE flow group between PE1 and PE2.</li><li>Configure the shortcut function for the SRv6 TE flow group on PE1 and PE2.</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001166787565__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IPv6 address of each interface on PE1, P1, P2, and PE2</p>
</li><li><p>IS-IS process ID of PE1, P1, P2, and PE2</p>
</li><li><p>IS-IS level of PE1, P1, P2, and PE2</p>
</li><li>Global TE IPv6 router ID of PE1 and PE2</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001166787565__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable IPv6 forwarding and configure an IPv6 address for each interface.</span><p><p># Configure PE1. The configurations of P1, P2, and PE2 are similar to the configuration of PE1. For configuration details, see <a href="#EN-US_TASK_0000001166787565__example121226172748">Configuration Files</a> in this section.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname PE1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address 2001:DB8:11::1 96</strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet <span>0/3/0</span></strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/3/0</span>] <strong>ipv6 enable</strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/3/0</span>] <strong>ipv6 address 2001:DB8:13::1 96</strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>interface LoopBack 1</strong>
[<span class="keyword">*</span>PE1-LoopBack1] <strong>ipv6 enable</strong>
[<span class="keyword">*</span>PE1-LoopBack1] <strong>ipv6 address 2001:DB8:1::1 128</strong>
[<span class="keyword">*</span>PE1-LoopBack1] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</p></li><li><span>Configure IS-IS.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>isis 1</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>is-level level-1</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>cost-style wide</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>network-entity 10.0000.0000.0005.00</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>ipv6 enable topology ipv6</strong>
[<span class="keyword">*</span>DeviceA-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceA] <strong>interface loopback1</strong>
[<span class="keyword">*</span>DeviceA-LoopBack1] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>DeviceA-LoopBack1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-LoopBack1] <strong>quit</strong></pre>
<p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>isis 1</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>is-level level-1</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>cost-style wide</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>network-entity 10.0000.0000.0001.00</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>ipv6 enable topology ipv6</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>ipv6 traffic-eng level-1</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet <span>0/3/0</span></strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/3/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>interface loopback1</strong>
[<span class="keyword">*</span>PE1-LoopBack1] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE1-LoopBack1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-LoopBack1] <strong>quit</strong></pre>
<p># Configure P1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P1] <strong>isis 1</strong> 
[<span class="keyword">*</span>P1-isis-1] <strong>is-level level-1</strong>
[<span class="keyword">*</span>P1-isis-1] <strong>cost-style wide</strong>
[<span class="keyword">*</span>P1-isis-1] <strong>network-entity 10.0000.0000.0002.00</strong>
[<span class="keyword">*</span>P1-isis-1] <strong>ipv6 enable topology ipv6</strong>
[<span class="keyword">*</span>P1-isis-1] <strong>ipv6 traffic-eng level-1</strong>
[<span class="keyword">*</span>P1-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>P1] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>P1-GigabitEthernet<span>0/1/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>P1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>P1] <strong>interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword">*</span>P1-GigabitEthernet<span>0/2/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>P1-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>P1] <strong>interface loopback1</strong>
[<span class="keyword">*</span>P1-LoopBack1] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>P1-LoopBack1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P1-LoopBack1] <strong>quit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>isis 1</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>is-level level-1</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>cost-style wide</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>network-entity 10.0000.0000.0003.00</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>ipv6 enable topology ipv6</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>ipv6 traffic-eng level-1</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet <span>0/3/0</span></strong>
[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/3/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>PE2] <strong>interface loopback1</strong>
[<span class="keyword">*</span>PE2-LoopBack1] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>PE2-LoopBack1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-LoopBack1] <strong>quit</strong></pre>
</p><p><p># Configure P2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P2] <strong>isis 1</strong> 
[<span class="keyword">*</span>P2-isis-1] <strong>is-level level-1</strong>
[<span class="keyword">*</span>P2-isis-1] <strong>cost-style wide</strong>
[<span class="keyword">*</span>P2-isis-1] <strong>network-entity 10.0000.0000.0004.00</strong>
[<span class="keyword">*</span>P2-isis-1] <strong>ipv6 enable topology ipv6</strong>
[<span class="keyword">*</span>P2-isis-1] <strong>ipv6 traffic-eng level-1</strong>
[<span class="keyword">*</span>P2-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>P2] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>P2-GigabitEthernet<span>0/1/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>P2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>P2] <strong>interface gigabitethernet <span>0/2/0</span></strong>
[<span class="keyword">*</span>P2-GigabitEthernet<span>0/2/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>P2-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>P2] <strong>interface loopback1</strong>
[<span class="keyword">*</span>P2-LoopBack1] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>P2-LoopBack1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P2-LoopBack1] <strong>quit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>isis 1</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>is-level level-1</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>cost-style wide</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>network-entity 10.0000.0000.0006.00</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>ipv6 enable topology ipv6</strong>
[<span class="keyword">*</span>DeviceB-isis-1] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>interface gigabitethernet <span>0/1/0</span></strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/0</span>] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong>
[<span class="keyword">*</span>DeviceB] <strong>interface loopback1</strong>
[<span class="keyword">*</span>DeviceB-LoopBack1] <strong>isis ipv6 enable 1</strong>
[<span class="keyword">*</span>DeviceB-LoopBack1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-LoopBack1] <strong>quit</strong></pre>
<p>After the configuration is complete, run the <strong>display isis peer</strong> command to check whether IS-IS has been configured successfully.</p>
</p></li><li><span>Configure SRv6 SIDs.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>segment-routing ipv6</strong>
[<span class="keyword">*</span>PE1-segment-routing-ipv6] <strong>encapsulation source-address 2001:DB8:1::1</strong>
[<span class="keyword">*</span>PE1-segment-routing-ipv6] <strong>locator as1 ipv6-prefix <span>2001:DB8:100::</span> 64 static 32</strong>
[<span class="keyword">*</span>PE1-segment-routing-ipv6-locator] <strong>opcode ::100 end</strong> <span><strong>psp<span>-usp-usd</span></strong></span>
[<span class="keyword">*</span>PE1-segment-routing-ipv6-locator] <strong>quit</strong>
[<span class="keyword">*</span>PE1-segment-routing-ipv6] <strong>quit</strong>
[<span class="keyword">*</span>PE1] <strong>isis 1</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>segment-routing ipv6 locator as1 auto-sid-disable</strong>
[<span class="keyword">*</span>PE1-isis-1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-isis-1] <strong>quit</strong></pre>
<p># Configure P1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P1] <strong>segment-routing ipv6</strong>
[<span class="keyword">*</span>P1-segment-routing-ipv6] <strong>encapsulation source-address 2001:DB8:2::2</strong>
[<span class="keyword">*</span>P1-segment-routing-ipv6] <strong>locator as1 ipv6-prefix <span>2001:DB8:200::</span> 64 static 32</strong>
[<span class="keyword">*</span>P1-segment-routing-ipv6-locator] <strong>opcode ::100 end</strong> <span><strong>psp<span>-usp-usd</span></strong></span>
[<span class="keyword">*</span>P1-segment-routing-ipv6-locator] <strong>quit</strong>
[<span class="keyword">*</span>P1-segment-routing-ipv6] <strong>quit</strong>
[*P1] <strong>isis 1</strong>
[<span class="keyword">*</span>P1-isis-1] <strong>segment-routing ipv6 locator as1 auto-sid-disable</strong>
[<span class="keyword">*</span>P1-isis-1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P1-isis-1] <strong>quit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>segment-routing ipv6</strong>
[<span class="keyword">*</span>PE2-segment-routing-ipv6] <strong>encapsulation source-address 2001:DB8:3::3</strong>
[<span class="keyword">*</span>PE2-segment-routing-ipv6] <strong>locator as1 ipv6-prefix <span>2001:DB8:300::</span> 64 static 32</strong>
[<span class="keyword">*</span>PE2-segment-routing-ipv6-locator] <strong>opcode ::100 end <span><strong>psp<span>-usp-usd</span></strong></span></strong>
[<span class="keyword">*</span>PE2-segment-routing-ipv6-locator] <strong>quit</strong>
[<span class="keyword">*</span>PE2-segment-routing-ipv6] <strong>quit</strong>
[<span class="keyword">*</span>PE2] <strong>isis 1</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>segment-routing ipv6 locator as1 auto-sid-disable</strong>
[<span class="keyword">*</span>PE2-isis-1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-isis-1] <strong>quit</strong></pre>
<p># Configure P2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P2] <strong>segment-routing ipv6</strong>
[<span class="keyword">*</span>P2-segment-routing-ipv6] <strong>encapsulation source-address 2001:DB8:4::4</strong>
[<span class="keyword">*</span>P2-segment-routing-ipv6] <strong>locator as1 ipv6-prefix <span>2001:DB8:400::</span> 64 static 32</strong>
[<span class="keyword">*</span>P2-segment-routing-ipv6-locator] <strong>opcode ::100 end</strong><span> <strong>psp<span>-usp-usd</span></strong></span>
[<span class="keyword">*</span>P2-segment-routing-ipv6-locator] <strong>quit</strong>
[<span class="keyword">*</span>P2-segment-routing-ipv6] <strong>quit</strong>
[*P2] <strong>isis 1</strong>
[<span class="keyword">*</span>P2-isis-1] <strong>segment-routing ipv6 locator as1 auto-sid-disable</strong>
[<span class="keyword">*</span>P2-isis-1] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P2-isis-1] <strong>quit</strong></pre>
<p>Run the <a href="cmdqueryname=display+segment-routing+ipv6+local-sid"><b><span class="cmdname">display segment-routing ipv6 local-sid</span></b></a> <strong><span>end</span></strong> <strong><span>forwarding</span></strong> command to check information about the SRv6 local SID table.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>display segment-routing ipv6 local-sid end forwarding</strong>
                    My Local-SID End Forwarding Table                        
                    ---------------------------------                        

SID         : 2001:DB8:100::100/128                        FuncType    : End 
Flavor      : PSP USP USD                                  SidCompress : NO
LocatorName : as1                                          LocatorID   : 1   
ProtocolType: STATIC                                       ProcessID   : --  
UpdateTime  : 2021-05-05 09:24:18.785                

Total SID(s): 1  </pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P1] <strong>display segment-routing ipv6 local-sid end forwarding</strong>
                    My Local-SID End Forwarding Table                        
                    ---------------------------------                        

SID         : 2001:DB8:200::100/128                        FuncType    : End 
Flavor      : PSP USP USD                                  SidCompress : NO
LocatorName : as1                                          LocatorID   : 1   
ProtocolType: STATIC                                       ProcessID   : --  
UpdateTime  : 2021-05-05 09:29:22.633           

Total SID(s): 1</pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>display segment-routing ipv6 local-sid end forwarding</strong>
                    My Local-SID End Forwarding Table                        
                    ---------------------------------                        

SID         : 2001:DB8:300::100/128                        FuncType    : End 
Flavor      : PSP USP USD                                  SidCompress : NO
LocatorName : as1                                          LocatorID   : 1   
ProtocolType: STATIC                                       ProcessID   : --  
UpdateTime  : 2021-05-05 09:36:31.017                                        

Total SID(s): 1</pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>P2] <strong>display segment-routing ipv6 local-sid end forwarding</strong>
                    My Local-SID End Forwarding Table                        
                    ---------------------------------                        

SID         : 2001:DB8:400::100/128                        FuncType    : End 
Flavor      : PSP USP USD                                  SidCompress : NO
LocatorName : as1                                          LocatorID   : 1   
ProtocolType: STATIC                                       ProcessID   : --  
UpdateTime  : 2021-05-05 09:39:22.633           

Total SID(s): 1</pre>
</p></li><li><span>Configure SRv6 TE Policies.</span><p><p># Configure PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>te ipv6-router-id </strong><strong>2001:DB8:1::1</strong>
[*PE1] <strong>segment-routing ipv6</strong>
[*PE1-segment-routing-ipv6] <strong>segment-list list1</strong> 
[*PE1-segment-routing-ipv6-segment-list-list1] <strong>index 5 sid ipv6 2001:DB8:200::100</strong>
[*PE1-segment-routing-ipv6-segment-list-list1] <strong>index 10 sid ipv6 2001:DB8:300::100</strong>
[*PE1-segment-routing-ipv6-segment-list-list1] <strong>quit</strong>
[*PE1-segment-routing-ipv6] <strong>segment-list list2</strong> 
[*PE1-segment-routing-ipv6-segment-list-list2] <strong>index 5 sid ipv6 2001:DB8:400::100</strong>
[*PE1-segment-routing-ipv6-segment-list-list2] <strong>index 10 sid ipv6 2001:DB8:300::100</strong>
[*PE1-segment-routing-ipv6-segment-list-list2] <strong>quit</strong>
[*PE1-segment-routing-ipv6] <strong>srv6-te-policy locator as1</strong> 
[*PE1-segment-routing-ipv6] <strong>srv6-te policy policy1 endpoint 2001:DB8:3::3 color 10</strong>
[*PE1-segment-routing-ipv6-policy-policy1] <strong>encapsulation-mode encaps</strong>
[*PE1-segment-routing-ipv6-policy-policy1] <strong>candidate-path preference 100</strong>
[*PE1-segment-routing-ipv6-policy-policy1-path] <strong>segment-list list1</strong> 
[*PE1-segment-routing-ipv6-policy-policy1-path] <strong>quit</strong>
[*PE1-segment-routing-ipv6-policy-policy1] <strong>quit</strong>
[*PE1-segment-routing-ipv6] <strong>srv6-te policy policy2 endpoint 2001:DB8:3::3 color 20</strong>
[*PE1-segment-routing-ipv6-policy-policy2] <strong>encapsulation-mode encaps</strong>
[*PE1-segment-routing-ipv6-policy-policy2] <strong>candidate-path preference 100</strong>
[*PE1-segment-routing-ipv6-policy-policy2-path] <strong>segment-list list2</strong> 
[*PE1-segment-routing-ipv6-policy-policy2-path] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6-policy-policy2-path] <strong>quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6-policy-policy2] <strong>quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6] <strong>quit</strong></pre>
</p><p><p># Configure PE2.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE2] <strong>te ipv6-router-id </strong><strong>2001:DB8:3::3</strong>
[*PE2] <strong>segment-routing ipv6</strong>
[*PE2-segment-routing-ipv6] <strong>segment-list list1</strong> 
[*PE2-segment-routing-ipv6-segment-list-list1] <strong>index 5 sid ipv6 2001:DB8:200::100</strong>
[*PE2-segment-routing-ipv6-segment-list-list1] <strong>index 10 sid ipv6 2001:DB8:100::100</strong>
[*PE2-segment-routing-ipv6-segment-list-list1] <strong>quit</strong>
[*PE2-segment-routing-ipv6] <strong>segment-list list2</strong> 
[*PE2-segment-routing-ipv6-segment-list-list2] <strong>index 5 sid ipv6 2001:DB8:400::100</strong>
[*PE2-segment-routing-ipv6-segment-list-list2] <strong>index 10 sid ipv6 2001:DB8:100::100</strong>
[*PE2-segment-routing-ipv6-segment-list-list2] <strong>quit</strong>
[*PE2-segment-routing-ipv6] <strong>srv6-te-policy locator as1</strong> 
[*PE2-segment-routing-ipv6] <strong>srv6-te policy policy1 endpoint 2001:DB8:1::1 color 10</strong>
[*PE2-segment-routing-ipv6-policy-policy1] <strong>encapsulation-mode encaps</strong>
[*PE2-segment-routing-ipv6-policy-policy1] <strong>candidate-path preference 100</strong>
[*PE2-segment-routing-ipv6-policy-policy1-path] <strong>segment-list list1</strong> 
[*PE2-segment-routing-ipv6-policy-policy1-path] <strong>quit</strong>
[*PE2-segment-routing-ipv6-policy-policy1] <strong>quit</strong>
[*PE2-segment-routing-ipv6] <strong>srv6-te policy policy2 endpoint 2001:DB8:1::1 color 20</strong>
[*PE2-segment-routing-ipv6-policy-policy2] <strong>encapsulation-mode encaps</strong>
[*PE2-segment-routing-ipv6-policy-policy2] <strong>candidate-path preference 100</strong>
[*PE2-segment-routing-ipv6-policy-policy2-path] <strong>segment-list list2</strong> 
[*PE2-segment-routing-ipv6-policy-policy2-path] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6-policy-policy2-path] <strong>quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6-policy-policy2] <strong>quit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6] <strong>quit</strong></pre>
<p>After the configuration is complete, run the <a href="cmdqueryname=display+srv6-te+policy"><b><span class="cmdname">display srv6-te policy</span></b></a> command to check SRv6 TE Policy information.</p>
<p>The following example uses the command output on PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>display srv6-te policy </strong>
PolicyName : policy1  
Color                   : 10                             Endpoint             : 2001:DB8:3::3       
TunnelId                : 1                                         
TunnelType              : SRv6-TE Policy                 DelayTimerRemain     : -                                                   
Policy State            : Up                             State Change Time    : 2021-05-05 09:24:24
Admin State             : Up                             Traffic Statistics   : Disable  
Backup Hot-Standby      : Disable                        BFD                  : Disable  
Interface Index         : -                              Interface Name       : -        
Interface State         : -                              Encapsulation Mode   : Encaps
Binding SID             : - 
Candidate-path Count    : 1       

 Candidate-path Preference : 100
 Path State             : Active                         Path Type            : Primary  
 Protocol-Origin        : Configuration(30)              Originator           : 0, 0.0.0.0  
 Discriminator          : 100                            Binding SID          : 2001:DB8:10::900  
 GroupId                : 1                              Policy Name          : policy1
 Template ID            : 0                              Path Verification    : Disable  
 DelayTimerRemain       : -                              Network Slice ID     : - 
 Segment-List Count     : 1       
  Segment-List          : list1   
   Segment-List ID      : 1                              XcIndex              : 1        
   List State           : Up                             DelayTimerRemain     : - 
   Verification State   : -                              SuppressTimeRemain   : -        
   PMTU                 : 9600                           Active PMTU          : 9600     
   Weight               : 1                              BFD State            : -     
   Loop Detection State : Up    
   Network Slice ID     : -     
   Binding SID          : -
   Reverse Binding ID   : -
   SID :              
         2001:DB8:20::100      
         2001:DB8:30::100      

PolicyName : policy2  
Color                   : 20                             Endpoint             : 2001:DB8:3::3     
TunnelId                : 2                              
TunnelType              : SRv6-TE Policy                 DelayTimerRemain     : -        
Policy State            : Up                             State Change Time    : 2021-05-05 09:24:24
Admin State             : Up                             Traffic Statistics   : Disable  
Backup Hot-Standby      : Disable                        BFD                  : Disable  
Interface Index         : -                              Interface Name       : -        
Interface State         : -                              Encapsulation Mode   : Encaps
Binding SID             : -
Candidate-path Count    : 1 

 Candidate-path Preference : 100
 Path State             : Active                         Path Type            : Primary  
 Protocol-Origin        : Configuration(30)              Originator           : 0, 0.0.0.0
 Discriminator          : 100                            Binding SID          : 2001:DB8:10::901  
 GroupId                : 2                              Policy Name          : policy2
 Template ID            : 0                              Path Verification    : Disable  
 DelayTimerRemain       : -                              Network Slice ID     : - 
 Segment-List Count     : 1       
  Segment-List          : list2   
   Segment-List ID      : 2                              XcIndex              : 2        
   List State           : Up                             DelayTimerRemain     : -        
   Verification State   : -                              SuppressTimeRemain   : -        
   PMTU                 : 9600                           Active PMTU          : 9600     
   Weight               : 1                              BFD State            : -   
   Loop Detection State : Up                             BFD Delay Remain     : -      
   Network Slice ID     : -   
   Binding SID          : -
   Reverse Binding ID   : -
   SID :              
         2001:DB8:40::100      
         2001:DB8:30::100  </pre>
</p></li><li><span>Configure an SRv6 TE flow group.</span><p><p>Once configured, the SRv6 TE flow group contains multiple SRv6 TE Policies with the same endpoint but different color values.</p>
<p>In this example, traffic with DSCP values ranging from 1 to 20 is forwarded through policy1, and other traffic is forwarded through policy2 by default.</p>
<p># Configure PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>segment-routing ipv6</strong> 
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6] <strong>srv6-te flow-group fg1</strong>  
[*PE1-segment-routing-ipv6-flow-group-fg1] <strong>endpoint 2001:DB8:3::3</strong>
[*PE1-segment-routing-ipv6-flow-group-fg1] <strong>match-type dscp</strong>
[*PE1-segment-routing-ipv6-flow-group-fg1-dscp] <strong>index 10 dscp 1 to 20 match srv6-te-policy color 10 </strong>
[*PE1-segment-routing-ipv6-flow-group-fg1-dscp] <strong>default match srv6-te-policy color 20</strong>
[*PE1-segment-routing-ipv6-flow-group-fg1-dscp] <strong>quit</strong>
[*PE1-segment-routing-ipv6-flow-group-fg1] <strong>quit</strong>
[*PE1-segment-routing-ipv6] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6] <strong>quit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE2] <strong>segment-routing ipv6</strong> 
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6] <strong>srv6-te flow-group fg1</strong>  
[*PE2-segment-routing-ipv6-flow-group-fg1] <strong>endpoint 2001:DB8:1::1</strong>
[*PE2-segment-routing-ipv6-flow-group-fg1] <strong>match-type dscp</strong>
[*PE2-segment-routing-ipv6-flow-group-fg1-dscp] <strong>index 10 dscp 1 to 20 match srv6-te-policy color 10 </strong>
[*PE2-segment-routing-ipv6-flow-group-fg1-dscp] <strong>default match srv6-te-policy color 20</strong>
[*PE2-segment-routing-ipv6-flow-group-fg1-dscp] <strong>quit</strong>
[*PE2-segment-routing-ipv6-flow-group-fg1] <strong>quit</strong>
[*PE2-segment-routing-ipv6] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6] <strong>quit</strong></pre>
<p>After the configuration is complete, run the <strong>display srv6-te flow-group</strong> command to check the SRv6 TE flow group status.</p>
<p>The following example uses the command output on PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>display srv6-te flow-group</strong>

                          SRv6-TE Flow Group Information 
------------------------------------------------------------------------------------          
Group Name          : fg1                               
Color               : -                             Endpoint            : 2001:DB8:3::3       
Group Tunnel ID     : 3                             Group Tunnel Type   : SRv6-TE Flow Group  
Group Tunnel State  : Up                            State Change Time   : 2021-06-11 01:24:31 
Interface Index     : 27                            Interface Name      : SRv6TE-FlowGroup-2  
Interface State     : Up                            Usd Capability      : True                
Delay Timer Remain  : -                             UP/ALL Num          : 2/2                 

 Index                : -                              AfType               : -               
 DSCP                 : Default                         
 Match Tunnel         : SRv6-TE Policy                 State                : Up              
 Color                : 20                             Tunnel Id            : 2               
 Usd Capability       : True                            

 Index                : 10                             AfType               : -               
 DSCP                 : 1-20                            
 Match Tunnel         : SRv6-TE Policy                 State                : Up              
 Color                : 10                             Tunnel Id            : 1               
 Usd Capability       : True</pre>
<p>An SRv6 TE flow group can be used as a shortcut interface by an IGP only when <strong>Interface State</strong> is displayed as <strong>Up</strong>.</p>
<p>The mapping between DSCP values and SRv6 TE Policies takes effect only when <strong>State</strong> is displayed as <strong>Up</strong>.</p>
</p></li><li><span>Configure the shortcut function for the SRv6 TE flow group.</span><p><p># Configure PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>ip ipv6-prefix p1 permit 2001:DB8:20:: 96</strong> 
[*PE1] <strong>ip ipv6-prefix p1 permit 2001:DB8:6::6 128</strong>
[*PE1] <strong>route-policy rp1 permit node 10</strong>                     
[*PE1-route-policy] <strong>if-match ipv6 address prefix-list p1</strong>
[*PE1-route-policy] <strong>quit</strong>
[*PE1] <strong>segment-routing ipv6</strong>
[*PE1-segment-routing-ipv6] <strong>srv6-te flow-group fg1</strong>
[*PE1-segment-routing-ipv6-flow-group-fg1] <strong>igp shortcut isis</strong> <strong>route-policy rp1</strong> 
[*PE1-segment-routing-ipv6-flow-group-fg1] <strong>isis ipv6 enable 1</strong> 
[*PE1-segment-routing-ipv6-flow-group-fg1] <strong>quit </strong>
[*PE1-segment-routing-ipv6] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE1-segment-routing-ipv6] <strong>quit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE2] <strong>ip ipv6-prefix p1 permit 2001:DB8:10:: 96</strong> 
[*PE2] <strong>ip ipv6-prefix p1 permit 2001:DB8:5::5 128</strong>
[*PE2] <strong>route-policy rp1 permit node 10</strong>                     
[*PE2-route-policy] <strong>if-match ipv6 address prefix-list p1</strong>
[*PE2-route-policy] <strong>quit</strong>
[*PE2] <strong>segment-routing ipv6</strong>
[*PE2-segment-routing-ipv6] <strong>srv6-te flow-group fg1</strong>
[*PE2-segment-routing-ipv6-flow-group-fg1] <strong>igp shortcut isis route-policy rp1</strong> 
[*PE2-segment-routing-ipv6-flow-group-fg1] <strong>isis ipv6 enable 1</strong>  
[*PE2-segment-routing-ipv6-flow-group-fg1] <strong>quit </strong>
[*PE2-segment-routing-ipv6] <strong>commit</strong>
[<font style="font-size:8pt" Face="Courier New" >~</font>PE2-segment-routing-ipv6] <strong>quit</strong></pre>
<p>After the configuration is complete, run the <strong>display isis route ipv6</strong> command to check IS-IS routing information.</p>
<p>The following example uses the command output on PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>display isis route ipv6</strong>            
                                 
                         Route information for ISIS(1) 
                         -----------------------------                            

                        ISIS(1) Level-1 Forwarding Table                          
                        --------------------------------                          
 IPV6 Dest.       ExitInterface      NextHop                    Cost     Flags      
--------------------------------------------------------------------------------  
2001:DB8:1::1/128 Loop1              Direct                     0        D/-/L/-                                
2001:DB8:2::2/128 GE<span>0/1/0</span>            FE80::3AB0:9EFF:FE31:307   10       A/-/-/-                  
2001:DB8:3::3/128 GE<span>0/1/0</span>            FE80::3AB0:9EFF:FE31:307   10       A/-/-/-                        
2001:DB8:5::5/128 GE<span>0/2/0</span>            FE80::3AB0:9EFF:FE21:300   10       A/-/-/-                  
2001:DB8:6::6/128 SRv6TE-FlowGroup-2 ::                         29       A/S/-/-                        
2001:DB8:10::/96  GE<span>0/2/0</span>            Direct                     10       D/-/L/-                              
2001:DB8:11::/96  GE<span>0/1/0</span>            Direct                     10       D/-/L/-                              
2001:DB8:12::/96  GE<span>0/1/0</span>            FE80::3AB0:9EFF:FE31:307   20       A/-/-/-                  
2001:DB8:20::/96  SRv6TE-FlowGroup-2 ::                         29       A/S/-/-                   
2001:DB8:100::/64 NULL0              -                          0        A/-/L/-                                 
2001:DB8:200::/64 GE<span>0/1/0</span>            FE80::3AB0:9EFF:FE31:307   10       A/-/-/-                  
2001:DB8:300::/64 GE<span>0/1/0</span>            FE80::3AB0:9EFF:FE31:307   19       A/-/-/- 

     Flags: D-Direct, A-Added to URT, L-Advertised in LSPs, S-IGP Shortcut, 
            U-Up/Down Bit Set, LP-Local Prefix-Sid
     Protect Type: L-Link Protect, N-Node Protect  </pre>
<p>Run the <strong>display ipv6 routing-table brief</strong> command to check IPv6 routing information.</p>
<p>The following example uses the command output on PE1.</p>
<pre class="screen">[<font style="font-size:8pt" Face="Courier New" >~</font>PE1] <strong>display ipv6 routing-table brief</strong> 
Route Flags: R - relay, D - download to fib, T - to vpn-instance, B - black hole route  
------------------------------------------------------------------------------    
Routing Table : _public_                                   
         Destinations : 18       Routes : 18               
Format :                                                   
Destination/Mask                             Protocol      
Nexthop                                      Interface     
------------------------------------------------------------------------------
 ::1/128                                     Direct        
  ::1                                        InLoopBack0   
 ::FFFF:127.0.0.0/104                        Direct        
  ::FFFF:127.0.0.1                           InLoopBack0   
 ::FFFF:127.0.0.1/128                        Direct        
  ::1                                        InLoopBack0   
 2001:DB8:1::1/128                           Direct        
  ::1                                        LoopBack1     
 2001:DB8:2::2/128                           ISIS-L1       
  FE80::3AB0:9EFF:FE31:307                   GE<span>0/1/0</span>  
 2001:DB8:3::3/128                           ISIS-L1       
  FE80::3AB0:9EFF:FE31:307                   GE<span>0/1/0</span>    
 2001:DB8:5::5/128                           ISIS-L1       
  FE80::3AB0:9EFF:FE21:300                   GE<span>0/2/0</span>  
 2001:DB8:6::6/128                           ISIS-L1  
  ::                                         SRv6TE-FlowGroup-2  
 2001:DB8:10::/96                            Direct        
  2001:DB8:10::1                             GE<span>0/2/0</span>  
 2001:DB8:10::1/128                          Direct        
  ::1                                        GE<span>0/2/0</span>  
 2001:DB8:11::/96                            Direct        
  2001:DB8:11::1                             GE<span>0/1/0</span>  
 2001:DB8:11::1/128                          Direct        
  ::1                                        GE<span>0/1/0</span>  
 2001:DB8:12::/96                            ISIS-L1       
  FE80::3AB0:9EFF:FE31:307                   GE<span>0/1/0</span>  
 2001:DB8:20::/96                            ISIS-L1       
  ::                                         SRv6TE-FlowGroup-2 
 2001:DB8:100::/64                           ISIS-L1       
  ::                                         NULL0         
 2001:DB8:200::/64                           ISIS-L1       
  FE80::3AB0:9EFF:FE31:307                   GE<span>0/1/0</span>  
 2001:DB8:300::/64                           ISIS-L1       
  FE80::3AB0:9EFF:FE31:307                   GE<span>0/1/0</span>  
 FE80::/10                                   Direct        
  ::                                         NULL0</pre>
<p>Because the IGP metric value of the shortcut route of the SRv6 TE flow group is less than that of a common route, the outbound interface of the route 2001:DB8:6::6/128 on PE1 is the SRv6 TE flow group.</p>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001166787565__example121226172748"><a name="EN-US_TASK_0000001166787565__example121226172748"></a><a name="example121226172748"></a><a name="EN-US_TASK_0000001166787565__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>PE1 configuration file</p>
<pre class="screen">#
sysname PE1
#
te ipv6-router-id 2001:DB8:1::1
#               
segment-routing ipv6
 encapsulation source-address 2001:DB8:1::1
 locator as1 ipv6-prefix 2001:DB8:100:: 64 static 32
  opcode ::100 end psp<span>-usp-usd</span>
 srv6-te-policy locator as1                                        
 segment-list list1
  index 5 sid ipv6 2001:DB8:200::100 
  index 10 sid ipv6 2001:DB8:300::100
 segment-list list2   
  index 5 sid ipv6 2001:DB8:400::100                                         
  index 10 sid ipv6 2001:DB8:300::100 
 srv6-te policy policy1 endpoint 2001:DB8:3::3 color 10 
  encapsulation-mode encaps      
  candidate-path preference 100
   segment-list list1
 srv6-te policy policy2 endpoint 2001:DB8:3::3 color 20
  encapsulation-mode encaps                                                 
  candidate-path preference 100                                              
   segment-list list2 
 srv6-te flow-group fg1 
  endpoint 2001:DB8:3::3
  igp shortcut isis route-policy rp1   
  isis ipv6 enable 1  
  match-type dscp     
   index 10 dscp 1 to 20 match srv6-te-policy color 10                       
   default match srv6-te-policy color 20 
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0001.00
 #              
 ipv6 enable topology ipv6
 ipv6 traffic-eng level-1
 segment-routing ipv6 locator as1 auto-sid-disable
 #              
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:11::1/96
 isis ipv6 enable 1
#               
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:10::1/96
 isis ipv6 enable 1
#               
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:13::1/96
 isis ipv6 enable 1
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:1::1/128
 isis ipv6 enable 1
#   
ip ipv6-prefix p1 index 10 permit 2001:DB8:20:: 96
ip ipv6-prefix p1 index 20 permit 2001:DB8:6::6 128
#
route-policy rp1 permit node 10                 
 if-match ipv6 address prefix-list p1           
#                                               
return </pre>
</li><li><p>P1 configuration file</p>
<pre class="screen">#
sysname P1        
#               
segment-routing ipv6
 encapsulation source-address 2001:DB8:2::2
 locator as1 ipv6-prefix 2001:DB8:200:: 64 static 32
 opcode ::100 end psp<span>-usp-usd</span>
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 #              
 ipv6 enable topology ipv6
 ipv6 traffic-eng level-1
 segment-routing ipv6 locator as1 auto-sid-disable
 #
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:11::2/96
 isis ipv6 enable 1 
# 
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:12::1/96
 isis ipv6 enable 1  
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:2::2/128
 isis ipv6 enable 1
#               
return </pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#
sysname PE2
#
te ipv6-router-id 2001:DB8:3::3
#               
segment-routing ipv6
 encapsulation source-address 2001:DB8:3::3 
 locator as1 ipv6-prefix 2001:DB8:300:: 64 static 32 
  opcode ::100 end psp<span>-usp-usd</span>
 srv6-te-policy locator as1
 segment-list list1
  index 5 sid ipv6 2001:DB8:200::100 
  index 10 sid ipv6 2001:DB8:100::100
 segment-list list2   
  index 5 sid ipv6 2001:DB8:400::100                                         
  index 10 sid ipv6 2001:DB8:100::100  
 srv6-te policy policy1 endpoint 2001:DB8:1::1 color 10 
  encapsulation-mode encaps 
  candidate-path preference 100
   segment-list list1
 srv6-te policy policy2 endpoint 2001:DB8:1::1 color 20
  encapsulation-mode encaps                                               
  candidate-path preference 100                                              
   segment-list list2
 srv6-te flow-group fg1      
  endpoint 2001:DB8:1::1
  igp shortcut isis route-policy rp1   
  isis ipv6 enable 1  
  match-type dscp                                                            
   index 10 dscp 1 to 20 match srv6-te-policy color 10                       
   default match srv6-te-policy color 20 
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 #              
 ipv6 enable topology ipv6
 ipv6 traffic-eng level-1
 segment-routing ipv6 locator as1 auto-sid-disable
 #               
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:12::2/96
 isis ipv6 enable 1
#               
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:20::1/96
 isis ipv6 enable 1
#               
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:14::2/96
 isis ipv6 enable 1
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:3::3/128
 isis ipv6 enable 1
#        
ip ipv6-prefix p1 index 10 permit 2001:DB8:10:: 96
ip ipv6-prefix p1 index 20 permit 2001:DB8:5::5 128
#
route-policy rp1 permit node 10                 
 if-match ipv6 address prefix-list p1           
#                                               
return</pre>
</li><li><p>P2 configuration file</p>
<pre class="screen">#
sysname P2 
#    
segment-routing ipv6
 encapsulation source-address 2001:DB8:4::4
 locator as1 ipv6-prefix 2001:DB8:400:: 64 static 32
 opcode ::100 end psp<span>-usp-usd</span>
#   
isis 1         
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0004.00
 #              
 ipv6 enable topology ipv6
 ipv6 traffic-eng level-1
 segment-routing ipv6 locator as1 auto-sid-disable
 #  
#               
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:13::2/96
 isis ipv6 enable 1
# 
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:14::1/96
 isis ipv6 enable 1 
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:4::4/128
 isis ipv6 enable 1
#               
return</pre>
</li><li><p>DeviceA configuration file</p>
<pre class="screen">#
sysname DeviceA
#
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0005.00
 #              
 ipv6 enable topology ipv6
 # 
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:10::2/96
 isis ipv6 enable 1
#               
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:5::5/128
 isis ipv6 enable 1          
#               
return </pre>
</li><li><p>DeviceB configuration file</p>
<pre class="screen">#
sysname DeviceB
#               
isis 1        
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0006.00
 #              
 ipv6 enable topology ipv6
 #  
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ipv6 enable    
 ipv6 address 2001:DB8:20::2/96
 isis ipv6 enable 1
#
interface LoopBack1
 ipv6 enable    
 ipv6 address 2001:DB8:6::6/128
 isis ipv6 enable 1
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0101.html">Configuration Examples for SRv6 TE Policy (IS-IS)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0272.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0224.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>