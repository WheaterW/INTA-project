
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the SRv6 Path MTU">
<meta name="abstract" content="In a scenario where packets enter an SRv6 BE path or SRv6 TE Policy, to prevent the packets from being discarded when the packet length exceeds the MTU value of the outbound interface or to prevent the forwarding efficiency from being reduced when the fragment length is too short, you can plan an appropriate SRv6 path MTU value on the ingress of the SRv6 BE path or the headend of the SRv6 TE Policy.">
<meta name="description" content="In a scenario where packets enter an SRv6 BE path or SRv6 TE Policy, to prevent the packets from being discarded when the packet length exceeds the MTU value of the outbound interface or to prevent the forwarding efficiency from being reduced when the fragment length is too short, you can plan an appropriate SRv6 path MTU value on the ingress of the SRv6 BE path or the headend of the SRv6 TE Policy.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0108.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0214.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featurename" content="EVPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featurename" content="Segment Routing IPv6 Policy">
<meta name="featurename" content="Segment Routing Policy">
<meta name="featuretype" content="Segment Routing">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="Segment Routing IPv6">
<meta name="featuretype" content="Segment Routing">
<meta name="OWNER" content="l00587852">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00587852">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000002100381905">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<title>Configuring the SRv6 Path MTU</title>
</head>
<body><a name="EN-US_TASK_0000002100381905"></a><a name="EN-US_TASK_0000002100381905"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the SRv6 Path MTU</h1>
<div class="taskbody"><p>In a scenario where packets enter an SRv6 BE path or SRv6 TE Policy, to prevent the packets from being discarded when the packet length exceeds the MTU value of the outbound interface or to prevent the forwarding efficiency from being reduced when the fragment length is too short, you can plan an appropriate SRv6 path MTU value on the ingress of the SRv6 BE path or the headend of the SRv6 TE Policy.</p>
<div class="context"><a name="EN-US_TASK_0000002100381905__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Typically, only the source and destination IPv6 nodes parse IPv6 extension headers. Transit nodes forward IPv6 packets without performing IPv6 MTU-based packet fragmentation, which is performed only on the source node. If the length of an IPv6 packet is greater than the IPv6 MTU of a device's outbound interface, the device discards the packet. The impact of the MTU must therefore be considered, because SRv6 uses IPv6 as the forwarding plane.</p>
<p>In addition, if original packet fragments entering an SRv6 BE path or SRv6 TE Policy are too small, the link bandwidth utilization is affected. Therefore, an appropriate SRv6 path MTU value needs to be configured to prevent packet loss and maximize link bandwidth utilization.</p>
<p>The SRv6 path MTU is the total length of a packet encapsulated with both the SRv6 header and IPv6 payload instead of only the IPv6 payload. For details, see <a href="#EN-US_TASK_0000002100381905__en-us_task_0197097338_fig_mtu_feature_00501">Figure 1</a>.</p>
<div class="fignone" id="EN-US_TASK_0000002100381905__en-us_task_0197097338_fig_mtu_feature_00501"><a name="EN-US_TASK_0000002100381905__en-us_task_0197097338_fig_mtu_feature_00501"></a><a name="en-us_task_0197097338_fig_mtu_feature_00501"></a><span class="figcap"><b>Figure 1 </b>SRv6 path MTU</span><br><span><img class="imgResize" src="figure/en-us_image_0000002064381792.png" width="518.7" height="128.206946" title="Click to enlarge"></span></div>
<p>To allow for the additional SRH length introduced in TI-LFA FRR, binding SID, and other scenarios, configure a reserved path MTU value on the SRv6 ingress. The configured SRv6 path MTU value minus the reserved value is called the active path MTU value. The MTU value applied to SRv6 packets is the smaller of either the active path MTU value or the IPv6 MTU value of the involved physical interface. <a href="#EN-US_TASK_0000002100381905__en-us_task_0197097338_fig1950611718211">Figure 2</a> shows the relationships among the MTU values.</p>
<div class="fignone" id="EN-US_TASK_0000002100381905__en-us_task_0197097338_fig1950611718211"><a name="EN-US_TASK_0000002100381905__en-us_task_0197097338_fig1950611718211"></a><a name="en-us_task_0197097338_fig1950611718211"></a><span class="figcap"><b>Figure 2 </b>Relationships among the MTU values</span><br><span><img class="imgResize" src="figure/en-us_image_0000002100540413.png" width="399" height="274.444436" title="Click to enlarge"></span></div>
<p>SRv6 path MTU configuration takes effect for packets forwarded through either an SRv6 BE path or an SRv6 TE Policy. You need to configure an appropriate SRv6 path MTU value according to the length of SRv6-encapsulated packets.</p>
<p>Both SRv6 TE Policy and SRv6 BE scenarios support the global configuration of a path MTU value and reserved path MTU value. If the global SRv6 path MTU value is 1600 bytes and the reserved path MTU value is 100 bytes, the active path MTU value is 1500 bytes. In this case, if the IPv6 MTU value of the involved physical interface is greater than or equal to 1500 bytes, the MTU value used by the ingress is 1500 bytes. However, if the IPv6 MTU value of the involved physical interface is less than 1500 bytes, the ingress uses this MTU value.</p>
<p>SRv6 TE Policies also support path MTU configuration on a per segment list basis. A path MTU value configured for a segment list overrides the global path MTU value. For example, if the global SRv6 path MTU value is 1600 bytes, the path MTU values of all segment lists are 1600 bytes by default. If the path MTU value configured for one of the segment lists is not 1600 bytes, this configured value takes precedence. The path MTU value of the segment list minus the globally reserved path MTU value is the active path MTU value of the segment list. The active path MTU value is then compared with the IPv6 MTU value of the involved physical interface. The smaller value between them is the MTU value that the headend actually uses.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0000002100381905__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a path MTU value in an SRv6 BE scenario.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a> command to enable SRv6 and enter its view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=path-mtu"><b><span class="cmdname">path-mtu</span></b></a><strong> </strong><em>mtu-value</em> command to configure a global path MTU value for SRv6 BE.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=path-mtu+reserved"><b><span class="cmdname">path-mtu reserved</span></b></a> <i><span class="varname">reserved-value</span></i> command to configure a globally reserved path MTU value.</span><p><p>The global path MTU value minus the reserved value is the active path MTU value, which must be greater than or equal to 1280 bytes. The ingress sends packets using the smaller value of either the active path MTU value or the IPv6 MTU value of the involved physical interface.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>Configure a path MTU value in an SRv6 TE Policy scenario.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a> command to enable SRv6 and enter its view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=path-mtu"><b><span class="cmdname">path-mtu</span></b></a><strong> </strong><em>mtu-value</em> command to configure a global path MTU value for SRv6 TE Policy.</span></li><li class="substepexpand"><span>(Optional) Run the <a href="cmdqueryname=path-mtu+reserved"><b><span class="cmdname">path-mtu reserved</span></b></a> <i><span class="varname">reserved-value</span></i> command to configure a globally reserved path MTU value.</span><p><p>The global path MTU value minus the reserved value is the active path MTU value, which must be greater than or equal to 1280 bytes. The headend sends packets using the smaller value of either the active path MTU value or the IPv6 MTU value of the involved physical interface.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure a path MTU value for a segment list.</span><p><p>A path MTU value configured for a segment list overrides the global path MTU value.</p>
<ol type="a"><li>Run the <a href="cmdqueryname=srv6-te+policy"><b><span class="cmdname">srv6-te policy</span></b></a> <i><span class="varname">name-value</span></i> <strong><span>endpoint</span></strong> <i><span class="varname">endpoint-ip</span></i> <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> command to create an SRv6 TE Policy and enter its view.</li><li>Run the <a href="cmdqueryname=candidate-path+preference"><b><span class="cmdname">candidate-path preference</span></b></a> <i><span class="varname">preference</span></i> command to enter the candidate path view of the SRv6 TE Policy.</li><li>Run the <span><a href="cmdqueryname=segment-list"><b><span class="cmdname">segment-list</span></b></a> <i><span class="varname">list-name</span></i> <strong><span>path-mtu</span></strong> <i><span class="varname">mtu-value</span></i></span> command to configure a path MTU value for the specified segment list.</li></ol>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0000.html">Segment Routing IPv6 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0108.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_srv6_cfg_all_0214.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>