
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Ingress as a PCE Client">
<meta name="abstract" content="A PCE client can be configured on the ingress so that the ingress establishes a PCEP session with a PCE server and sends a request to the server over the session to calculate a path.">
<meta name="description" content="A PCE client can be configured on the ingress so that the ingress establishes a PCEP session with a PCE server and sends a request to the server over the session to calculate a path.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pcep_cfg_0002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pcep_cfg_0004.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MPLS TE">
<meta name="featurename" content="PCE">
<meta name="featuretype" content="MPLS">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MPLS TE">
<meta name="featurename" content="PCE">
<meta name="featuretype" content="MPLS">
<meta name="featurename" content="MPLS TE">
<meta name="featurename" content="PCE">
<meta name="featuretype" content="MPLS">
<meta name="OWNER" content="l00468467">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00468467">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001241303459">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Ingress as a PCE Client</title>
</head>
<body><a name="EN-US_TASK_0000001241303459"></a><a name="EN-US_TASK_0000001241303459"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Ingress as a PCE Client</h1>
<div class="taskbody"><p>A PCE client can be configured on the ingress so that the ingress establishes a PCEP session with a PCE server and sends a request to the server over the session to calculate a path.</p>
<div class="context"><a name="EN-US_TASK_0000001241303459__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Different from CSPF configured on the ingress, the PCE algorithm allows a PCE server to configure and manage network-wide TE information, including node, link, and tunnel attributes. Some steps are mandatory when CSPF is used, whereas are optional when PCE is used.</p>
<div class="p">If the ingress has to delegate LSPs only in some TE tunnels to the PCE server, the ingress must report information about both delegated and undelegated LSPs to the PCE server, which helps the PCE server correctly calculate global bandwidth information. To implement partial LSP delegation, perform either of the following configurations:<ul><li>Configure the ingress to delegate LSPs in all TE tunnels to the PCE server. Then configure the ingress to report LSP information on a specified tunnel interface to the PCE server and withdraw the LSP delegation from the PCE server.</li><li>Configure the ingress to report information about LSPs in all TE tunnels to the PCE server, without delegating the LSPs to the PCE server. Then configure the ingress to delegate the LSP on a specified TE tunnel interface to the PCE server.</li></ul>
Perform the following steps on the ingress:</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001241303459__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=pce-client"><b><span class="cmdname">pce-client</span></b></a></span><p><p>The device is configured as a PCE client, and the PCE client view is displayed.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=stateless-bringup"><b><span class="cmdname">stateless-bringup</span></b></a></span><p><p>The PCE client is enabled to send PCReq messages to the PCE server to request path computation.</p>
</p><p><p>With the <a href="cmdqueryname=stateless-bringup"><b><span class="cmdname">stateless-bringup</span></b></a> command configured, after synchronization between the PCE client and server is complete, the PCE client sends a PCReq message to request path computation for a newly configured LSP of a TE tunnel. After receiving the request, the PCE server returns a path computation result using a PCRep message. This function can be configured in PCE delegation scenarios. If the returned path computation result meets service requirements, delegation can be started. However, if a no-path message or an error is returned, rectify faults before starting delegation.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a></span></span><p><p>The MPLS view is displayed.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=mpls+te+pce+cleanup+lsp-state"><b><span class="cmdname">mpls te pce cleanup lsp-state</span></b></a></span></span><p><p>The PCE client is enabled to automatically degrade to use the local path computation function if a PCEP session fails.</p>
<p>If a PCE server fails or a PCEP connection is interrupted, to correctly establish an MPLS TE tunnel, the PCE client must be able to automatically degrade to use the local path computation function. The PCE client can use CSPF (if configured) or routes to establish an MPLS TE tunnel.</p>
</p></li><li><span>Select either of the following solutions:</span><ul><li><p>Solution 1: applicable to scenarios where most LSPs need to be delegated</p>
<ol type="a"><li><p>Run <span><a href="cmdqueryname=mpls+te+pce"><b><span class="cmdname">mpls te pce</span></b></a> <strong><span>delegate</span></strong></span> (MPLS view)</p>
<p>The ingress is configured to delegate LSPs of all local TE tunnels to the PCE server.</p>
</li><li><p>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></p>
<p>Return to the system view.</p>
</li><li><p>Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">tunnel-number</span></i></span></p>
<p>The specified TE tunnel interface view is displayed.</p>
</li><li><p>Run <span><a href="cmdqueryname=mpls+te+pce+passive-delegate+report-only"><b><span class="cmdname">mpls te pce passive-delegate report-only</span></b></a></span> (Tunnel interface view)</p>
<p>The ingress is configured to report LSP information of the specified tunnel to the PCE server, without delegating LSPs of the tunnel to the PCE server.</p>
</li></ol>
</li><li><p>Solution 2: applicable to scenarios where only a few LSPs need to be delegated</p>
<ol type="a"><li><p>Run <span><a href="cmdqueryname=mpls+te+pce+passive-delegate+report-only"><b><span class="cmdname">mpls te pce passive-delegate report-only</span></b></a></span> (MPLS view)</p>
<p>The ingress is configured to report LSP information of all local tunnels to the PCE server, without delegating LSPs of the tunnels to the PCE server.</p>
</li><li><p>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></p>
<p>Return to the system view.</p>
</li><li><p>Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">tunnel-number</span></i></span></p>
<p>The specified TE tunnel interface view is displayed.</p>
</li><li><p>Run <span><a href="cmdqueryname=mpls+te+pce+delegate"><b><span class="cmdname">mpls te pce delegate</span></b></a></span> (Tunnel interface view)</p>
<p>The ingress is configured to delegate LSPs of the specified tunnel to the PCE server.</p>
</li></ol>
</li></ul>
</li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pcep_cfg_0002.html">Configuring PCEP to Trigger MPLS TE Tunnel Establishment
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pcep_cfg_0004.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>