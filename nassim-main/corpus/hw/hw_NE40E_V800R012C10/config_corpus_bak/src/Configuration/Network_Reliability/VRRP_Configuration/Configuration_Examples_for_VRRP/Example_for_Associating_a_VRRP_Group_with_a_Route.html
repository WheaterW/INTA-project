
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Associating a VRRP Group with a Route">
<meta name="abstract" content="In this example, a VRRP backup group is associated with the uplink route that is connected to a network. If the route is withdrawn or becomes inactive, the RM module notifies the VRRP backup group of the change. After receiving the notification, the VRRP backup group performs a master/backup VRRP switchover.">
<meta name="description" content="In this example, a VRRP backup group is associated with the uplink route that is connected to a network. If the route is withdrawn or becomes inactive, the RM module notifies the VRRP backup group of the change. After receiving the notification, the VRRP backup group performs a master/backup VRRP switchover.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0120.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0141.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0154.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00604599">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRP">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00604599">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001163341710">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Associating a VRRP Group with a Route</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001163341710"></a><a name="EN-US_TASK_0000001163341710"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Associating a VRRP Group with a Route</h1>
<div class="taskbody"><p>In this example, a VRRP backup group is associated with the uplink route that is connected to a network. If the route is withdrawn or becomes inactive, the RM module notifies the VRRP backup group of the change. After receiving the notification, the VRRP backup group performs a master/backup VRRP switchover.</p>
<div class="context"><a name="EN-US_TASK_0000001163341710__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_context673766263214023"><h4 class="sectiontitle">Networking Requirements</h4><div class="note" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_note153391322183419"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p18339152214349">The <span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword201471219471">NE40E-M2K</span> is used as an example.</p>
</div></div>
<p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p511656221214023">To improve device reliability, two user gateways work in master/backup mode and are connected to a Layer 3 network. VRRP is enabled on these gateways to determine their master/backup status.</p>
<p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1288556860214023">If an uplink route to a network becomes unreachable, user hosts cannot detect the change and still uses the route to transmit traffic. As a result, service traffic loss occurs. Associating the VRRP backup group with the route can prevent service traffic loss. The VRRP backup group can be configured to track the uplink route to the network. If the route is withdrawn or becomes inactive, the route management (RM) module notifies the VRRP backup group of the change. After receiving the notification, the VRRP backup group changes its master device's VRRP priority and performs a master/backup switchover.</p>
<div class="p" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p560715547214023">On the network shown in <a href="#EN-US_TASK_0000001163341710__en-us_task_0172361823_fig_dc_vrp_vrrp_cfg_012801">Figure 1</a>, PE1 and PE2 are two user gateways and form a VRRP backup group working in master/backup mode. On PE1 (master), associate VRRP with the route destined for PE3's interface. If PE3's interface goes Down, the RM module instructs the VRRP module to perform a master/backup VRRP switchover. After the interface goes Up, traffic switches back to Master.<div class="note" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_note1295102353214023"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p19483162283920">Interfaces 1 and 2 in this example represent GE <span>0/1/1</span> and GE <span>0/1/2</span>, respectively.</p>
</div></div>
</div>
<div class="fignone" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_fig_dc_vrp_vrrp_cfg_012801"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_fig_dc_vrp_vrrp_cfg_012801"></a><a name="en-us_task_0172361823_fig_dc_vrp_vrrp_cfg_012801"></a><span class="figcap"><b>Figure 1 </b>Associating a VRRP backup group with a route</span><br><span><img class="vsd" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_image2013277346214023" src="images/fig_dc_vrp_vrrp_cfg_012801.png"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001163341710__1.4.2"></a><a name="1.4.2"></a>
<div class="p" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_context1486684439214023"><div class="p" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_context1486684439214023"><h4 class="sectiontitle">Precautions</h4><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p96037475170">To improve security, you are advised to configure a VRRP security policy. For details, see "Example for Configuring a VRRP Group."</p>
<h4 class="sectiontitle">Configuration Roadmap</h4><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1144473969214023">The configuration roadmap is as follows:</p>
<ol id="EN-US_TASK_0000001163341710__en-us_task_0172361823_ol1008652903214023"><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_li1857151610214023"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1619783772214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_li1857151610214023"></a><a name="en-us_task_0172361823_li1857151610214023"></a>Assign an IP address to each interface to ensure link connectivity.</p>
</li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_li1993608370214023"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1536014096214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_li1993608370214023"></a><a name="en-us_task_0172361823_li1993608370214023"></a>Configure a VRRP backup group on PE1 and PE2, and ensure that PE1 is the master and PE2 is the backup.</p>
<p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1598941192214023">If the link between PE1 and PE3 goes Down, the VRRP backup group performs a master/backup VRRP switchover and PE2 preempts the Master state.</p>
</li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_li1185562338214023"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1392937900214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_li1185562338214023"></a><a name="en-us_task_0172361823_li1185562338214023"></a>Associate the VRRP backup group on PE1 with the route to PE3. The VRRP module monitors the route. </p>
<p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p830618510214023">If the associated route is withdrawn or becomes inactive, PE1 reduces its VRRP priority by 40 and triggers a master/backup VRRP switchover.</p>
</li></ol>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001163341710__1.4.3"></a><a name="1.4.3"></a>
<div class="p" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_context407074597214023"><h4 class="sectiontitle">Data Preparation</h4><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p50676977214023">To complete the configuration, you need the following data:</p>
<ul id="EN-US_TASK_0000001163341710__en-us_task_0172361823_ul997210034214023"><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_li400573572214023"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p78791259214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_li400573572214023"></a><a name="en-us_task_0172361823_li400573572214023"></a>IP addresses of the interfaces on CE, PE1, PE2, and PE3 (For configuration details, see <a href="#EN-US_TASK_0000001163341710__en-us_task_0172361823_fig_dc_vrp_vrrp_cfg_012801">Figure 1</a> or <a href="#EN-US_TASK_0000001163341710__en-us_task_0172361823_example1416641522214023">Configuration Files</a> in this section.)</p>
</li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_li836781423214023"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p2062455805214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_li836781423214023"></a><a name="en-us_task_0172361823_li836781423214023"></a>Virtual IP address of the VRRP backup group: 10.1.1.10; preemption delay after the master device recovers: 20s</p>
</li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_li107463564214023"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p106373021214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_li107463564214023"></a><a name="en-us_task_0172361823_li107463564214023"></a>Route to be associated with the VRRP backup group: 192.168.1.0/24</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001163341710__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0000001163341710__en-us_task_0172361823_steps1145374710214023"><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_step2036932205214023"><span id="EN-US_TASK_0000001163341710__en-us_task_0172361823_cmd1682752608214023">Configure interface attributes of the CE, and assign IP addresses to the interfaces of PE1, PE2, and PE3.</span><p><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1403870929214023"># Configure the CE.</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1802065149214023">&lt;<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1695106140214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b149205233214023">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen704816495214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1716094961214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1702630317214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1983583358214023">sysname CE</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1092885093214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1777812668214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1757530365214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1732056453214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1646514319214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1433040834214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1338308079214023">interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen491797338214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword118577864214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b2076188968214023">undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1327065344214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword152922376214023">*</span>CE-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1989530459214023">portswitch</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen43633199214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1043828693214023">*</span>CE-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1610465945214023">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen612449489214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword284482364214023">*</span>CE] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1989212176214023">interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen345236219214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1361869155214023">*</span>CE-GigabitEthernet<span>0/1/2</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1295418841214023">undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen137705146214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword688852144214023">*</span>CE-GigabitEthernet<span>0/1/2</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1549089230214023">portswitch</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen2041399080214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1504729927214023">*</span>CE-GigabitEthernet<span>0/1/2</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1133253353214023">quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen986654464214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1838549321214023">*</span>CE]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b164196912214023"> vlan 10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1340927682214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword752098151214023">*</span>CE-vlan10]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b534949030214023"> port gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen367371092214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1867064448214023">*</span>CE-vlan10]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1740882583214023"> port gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen67509744214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword867307202214023">*</span>CE-vlan10]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b2129698808214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1321685302214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword529167231214023">*</span>CE]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b265394430214023"> interface vlanif 10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen660815858214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword711351010214023">*</span>CE-Vlanif10]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b963806404214023"> ip address 10.1.1.3 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1246354182214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword737156534214023">*</span>CE]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b2142421433214023"> commit</strong></pre>
</p><p><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1892094730214023"># Assign IP addresses to PE1's GE <span>0/1/1</span> and GE <span>0/1/2</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1152055826214023">&lt;<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword363973549214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1637702627214023">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen411957816214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1986270891214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword621572422214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1204031211214023">sysname PE1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen752216045214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1643040607214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword91265076214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b497696442214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen316546875214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1677466750214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b2101754295214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen533155578214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1001395987214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1170727999214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1086057514214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword403352845214023">*</span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1226102765214023"> ip address 10.1.1.1 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1598415770214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1973442852214023">*</span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b887314488214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen298298417214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword2101930922214023">*</span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b664874010214023"> interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1170708750214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1148583717214023">*</span>PE1-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b702604555214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen223367492214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1805532053214023">*</span>PE1-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b645246316214023"> ip address 192.168.1.1 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen459919053214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword2054110299214023">*</span>PE1-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1335017269214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1497204935214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1174529640214023">*</span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b2049105950214023"> commit</strong></pre>
</p><p><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p628407142214023"># Assign IP addresses to PE2's GE <span>0/1/1</span> and GE <span>0/1/2</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1063177772214023">&lt;<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1142159584214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1001726212214023">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen540118838214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword611983723214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1311246978214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b419899553214023">sysname PE2</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen953319971214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword811850579214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1809071862214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b686162421214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen354979140214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1959714870214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b839821957214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen870693681214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword2037900929214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b2003108019214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen496282225214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword367797723214023">*</span>PE2-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b376012056214023"> ip address 10.1.1.2 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen346613226214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword191571435214023">*</span>PE2-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b2009002069214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1140968045214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword2107395641214023">*</span>PE2]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b772428442214023"> interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1696549739214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword306931211214023">*</span>PE2-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b894585958214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen470847416214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1403520715214023">*</span>PE2-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b197662703214023"> ip address 192.168.2.1 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1612802289214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1733654046214023">*</span>PE2-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1948887836214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen615386599214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword183407127214023">*</span>PE2]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1750784974214023"> commit</strong></pre>
</p><p><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p632847819214023"># Assign an IP address to PE3's GE <span>0/1/1</span>.</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1442716357214023">&lt;<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1111852347214023">HUAWEI</span>&gt; <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1907478481214023">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen690258269214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword2043954866214023"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1601015450214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b163285993214023">sysname PE3</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen760167391214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword495427520214023">*</span><span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword856229221214023">HUAWEI</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1876656470214023">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen361555103214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1160703421214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE3]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1478641909214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen131048045214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword2104074662214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE3-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b650874309214023"> undo shutdown</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen2072475739214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1478400533214023">*</span>PE3-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1065469161214023"> ip address 192.168.1.2 24</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1659350057214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword543349501214023">*</span>PE3-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b674718618214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1354490764214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword336956043214023">*</span>PE3]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1283537263214023"> commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_step7758909214023"><span id="EN-US_TASK_0000001163341710__en-us_task_0172361823_cmd1554964743214023">Configure basic functions of a VRRP backup group.</span><p><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1102222646214023"># Configure a VRRP group with the VRID of 1 on PE1, and set the VRRP priority of PE1 to 120 so that PE1 functions as the master device.</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1924463438214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword2140855101214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1547379581214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1845806251214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1282842162214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1800155874214023"> vrrp vrid 1 virtual-ip 10.1.1.10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen2102146539214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword199441429214023">*</span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1550163743214023"> vrrp vrid 1 priority 120</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen29960837214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword493702059214023">*</span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1054905264214023"> vrrp vrid 1 preempt-mode timer delay 20</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1278793834110">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword11811951134120">*</span>PE1-GigabitEthernet<span>0/1/1</span>] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b518874411413">vrrp recover-delay 20</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen325093144214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword219618505214023">*</span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b625091058214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen337995977214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword463574052214023">*</span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b946278213214023"> commit</strong></pre>
<p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p227822116214023"># Configure a VRRP backup group with the VRID of 1 on PE2, and retain the default VRRP priority for PE2 so that PE2 functions as the backup device.</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen491206485214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1199325307214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b315473537214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1221685700214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1683918702214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1762361418214023"> vrrp vrid 1 virtual-ip 10.1.1.10</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1787939148214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1852198532214023">*</span>PE2-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b107844709214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1041107403214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword21680992214023">*</span>PE2]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1572880765214023"> commit</strong></pre>
<p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1806100853214023"># Run the <a href="cmdqueryname=display+vrrp"><b><span class="cmdname" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_cmdname788353780214023">display vrrp</span></b></a> command on PE1 and PE2. The command outputs show that the VRRP status of PE1 is <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b616305138214307">Master</strong> and that the VRRP status of PE2 is <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b792302100214307">Backup</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen2019863723214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1017995345214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b45826073214023">display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1313004850214023">GigabitEthernet<span>0/1/1</span> | Virtual Router 1
State          : <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1435869291214023">Master</strong>
Virtual IP     : 10.1.1.10
Master IP      : 10.1.1.1
Local IP       : 10.1.1.1
PriorityRun    : 120
PriorityConfig : 120
MasterPriority : 120
Preempt        : YES   Delay Time : 20s
Hold Multiplier: 4
TimerRun       : 1s
TimerConfig    : 1s
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0101
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Create Time       : 2012-04-26 10:04:12
Last Change Time  : 2012-04-26 10:05:32</pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1050010195214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1241405909214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b982939152214023">display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen260415733214023">GigabitEthernet<span>0/1/1</span> | Virtual Router 1
State          : <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b634348944214023">Backup</strong>
Virtual IP     : 10.1.1.10
Master IP      : 10.1.1.1
Local IP       : 10.1.1.2
PriorityRun    : 100
PriorityConfig : 100
MasterPriority : 120
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1s
TimerConfig    : 1s
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0102
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Create Time       : 2012-04-26 10:04:36
Last Change Time  : 2012-04-26 10:09:46</pre>
</p></li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_step1552843760214023"><span id="EN-US_TASK_0000001163341710__en-us_task_0172361823_cmd276312329214023">Configure IS-IS.</span><p><div class="p" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p317667640214023"># Set the IS-IS entity name to 10.0000.0000.0001.00 and the IS-IS level to 1 on PE1.<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1568220554214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword2134192432214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b2098445271214023"> isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1045453176214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword812367918214023">*</span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b197974469214023"> is-level level-1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1634402200214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword696482250214023">*</span>PE1-isis-1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1387222352214023"> network-entity 10.0000.0000.0001.00</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1814281775214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1614816658214023">*</span>PE1-isis-1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b966495925214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen480786133214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1083891149214023">*</span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b703118433214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen232426199214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword264104835214023">*</span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b889854531214023"> isis enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1668411307214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword76942392214023">*</span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b518200150214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1173507403214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword344136851214023">*</span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b427551899214023"> interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen856831597214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword172994402214023">*</span>PE1-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b642780981214023"> isis enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1076393033214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1575252591214023">*</span>PE1-GigabitEthernet<span>0/1/2</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1449348102214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1259662577214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword397930510214023">*</span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b257874337214023"> commit</strong></pre>
</div>
<div class="p" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1949626220214023"># Set the IS-IS entity name to 10.0000.0000.0002.00 on PE3.<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1470429340214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword9482779214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE3]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1664537050214023"> isis 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1802492363214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1232589261214023">*</span>PE3-isis-1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b173859934214023"> network-entity 10.0000.0000.0002.00</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen354499869214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1428725565214023">*</span>PE3-isis-1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1468224885214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1867569074214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword426363891214023">*</span>PE3]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b357027798214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen730945966214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1331031829214023">*</span>PE3-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b2072665301214023"> isis enable 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen546813526214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1582278247214023">*</span>PE3-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1559404004214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1090400205214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword336199388214023">*</span>PE3]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1873907431214023"> commit</strong></pre>
</div>
</p></li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_step945927768214023"><span id="EN-US_TASK_0000001163341710__en-us_task_0172361823_cmd386558035214023">Associate the VRRP backup group with the route 192.168.1.0/24.</span><p><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1608077259214023"># Associate the VRRP backup group on PE1 with the route 192.168.1.0/24, and set the value by which the VRRP priority of PE1 decreases to 40 when the route is withdrawn.</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1744155016214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword2111940060214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b393732112214023"> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen743654063214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1268516017214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1168356600214023"> vrrp vrid 1 track ip route 192.168.1.0 255.255.255.0 reduced 40 </strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen2030615789214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword974206738214023">*</span>PE1-GigabitEthernet<span>0/1/1</span>]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1942212548214023"> quit</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1434139178214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword780779057214023">*</span>PE1]<strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b400048543214023"> commit</strong></pre>
</p></li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_step48820195214023"><span id="EN-US_TASK_0000001163341710__en-us_task_0172361823_cmd182264211214023">Verify the configuration.</span><p><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p902100750214023"># Run the <a href="cmdqueryname=shutdown"><b><span class="cmdname" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_cmdname2138340831214023">shutdown</span></b></a> command on GE <span>0/1/1</span> of PE3 to simulate a link fault.</p>
<p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1225246999214023"># Run the <a href="cmdqueryname=display+vrrp"><b><span class="cmdname" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_cmdname381204591214023">display vrrp</span></b></a> command on PE1 and PE2. The command outputs show that the VRRP status of PE2 is <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b15690181293218">Master </strong>and the VRRP status of PE1 is <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b25621113213">Backup</strong>, indicating that the VRRP backup group has performed a master/backup VRRP switchover.</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1728253744214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1795094178214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1466291423214023">display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1749743843214023">GigabitEthernet<span>0/1/1</span> | Virtual Router 1  
State          : <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b910947826214023">Backup</strong>
Virtual IP     : 10.1.1.10
Master IP      : 10.1.1.2
Local IP       : 10.1.1.1
PriorityRun    : 80
PriorityConfig : 120
MasterPriority : 100
Preempt        : YES   Delay Time : 20s
Hold Multiplier: 4
TimerRun       : 1s
TimerConfig    : 1s
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0101
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Track IP Route    : 192.168.1.0/24   Priority Reduced : 40
IP Route State    : <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1984511832214023">Unreachable</strong>
Create Time       : 2012-04-26 10:04:12
Last Change Time  : 2012-04-26 10:23:37</pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen11956264214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1118872836214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b130806638214023">display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen580608047214023">GigabitEthernet<span>0/1/1</span> | Virtual Router 1
State          : <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b756700747214023">Master</strong>
Virtual IP     : 10.1.1.10
Master IP      : 10.1.1.2
Local IP       : 10.1.1.2
PriorityRun    : 100
PriorityConfig : 100
MasterPriority : 100
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1s
TimerConfig    : 1s
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0102
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Create Time       : 2012-04-26 10:04:36
Last Change Time  : 2012-04-26 10:23:37</pre>
<p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1146796006214023"># Run the <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_cmdname947437015214023">undo shutdown</span></b></a> command on GE <span>0/1/1</span> of PE3. The command output shows that GE <span>0/1/1</span> goes Up. Wait 20s and run the <a href="cmdqueryname=display+vrrp"><b><span class="cmdname" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_cmdname222440503214023">display vrrp</span></b></a> command on PE1 and PE2. The command outputs show that the VRRP status of PE1 is <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b12674193633310">Master</strong> and that the VRRP status of PE2 is <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b1882753810330">Backup</strong>.</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen2015499850214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword583865026214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b202276316214023">display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1199265545214023">GigabitEthernet<span>0/1/1</span> | Virtual Router 1
State          : <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b913748510214023">Master</strong>
Virtual IP     : 10.1.1.10
Master IP      : 10.1.1.1
Local IP       : 10.1.1.1
PriorityRun    : 120
PriorityConfig : 120
MasterPriority : 120
Preempt        : YES   Delay Time : 20s
Hold Multiplier: 4
TimerRun       : 1s
TimerConfig    : 1s
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0101
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Track IP Route    : 192.168.1.0/24   Priority Reduced : 40
IP Route State    : <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b100285558214023">Reachable</strong> 
Create Time       : 2012-04-26 10:04:12    
Last Change Time  : 2012-04-26 10:25:22</pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen596708025214023">[<span class="keyword" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_keyword1665968734214023"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b828994992214023">display vrrp</strong></pre>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1136736826214023">GigabitEthernet<span>0/1/1</span> | Virtual Router 1
State          : <strong id="EN-US_TASK_0000001163341710__en-us_task_0172361823_b444836243214023">Backup</strong>
Virtual IP     : 10.1.1.10
Master IP      : 10.1.1.1
Local IP       : 10.1.1.2
PriorityRun    : 100
PriorityConfig : 100
MasterPriority : 120
Preempt        : YES   Delay Time : 0s
Hold Multiplier: 4
TimerRun       : 1s
TimerConfig    : 1s
Auth Type      : NONE
Virtual MAC    : 0000-5e00-0102
Passive Mode      : NO
Check TTL      : YES
Config Type    : normal-vrrp
<span>Backup-forward    : disabled</span>
Create Time       : 2012-04-26 10:04:36
Last Change Time  : 2012-04-26 10:25:22</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_example1416641522214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_example1416641522214023"></a><a name="en-us_task_0172361823_example1416641522214023"></a><a name="EN-US_TASK_0000001163341710__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul id="EN-US_TASK_0000001163341710__en-us_task_0172361823_ul1429520275214023"><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_li170318530214023"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p2095315906214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_li170318530214023"></a><a name="en-us_task_0172361823_li170318530214023"></a>PE1 configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1581480901214023">#
sysname PE1
#
isis 1
 is-level level-1
 network-entity 10.0000.0000.0001.00
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown 
 ip address 10.1.1.1 255.255.255.0
 vrrp vrid 1 virtual-ip 10.1.1.10
 vrrp vrid 1 priority 120
 <span>vrrp vrid 1 preempt-mode timer delay 20</span>
 vrrp recover-delay 20
 <span>vrrp vrid 1 track ip route 192.168.1.0 255.255.255.0 reduced 40</span>
 isis enable 1
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown 
 ip address 192.168.1.1 255.255.255.0
 isis enable 1
#
return</pre>
</li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_li854411488214023"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p2018214974214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_li854411488214023"></a><a name="en-us_task_0172361823_li854411488214023"></a>PE2 configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1454657675214023">#
sysname PE2
#
isis 1
 is-level level-1
 network-entity 20.0000.0000.0001.00
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown 
 ip address 10.1.1.2 255.255.255.0
 vrrp vrid 1 virtual-ip 10.1.1.10
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown 
 ip address 192.168.2.1 255.255.255.0
#
return </pre>
</li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_li819015754214023"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p1975083855214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_li819015754214023"></a><a name="en-us_task_0172361823_li819015754214023"></a>PE3 configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen1468831728214023">#
sysname PE3
#
isis 1
 network-entity 10.0000.0000.0002.00
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown 
 ip address 192.168.1.2 255.255.255.0
 isis enable 1
#
return </pre>
</li><li id="EN-US_TASK_0000001163341710__en-us_task_0172361823_li1061050245214023"><p id="EN-US_TASK_0000001163341710__en-us_task_0172361823_p367263027214023"><a name="EN-US_TASK_0000001163341710__en-us_task_0172361823_li1061050245214023"></a><a name="en-us_task_0172361823_li1061050245214023"></a>CE configuration file</p>
<pre class="screen" id="EN-US_TASK_0000001163341710__en-us_task_0172361823_screen511839721214023">#
sysname CE
#
vlan batch 10
#
vlan 10
 port gigabitethernet <span>0/1/1</span>
 port gigabitethernet <span>0/1/2</span>
#
interface Vlanif10
 ip address 10.1.1.3 255.255.255.0
#
interface GigabitEthernet<span>0/1/1</span>
<span> portswitch</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/2</span>
<span> portswitch</span>
 undo shutdown
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0120.html">Configuration Examples for VRRP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0141.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp_cfg_0154.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>