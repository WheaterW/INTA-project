
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring AIS in EVPN Networking">
<meta name="abstract" content="Configuring AIS prohibits a MEP in an MD of a higher level from sending the same alarm as that sent by a MEP in an MD of a lower level to the NMS.">
<meta name="description" content="Configuring AIS prohibits a MEP in an MD of a higher level from sending the same alarm as that sent by a MEP in an MD of a lower level to the NMS.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011560.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011555.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011557.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,c00376497,z00603461,w00800033,jwx1168690,w00556928,w00437000,eoam-vrp,w00606909,m00390128,l00455378,wwx1270540">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362134">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring AIS in EVPN Networking</title>
</head>
<body><a name="EN-US_TASK_0172362134"></a><a name="EN-US_TASK_0172362134"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring AIS in EVPN Networking</h1>
<div class="taskbody"><p>Configuring AIS prohibits a MEP in an MD of a higher level from sending the same alarm as that sent by a MEP in an MD of a lower level to the NMS.</p>
<div class="context"><a name="EN-US_TASK_0172362134__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">As shown in <a href="#EN-US_TASK_0172362134__fig_dc_vrp_cfg_01154401">Figure 1</a>, the MEPs configured on the access interfaces of CE1 and CE2 reside in level-6 MD1. The MEPs configured on PE1 and PE2 reside in level-3 MD2. When a fault occurs, a MEP in level-3 MD2 first detects the fault and sends an alarm to the NMS. After a certain period, a MEP in level-6 MD1 also detects the fault and sends the same alarm to the NMS. Therefore, the AIS function needs to be configured on the PEs to prohibit the MEP in the MD of a higher level from sending alarms to the NMS.<div class="fignone" id="EN-US_TASK_0172362134__fig_dc_vrp_cfg_01154401"><a name="EN-US_TASK_0172362134__fig_dc_vrp_cfg_01154401"></a><a name="fig_dc_vrp_cfg_01154401"></a><span class="figcap"><b>Figure 1 </b>Configuring AIS in EVPN networking</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_01151603.png" width="NaN" height="NaN"></span><br></div>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362134__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Perform the following steps on a PE:</span><p><ol type="a"><li><p>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></p>
<p>The system view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=cfm+md"><b><span class="cmdname">cfm md</span></b></a> <i><span class="varname">md-name</span></i></p>
<p>The MD view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=ma"><b><span class="cmdname">ma</span></b></a> <i><span class="varname">ma-name</span></i></p>
<p>The MA view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=map"><b><span class="cmdname">map</span></b></a> <strong><span>evpn</span></strong> <strong><span>vpn-instance</span></strong> <i><span class="varname">evpn-instance-name</span></i></p>
<p>The MA is associated with an EVPN instance.</p>
</li><li><p>Run <a href="cmdqueryname=ais+enable"><b><span class="cmdname">ais enable</span></b></a></p>
<p>AIS is enabled for the current MA.</p>
</li><li><p>(Optional) Run <a href="cmdqueryname=ais+link-status"><b><span class="cmdname">ais link-status</span></b></a> <strong><span>interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } AIS is configured to monitor interfaces in the current MA.</p>
</li><li><p>(Optional) Run <a href="cmdqueryname=ais+interval"><b><span class="cmdname">ais interval</span></b></a> <i><span class="varname">{ 1 | 60 }</span></i></p>
<p>The interval at which AIS packets are sent is set.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the range of VLANs to which AIS packets are to be sent is set, setting the interval at which AIS packets are sent to 60s is recommended.</p>
</div></div>
</li><li><p>Run <a href="cmdqueryname=ais+level"><b><span class="cmdname">ais level</span></b></a> <i><span class="varname">level-value</span></i></p>
<p>The level of AIS packets to be sent is set.</p>
</li><li><p>Run <a href="cmdqueryname=ais+vlan"><b><span class="cmdname">ais vlan</span></b></a> { <strong><span>pe-vid</span></strong> <i><span class="varname">pe-vid</span></i> <strong><span>ce-vid</span></strong> { <i><span class="varname">low-ce-vid</span></i> [ <strong><span>to</span></strong> <i><span class="varname">hig-ce-vid</span></i> ] } &amp;&lt;1â10&gt; | <strong><span>vid</span></strong> { <i><span class="varname">low-vid</span></i> [ <strong><span>to</span></strong> <i><span class="varname">high-vid</span></i> ] } &amp;&lt;1â10&gt;} <strong><span>mep</span></strong> <i><span class="varname">mep-id</span></i></p>
<p>The range of VLANs to which AIS packets are to be sent is set.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ol>
</p></li><li><span>Perform the following steps on a CE:</span><p><ol type="a"><li><p>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></p>
<p>The system view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=cfm+md"><b><span class="cmdname">cfm md</span></b></a> <i><span class="varname">md-name</span></i></p>
<p>The MD view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=ma"><b><span class="cmdname">ma</span></b></a> <i><span class="varname">ma-name</span></i></p>
<p>The MA view is displayed.</p>
</li><li><p>Run <a href="cmdqueryname=map+vlan"><b><span class="cmdname">map vlan</span></b></a> <i><span class="varname">vlan-id</span></i></p>
<p>The MA is bound to the current VLAN.</p>
</li><li><p>Run <a href="cmdqueryname=ais+enable"><b><span class="cmdname">ais enable</span></b></a></p>
<p>AIS is enabled for the current MA.</p>
</li><li><p>(Optional) Run <a href="cmdqueryname=ais+suppress-alarm"><b><span class="cmdname">ais suppress-alarm</span></b></a></p>
<p>Alarm suppression is enabled for the current MA.</p>
<p>In an MD nesting scenario, if alarm suppression is enabled for the MD of a high level, a MEP in this MD does not send alarms that a MEP in an MD of a low level has sent to the NMS after receiving an AIS packet.</p>
</li><li><p>(Optional) Run <a href="cmdqueryname=mep+mep-id"><b><span class="cmdname">mep mep-id</span></b></a> <i><span class="varname">mep-id</span></i> <strong><span>alarm ais disable</span></strong></p>
<p>The AIS alarm suppression function is disabled for the current MA.</p>
</li><li><p>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></p>
<p>The configuration is committed.</p>
</li></ol>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172362134__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><div class="p"><ul><li><p>After the configuration is complete, run the <a href="cmdqueryname=display+cfm+ma"><b><span class="cmdname">display cfm ma</span></b></a> command on a PE to check information about MAs.</p>
<p>The command output shows that the <strong>Sending Ais Packet</strong> field is displayed as <strong>Yes</strong>.</p>
</li><li><p>Run the <a href="cmdqueryname=display+cfm+ma"><b><span class="cmdname">display cfm ma</span></b></a> command on a CE to check information about MAs.</p>
<p>The command output shows that the <strong>Suppressing Alarms</strong> field is displayed as <strong>Yes</strong>.</p>
</li></ul>
</div>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011560.html">Configuring Y.1731 Functions in EVPN Networking
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011555.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011557.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>