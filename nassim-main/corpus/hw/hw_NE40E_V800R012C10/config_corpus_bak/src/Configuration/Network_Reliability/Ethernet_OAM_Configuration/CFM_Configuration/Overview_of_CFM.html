
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Overview of CFM">
<meta name="abstract" content="Connectivity fault management (CFM), which provides Ethernet operations, administration, and maintenance (OAM) functions, can monitor network-wide connectivity and locate connectivity faults.">
<meta name="description" content="Connectivity fault management (CFM), which provides Ethernet operations, administration, and maintenance (OAM) functions, can monitor network-wide connectivity and locate connectivity faults.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000004.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0172361921">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Overview of CFM</title>
</head>
<body><a name="EN-US_CONCEPT_0172361921"></a><a name="EN-US_CONCEPT_0172361921"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Overview of CFM</h1>
<div><p>Connectivity fault management (CFM), which provides Ethernet operations, administration, and maintenance (OAM) functions, can monitor network-wide connectivity and locate connectivity faults.</p>
<p>Easy-to-use Ethernet techniques support good bandwidth expansibility on low-cost hardware. With these advantages, Ethernet services and structures have been widely used on enterprise networks, metropolitan area networks (MANs), and wide area networks (WANs). As Ethernet applications become increasingly popular, carriers are eager to use improved Ethernet OAM functions to maintain and operate Ethernets.</p>
<p><a href="#EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000201">Figure 1</a> shows hierarchical Ethernet OAM for different layers of networks.</p>
<div class="fignone" id="EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000201"><a name="EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000201"></a><a name="fig_dc_vrp_cfm_cfg_00000201"></a><span class="figcap"><b>Figure 1 </b>Hierarchical Ethernet OAM</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfm_cfg_00000201.png" width="NaN" height="NaN"></span></div>
<div class="p"><ul><li><p>IEEE 802.3ah (also known as Ethernet in the First Mile, EFM): A link-level OAM mechanism that defines Ethernet physical layer specifications, implements Ethernet OAM for user access, and provides continuity check, fault monitoring, remote fault notification, and remote loopback functions for the link between directly connected devices.</p>
</li><li><p>IEEE 802.1ag (also known as connectivity fault management, CFM): A network-level OAM mechanism that provides Ethernet OAM functions, such as continuity check (CC), loopback (LB), and linktrace (LT). CFM applies to large, end-to-end networks.</p>
</li><li><p>Y.1731: An OAM protocol defined by the International Telecommunication Union-Telecommunication Standardization Sector (ITU-T), which provides fault management and performance monitoring functions in addition to the contents defined in IEEE 802.1ag. Fault management includes alarm indication signal (AIS), remote defect indication (RDI), locked signal (LCK), test signal, maintenance communication channel (MCC), experimental (EXP) OAM, and vendor specific (VSP) OAM. Performance monitoring includes frame loss measurement (LM) and delay measurement (DM).</p>
</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Basic Concepts</h4><ul><li><p>Maintenance domain (MD)</p>
<p>MDs are discrete areas within which connectivity fault detection is enabled. The boundary of an MD is determined by maintenance association end points (MEPs) configured on interfaces. An MD is identified by an MD name.</p>
<p>To help locate faults, MDs are separated into eight levels, which are numbered 0 through 7. A larger value indicates a higher level and a larger coverage area. One MD can be tangential to another MD. Tangential MDs share a single device, which has one interface in each of the MDs. A lower-level MD can be nested in a higher-level MD, but a higher-level MD cannot be nested in a lower-level MD. An MD must be fully nested in another MD, and the two MDs cannot simply overlap.</p>
</li><li><p>Default MD</p>
<p>According to IEEE Standard 802.1ag-2007, each device can be configured with a single default MD with the highest priority. The default MD must have a higher level than all MDs to which MEPs configured on the local device belong. In addition, the default MD must have the same level as a high-level MD. The default MD is used to transmit high-level continuity check messages (CCMs) and create maintenance association intermediate points (MIPs) to send linktrace reply (LTR) messages.</p>
</li><li><p>Maintenance association (MA)</p>
<p>An MA contains a set of maintenance points (MPs) in an MD. Multiple MAs can be configured in a single MD. An MA is uniquely identified by an MD name and an MA name.</p>
<p>An MA serves a specific service<span>, for example, a virtual local area network (VLAN)</span>. An MP in an MA sends packets carrying tags of the specific service and receives packets from other MPs in the same MA.</p>
</li><li><p>MEP</p>
<p>MEPs are located at the edge of an MD and MA. The service type and level of packets sent by a MEP are determined by the MD and MA to which the MEP belongs. The level of a MEP determines its ability to process packets. A MEP sends packets carrying its own level. A MEP can only process packets that are of the same level or a lower level. If it receives a packet of a higher level, the MEP does not process the packet but loops it along the reverse path.</p>
<p>A MEP is configured on an interface. The MEP level is equal to the MD level.</p>
<p>A MEP configured on a CFM-enabled device is called a local MEP. MEPs configured on other devices in the same MA are called remote maintenance association end points (RMEPs).</p>
</li><li><p>MIP</p>
<p>MIPs are located on the link between two MEPs within an MD, which facilitates management. More MIPs result in easier network control and management. Therefore, carriers set up more MIPs for important services than for common services.</p>
</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Basic Functions</h4><p>CC checks the continuity of the link between MEPs. A MEP periodically sends multicast continuity check messages (CCMs) to an RMEP in the same MA. If an RMEP does not receive a CCM within a period of 3.5 times the interval at which CCMs are sent, the RMEP considers the path between itself and the MEP faulty.</p>
</div>
<div class="section"><h4 class="sectiontitle">CFM Association</h4><p>Link detection protocols are used to check the continuity of the link between devices and to detect faults. No single fault detection protocol can detect faults in all links on a complex network. Therefore, a combination of protocols and techniques must be used to detect link faults on such a network.</p>
<p>During this process, CFM monitors link status and network performance. If CFM detects a fault, it instructs the manager (MGR) module to notify its associated detection or application module of the fault. Then, the detection or application module sends an alarm to a network management system (NMS). A network administrator can take measures based on the alarm information displayed on the NMS. This process ensures service continuity and improves network reliability.</p>
<div class="p"><ul><li><p>Association between CFM and a detection module</p>
<p>The MGR module helps associate CFM with other detection modules for fault notification. Currently, <span>CFM</span><span>/BFD</span>/EFM detection module can be associated. <a href="#EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000301">Figure 2</a> shows the associations between CFM and other detection modules.</p>
<div class="fignone" id="EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000301"><a name="EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000301"></a><a name="fig_dc_vrp_cfm_cfg_00000301"></a><span class="figcap"><b>Figure 2 </b>Associations between CFM and other detection modules</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfm_cfg_00000301.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0172361921__tab_dc_vrp_cfm_cfg_00000301">Table 1</a> describes the associations between CFM and other detection modules along the path CE1 -&gt; UPE1 -&gt; PE2 -&gt; PE4 -&gt; PE6 -&gt; PE8.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0172361921__tab_dc_vrp_cfm_cfg_00000301"></a><a name="tab_dc_vrp_cfm_cfg_00000301"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0172361921__tab_dc_vrp_cfm_cfg_00000301" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Associations between CFM and other detection modules</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="23.92239223922392%" id="mcps1.4.7.4.1.1.5.2.4.1.1" liSelected="liSelected"><p>Function Deployment</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="36.543654365436545%" id="mcps1.4.7.4.1.1.5.2.4.1.2" liSelected="liSelected"><p>Issue</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="39.53395339533953%" id="mcps1.4.7.4.1.1.5.2.4.1.3" liSelected="liSelected"><p>Solution</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="23.92239223922392%" headers="mcps1.4.7.4.1.1.5.2.4.1.1 "><p>EFM is deployed to monitor the link between CE1 and UPE1, and CFM is deployed to monitor the link between PE4 and PE8.</p>
</td>
<td class="cellrowborder" valign="top" width="36.543654365436545%" headers="mcps1.4.7.4.1.1.5.2.4.1.2 "><p>Upon detecting a link fault, CFM does not notify CE1 of the fault. As a result, CE1 still forwards user-side traffic along the faulty link.</p>
</td>
<td class="cellrowborder" valign="top" width="39.53395339533953%" headers="mcps1.4.7.4.1.1.5.2.4.1.3 "><div class="p">Associate EFM with CFM.<ul><li><p>If EFM detects a link fault, it instructs the MGR module to notify CFM of the fault.</p>
</li><li><p>If CFM detects a link fault, it instructs the MGR module to notify EFM of the fault.</p>
</li></ul>
This association allows a module to notify an associated module of a fault and to send an alarm to an NMS. The network administrator can analyze the alarm information and take measures to rectify the fault.</div>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="23.92239223922392%" headers="mcps1.4.7.4.1.1.5.2.4.1.1 "><p>CFM is deployed to monitor the links between UPE1 and PE4 and between PE4 and PE8.</p>
</td>
<td class="cellrowborder" valign="top" width="36.543654365436545%" headers="mcps1.4.7.4.1.1.5.2.4.1.2 "><div class="p"><ul><li><p>Upon detecting a fault in the link between PE4 and PE8, CFM does not notify CE1 of the fault. As a result, CE1 continues to forward user-side traffic along the faulty link.</p>
</li><li><p>Upon detecting a fault in the link between UPE1 and PE4, CFM does not notify PE8 of the fault. As a result, PE8 continues to forward network-side traffic along the faulty link.</p>
</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="39.53395339533953%" headers="mcps1.4.7.4.1.1.5.2.4.1.3 "><p>Associate CFM for the links between UPE1 and PE4 and with CFM for the links between PE4 and PE8. If CFM for either of the links detects a fault, it instructs the MGR module to notify the other CFM and sends an alarm to an NMS. The network administrator can analyze the alarm information and take measures to rectify the fault.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="23.92239223922392%" headers="mcps1.4.7.4.1.1.5.2.4.1.1 "><div class="p"><ul><li><p>CFM is deployed to monitor the link between UPE1 and PE4.</p>
</li><li><p>A non-Ethernet link<span>, for example, a packet over SDH/SONET (POS) link</span> exists between PE4 and PE8. BFD is deployed to monitor the link.</p>
</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="36.543654365436545%" headers="mcps1.4.7.4.1.1.5.2.4.1.2 "><div class="p"><ul><li><p>Upon detecting a link fault, CFM does not notify PE8 of the fault. As a result, PE8 continues to forward network-side traffic along the faulty link.</p>
</li><li><p>Upon detecting a link fault, BFD does not notify CE1 of the fault. As a result, CE1 continues to forward user-side traffic along the faulty link.</p>
</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="39.53395339533953%" headers="mcps1.4.7.4.1.1.5.2.4.1.3 "><div class="p">Associate CFM with BFD.<ul><li><p>If CFM detects a link fault, it instructs the MGR module to notify BFD of the fault.</p>
</li><li><p>If BFD detects a link fault, it instructs the MGR module to notify CFM of the fault.</p>
</li></ul>
This association allows a module to notify an associated module of a fault and to send an alarm to an NMS. The network administrator can analyze the alarm information and take measures to rectify the fault.</div>
</td>
</tr>
</tbody>
</table>
</div>
</li><li><p>Association between CFM and an application module</p>
<p>The MGR module helps to associate CFM with application modules to notify fault information between each other. Currently, the Virtual Router Redundancy Protocol (VRRP) application module can be associated.</p>
<p><a href="#EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000302">Figure 3</a> shows the association between CFM and VRRP in scenario 1.<span> <a href="#EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000303">Figure 4</a> shows the association between VRRP and CFM in scenario 2.</span></p>
<div class="fignone" id="EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000302"><a name="EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000302"></a><a name="fig_dc_vrp_cfm_cfg_00000302"></a><span class="figcap"><b>Figure 3 </b>Association between CFM and VRRP in scenario 1</span><br><span><img src="figure/en-us_image_0000001771197560.png" width="NaN" height="NaN"></span></div>
<div class="fignone" id="EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000303"><a name="EN-US_CONCEPT_0172361921__fig_dc_vrp_cfm_cfg_00000303"></a><a name="fig_dc_vrp_cfm_cfg_00000303"></a><span class="figcap"><b>Figure 4 </b>Association between CFM and VRRP in scenario 2</span><br><span><img src="figure/en-us_image_0000001817957481.png" width="NaN" height="NaN"></span></div>
<p><a href="#EN-US_CONCEPT_0172361921__tab_dc_vrp_cfm_cfg_00000302">Table 2</a> describes the association between CFM and VRRP in scenario 1 and scenario 2.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0172361921__tab_dc_vrp_cfm_cfg_00000302"></a><a name="tab_dc_vrp_cfm_cfg_00000302"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0172361921__tab_dc_vrp_cfm_cfg_00000302" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Association between CFM and VRRP</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="31.019999999999996%" id="mcps1.4.7.4.1.2.7.2.4.1.1" liSelected="liSelected"><p>Function Deployment</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="34.35%" id="mcps1.4.7.4.1.2.7.2.4.1.2" liSelected="liSelected"><p>Issue</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="34.63%" id="mcps1.4.7.4.1.2.7.2.4.1.3" liSelected="liSelected"><p>Solution</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="31.019999999999996%" headers="mcps1.4.7.4.1.2.7.2.4.1.1 "><div class="p"><ul><li><p>VRRP is deployed on both NPE1 and NPE2.</p>
</li><li><p>CFM is deployed to monitor the links between NPE1 and PE-AGG1 and between NPE2 and PE-AGG2.</p>
</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="34.35%" headers="mcps1.4.7.4.1.2.7.2.4.1.2 "><p>If the link between NPE1 (master) and PE-AGG1 fails and NPE2 does not receive VRRP Advertisement packets within a period of three times the interval at which VRRP Advertisement packets are sent, NPE2 preempts the Master state. As a result, two master devices coexist in a VRRP group, and duplicates of network-side traffic are transmitted.</p>
</td>
<td class="cellrowborder" valign="top" width="34.63%" headers="mcps1.4.7.4.1.2.7.2.4.1.3 "><p>Associate CFM with VRRP on NPE1 and NPE2. If CFM detects a fault on the link between PE-AGG2 and NPE1, CFM instructs the MGR module to notify VRRP of the fault. Then a master/backup VRRP switchover is performed. NPE1 changes its VRRP status to Initialize, and NPE2 changes its VRRP status from Backup to Master after a period of three times the interval at which VRRP Advertisement packets are sent. This process prevents a VRRP group from having two master devices.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="31.019999999999996%" headers="mcps1.4.7.4.1.2.7.2.4.1.1 "><div class="p"><ul><li><p>VRRP is deployed on both NPE1 and NPE2.</p>
</li><li><p>CFM is deployed to monitor the links between NPE1 and PE-AGG1 and between NPE2 and PE-AGG2.</p>
</li><li><p>Pseudo wire (PW) redundancy is deployed to determine the primary/backup status of PWs.</p>
</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="34.35%" headers="mcps1.4.7.4.1.2.7.2.4.1.2 "><p>If a fault occurs on the IP/Multiprotocol Label Switching (MPLS) core network, the fault triggers a master/backup VRRP switchover but does not trigger a primary/backup PW switchover. As a result, user-side traffic is lost.</p>
</td>
<td class="cellrowborder" valign="top" width="34.63%" headers="mcps1.4.7.4.1.2.7.2.4.1.3 "><div class="p"><ul><li><p>Associate VRRP with CFM on NPE1 and NPE2.</p>
<ul><li><p>When the master/backup status of NPE1 and NPE2 changes, VRRP instructs the MGR module to notify CFM of the status change. Then, CFM notifies PE-AGG1 and PE-AGG2 of the status change.</p>
</li><li><p>PE-AGG1 and PE-AGG2 determine the primary and backup PWs based on the status change.</p>
</li><li><p>Each PE-AGG notifies the UPE of the PW status change.</p>
</li><li><p>After the UPE receives the notification, it determines the primary/backup status of PWs.</p>
</li></ul>
</li></ul>
</div>
<p>When CFM detects a link fault, it triggers master/backup VRRP and primary/backup PW switchovers.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li></ul>
</div>
<p>In addition, when CFM receives a fault notification, CFM can be associated with MAC/ARP clearing to ensure link switchovers.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000001.html">CFM Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000004.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>