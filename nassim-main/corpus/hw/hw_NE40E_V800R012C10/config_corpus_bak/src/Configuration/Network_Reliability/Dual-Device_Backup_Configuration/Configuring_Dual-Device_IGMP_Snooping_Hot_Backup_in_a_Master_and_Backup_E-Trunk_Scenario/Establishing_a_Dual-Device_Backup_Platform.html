
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Establishing a Dual-Device Backup Platform">
<meta name="abstract" content="This section describes how to establish a dual-device backup platform to back up IGMP snooping entries. If a network node or link fails, a rapid Layer 2 multicast service switchover is triggered, improving service reliability.">
<meta name="description" content="This section describes how to establish a dual-device backup platform to back up IGMP snooping entries. If a network node or link fails, a rapid Layer 2 multicast service switchover is triggered, improving service reliability.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_rbs_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_rbs_cfg_0017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00604599">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Dual-Device Backup">
<meta name="featuretype" content="Network Reliability">
<meta name="Solution" content="html_ismerge">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Dual-Device Backup">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Dual-Device Backup">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Dual-Device Backup">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00437000">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362248">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Establishing a Dual-Device Backup Platform</title>
</head>
<body><a name="EN-US_TASK_0172362248"></a><a name="EN-US_TASK_0172362248"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Establishing a Dual-Device Backup Platform</h1>
<div class="taskbody"><p>This section describes how to establish a dual-device backup platform to back up IGMP snooping entries. If a network node or link fails, a rapid Layer 2 multicast service switchover is triggered, improving service reliability.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0172362248__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>An Eth-Trunk interface has been created using the <a href="cmdqueryname=interface+eth-trunk"><b><span class="cmdname">interface eth-trunk</span></b></a> <i><span class="varname">trunk-id</span></i> command, and an Ethernet interface has been added to the Eth-Trunk interface using the <a href="cmdqueryname=eth-trunk"><b><span class="cmdname">eth-trunk</span></b></a> <i><span class="varname">trunk-id</span></i> command.</p>
<p>An E-Trunk has been created using the <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i> command, and the Eth-Trunk interface has been added to the E-Trunk using the <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i> [ <strong><span>remote-eth-trunk</span></strong> <i><span class="varname">eth-trunk-id</span></i> ] command.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362248__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Context</h4><p>In a master/backup E-Trunk scenario, a dual-device backup platform enables the master device to back up IGMP snooping entries to the backup device through a remote backup service (RBS) channel, ensuring multicast service continuity. Establishing a dual-device backup platform includes configuring an RBS, a remote backup profile (RBP), and a dual-device E-Trunk backup platform.</p>
<p>Perform the following steps on both the master and backup devices:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362248__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an RBS.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-service"><b><span class="cmdname">remote-backup-service</span></b></a> <i><span class="varname"><span>remote-backup-</span>service-name</span></i></span><p><p>An RBS is created, and the RBS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-ip-address</span></i> <a href="cmdqueryname=source"><b><span class="cmdname">source</span></b></a> <i><span class="varname">source-ip-address</span></i> <a href="cmdqueryname=port"><b><span class="cmdname">port</span></b></a> <i><span class="varname">port-id</span></i></span><p><p>TCP connection parameters are set for the RBS.</p>
<p>The <i><span class="varname">source-ip-address</span></i> and <i><span class="varname">peer-ip-address</span></i> parameters specify the IP addresses of the local and remote devices, respectively. The IP addresses of the local and remote devices must have been configured on their own interfaces, sub-interfaces, or logical interfaces (such as loopback interfaces) and be able to ping each other.</p>
<p>The <i><span class="varname">port-id</span></i> parameter specifies a TCP port number. The TCP port numbers configured on the local and remote devices must be the same.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure an RBP.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a><i><span class="varname"> profile-name</span></i></span><p><p>An RBP is created, and the RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=backup-id"><b><span class="cmdname">backup-id</span></b></a> <i><span class="varname">backup-id</span></i> <a href="cmdqueryname=remote-backup-service"><b><span class="cmdname">remote-backup-service</span></b></a> <i><span class="varname">service-name</span></i></span><p><p>A user backup ID is configured for the RBP, and the RBP is associated with a specified RBS.</p>
<p>The <i><span class="varname">backup-id</span></i> parameter specifies a user backup ID. You can use a backup ID and an RBS to determine an RBP. The backup IDs configured for the same RBP must be the same on the master and backup devices and can no longer be configured for other RBPs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer-backup"><b><span class="cmdname">peer-backup</span></b></a> <strong><span>hot</span></strong></span><p><p>The backup type of the master device and backup device is set to hot backup mode.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure a dual-device E-Trunk backup platform.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a><i><span class="varname"> profile-name</span></i></span><p><p>The RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i> <strong><span>eth-trunk</span></strong> <i><span class="varname">eth-trunk-id</span></i></span><p><p>The E-Trunk master/backup protocol is configured, and the Eth-Trunk interface is bound to the RBP.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a><i><span class="varname"> e-trunk-id</span></i></span><p><p>The E-Trunk view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer-address"><b><span class="cmdname">peer-address</span></b></a> <i><span class="varname">peer-ip-address</span></i> <strong><span>source-address</span></strong> <i><span class="varname">source-ip-address</span></i></span><p><p>IP addresses are assigned to the local and peer ends of the E-Trunk.</p>
<p>The peer IP address of the local end is the local IP address of the peer end. For example, an E-Trunk is established between device A and device B. On device A, the peer IP address is 2.2.2.2 and the local IP address is 1.1.1.1. Then, on device B, the peer IP address is 1.1.1.1 and the local IP address is 2.2.2.2.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>(Optional) Configure rapid service link switching.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></span><p><p>BFD is globally enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <em>session-name</em> <strong><span>bind</span></strong> <strong><span>peer-ip</span></strong> <i><span class="varname">peer-ip</span></i></span><p><p>A BFD session for detecting the peer end is created.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> <a href="cmdqueryname=local"><b><span class="cmdname">local</span></b></a> <i><span class="varname">discr-value</span></i></span><p><p>The local discriminator is set.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> <a href="cmdqueryname=remote"><b><span class="cmdname">remote</span></b></a> <i><span class="varname">discr-value</span></i></span><p><p>The remote discriminator is set.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <em>sessname-value</em> <strong><span>bind</span></strong> <strong><span>peer-ip</span></strong> <strong><span>default-ip</span></strong> <strong><span>interface</span></strong> {<i><span class="varname"> interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } [<strong><span> source-ip</span></strong> <i><span class="varname">source-ip</span></i> ]</span><p><p>A BFD session for detecting faults on the Eth-Trunk interface is created.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i></span><p><p>The E-Trunk view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk+track+bfd-session"><b><span class="cmdname">e-trunk track bfd-session</span></b></a> <strong><span>session-name</span></strong><strong> </strong><i><span class="varname">bfd-session-name</span></i></span><p><p>The BFD process is bound to the E-Trunk.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_rbs_cfg_0015.html">Configuring Dual-Device IGMP Snooping Hot Backup in a Master/Backup E-Trunk Scenario
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_rbs_cfg_0017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>