
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Bit-Error-Triggered L3VPN Route Switching">
<meta name="abstract" content="This section describes how to configure bit-error-triggered L3VPN route switching when bit-error-triggered RSVP-TE switching fails to remove bit errors.">
<meta name="description" content="This section describes how to configure bit-error-triggered L3VPN route switching when bit-error-triggered RSVP-TE switching fails to remove bit errors.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000012.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_evpn_0001.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128,q00824768,z00545680">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00604599">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362278">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Bit-Error-Triggered L3VPN Route Switching</title>
</head>
<body><a name="EN-US_TASK_0172362278"></a><a name="EN-US_TASK_0172362278"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Bit-Error-Triggered L3VPN Route Switching</h1>
<div class="taskbody"><p>This section describes how to configure bit-error-triggered L3VPN route switching when bit-error-triggered RSVP-TE switching fails to remove bit errors.</p>
<div class="context"><a name="EN-US_TASK_0172362278__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In an H-VPN scenario in which an RSVP-TE tunnel with TE hot standby protection carries services and VPN FRR is configured, you can configure bit-error-triggered L3VPN route switching in addition to bit-error-triggered RSVP-TE tunnel switching. If the primary and backup constraint-based routed label switched paths (CR-LSPs) of the RSVP-TE tunnel are both in the excessive bit error rate (BER) state or the TE hot standby tunnel fails and bit-error-triggered RSVP-TE tunnel switching cannot protect services against bit errors, bit-error-triggered L3VPN route switching can do so.</p>
<p><a href="#EN-US_TASK_0172362278__fig_dc_vrp_cfg_error-code_00001301">Figure 1</a> shows an H-VPN scenario where an RSVP-TE tunnel with TE hot standby protection configured carries L3VPN services. VPN FRR is configured on the user-end provider edge (UPE). If the primary and backup CR-LSPs of the RSVP-TE tunnel are both in the excessive BER state or the TE hot-standby tunnel fails, bit-error-triggered RSVP-TE tunnel switching cannot protect traffic against bit errors. To resolve this problem, configure bit-error-triggered L3VPN route switching on the UPE and SPE1. Bit-error-triggered L3VPN route switching triggers VPN route convergence in the case of a bit error event, diverting traffic from the link that has encountered the bit error event.</p>
<div class="fignone" id="EN-US_TASK_0172362278__fig_dc_vrp_cfg_error-code_00001301"><a name="EN-US_TASK_0172362278__fig_dc_vrp_cfg_error-code_00001301"></a><a name="fig_dc_vrp_cfg_error-code_00001301"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for bit-error-triggered L3VPN route switching</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_error-code_00001301.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362278__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring bit-error-triggered L3VPN route switching, complete the following tasks:</p>
<ul><li><a href="dc_vrp_mpls-l3vpn-v4_cfg_2017.html">Configure VPN FRR.</a></li><li><a href="dc_vrp_cfg_error-code_000007.html">Configure bit-error-triggered RSVP-TE tunnel switching.</a></li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172362278__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure the UPE to reroute traffic when a bit error event occurs. </span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+vpn-instance"><b><span class="cmdname">ipv4-family vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span><p><p>The BGP-VPN instance IPv4 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bestroute+bit-error-detection"><b><span class="cmdname">bestroute bit-error-detection</span></b></a></span><p><p>The function is enabled to reroute traffic when a bit error event occurs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure SPE1 to adjust the local preference or Multi-Exit Discriminator (MED) values of the VPN routes that it advertises to the network provider edge (NPE) when a bit error event occurs.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv4-family+vpnv4"><b><span class="cmdname">ipv4-family vpnv4</span></b></a></span><p><p>The BGP-VPNv4 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nexthop+recursive-lookup+bit-error-detection"><b><span class="cmdname">nexthop recursive-lookup bit-error-detection</span></b></a> { <strong><span>med</span></strong> + <i><span class="varname">med-adjust-value</span></i> | <strong><span>local-preference</span></strong> - <i><span class="varname">localpref-adjust-value</span></i> }<sup> *</sup> [ <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i> ]</span><p><p>Bit error events are associated with the adjustment of VPN route local preference or MED values.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>After you configure the association between bit error events and the adjustment of VPN route local preference or MED values, the local preference or MED value of a route changes if the tunnel to which the route is recursed encounters a bit error event. However, only routes meeting the routing policy can be advertised with adjusted local preference or MED values. Pay special attention to routing policy configuration when configuring the association between bit error events and the adjustment of VPN route local preference or MED values. If the routing policy is not appropriately configured, routes may fail to be advertised after having their local preference or MED values changed. To ignore the command configuration when applying the routing policy, run the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> {<em> </em><i><span class="varname">peerIpv4Addr</span></i> | <em><i><span class="varname">peerGroupName</span></i> </em>} <strong><span>route-filter</span></strong> <i><span class="varname">route-filter-name</span></i><strong> </strong><strong><span>export</span></strong><strong> </strong><strong><span>ignore-bit-error</span></strong> or <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> {<em> </em><i><span class="varname">peerIpv4Addr</span></i> | <em><i><span class="varname">peerGroupName</span></i> </em>} <strong><span>route-policy</span></strong> <i><span class="varname">route-policy-name</span></i><strong> </strong><strong><span>export</span></strong><strong> </strong><strong><span>ignore-bit-error</span></strong> command.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000001.html">Bit-Error-Triggered Protection Switching Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000012.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_evpn_0001.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>