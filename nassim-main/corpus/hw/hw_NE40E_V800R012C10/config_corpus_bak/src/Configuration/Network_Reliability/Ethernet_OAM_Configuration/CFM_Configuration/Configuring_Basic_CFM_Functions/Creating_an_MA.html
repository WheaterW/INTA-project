
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Creating an MA">
<meta name="abstract" content="An MD can include one or multiple MAs. The Ethernet CFM checks the connectivity for each MA.">
<meta name="description" content="An MD can include one or multiple MAs. The Ethernet CFM checks the connectivity for each MA.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000028.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,c00376497,z00603461,w00800033,jwx1168690,w00556928,w00437000,eoam-vrp,w00606909,m00390128,l00455378,wwx1270540">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361941">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Creating an MA</title>
</head>
<body><a name="EN-US_TASK_0172361941"></a><a name="EN-US_TASK_0172361941"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Creating an MA</h1>
<div class="taskbody"><p>An MD can include one or multiple MAs. The Ethernet CFM checks the connectivity for each MA.</p>
<div class="context"><a name="EN-US_TASK_0172361941__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Connectivity fault management (CFM) can detect <span>direct or </span>end-to-end link faults. As shown in <a href="#EN-US_TASK_0172361941__fig_dc_vrp_cfm_cfg_00000801">Figure 1</a>, CFM is deployed to monitor the link between the CE and PE3. PE3 is a Layer 2 device or a device that connects a Layer 2 network to a Layer 3 network.</p>
<div class="fignone" id="EN-US_TASK_0172361941__fig_dc_vrp_cfm_cfg_00000801"><a name="EN-US_TASK_0172361941__fig_dc_vrp_cfm_cfg_00000801"></a><a name="fig_dc_vrp_cfm_cfg_00000801"></a><span class="figcap"><b>Figure 1 </b>MA deployment in an MD</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfm_cfg_00000801.png" width="NaN" height="NaN"></span></div>
<p>To deploy CFM to detect link faults, create an MD to determine a detected range, create MAs for the MD, and map the MAs to service instances. You can configure multiple MAs in an MD. For example, MD1 is deployed on the network between the CE and PE3. You can create MA1 and MA2 in MD1 based on service types. An MA corresponds to a service instance and serves the service instance. The service types of the service instance include VLAN<span>, VSI,</span> and VLL.</p>
<p><a href="#EN-US_TASK_0172361941__table506062230214024">Table 1</a> describes the rules for the association between MAs and service instances in different networking scenarios.</p>

<div class="tableBorder"><a name="EN-US_TASK_0172361941__table506062230214024"></a><a name="table506062230214024"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172361941__table506062230214024" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Rules for the association between MAs and service instances in different networking scenarios</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="16.5%" id="mcps1.4.1.5.2.3.1.1" liSelected="liSelected"><p>Networking Scenario</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="83.5%" id="mcps1.4.1.5.2.3.1.2" liSelected="liSelected"><p>Rule</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="16.5%" headers="mcps1.4.1.5.2.3.1.1 "><p>Direct link</p>
</td>
<td class="cellrowborder" valign="top" width="83.5%" headers="mcps1.4.1.5.2.3.1.2 "><p>An MA (for example, MA1) is deployed on a direct link and both interfaces of the link are Layer 2 interfaces. <span>The MA does not need to be associated with a service instance.</span></p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="16.5%" headers="mcps1.4.1.5.2.3.1.1 "><p>End-to-end link</p>
</td>
<td class="cellrowborder" valign="top" width="83.5%" headers="mcps1.4.1.5.2.3.1.2 "><p>When an MA (for example, MA2 in the figure above) is deployed on an end-to-end network, the MA needs to be mapped to a service instance. An MA can be mapped to a service instance directly or indirectly. As shown in <a href="#EN-US_TASK_0172361941__fig_dc_vrp_cfm_cfg_00000801">Figure 1</a>:</p>
<div class="p"><ul><li><p>For all devices on the <span>VLAN, </span><span>VPLS, or </span>VLL Layer 2 network, an MA is directly mapped to a service instance.</p>
</li><li><p>For PE3, which connects a Layer 2 network to a Layer 3 network, an MA is indirectly mapped to a service instance.</p>
</li></ul>
</div>
<p>After an MA is mapped to a service instance, a maintenance point (MP) in the MA sends packets carrying the service instance's tag and receives packets from other MPs in the MA.</p>
<p>This section describes how to directly map an MA to a service instance. For details about how to indirectly map an MA to a service instance, see Creating MEPs.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361941__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=cfm+md"><b><span class="cmdname">cfm md</span></b></a> <i><span class="varname">md-name</span></i></span><p><p>The MD view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ma"><b><span class="cmdname">ma</span></b></a> <i><span class="varname">ma-name</span></i> [ <strong><span>format</span></strong> { <strong><span>icc-based</span></strong> <i><span class="varname">iccbased-ma-format-name</span></i> | <strong><span>string</span></strong> <i><span class="varname">ma-format-name</span></i> } ]</span><p><p>An MA is created, and the MA view is displayed.</p>
</p><p><p>ITU-T Y.1731 defines ITU carrier code (ICC)-based continuity check messages (CCMs), which have similar formats to CCMs defined by IEEE 802.1ag. The meanings of some fields in an ICC-based CCM are different from those in a CCM defined by IEEE 802.1ag. To implement compatibility with ICC-based CCMs, specify the <i><span class="varname">iccbased-ma-format-name</span></i> parameter in this command.</p>
</p></li><li><span>Configure the MA according to networking environments and service types.</span><p>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 2 </b>MA configurations in different networking environments</caption><thead align="left"><tr><th align="left" class="cellrowborder" colspan="2" valign="top" id="mcps1.4.2.4.2.1.2.4.1.1" liSelected="liSelected"><p>Networking Environment</p>
</th>
<th align="left" class="cellrowborder" valign="top" id="mcps1.4.2.4.2.1.2.4.1.2" liSelected="liSelected"><p>Configuration Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.1 "><p>Direct link with Layer 2 interfaces configured at both ends</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.2 "><p>The MA does not need to be mapped to a service instance.</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="17.16%" headers="mcps1.4.2.4.2.1.2.4.1.1 "><p>End-to-end link in VLAN scenarios</p>
</td>
<td class="cellrowborder" valign="top" width="18.05%" headers="mcps1.4.2.4.2.1.2.4.1.1 "><p>The MA is created on a Layer 2 device.</p>
</td>
<td class="cellrowborder" valign="top" width="64.79%" headers="mcps1.4.2.4.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=map"><b><span class="cmdname">map</span></b></a> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> command to map the MA to a specified VLAN.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.1 "><p>The MA is created on a device that connects a Layer 2 network to a Layer 3 network.</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.2 "><p>Specify a VLAN during MEP creation to map the MA to the VLAN. For details, see <a href="dc_vrp_cfm_cfg_000009.html">Creating MEPs</a>.</p>
</td>
</tr>
<tr><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.1 "><p>End-to-end link in LDP VLL scenarios</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=map"><b><span class="cmdname">map</span></b></a> <strong><span>mpls l2vc</span></strong> <i><span class="varname">l2vc-id</span></i> { <strong><span>tagged</span></strong> | <strong><span>raw</span></strong> } command on each Layer 2 device to associate the MA with a specified VLL.</p>
</td>
</tr>
<tr><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.1 "><p>End-to-end link in BGP VLL scenarios</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=map"><b><span class="cmdname">map</span></b></a> <strong><span>mpls l2vpn</span></strong> <i><span class="varname">l2vpn-name</span></i> <strong><span>ce</span></strong> <i><span class="varname">ce-id</span></i> <strong><span>ce-offset</span></strong> <i><span class="varname">ce-offset-id</span></i> command on each Layer 2 device to associate the MA with a specified VLL.</p>
</td>
</tr>
<tr><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.1 "><p>End-to-end link in VPLS scenarios</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=map"><b><span class="cmdname">map</span></b></a> <strong><span>vsi</span></strong> <i><span class="varname">vsi-name</span></i> command on each Layer 2 device to map the MA to a specified virtual switching instance (VSI).</p>
</td>
</tr>
<tr><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.1 "><p>End-to-end link in CCC scenarios</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=map"><b><span class="cmdname">map</span></b></a> <strong><span>ccc</span></strong> <i><span class="varname">ccc-connection-name</span></i> command on each Layer 2 device to associate the MA with a specified CCC.</p>
</td>
</tr>
<tr><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.1 "><p>End-to-end link in EVPN scenarios</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=map"><b><span class="cmdname">map</span></b></a> <strong><span>evpn vpn-instance</span></strong> <i><span class="varname">evpn-instance-name</span></i> command on each Layer 2 device to associate the MA with a specified EVPN instance.</p>
</td>
</tr>
<tr><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.1 "><p>End-to-end link in BD scenarios</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.2.4.2.1.2.4.1.2 "><p>Run the <a href="cmdqueryname=map"><b><span class="cmdname">map</span></b></a> <strong><span>bridge-domain</span></strong> <i><span class="varname">bd-id</span></i> command on each Layer 2 device to associate the MA with a specified bridge domain.</p>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000004.html">Configuring Basic CFM Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000028.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000009.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>