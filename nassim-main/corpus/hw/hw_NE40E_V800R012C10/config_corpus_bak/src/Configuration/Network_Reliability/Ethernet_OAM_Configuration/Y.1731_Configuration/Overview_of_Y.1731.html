
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Overview of Y.1731">
<meta name="abstract" content="Y.1731 is an OAM protocol defined by the ITU-T. It is used to implement end-to-end connectivity detection, loopback detection, and link trace Metro Ethernets (MEs). It also provides the test diagnosis and performance monitoring functions such as frame loss measurement, frame delay measurement, frame jitter measurement, and throughput measurement.">
<meta name="description" content="Y.1731 is an OAM protocol defined by the ITU-T. It is used to implement end-to-end connectivity detection, loopback detection, and link trace Metro Ethernets (MEs). It also provides the test diagnosis and performance monitoring functions such as frame loss measurement, frame delay measurement, frame jitter measurement, and throughput measurement.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011510.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011513.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,c00376497,z00603461,w00800033,jwx1168690,w00556928,w00437000,eoam-vrp,w00606909,m00390128,l00455378,wwx1270540">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0172362041">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Overview of Y.1731</title>
</head>
<body><a name="EN-US_CONCEPT_0172362041"></a><a name="EN-US_CONCEPT_0172362041"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Overview of Y.1731</h1>
<div><p>Y.1731 is an OAM protocol defined by the ITU-T. It is used to implement end-to-end connectivity detection, loopback detection, and link trace Metro Ethernets (MEs). It also provides the test diagnosis and performance monitoring functions such as frame loss measurement, frame delay measurement, frame jitter measurement, and throughput measurement.</p>
<div class="section"><h4 class="sectiontitle">Background</h4><p>Originally, Ethernet was mainly used in local area networks (LANs), and had a poor OAM capability. In addition, Ethernet supports only the network element-level management system that cannot meet network management requirements of most network operators. After Ethernet is widely used in MANs, the requirement on OAM becomes increasingly high.</p>
<p>Hierarchical Ethernet OAM needs to be provided based on the network architecture, as shown in <a href="#EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151101">Figure 1</a>.</p>
<div class="fignone" id="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151101"><a name="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151101"></a><a name="fig_dc_vrp_cfg_01151101"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for Ethernet OAM</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_01151101.png" width="NaN" height="NaN"></span></div>
<div class="p"><ul><li><p>802.3ah, also known as Ethernet in the First Mile (EFM), is used to monitor first-mile link connectivity. It is a type of link-level OAM technology. EFM provides link connectivity detection, link fault monitoring, remote fault notification, and remote loopback for two directly connected devices.</p>
</li><li><p>IEEE 802.1ag, also known as Connectivity Fault Management (CFM), defines OAM functions, such as continuity check (CC), link trace (LT) and loopback (LB), for Ethernet networks. CFM is network-level OAM and is applicable to large-scale end-to-end networking.</p>
</li><li><p>Y.1731 is an OAM protocol defined by the ITU-T. It covers the contents defined by IEEE 802.1ag and other OAM functions, including the alarm indication signal (AIS), remote defect indication (RDI), locked signal (LCK), Test Signal, maintenance communication channel (MCC), experimental OAM (EXP), and vendor specific OAM (VSP) for fault management and frame loss measurement (LM) and delay measurement (DM) for performance monitoring.</p>
</li></ul>
</div>
<p>As shown in <a href="#EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151101">Figure 1</a>, Y.1731 is used to implement fast fault detection and performance monitoring for end-to-end services. When a user considers that the quality of purchased Ethernet tunnel services deteriorates or when an operator needs to conduct regular Service level agreement (SLA) monitoring.</p>
</div>
<div class="section"><h4 class="sectiontitle">Basic Concepts and Principles</h4><ul><li><p>Single-ended frame loss measurement</p>
<div class="p">Frame loss measurement is performed by sending packets with ETH-LM information to a remote maintenance association end point (MEP) and receiving packets with ETH-LM information from the remote MEP. As shown in <a href="#EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151102">Figure 2</a>, the process of single-ended frame loss measurement is as follows:<ol><li><p>The local MEP sends an ETH-LMM (a packet containing ETH-LM request information) to the remote MEP. The ETH-LMM carries a transmit counter indicating the time at which the packet is sent by the local end.</p>
</li><li><p>After receiving the ETH-LMM, the remote MEP replies with an ETH-LMR (a packet containing ETH-LM response information).</p>
</li><li><p>After receiving the ETH-LMR, the local MEP obtains corresponding measurement information based on message contents and calculates the frame loss ratio.</p>
</li></ol>
<div class="fignone" id="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151102"><a name="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151102"></a><a name="fig_dc_vrp_cfg_01151102"></a><span class="figcap"><b>Figure 2 </b>Networking diagram for single-ended frame loss measurement</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_01151102.png" width="NaN" height="NaN"></span><br></div>
</div>
</li><li><p>Dual-ended frame loss measurement</p>
<div class="p">Frame loss measurement is performed by sending packets with ETH-LM information to a remote MEP and receiving packets with ETH-LM information from the remote MEP. As shown in <a href="#EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151103">Figure 3</a>, the process of dual-ended frame loss measurement is as follows:<ol><li><p>Each MEP sends a packet containing ETH-LM request information to remote MEPs. Here, the packet containing ETH-LM request information is called a continuity check message (CCM).</p>
</li><li><p>Each MEP processes the received CCMs and measures the number of packets lost on both the local and remote ends.</p>
</li><li><p>Each MEP obtains corresponding measurement information based on contents in the CCMs and calculates frame loss ratios.</p>
</li></ol>
<div class="fignone" id="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151103"><a name="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151103"></a><a name="fig_dc_vrp_cfg_01151103"></a><span class="figcap"><b>Figure 3 </b>Networking diagram for dual-ended frame loss measurement</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_01151103.png" width="NaN" height="NaN"></span><br></div>
</div>
</li><li><p>One-way frame delay measurement</p>
<div class="p">One-way frame delay measurement is performed between end-to-end MEPs by sending and receiving 1DM packets. As shown in <a href="#EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151104">Figure 4</a>, the process of one-way frame delay measurement is as follows:<ol><li><p>A MEP periodically sends 1DM packets carrying TxTimeStampf.</p>
</li><li><p>After receiving a 1DM packet, the remote MEP compares the TxTimeStampf with the RxTimef that is the time at the reception of the packet, and then calculates the one-way frame delay by using the following formula:</p>
<p> Frame delay = RxTimef - TxTimeStampf</p>
</li></ol>
<div class="fignone" id="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151104"><a name="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151104"></a><a name="fig_dc_vrp_cfg_01151104"></a><span class="figcap"><b>Figure 4 </b>Networking diagram for one-way frame delay measurement</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_01151104.png" width="NaN" height="NaN"></span><br></div>
</div>
</li><li><p>Two-way frame delay measurement</p>
<div class="p">Two-way frame delay measurement is performed between end-to-end MEPs by sending and receiving delay measurement messages (DMMs) and delay measurement replies (DMRs). As shown in <a href="#EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151105">Figure 5</a>, the process of two-way frame delay measurement is as follows:<ol><li><p>A MEP periodically sends DMMs carrying TxTimeStampf.</p>
</li><li><p>After receiving a DMM, the remote MEP adds the RxTimeStampf value (the time of receiving the DMM) to the DMM, generates a DMR with the TxTimeStampb value (the time of sending the DMR), and sends the packet to the requesting MEP. Every field in the DMM is copied to the DMR, except that the source and destination MAC addresses are swapped and the message type is changed from DMM to DMR.</p>
</li><li><p>Upon receiving the DMR packet, the requesting MEP calculates the two-way frame delay based on the following formula: The formula is as follows:</p>
<p>Frame delay = (RxTimeb - TxTimeStampf) - (TxTimeStampb - RxTimeStampf)</p>
</li></ol>
</div>
<div class="fignone" id="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151105"><a name="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151105"></a><a name="fig_dc_vrp_cfg_01151105"></a><span class="figcap"><b>Figure 5 </b>Networking diagram for two-way frame delay measurement</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_01151105.png" width="NaN" height="NaN"></span></div>
</li><li><p>Ethernet test signal test</p>
<p>The ETH-Test functions are provided to test unidirectional on-demand services or diagnose service interruptions of on-demand services. ETH-Test functions include throughput tests, frame loss ratio tests, and bit error tests.</p>
<ul><li><p>Maximum bandwidth: Test packets are sent at a specified speed. After a specified period of time, a node collects the number of sent packets and the number of received packets. If the number of sent packets is greater than the number of received packets, packets were discarded. Then test packets are sent at a smaller speed. After a specified period of time, a node collects the number of sent packets and the number of received packets. This process repeats until no packets are discarded. The transmission rate at which test packets are transmitted without being discarded is the throughput for the link.</p>
<p>Code errors: Test packets carry the CRC code in the Test TLV field. One of the following codes can be specified for test packets:</p>
<ul><li>Null signal without CRC-32: Packets carrying all 0s</li><li>Null signal with CRC-32</li><li><span>PRBS 2-31â1 without CRC-32 (Pseudo Random Binary Sequence (PRBS) is used to simulate a white noise scenario) and PRBS 2-31â1 with CRC-32</span></li></ul>
<p>A node sends ETH-test packets carrying calculated CRC code to its peer node. Upon receipt, the peer node re-calculates a CRC code. If the received CRC code is the same as the calculated CRC code, no code error occurs. If the two codes are different, a code error occurs.</p>
</li></ul>
</li><li><p>Ethernet test signal test (ETH-LCK)</p>
<p>The ETH-LCK function performs administrative locks (mainly involving alarm suppression) on outer MEPs within higher-level MDs. This function enables outer MEPs to distinguish inner MD fault-triggered alarm suppression (AIS) and inner MD administrative lock-triggered alarm suppression (LCK).</p>
<div class="fignone" id="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151108"><a name="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151108"></a><a name="fig_dc_vrp_cfg_01151108"></a><span class="figcap"><b>Figure 6 </b>ETH-LCK schematic diagram</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_01151108.png" width="NaN" height="NaN"></span></div>
<p>In <a href="#EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151108">Figure 6</a>, MD2 with level 3 is configured on PE1 and PE2. MD1 with level 6 is configured on CE1 and CE2. After MEP1 on PE1 initiates an offline ETH-test instance to MEP2 on PE2, MEP1 also sends an ETH-LCK packet to MEP11 on CE1 and MEP22 on CE2 to suppress alarms on MEP11 and MEP22. After the offline ETH-Test instance ends on MEP1, MEP1 stops sending ETH-LCK packets. After MEP11 and MEP22 do not receive ETH-LCK packets within a period of time 3.5 times as long as the interval at which ETH-LCK packets are sent, MEP11 and MEP22 stop alarm suppression.</p>
</li><li><p>Single-ended synthetic loss measurement (SLM)</p>
<p>SLM measures frame loss using synthetic packets instead of data traffic. When implementing SLM, the local MEP exchanges packets containing ETH-SLM information with one or more RMEPs.</p>
<p><a href="#EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151109">Figure 7</a> demonstrates the process of single-ended SLM:</p>
<ul><li>The local MEP sends packets with the ETH-SLM request information to the RMEPs.</li><li>After receiving the packets with the ETH-SLM request information, the RMEPs send packets with the ETH-SLM reply information to the local MEP.</li></ul>
<div class="fignone" id="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151109"><a name="EN-US_CONCEPT_0172362041__fig_dc_vrp_cfg_01151109"></a><a name="fig_dc_vrp_cfg_01151109"></a><span class="figcap"><b>Figure 7 </b>Networking diagram for single-ended SLM</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_01151109.png" width="NaN" height="NaN"></span></div>
</li><li><p>ETH-BN</p>
<p>Ethernet bandwidth notification (ETH-BN) enables server-layer MEPs to notify client-layer MEPs of the server layer's connection bandwidth when routing devices connect to microwave devices. The server-layer devices are microwave devices, which dynamically adjust the bandwidth according to the prevailing atmospheric conditions. The client-layer devices are routing devices. Routing devices can only function as ETH-BN packets' receive ends and must work with microwave devices to implement this function.</p>
<div class="p">As shown in <a href="#EN-US_CONCEPT_0172362041__fig_dc_vrp_feature_new_eoam_00001720">Figure 8</a>, server-layer MEPs are configured on the server-layer devices, and the ETH-BN sending function is enabled. The levels of client-layer MEPs must be specified for the server-layer MEPs when the ETH-BN sending function is enabled. Client-layer MEPs are configured on the client-layer devices, and the ETH-BN receiving function is enabled. The levels of the client-layer MEPs are the same as those specified for the server-layer MEPs.<ul><li><p>If the ETH-BN function has been enabled on the server-layer devices Device2 and Device3 and the bandwidth of the server-layer devices' microwave links decreases, the server-layer devices send ETH-BN packets to the client-layer devices (Device1 and Device4). After receiving the ETH-BN packets, the client-layer MEPs can use bandwidth information in the packets to adjust service policies, for example, to reduce the rate of traffic sent to the degraded links.</p>
</li><li><p>When the server-layer devices' microwave links work properly, whether to send ETH-BN packets is determined by the configuration of the server-layer devices. When the server-layer microwave devices stop sending ETH-BN packets, the client-layer devices do not receive any ETH-BN packets. The ETH-BN data on the client-layer devices is aged after 3.5 times the interval at which ETH-BN packets are sent.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When planning ETH-BN, you must check that the service burst traffic is consistent with a device's buffer capability.</p>
</div></div>
</div>
<div class="fignone" id="EN-US_CONCEPT_0172362041__fig_dc_vrp_feature_new_eoam_00001720"><a name="EN-US_CONCEPT_0172362041__fig_dc_vrp_feature_new_eoam_00001720"></a><a name="fig_dc_vrp_feature_new_eoam_00001720"></a><span class="figcap"><b>Figure 8 </b>Fundamentals of ETH-BN</span><br><span><img class="vsd" src="figure/en-us_image_0000001292848966.png" width="NaN" height="NaN"></span><br></div>
<p></p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011510.html">Y.1731 Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011513.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>