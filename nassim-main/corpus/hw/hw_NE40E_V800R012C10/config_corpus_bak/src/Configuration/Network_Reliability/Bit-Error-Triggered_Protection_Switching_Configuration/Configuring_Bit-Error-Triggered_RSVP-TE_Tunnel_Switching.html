
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Bit-Error-Triggered RSVP-TE Tunnel Switching">
<meta name="abstract" content="This section describes how to configure bit-error-triggered Resource Reservation Protocol-Traffic Engineering (RSVP-TE) tunnel switching.">
<meta name="description" content="This section describes how to configure bit-error-triggered Resource Reservation Protocol-Traffic Engineering (RSVP-TE) tunnel switching.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000012.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128,q00824768,z00545680">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362276">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Bit-Error-Triggered RSVP-TE Tunnel Switching</title>
</head>
<body><a name="EN-US_TASK_0172362276"></a><a name="EN-US_TASK_0172362276"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Bit-Error-Triggered RSVP-TE Tunnel Switching</h1>
<div class="taskbody"><p>This section describes how to configure bit-error-triggered Resource Reservation Protocol-Traffic Engineering (RSVP-TE) tunnel switching.</p>
<div class="context"><a name="EN-US_TASK_0172362276__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Bit errors caused by optical fiber aging or optical signal jitter may exist on carrier networks. These bit errors may result in the interruption of services with high quality requirements. If a network uses an RSVP-TE tunnel with traffic engineering (TE) hot standby protection to carry services, you can configure bit-error-triggered RSVP-TE tunnel switching to protect services against bit errors.</p>
<p>Then, if a bit error event occurs on a link along the TE tunnel, TE hot-standby switching is triggered to minimize the impact of the bit error event on services.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362276__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring bit-error-triggered RSVP-TE tunnel switching, complete the following tasks:</p>
<ul><li><p>Configure two unidirectional RSVP-TE tunnels in opposite directions.</p>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>Before establishing a unidirectional RSVP-TE tunnel, you must run the <a href="cmdqueryname=label+advertise"><b><span class="cmdname">label advertise</span></b></a> <strong><span>non-null</span></strong> command to enable the egress of the unidirectional tunnel to allocate a non-null label to the penultimate hop. Otherwise, bit-error-triggered RSVP-TE tunnel switching cannot take effect.</p>
</div></div>
</li><li><p>Configure CR-LSP hot standby for the forward and reverse RSVP-TE tunnels. For configuration details, see <a href="dc_vrp_te-p2p_cfg_0057.html">Configuring CR-LSP Backup</a>.</p>
</li><li><p>Enable Bidirectional Forwarding Detection (BFD) globally on the nodes along the primary and backup CR-LSPs of each unidirectional RSVP-TE tunnel.</p>
</li><li><p><a href="dc_vrp_te-p2p_cfg_0121.html">Configure static BFD for CR-LSP</a> or <a href="dc_vrp_te-p2p_cfg_0144.html">dynamic BFD for CR-LSP</a>.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362276__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enabling Bit Error Detection on Interfaces Along the RSVP-TE Tunnel</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The view of the interface along the TE tunnel is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=trap-threshold+crc-error+packet-error-ratio"><b><span class="cmdname">trap-threshold crc-error packet-error-ratio</span></b></a></span> <strong><span>alarm-threshold</span></strong> <i><span class="varname">coef-value pow-value</span></i> [ <strong><span>resume-threshold</span></strong> <i><span class="varname">rsm-coef-value rsm-pow-value</span></i> ] <strong><span>trigger-lsp</span></strong></span><p><p>Bit error detection is enabled on the interface, and the BER threshold for triggering the bit error alarm is set.</p>
</p><p><p>To associate bit error alarm with RSVP-TE tunnel switching, specify <strong><span>trigger-lsp</span></strong>.</p>
<p>The <strong><span>alarm-threshold</span></strong> value equals <i><span class="varname">alarm-coe</span></i> multiplied by 10<sup>-<i><span class="varname">alarm-pow</span></i></sup>. If the BER detected by a trunk member interface exceeds the <strong><span>alarm-threshold</span></strong> value, the trunk member interface reports an alarm indicating that a bit error event has occurred.</p>
<p>The <strong><span>resume-threshold</span></strong> value equals <i><span class="varname">resume-coe</span></i> multiplied by 10<sup>-<i><span class="varname">resume-pow</span></i></sup>. If the BER detected by a trunk member interface falls below the <strong><span>resume-threshold</span></strong> value, the trunk member interface reports an alarm indicating that the bit error event is over.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>The <strong><span>resume-threshold</span></strong> value cannot be greater than the <strong><span>alarm-threshold</span></strong> value.</p>
</li><li><p>If you do not specify the <strong><span>resume-threshold</span></strong> value, the system automatically uses tenth of the <strong><span>alarm-threshold</span></strong> value as the <strong><span>resume-threshold</span></strong> value.</p>
</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Enabling Bit-Error-Triggered RSVP-TE Tunnel Switching</span><ol type="a"><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Enable bit error detection compatibility globally.</span><p><ol class="substepthirdol"><li>Run the <a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a> command to enter the MPLS view.</li><li>Run the <a href="cmdqueryname=mpls+te"><b><span class="cmdname">mpls te</span></b></a> command to enable MPLS TE.</li><li>Run the <a href="cmdqueryname=mpls+rsvp-te"><b><span class="cmdname">mpls rsvp-te</span></b></a> command to enable RSVP-TE.</li><li>Run the <a href="cmdqueryname=mpls+rsvp-te+bit-error-detection+compatible"><b><span class="cmdname">mpls rsvp-te bit-error-detection compatible</span></b></a> command to enable bit error detection compatibility globally. In a scenario where a Huawei device communicates with a non-Huawei device and bit error detection is enabled for the RSVP-TE tunnels, if the non-Huawei device incorrectly parses the non-standard vendor private object in the Path message, the LSPs cannot be established. To enable bit error detection compatibility, run this command. In this case, the Path message sent by the Huawei device carries the vendor private object defined in the standard to ensure that the Huawei device can communicate with non-Huawei devices properly.</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</li></ol>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">interface-number</span></i></span></span><p><p>The tunnel interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+te+bit-error-detection"><b><span class="cmdname">mpls te bit-error-detection</span></b></a> [ <strong><span>mode</span></strong> { <strong><span>unidirectional</span></strong> | <strong><span>bidirectional</span></strong> } ]</span><p><p>Bit-error-triggered tunnel switching is enabled for the current tunnel.</p>
</p><p><p>This function supports two switching modes: <strong><span>unidirectional</span></strong> and <strong><span>bidirectional</span></strong>.</p>
<ul><li><p><strong><span>unidirectional</span></strong>: In this mode, a bit error event triggers only the current tunnel to perform protection or revertive switching.</p>
</li><li><p><strong><span>bidirectional</span></strong>: In this mode, a bit error event triggers both the current tunnel and its reverse tunnel to perform protection or revertive switching.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In real-world applications, RSVP-TE tunnels are usually deployed bidirectionally. The primary CR-LSPs of a pair of RSVP-TE tunnels in opposite directions are on the same path. If an RSVP-TE tunnel performs a primary/backup CR-LSP switchover, its reverse tunnel should also perform a primary/backup CR-LSP switchover to minimize the impact of bit errors on services.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+te+reverse-lsp"><b><span class="cmdname">mpls te reverse-lsp</span></b></a> <strong><span>protocol</span></strong> <strong><span>rsvp-te</span></strong> <strong><span>ingress-lsr-id</span></strong> <i><span class="varname">ingress-lsr-id</span></i> <strong><span>tunnel-id</span></strong> <i><span class="varname">tunnel-id</span></i></span></span><p><p>The dynamic reverse LSP for the current tunnel is specified.</p>
<p>Bit-error-triggered RSVP-TE tunnel switching implements bidirectional switching with the help of dynamic reverse LSPs.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=mpls+te+bit-error-detection+threshold"><b><span class="cmdname">mpls te bit-error-detection threshold</span></b></a> <strong><span>switch</span></strong> <i><span class="varname">switch-coe</span></i> <i><span class="varname">switch-pow</span></i> <strong><span>resume</span></strong> <i><span class="varname">resume-coe</span></i> <i><span class="varname">resume-pow</span></i></span></span><p><p>The thresholds for bit-error-triggered protection switching and revertive switching are set.</p>
</p><p><p>The <i><span class="varname">switch-coe</span></i> parameter specifies the coefficient of the protection switching threshold, and the <i><span class="varname">switch-pow</span></i> parameter specifies the power of the protection switching threshold. The formula for calculating the threshold for bit-error-triggered protection switching is as follows: </p>
<p>Protection switching threshold = <i><span class="varname">switch-coe</span></i> Ã 10<sup>-<i><span class="varname">switch-pow</span></i></sup></p>
<p>Similarly, the <i><span class="varname">resume-coe</span></i> parameter specifies the coefficient of the revertive switching threshold, and the <i><span class="varname">resume-pow</span></i> parameter specifies the power of the revertive switching threshold. The formula for calculating the threshold for bit-error-triggered revertive switching is similar to the formula for calculating the threshold for bit-error-triggered protection switching.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The revertive switching threshold cannot be greater than the protection switching threshold.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000001.html">Bit-Error-Triggered Protection Switching Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000005.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000012.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>