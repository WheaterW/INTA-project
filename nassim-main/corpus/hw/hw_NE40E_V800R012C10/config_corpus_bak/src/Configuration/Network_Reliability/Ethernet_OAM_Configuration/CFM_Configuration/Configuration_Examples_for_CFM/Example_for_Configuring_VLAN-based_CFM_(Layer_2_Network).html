
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring VLAN-based CFM (Layer 2 Network)">
<meta name="abstract" content="This section provides an example for configuring virtual local area network (VLAN)-based connectivity fault management (CFM) on a Layer 2 network.">
<meta name="description" content="This section provides an example for configuring virtual local area network (VLAN)-based connectivity fault management (CFM) on a Layer 2 network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,c00376497,z00603461,w00800033,jwx1168690,w00556928,w00437000,eoam-vrp,w00606909,m00390128,l00455378,wwx1270540">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361968">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring VLAN-based CFM (Layer 2 Network)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172361968"></a><a name="EN-US_TASK_0172361968"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring VLAN-based CFM (Layer 2 Network)</h1>
<div class="taskbody"><p>This section provides an example for configuring virtual local area network (VLAN)-based connectivity fault management (CFM) on a Layer 2 network.</p>
<div class="context"><a name="EN-US_TASK_0172361968__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172361968__fig_dc_vrp_cfm_cfg_00002201">Figure 1</a>, ISP1 manages <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, and <span class="keyword">Device</span>D, and ISP2 manages <span class="keyword">Device</span>C, <span class="keyword">Device</span>E, <span class="keyword">Device</span>F, <span class="keyword">Device</span>G, <span class="keyword">Device</span>H, and <span class="keyword">Device</span>I. Configure VLAN-based CFM to detect link faults.</p>
<div class="fignone" id="EN-US_TASK_0172361968__fig_dc_vrp_cfm_cfg_00002201"><a name="EN-US_TASK_0172361968__fig_dc_vrp_cfm_cfg_00002201"></a><a name="fig_dc_vrp_cfm_cfg_00002201"></a><span class="figcap"><b>Figure 1 </b>VLAN-based CFM on a Layer 2 network</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1, interface2, and interface3 represent GE <span>0/1/0</span>, GE <span>0/1/1</span>, and GE <span>0/1/2</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_cfm_cfg_00002201.png" width="NaN" height="NaN"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361968__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Create VLANs and add interfaces to them.</p>
</li><li><p>Create MD1 at Level 6 on all devices.</p>
</li><li><p>Create MA1 in MD1 on all devices except <span class="keyword">Device</span>G, and map MA1 to VLAN2.</p>
</li><li><p>Create MA2 in MD1 on all devices except <span class="keyword">Device</span>E and <span class="keyword">Device</span>I, and map MA2 to VLAN3.</p>
</li><li><p>Create MD2 at Level 4 on <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D, create MA3 in MD2, and map MA3 to VLAN4.</p>
</li><li><p>Configure maintenance association end points (MEPs) and remote maintenance association end points (RMEPs) for MA1 in MD1 on <span class="keyword">Device</span>E, <span class="keyword">Device</span>H, and <span class="keyword">Device</span>I.</p>
</li><li><p>Configure local MEPs and RMEPs for MA2 in MD1 on <span class="keyword">Device</span>H and <span class="keyword">Device</span>G.</p>
</li><li><p>Configure local MEPs and RMEPs for MA3 in MD2 on <span class="keyword">Device</span>A, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D.</p>
</li><li><p>Enable local MEPs to send continuity check messages (CCMs) and receive CCMs from RMEPs.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361968__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>MD1's level: 6</p>
</li><li><p>MD2's level: 4</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361968__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create VLANs and add interfaces to them. For configuration details, see Configuration Files in this section.</span></li><li><span>Create MD1.</span><p><p># Create MD1 on <span class="keyword">Device</span>A.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt;<strong> system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>A</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>cfm enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> cfm md md1 level 6</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Create MD1 on <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, <span class="keyword">Device</span>E, <span class="keyword">Device</span>F, <span class="keyword">Device</span>G, <span class="keyword">Device</span>H, and <span class="keyword">Device</span>I.</p>
<p>The procedures for creating MD1 on these devices are similar to that on <span class="keyword">Device</span>A.</p>
</p></li><li><span>Create and configure MA1 in MD1 on all devices except <span class="keyword">Device</span>G.</span><p><p># Create and configure MA1 in MD1 on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-md-md1] <strong>ma ma1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md1-ma-ma1]<strong> map vlan 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md1-ma-ma1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Create and configure MA1 in MD1 on <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, <span class="keyword">Device</span>E, <span class="keyword">Device</span>F, <span class="keyword">Device</span>H, and <span class="keyword">Device</span>I.</p>
<p>The procedures for creating and configuring MA1 in MD1 on these devices are similar to that on <span class="keyword">Device</span>A.</p>
</p></li><li><span>Create and configure MA2 in MD1 on all devices except <span class="keyword">Device</span>E and <span class="keyword">Device</span>I.</span><p><p># Create and configure MA2 in MD1 on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-md-md1] <strong>ma ma2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md1-ma-ma2]<strong> map vlan 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md1-ma-ma2]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Create and configure MA2 in MD1 on <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, <span class="keyword">Device</span>F, <span class="keyword">Device</span>G, and <span class="keyword">Device</span>H.</p>
<p>The procedures for creating and configuring MA2 in MD1 on these devices are similar to that on <span class="keyword">Device</span>A.</p>
</p></li><li><span>Create MD2 on <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D, and create and configure MA3 in MD2.</span><p><p># Create MD2 on <span class="keyword">Device</span>A, and create and configure MA3 in MD2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> cfm md md2 level 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md2] <strong>ma ma3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md2-ma-ma3]<strong> map vlan 4</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md2-ma-ma3]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md2]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Create MD2 on <span class="keyword">Device</span> B, <span class="keyword">Device</span> C, and <span class="keyword">Device</span> D, and create and configure MA3 in MD2.</p>
<p>The procedures for creating MD2 and creating and configuring MA3 in MD2 on these devices are similar to that on <span class="keyword">Device</span>A.</p>
</p></li><li><span>Configure local MEPs and RMEPs for MA1 in MD1 on <span class="keyword">Device</span>E, <span class="keyword">Device</span>H, and <span class="keyword">Device</span>I.</span><p><p># Configure a local MEP for MA1 in MD1 on <span class="keyword">Device</span>E.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E]<strong> cfm md md1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-md-md1] <strong>ma ma1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-md-md1-ma-ma1]<strong> mep mep-id 3 interface gigabitethernet <span>0/1/1</span> inward</strong></pre>
<p># Configure a local MEP for MA1 in MD1 on <span class="keyword">Device</span>H.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H]<strong> cfm md md1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H-md-md1] <strong>ma ma1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H-md-md1-ma-ma1]<strong> mep mep-id 2 interface gigabitethernet <span>0/1/2</span> inward</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H] <strong>commit</strong></pre>
<p># Configure a local MEP for MA1 in MD1 on <span class="keyword">Device</span>I.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>I]<strong> cfm md md1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>I-md-md1] <strong>ma ma1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>I-md-md1-ma-ma1]<strong> mep mep-id 1 interface gigabitethernet <span>0/1/1</span> inward</strong></pre>
<p># Configure an RMEP for MA1 in MD1 on <span class="keyword">Device</span>E.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-md-md1-ma-ma1]<strong> remote-mep mep-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-md-md1-ma-ma1] <strong>remote-mep mep-id 2</strong></pre>
<p># Configure an RMEP for MA1 in MD1 on <span class="keyword">Device</span>H.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H-md-md1-ma-ma1]<strong> remote-mep mep-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H-md-md1-ma-ma1]<strong> remote-mep mep-id 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H] <strong>commit</strong></pre>
<p># Configure an RMEP for MA1 in MD1 on <span class="keyword">Device</span>I.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>I-md-md1-ma-ma1]<strong> remote-mep mep-id 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>I-md-md1-ma-ma1]<strong> remote-mep mep-id 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>I] <strong>commit</strong></pre>
</p></li><li><span>Configure local MEPs and RMEPs for MA2 in MD1 on <span class="keyword">Device</span>H and <span class="keyword">Device</span>G.</span><p><p># Configure a local MEP for MA2 in MD1 on <span class="keyword">Device</span>H.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>H]<strong> cfm md md1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H-md-md1] <strong>ma ma2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H-md-md1-ma-ma2]<strong> mep mep-id 1 interface gigabitethernet <span>0/1/1</span> inward</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H] <strong>commit</strong></pre>
<p># Configure a local MEP for MA2 in MD1 on <span class="keyword">Device</span>G.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>G]<strong> cfm md md1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>G-md-md1] <strong>ma ma2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>G-md-md1-ma-ma2]<strong> mep mep-id 2 interface gigabitethernet <span>0/1/0</span> inward</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>G] <strong>commit</strong></pre>
<p># Configure an RMEP for MA2 in MD1 on <span class="keyword">Device</span>H.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H-md-md1-ma-ma2]<strong> remote-mep mep-id 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>H] <strong>commit</strong></pre>
<p># Configure an RMEP for MA2 in MD1 on <span class="keyword">Device</span>G.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>G-md-md1-ma-ma2] <strong>remote-mep mep-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>G] <strong>commit</strong></pre>
</p></li><li><span>Configure local MEPs and RMEPs for MA3 in MD2 on <span class="keyword">Device</span>A, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D.</span><p><p># Configure a local MEP for MA3 in MD2 on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> cfm md md2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md2] <strong>ma ma3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md2-ma-ma3]<strong> mep mep-id 1 interface gigabitethernet <span>0/1/0</span> inward</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure a local MEP for MA3 in MD2 on <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C]<strong> cfm md md2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-md-md2] <strong>ma ma3</strong></pre>
<pre class="screen">[<span class="keyword">Device</span>C-md-md2-ma-ma3]<strong> mep mep-id 2 interface gigabitethernet <span>0/1/1</span> outward</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>commit</strong></pre>
<p># Configure a local MEP for MA3 in MD2 on <span class="keyword">Device</span>D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> cfm md md2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-md-md2] <strong>ma ma3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-md-md2-ma-ma3]<strong> mep mep-id 3 interface gigabitethernet <span>0/1/0</span> inward</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>commit</strong></pre>
<p># Configure an RMEP for MA3 in MD2 on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-md-md2-ma-ma3]<strong> remote-mep mep-id 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md2-ma-ma3]<strong> remote-mep mep-id 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure an RMEP for MA3 in MD2 on <span class="keyword">Device</span>C.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-md-md2-ma-ma3]<strong> remote-mep mep-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-md-md2-ma-ma3]<strong> remote-mep mep-id 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>commit</strong></pre>
<p># Configure an RMEP for MA3 in MD2 on <span class="keyword">Device</span>D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-md-md2-ma-ma3]<strong> remote-mep mep-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-md-md2-ma-ma3] <strong>remote-mep mep-id 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>commit</strong></pre>
</p></li><li><span>Enable local MEPs to send CCMs and receive CCMs from RMEPs.</span><p><p># Enable local MEPs to send CCMs on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md2-ma-ma3]<strong> mep ccm-send mep-id 1 enable</strong></pre>
<p># Enable local MEPs to receive CCMs from RMEPs on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-md-md2-ma-ma3]<strong> remote-mep ccm-receive enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Enable local MEPs to send CCMs and receive CCMs from RMEPs on <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, <span class="keyword">Device</span>E, <span class="keyword">Device</span>F, <span class="keyword">Device</span>G, <span class="keyword">Device</span>H, and <span class="keyword">Device</span>I.</p>
<p>The procedures for enabling local MEPs to send CCMs and receive CCMs from RMEPs on these devices are similar to that on <span class="keyword">Device</span>A.</p>
</p></li><li><span>Verify the configuration.</span><p><p>Run the <a href="cmdqueryname=display+cfm+remote-mep"><b><span class="cmdname">display cfm remote-mep</span></b></a> command to view RMEP information. The following example uses the command output on <span class="keyword">Device</span>A. The command output shows that the RMEP is up.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display cfm remote-mep</strong>
The total number of RMEPs is : 1
The status of RMEPs : 1 up, 0 down, 0 disable
--------------------------------------------------
 MD Name            : md
 Level              : 0
 MA Name            : ma1
 RMEP ID            : 2
 VLAN ID            : 2 
 VSI Name           : --
 L2VC ID            : --
<span> L2VPN Name         : --  CE ID              : --  CE Offset          : --</span>
<span><span>  L2TPV3 Tunnel Name            : --</span>
<span> L2TPV3 Local Connection Name  : --</span></span>
 MAC                : 00e0-fc12-7890
 CCM Receive        : enabled
 Trigger-If-Down    : enabled
 CFM Status         : up
 Alarm Status       : none
 Interface TLV      : --
 Port Status TLV    : --</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172361968__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/2</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md1 level 6</pre>
<pre class="screen">  ma ma1</pre>
<pre class="screen">   map vlan 2</pre>
<pre class="screen">  ma ma2</pre>
<pre class="screen">   map vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md2 level 4</pre>
<pre class="screen">  ma ma3</pre>
<pre class="screen">   map vlan 4</pre>
<pre class="screen">   mep mep-id 1 interface gigabitethernet <span>0/1/0</span> inward</pre>
<pre class="screen">   mep ccm-send mep-id 1 enable</pre>
<pre class="screen">   remote-mep mep-id 2</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 2 enable</pre>
<pre class="screen">   remote-mep mep-id 3</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 3 enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm md md1 level 6</pre>
<pre class="screen">  ma ma1</pre>
<pre class="screen">   map vlan 2</pre>
<pre class="screen">  ma ma2</pre>
<pre class="screen">   map vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md2 level 4</pre>
<pre class="screen">  ma ma3</pre>
<pre class="screen">   map vlan 4</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm md md1 level 6</pre>
<pre class="screen">  ma ma1</pre>
<pre class="screen">   map vlan 2</pre>
<pre class="screen">  ma ma2</pre>
<pre class="screen">   map vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md2 level 4</pre>
<pre class="screen">  ma ma3</pre>
<pre class="screen">   map vlan 4</pre>
<pre class="screen">   mep mep-id 2 interface gigabitethernet <span>0/1/1</span> outward</pre>
<pre class="screen">   mep ccm-send mep-id 2 enable</pre>
<pre class="screen">   remote-mep mep-id 1</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 1 enable</pre>
<pre class="screen">   remote-mep mep-id 3</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 3 enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>D configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>D</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/2</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 4</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md1 level 6</pre>
<pre class="screen">  ma ma1</pre>
<pre class="screen">   map vlan 2</pre>
<pre class="screen">  ma ma2</pre>
<pre class="screen">   map vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md2 level 4</pre>
<pre class="screen">  ma ma3</pre>
<pre class="screen">   map vlan 4</pre>
<pre class="screen">   mep mep-id 3 interface gigabitethernet <span>0/1/0</span> inward</pre>
<pre class="screen">   mep ccm-send mep-id 3 enable</pre>
<pre class="screen">   remote-mep mep-id 1</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 1 enable</pre>
<pre class="screen">   remote-mep mep-id 2</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 2 enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>E configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>E</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 2</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md1 level 6</pre>
<pre class="screen">  ma ma1</pre>
<pre class="screen">   map vlan 2</pre>
<pre class="screen">   mep mep-id 3 interface gigabitethernet <span>0/1/1</span> inward</pre>
<pre class="screen">   mep ccm-send mep-id 3 enable</pre>
<pre class="screen">   remote-mep mep-id 1</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 1 enable</pre>
<pre class="screen">   remote-mep mep-id 2</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 2 enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>F configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>F</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 2 to 3</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 3</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/2</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md1 level 6</pre>
<pre class="screen">  ma ma1</pre>
<pre class="screen">   map vlan 2</pre>
<pre class="screen">  ma ma2</pre>
<pre class="screen">   map vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>G configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>G</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 3</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/2</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md1 level 6</pre>
<pre class="screen">  ma ma2</pre>
<pre class="screen">   map vlan 3</pre>
<pre class="screen">   mep mep-id 2 interface gigabitethernet <span>0/1/0</span> inward</pre>
<pre class="screen">   mep ccm-send mep-id 2 enable</pre>
<pre class="screen">   remote-mep mep-id 1</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 1 enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>H configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>H</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 2 to 3</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2 to 3</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen">port trunk allow-pass vlan 3</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/2</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md1 level 6</pre>
<pre class="screen">  ma ma1</pre>
<pre class="screen">   map vlan 2</pre>
<pre class="screen">   mep mep-id 2 interface gigabitethernet <span>0/1/2</span> inward</pre>
<pre class="screen">   mep ccm-send mep-id 2 enable</pre>
<pre class="screen">   remote-mep mep-id 1</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 1 enable</pre>
<pre class="screen">   remote-mep mep-id 3</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 3 enable</pre>
<pre class="screen">  ma ma2</pre>
<pre class="screen">   map vlan 3</pre>
<pre class="screen">   mep mep-id 1 interface gigabitethernet <span>0/1/1</span> inward</pre>
<pre class="screen">   mep ccm-send mep-id 1 enable</pre>
<pre class="screen">   remote-mep mep-id 2</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 2 enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>I configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>I</pre>
<pre class="screen">#</pre>
<pre class="screen">vlan batch 2</pre>
<pre class="screen">#</pre>
<pre class="screen">cfm enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> portswitch</pre>
<pre class="screen"> port trunk allow-pass vlan 2</pre>
<pre class="screen">#</pre>
<pre class="screen"> cfm md md1 level 6</pre>
<pre class="screen">  ma ma1</pre>
<pre class="screen">   map vlan 2</pre>
<pre class="screen">   mep mep-id 1 interface gigabitethernet <span>0/1/1</span> inward</pre>
<pre class="screen">   mep ccm-send mep-id 1 enable</pre>
<pre class="screen">   remote-mep mep-id 2</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 2 enable</pre>
<pre class="screen">   remote-mep mep-id 3</pre>
<pre class="screen">   remote-mep ccm-receive mep-id 3 enable</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000021.html">Configuration Examples for CFM
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000023.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>