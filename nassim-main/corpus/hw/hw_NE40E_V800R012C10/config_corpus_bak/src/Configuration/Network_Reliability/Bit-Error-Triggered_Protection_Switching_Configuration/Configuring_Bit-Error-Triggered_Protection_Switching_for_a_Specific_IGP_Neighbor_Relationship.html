
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Bit-Error-Triggered Protection Switching for a Specific IGP Neighbor Relationship">
<meta name="abstract" content="If multiple links are available between two IGP neighbors on an NG MVPN, configure IGP bit error detection and bit-error-triggered protection switching, allowing the remote mLDP tunnel end to select a new outbound downstream interface if the interface in use is suffering a high bit error rate.">
<meta name="description" content="If multiple links are available between two IGP neighbors on an NG MVPN, configure IGP bit error detection and bit-error-triggered protection switching, allowing the remote mLDP tunnel end to select a new outbound downstream interface if the interface in use is suffering a high bit error rate.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_evpn_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_error-code_0002.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128,z00545680">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362285">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Bit-Error-Triggered Protection Switching for a Specific IGP Neighbor Relationship</title>
</head>
<body><a name="EN-US_TASK_0172362285"></a><a name="EN-US_TASK_0172362285"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Bit-Error-Triggered Protection Switching for a Specific IGP Neighbor Relationship</h1>
<div class="taskbody"><p>If multiple links are available between two IGP neighbors on an NG MVPN, configure IGP bit error detection and bit-error-triggered protection switching, allowing the remote mLDP tunnel end to select a new outbound downstream interface if the interface in use is suffering a high bit error rate.</p>
<div class="context"><a name="EN-US_TASK_0172362285__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In an NG MVPN scenario, multicast data flows must be transmitted on a link that has no or few bit errors because even low bit error rates may cause black screen, erratic display, or frame interruption. If bit errors occur on a downstream inbound interface, mLDP can use bit-error-triggered section switching or bit-error-triggered IGP route switching to prevent a high bit-error-rate link from being selected. If an mLDP upstream node has multiple links to the same downstream node and no bit error occurs on any of the links, the mLDP LSP randomly selects an outbound interface for sending traffic to the downstream node. If bit errors occur on a link of the outbound interface, you can configure bit-error-triggered protection switching for this IGP neighbor relationship to minimize service loss. After detecting bit errors, a device notifies the IGP BFD module of the bit error status, and the module sends the bit error status to the IGP neighbor through BFD messages. If the neighbor is also configured with bit-error-triggered protection switching for this neighbor relationship, the BFD module of the neighbor receives the bit error rate. The mLDP LSP then selects an outbound interface based on bit error rates. An mLDP LSP selects a downstream link with a smaller cost or a link with no bit error rate.</p>
<div class="p">The network shown in <a href="#EN-US_TASK_0172362285__fig_dc_vrp_cfg_error-code_ngmvpn_000101">Figure 1</a> is an NG MVPN that uses P2MP mLDP LSPs to transmit services. If no bit error occurs on the links, multicast traffic is transmitted along the path Root-P1-Leaf. There are two links between P2 and the leaf node, one physical direct link and one logical direct link. The logical direct link passes through Leaf-P1-Root-P2. P2 and the leaf node establish an IGP neighbor relationship using the two links. If bit errors occur an interface that connects the leaf node to P1, traffic is switched to the backup link Root-P2-Leaf. Traffic switching is implemented through mLDP LSP outbound interface switching. The switching process is as follows:<ul><li><p>The leaf node notifies the local interface management module of the bit error fault, triggering IGP to increase the cost value of the link connected to this interface and switch the route to the backup link. The mLDP egress then switches services to the backup link Leaf-P2-Root of the newly selected unicast route.</p>
</li><li><p>The leaf node uses BFD messages to transmit the bit error status to P2. P2 is an mLDP intermediate node and has two links connected to its downstream node. After receiving the bit error rate of the logical direct link, P2 selects the downstream outbound interface that connects to the physical direct link with no bit errors. mLDP outbound interface switching is then complete.</p>
</li></ul>
</div>
<div class="fignone" id="EN-US_TASK_0172362285__fig_dc_vrp_cfg_error-code_ngmvpn_000101"><a name="EN-US_TASK_0172362285__fig_dc_vrp_cfg_error-code_ngmvpn_000101"></a><a name="fig_dc_vrp_cfg_error-code_ngmvpn_000101"></a><span class="figcap"><b>Figure 1 </b>Configuring bit-error-triggered protection switching for a specific IGP neighbor relationship</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfg_error-code_ngmvpn_000101.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362285__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring bit-error-triggered protection switching for a specific IGP neighbor relationship, complete the following tasks:</p>
<ul><li>Configure IS-IS to generate routes and establish a neighbor relationship.</li><li>Enable LDP and mLDP across the entire network.</li><li>Enable BFD globally.</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172362285__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=isis+bfd+bit-error+enable"><b><span class="cmdname">isis bfd bit-error enable</span></b></a></span><p><p>BFD-based bit error detection is enabled on the specified IS-IS interface.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0172362285__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After configuring BFD-based bit error detection for a specified IS-IS neighbor relationship, run the following commands to check the configuration.</p>
<ul><li><p>Run the <a href="cmdqueryname=display+isis+bfd-bit-error+interface"><b><span class="cmdname">display isis bfd-bit-error interface</span></b></a> command to check the interfaces enabled with BFD-based bit error detection.</p>
</li><li><p>Run the <a href="cmdqueryname=display+isis+bfd-bit-error+session"><b><span class="cmdname">display isis bfd-bit-error session</span></b></a> command to check BFD sessions used for bit error detection.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000001.html">Bit-Error-Triggered Protection Switching Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_evpn_0001.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_cfg_error-code_0002.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>