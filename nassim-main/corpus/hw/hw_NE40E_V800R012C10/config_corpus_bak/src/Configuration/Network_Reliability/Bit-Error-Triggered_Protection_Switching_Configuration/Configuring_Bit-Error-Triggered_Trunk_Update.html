
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Bit-Error-Triggered Trunk Update">
<meta name="abstract" content="To cope with bit errors detected on trunk member interfaces, configure bit-error-triggered trunk update.">
<meta name="description" content="To cope with bit errors detected on trunk member interfaces, configure bit-error-triggered trunk update.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000020.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128,q00824768,z00545680">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Bit-Error-Triggered Protection Switching">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362275">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Bit-Error-Triggered Trunk Update</title>
</head>
<body><a name="EN-US_TASK_0172362275"></a><a name="EN-US_TASK_0172362275"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Bit-Error-Triggered Trunk Update</h1>
<div class="taskbody"><p>To cope with bit errors detected on trunk member interfaces, configure bit-error-triggered trunk update.</p>
<div class="context"><a name="EN-US_TASK_0172362275__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>If bit errors are generated or cleared on a trunk member interface, bit-error-triggered trunk update triggers the trunk interface to delete or re-add the member interface from or to the forwarding plane. If bit errors occur on all trunk member interfaces or the number of member interfaces without bit errors is lower than the lower threshold for the trunk interface's Up links, bit-error-triggered protection switching involves the following modes:</p>
<ul><li><p>Trunk-bit-error-triggered section switching: The trunk interface goes Down, triggering an upper-layer application associated with the trunk interface to perform a service switchover.</p>
</li><li><p>Trunk-bit-error-triggered IGP route switching: The trunk interface ignores the bit errors on the member interfaces and remains Up. However, the link quality level of the trunk interface becomes Low, triggering an IGP to increase the cost of the trunk interface's link. IGP routes then do not preferentially select the link.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If bit errors occur on the trunk interfaces on both the primary and secondary links, trunk-bit-error-triggered section switching may interrupt services. Therefore, trunk-bit-error-triggered IGP route switching is recommended.</p>
</div></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362275__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring bit-error-triggered trunk update, complete the following tasks:</p>
<ul><li><p><a href="dc_vrp_ethtrunk_cfg_0006.html">Configure an Eth-Trunk interface in manual load balancing mode</a><span><a href="dc_vrp_hdlc_ip-trunk_cfg_0008.html">, configure an IP-Trunk interface,</a></span> or <a href="dc_vrp_ethtrunk_cfg_0013.html">configure an Eth-Trunk interface in static LACP mode</a>.</p>
</li><li><p>Enable BFD globally.</p>
</li></ul>
<p>If trunk-bit-error-triggered IGP route switching is configured, complete either of the following tasks based on a used IGP:</p>
<ul><li><a href="dc_vrp_isis_cfg_1000.html">Configure basic IPv4 IS-IS functions.</a></li><li><a href="dc_vrp_ospf_cfg_0003.html">Configure basic OSPF functions.</a></li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362275__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Enable bit error detection on each trunk member interface.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The trunk member interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Enable bit error detection, and configure bit error alarm thresholds on the interface.</span><p><ul><li><p>If trunk-bit-error-triggered section switching is configured, run the <a href="cmdqueryname=trap-threshold+crc-error+packet-error-ratio"><b><span class="cmdname">trap-threshold crc-error packet-error-ratio</span></b></a> <strong><span>alarm-threshold</span></strong> <i><span class="varname">coef-value</span></i> <i><span class="varname">pow-value</span></i> [ <strong><span>resume-threshold</span></strong> <i><span class="varname">rsm-coef-value</span></i> <i><span class="varname">rsm-pow-value</span></i> ] [ <strong><span>trigger-lsp</span></strong> | <strong><span>trigger-section</span></strong> ] command to enable bit error detection on the interface and set BER thresholds for triggering bit error alarms.</p>
<p>To enable bit-error-triggered trunk update to take effect, you must specify the switching type, either <strong><span>trigger-lsp</span></strong> or <strong><span>trigger-section</span></strong>.</p>
</li><li><p>If trunk-bit-error-triggered IGP route switching is configured, run the <a href="cmdqueryname=link-quality"><b><span class="cmdname">link-quality</span></b></a> <strong><span>low</span></strong> <strong><span>bit-error-threshold</span></strong> <strong><span>error-ratio</span></strong> <i><span class="varname">trigger-coefficient</span></i> <i><span class="varname">trigger-power</span></i> <strong><span>resume-ratio</span></strong> <i><span class="varname">recovery-coefficient</span></i> <i><span class="varname">recovery-power</span></i> command to enable bit error detection on the interface and set BER thresholds for determining link quality.</p>
</li></ul>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Enable bit error detection on a trunk interface.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run either of the following commands:</span><p><ul><li><p>Run the <a href="cmdqueryname=interface+eth-trunk"><b><span class="cmdname">interface eth-trunk</span></b></a> <i><span class="varname">trunk-id</span></i> command to enter the view of an Eth-Trunk interface.</p>
</li><li><p>Run the <a href="cmdqueryname=interface+ip-trunk"><b><span class="cmdname">interface ip-trunk</span></b></a> <i><span class="varname">trunk-id</span></i> command to enter the view of an IP-Trunk interface.</p>
</li></ul>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bit-error-detection"><b><span class="cmdname">bit-error-detection</span></b></a></span><p><p>Bit error detection is enabled on the trunk interface.</p>
</p></li><li class="substepexpand"><span>(Optional) If trunk-bit-error-triggered IGP route switching is configured, perform the following operations depending on a used IGP:</span><p><p>If IS-IS is used:</p>
<ol class="substepthirdol"><li><p>Run the <a href="cmdqueryname=isis+enable"><b><span class="cmdname">isis enable</span></b></a> [ <i><span class="varname">process-id</span></i> ] command to enable the IS-IS function on the interface.</p>
</li><li><p>Run the <a href="cmdqueryname=isis+link-quality"><b><span class="cmdname">isis link-quality</span></b></a> <strong><span>low</span></strong> <strong><span>incr-cost</span></strong> { <i><span class="varname">cost</span></i> | <strong><span>max-reachable</span></strong> } command to enable the IS-IS interface to automatically adjust the link cost based on link quality.</p>
</li></ol>
<p>If OSPF is used:</p>
<ol class="substepthirdol"><li><p>Run the <a href="cmdqueryname=ospf+enable"><b><span class="cmdname">ospf enable</span></b></a> [ <i><span class="varname">process-id</span></i> ] <strong><span>area</span></strong> <i><span class="varname">area-id</span></i> command to enable the OSPF function on the interface.</p>
</li><li><p>Run the <a href="cmdqueryname=ospf+link-quality+low+incr-cost"><b><span class="cmdname">ospf link-quality low incr-cost</span></b></a> { <i><span class="varname">cost</span></i> | <strong><span>max-reachable</span></strong> } command to enable the OSPF interface to automatically adjust the link cost based on link quality.</p>
</li></ol>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000001.html">Bit-Error-Triggered Protection Switching Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000020.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_error-code_000007.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>