
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring One-way Frame Delay Measurement in VLL Networking">
<meta name="abstract" content="This section provides an example showing how to configure one-way frame delay measurement in virtual leased line (VLL) networking.">
<meta name="description" content="This section provides an example showing how to configure one-way frame delay measurement in virtual leased line (VLL) networking.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011531.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011533.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011535.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,c00376497,z00603461,w00800033,jwx1168690,w00556928,w00437000,eoam-vrp,w00606909,m00390128,l00455378,wwx1270540">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="jwx1168690">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172362156">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring One-way Frame Delay Measurement in VLL Networking</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172362156"></a><a name="EN-US_TASK_0172362156"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring One-way Frame Delay Measurement in VLL Networking</h1>
<div class="taskbody"><p>This section provides an example showing how to configure one-way frame delay measurement in virtual leased line (VLL) networking.</p>
<div class="context"><a name="EN-US_TASK_0172362156__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As networks rapidly develop and applications diversify, various value-added services, such as IPTV, video conferencing, and VoIP, are widely deployed. A link connectivity fault or network performance deterioration directly affects services on a live network. Therefore, performance monitoring is especially important for service transmission channels.</p>
<p>As shown in <a href="#EN-US_TASK_0172362156__fig_dc_vrp_cfg_01153401">Figure 1</a>, connectivity fault management (CFM) is configured between each customer edge (CE) and provider edge (PE) and between PEs. To provide high-quality video services, providers hope to monitor the unidirectional delay over mobile bearer links in real time, while monitoring link connectivity. Monitoring the unidirectional delay over mobile bearer links allows the providers to respond quickly to video service quality deterioration.</p>
<div class="fignone" id="EN-US_TASK_0172362156__fig_dc_vrp_cfg_01153401"><a name="EN-US_TASK_0172362156__fig_dc_vrp_cfg_01153401"></a><a name="fig_dc_vrp_cfg_01153401"></a><span class="figcap"><b>Figure 1 </b>Configuring Y.1731 functions in VLL networking</span><div class="note" id="EN-US_TASK_0172362156__en-us_task_0172362152_note398509413214024"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172362156__en-us_task_0172362152_p1893692945214024">In this example, interface1 and interface2 represent GE <span>0/1/1</span> and GE <span>0/1/2</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" id="EN-US_TASK_0172362156__en-us_task_0172362152_image1772973201214024" src="images/fig_dc_vrp_cfg_01153201.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362156__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><div class="p">The configuration roadmap is as follows:<ol><li><p>Configure on-demand one-way frame delay measurement for the pseudo wire (PW) between the PEs to periodically collect statistics about the delay in frame transmission.</p>
</li><li><p>Configure proactive one-way frame delay measurement for the PW between the PEs to continuously collect statistics about the delay in frame transmission.</p>
</li></ol>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362156__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Prerequisites</h4><p>1588 time synchronization has been configured on PE1 and PE2.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172362156__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>ID of an L2VC of a VLL between PE1 and PE2.</p>
</li><li><p>Names of the maintenance domain (MD) and maintenance association (MA) between PE1 and PE2 and between CE1 and PE1.</p>
</li><li><p>Interval at which one-way delay measurement (1DM) messages are sent and the number of times when on-demand 1DM messages are sent.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172362156__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span><span>Configure on-demand one-way frame delay measurement for a PW based on ACs on PEs. </span></span><p><ol type="a"><li><p id="EN-US_TASK_0172362156__en-us_task_0172362152_p516883368214024">Configure a VLL connection.</p>
<p id="EN-US_TASK_0172362156__en-us_task_0172362152_p2050224614214024">Configure a VLL connection between PE1 and PE2. For detailed configurations, see the chapter "VLL Configuration" in the <em id="EN-US_TASK_0172362156__en-us_task_0172362152_i452802186214308"><span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1711778781214308">HUAWEI NE40E-M2 series</span> <span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword27553408214308">Universal Service Router</span> Configuration Guide - VPN</em> or configuration files in this configuration example.</p>
<p id="EN-US_TASK_0172362156__en-us_task_0172362152_p1450004579214024">After the configuration is complete, run the <a href="cmdqueryname=display+mpls+l2vc"><b><span class="cmdname" id="EN-US_TASK_0172362156__en-us_task_0172362152_cmdname255814606214024">display mpls l2vc</span></b></a> command on each PE to view VC and AC information.</p>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1693989819214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1993514500214024"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b2064440411214024">display mpls l2vc</strong>                                           
 total LDP VC : 1     1 up       0 down

 *client interface       : Gigabitethernet<span>0/1/1</span>.1
  Administrator PW       : no
  session state          : up
  AC status              : up
  VC state               : up
  Label state            : 0
  Token state            : 0
  VC ID                  : 1001
  VC type                : GigabitEthernet
  destination            : 2.2.2.2
  local VC label         : 16             remote VC label      : 16
  control word           : disable
<span>  remote control word    : disable</span>
  forwarding entry       : exist
  local group ID         : 0
<span>  remote group ID        : 0
  local AC OAM State     : up
  local PSN OAM State    : up
  local forwarding state : forwarding
  local status code      : 0x0
  remote AC OAM state    : up
  remote PSN OAM state   : up
  remote forwarding state: forwarding
  remote status code     : 0x0
  ignore standby state   : no
  BFD for PW             : unavailable
  VCCV State             : up</span>
  manual fault           : not set
  active state           : active
  OAM Protocol           : --
  OAM Status             : --
  OAM Fault Type         : --
  PW APS ID              : --
  PW APS Status          : --
  TTL Value              : 1
  link state             : up
  local VC MTU           : 1500           remote VC MTU        : 1500
<span>  local VCCV             : alert ttl lsp-ping bfd
  remote VCCV            : alert ttl lsp-ping bfd</span>
  tunnel policy name     : --
  traffic behavior name  : --
  PW template name       : --
  primary or secondary   : primary
  load balance type      : flow
  Access-port            : false
<span>  Switchover Flag        : false
  VC tunnel info         : 1 tunnels
    NO.0  TNL type       : ldp   , TNL ID : 0x0000000001004c4e42</span>
  create time            : 4 days, 15 hours, 59 minutes, 12 seconds
  up time                : 0 days, 15 hours, 23 minutes, 17 seconds
  last change time       : 0 days, 15 hours, 23 minutes, 17 seconds
  VC last up time        : 2012/07/24 09:37:33
  VC total up time       : 4 days, 15 hours, 57 minutes, 50 seconds
  CKey                   : 1
  NKey                   : 436207716
<span>  PW redundancy mode     : frr</span>
  AdminPw interface      : --
  AdminPw link state     : --
<span>  Forward state          : send inactive, receive inactive </span>
  Diffserv Mode          : uniform
  Service Class          : --
  Color                  : --
  DomainId               : --
  Domain Name            : --                                      </pre>
</li><li><p id="EN-US_TASK_0172362156__en-us_task_0172362152_p1153058321214024">Configure basic Ethernet CFM functions and specify the MEP type as inward.</p>
<p id="EN-US_TASK_0172362156__en-us_task_0172362152_p310124502214024">Configure basic Ethernet CFM functions on each PE. Specify the Ethernet CFM protocol as IEEE Standard 802.1ag-2007. Create an MD named <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b718199273214308">md1</strong> and an MA named <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b161928058214308">ma1</strong>, and bind the MA to the VLL.</p>
<p id="EN-US_TASK_0172362156__en-us_task_0172362152_p90368121214024"># Configure PE1.</p>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1621337295214024">&lt;<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1327841168214024">HUAWEI</span>&gt; <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1225073373214024">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1712635550214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword305705026214024"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1203488358214024">HUAWEI</span>] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1433168330214024">sysname PE1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen354410746214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1337902719214024">*</span><span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1977214143214024">HUAWEI</span>] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b119412982214024">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1133570125214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword2035111143214024"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b806875961214024">cfm enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen463494976214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword2058384383214024">*</span>PE1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1907515151214024">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1744009618214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1400434833214024"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b797713717214024">cfm md md1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1944854974214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1157912639214024">*</span>PE1-md-md1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b852715362214024">ma ma1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1359742214214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword589380785214024">*</span>PE1-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1788817397214024">map mpls l2vc 1001 tagged</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1703805152214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword259869481214024">*</span>PE1-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1581949337214024">mep mep-id 1 interface gigabitethernet<span>0/1/1</span>.1 inward</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen238935762214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1378216331214024">*</span>PE1-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1637520450214024">mep ccm-send mep-id 1 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen69153804214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword901612510214024">*</span>PE1-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b703533585214024">remote-mep mep-id 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1407315268214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1230137093214024">*</span>PE1-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b700260893214024">remote-mep ccm-receive mep-id 2 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen2122526461214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword2051453344214024">*</span>PE1-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b748745811214024">test-id 1 mep 1 remote-mep 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1847697490214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword2130905130214024">*</span>PE1-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1166354461214024">commit</strong></pre>
<p id="EN-US_TASK_0172362156__en-us_task_0172362152_p2127844594214024"># Configure PE2.</p>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen874355669214024">&lt;<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1612112511214024">HUAWEI</span>&gt; <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b620191232214024">system-view</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1896368214214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword804375526214024"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword729907617214024">HUAWEI</span>] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1050182482214024">sysname PE2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1780222058214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1960642705214024">*</span><span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1532863367214024">HUAWEI</span>] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1762797351214024">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1063375191214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1267996619214024"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1366386041214024">cfm enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1251634350214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword2068047339214024">*</span>PE2] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1605073727214024">commit</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1838865014214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1364537794214024"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b559452605214024">cfm md md1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen499574419214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword189337973214024">*</span>PE2-md-md1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b386397871214024">ma ma1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen632580992214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1093262320214024">*</span>PE2-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b930003051214024">map mpls l2vc 1001 tagged</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen633370731214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword65198324214024">*</span>PE2-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b707813855214024">mep mep-id 2 interface gigabitethernet<span>0/1/1</span>.1 inward</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen2089491291214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1637561345214024">*</span>PE2-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b579924446214024">mep ccm-send mep-id 2 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1969223288214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1424926787214024">*</span>PE2-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1777963064214024">remote-mep mep-id 1</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1801323720214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1843872641214024">*</span>PE2-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1749852193214024">remote-mep ccm-receive mep-id 1 enable</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen95968568214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword356454461214024">*</span>PE2-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b802524332214024">test-id 1 mep 2</strong></pre>
<pre class="screen" id="EN-US_TASK_0172362156__en-us_task_0172362152_screen1207641743214024">[<span class="keyword" id="EN-US_TASK_0172362156__en-us_task_0172362152_keyword1596821626214024">*</span>PE2-md-md1-ma-ma1] <strong id="EN-US_TASK_0172362156__en-us_task_0172362152_b1596040426214024">commit</strong></pre>
</li><li><p>Configure the 1DM reception function on PE2.</p>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-md-md1-ma-ma1] <strong>delay-measure one-way receive test-id 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-md-md1-ma-ma1] <strong>commit</strong></pre>
</li><li><p><span>Enable on-demand one-way frame delay measurement on the PW on a VLL network. </span></p>
<p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-md-md1-ma-ma1] <strong>delay-measure one-way send test-id 1 interval 1000 count 20</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-md-md1-ma-ma1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-md-md1] <strong>quit</strong></pre>
</li><li><p>Verify the configuration.</p>
<p>Run the <a href="cmdqueryname=display+y1731+statistic-type"><b><span class="cmdname">display y1731 statistic-type</span></b></a> command on PE2 to view the statistics about the delay in unidirectional packet transmission.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2]<strong> display y1731 statistic-type oneway-delay</strong>
Latest one-way delay statistics of test-id 1:
--------------------------------------------------------------------------------
Index    Delay(usec)    Delay variation(usec)
--------------------------------------------------------------------------------
    1            181                        -
    2            356                      175
    3            166                      190
    4            180                       14
    5            162                       18
    6            160                        2
    7            177                       17
    8            149                       28
    9            190                       41
   10            185                        5
   11            230                       45
   12            221                        9
   13            184                       37
   14            415                      231
   15            187                      228
   16            235                       48
   17            184                       51
   18            184                        0
   19            168                       16
   20            185                       17
--------------------------------------------------------------------------------
Average delay(usec) :         204    Average delay variation(usec) :         61
Maximum delay(usec) :         415    Maximum delay variation(usec) :        231
Minimum delay(usec) :         149    Minimum delay variation(usec) :          0

</pre>
</li></ol>
</p></li><li><span><span>Configure proactive one-way frame delay measurement for a PW based on ACs.</span></span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Proactive one-way frame delay measurement can be configured to continuously monitor the performance of a PW.</p>
</div></div>
<ol type="a"><li><p>Configure the 1DM reception function on PE2.</p>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>cfm md md1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-md-md1] <strong>ma ma1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-md-md1-ma-ma1] <strong>test-id 3 mep 2 remote-mep 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-md-md1-ma-ma1] <strong>delay-measure one-way continual send test-id 3 interval 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-md-md1-ma-ma1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-md-md1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</li><li><p>Enable proactive one-way frame delay measurement.</p>
<p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>cfm md md1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-md-md1] <strong>ma ma1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-md-md1-ma-ma1] <strong>test-id 3 mep 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-md-md1-ma-ma1] <strong>delay-measure one-way continual receive test-id 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-md-md1-ma-ma1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-md-md1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</li><li><p>Verify the configuration.</p>
<p>Run the <a href="cmdqueryname=display+y1731+statistic-type"><b><span class="cmdname">display y1731 statistic-type</span></b></a> command on PE1 to view the statistics about the delay in unidirectional packet transmission.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> display y1731 statistic-type oneway-delay</strong>
Latest one-way delay statistics of test-id 3:
--------------------------------------------------------------------------------
Index    Delay(usec)    Delay variation(usec)
--------------------------------------------------------------------------------
    1            181                        -
    2            356                      175
    3            166                      190
    4            180                       14
    5            162                       18
    6            160                        2
    7            177                       17
    8            149                       28
    9            190                       41
   10            185                        5
   11            230                       45
   12            221                        9
   13            184                       37
   14            415                      231
   15            187                      228
   16            235                       48
   17            184                       51
   18            184                        0
   19            168                       16
   20            185                       17
--------------------------------------------------------------------------------
Average delay(usec) :         204    Average delay variation(usec) :         61
Maximum delay(usec) :         415    Maximum delay variation(usec) :        231
Minimum delay(usec) :         149    Minimum delay variation(usec) :          0</pre>
</li></ol>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172362156__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>PE1 configuration file</p>
<pre class="screen">#
 sysname PE1
#
 cfm enable
#
 mpls lsr-id 1.1.1.1
 mpls
#
 mpls l2vpn
#
mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>.1
 vlan-type dot1q 1
 mpls l2vc 2.2.2.2 1001
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 192.168.1.2 255.255.255.0
 mpls
 mpls ldp 
#
interface LoopBack0
 ip address 1.1.1.1 255.255.255.0
#
ospf 1
 area 0.0.0.0
  network 1.1.1.1 0.0.0.0
  network 192.168.1.0 0.0.0.255
#
 cfm md md1
 ma ma1
  map mpls l2vc 1001 tagged
  mep mep-id 1 interface GigabitEthernet<span>0/1/1</span>.1 inward
  mep ccm-send mep-id 1 enable
  remote-mep mep-id 2
  remote-mep ccm-receive mep-id 2 enable
  test-id 1 mep 1 remote-mep 2
  test-id 3 mep 1
  delay-measure one-way continual receive test-id 3
#                                              
return</pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#
 sysname PE2
#
 cfm enable
#
 mpls lsr-id 2.2.2.2
 mpls
#
 mpls l2vpn
#
mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>.1
 vlan-type dot1q 1
 mpls l2vc 1.1.1.1 1001
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 192.168.1.1 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack0
 ip address 2.2.2.2 255.255.255.0
#
ospf 1
 area 0.0.0.0
  network 2.2.2.2 0.0.0.0
  network 192.168.1.0 0.0.0.255 
#
 cfm md md1
 ma ma1
  map mpls l2vc 1001 raw
  mep mep-id 2 interface GigabitEthernet<span>0/1/1</span>.1 inward
  mep ccm-send mep-id 2 enable
  remote-mep mep-id 1
  remote-mep ccm-receive mep-id 1 enable
  test-id 1 mep 2
  delay-measure one-way receive test-id 1
  test-id 3 mep 2 remote-mep 1
  delay-measure one-way continual send test-id 3 interval 1000
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011531.html">Configuration Examples for Y.1731
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011533.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_011535.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>