
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Associating CFM with an Interface">
<meta name="abstract" content="This section describes how to associate connectivity fault management (CFM) with an interface.">
<meta name="description" content="This section describes how to associate connectivity fault management (CFM) with an interface.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000014.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000035.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z50024784,c00376497,z00603461,w00800033,jwx1168690,w00556928,w00437000,eoam-vrp,w00606909,m00390128,l00455378,wwx1270540">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="Ethernet OAM">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="z00545680">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361951">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Associating CFM with an Interface</title>
</head>
<body><a name="EN-US_TASK_0172361951"></a><a name="EN-US_TASK_0172361951"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Associating CFM with an Interface</h1>
<div class="taskbody"><p>This section describes how to associate connectivity fault management (CFM) with an interface.</p>
<div class="context"><a name="EN-US_TASK_0172361951__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When a link fault, threshold-crossing event, or remote fault occurs, CFM can be associated with an interface to detect faults. As shown in <a href="#EN-US_TASK_0172361951__fig_dc_vrp_cfm_cfg_00001501">Figure 1</a>, CE1 is dual-homed to PE1 and PE2 over the primary and backup links. The dual-homing topology provides device redundancy and improves network robustness and service reliability. To check link continuity, deploy CFM on CE1 and PE1.</p>
<p>If CFM has been associated with Port1 and detects a fault in the link between CE1 and PE1, CFM instructs the Manager (MGR) module to intermittently disconnect Port1. In this manner, other modules can detect the fault. Traffic is then switched from the primary link to the backup link.</p>
<div class="fignone" id="EN-US_TASK_0172361951__fig_dc_vrp_cfm_cfg_00001501"><a name="EN-US_TASK_0172361951__fig_dc_vrp_cfm_cfg_00001501"></a><a name="fig_dc_vrp_cfm_cfg_00001501"></a><span class="figcap"><b>Figure 1 </b>CFM association with an interface</span><br><span><img class="vsd" src="images/fig_dc_vrp_cfm_cfg_00001501.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172361951__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before associating CFM with an interface, configure basic CFM functions.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172361951__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The view of the interface at one end of the link is displayed.</p>
</p></li><li><span>Associate CFM with an interface.</span><ul><li><p>Run <a href="cmdqueryname=cfm"><b><span class="cmdname">cfm</span></b></a> <strong><span>md</span></strong> <i><span class="varname">md-name</span></i> <strong><span>ma</span></strong> <i><span class="varname">ma-name</span></i> <strong><span>remote-mep</span></strong> <strong><span>mep-id</span></strong> <i><span class="varname">mep-id</span></i> <strong><span>trigger</span></strong> <strong><span>if-down</span></strong></p>
<p>CFM is associated with the interface's flapping.</p>
<p>If a MEP detects a connectivity fault between the MEP and a specified RMEP within the same MA, the OAM module blocks and later unblocks the interface on which the MEP resides so that other modules can also detect the fault.</p>
</li></ul>
<ul><li><p>Run <a href="cmdqueryname=cfm"><b><span class="cmdname">cfm</span></b></a> <strong><span>md</span></strong> <i><span class="varname">md-name</span></i> <strong><span>ma</span></strong> <i><span class="varname">ma-name</span></i> <strong><span>remote-mep</span></strong> <strong><span>mep-id</span></strong> <i><span class="varname">mep-id</span></i> <strong><span>trigger</span></strong> <strong><span>if-link-down</span></strong></p>
<p>CFM is associated with the interface's down status.</p>
<p>The OAM module disables the interface's down status if the MEP in a specified MA detects a fault between itself and the RMEP.</p>
<p>If CFM goes down, the associated member interface goes down and service traffic except CFM traffic is blocked. CFM detection continues. If the link is restored, the member interface goes up.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The <a href="cmdqueryname=cfm+trigger+if-link-down"><b><span class="cmdname">cfm trigger if-link-down</span></b></a> and <a href="cmdqueryname=cfm+trigger+if-down"><b><span class="cmdname">cfm trigger if-down</span></b></a> commands are mutually exclusive in the same interface view.</p>
</div></div>
</li></ul>
</li><li><span>(Optional) Run <a href="cmdqueryname=port-link+enable"><b><span class="cmdname">port-link enable</span></b></a> <span><strong><span>mep</span></strong> <strong><span>mep-id</span></strong> <i><span class="varname">mep-id</span></i> [ <strong><span>holdoff</span></strong> <i><span class="varname">holdoff-time</span></i> ] [ <strong><span>wtr</span></strong> <i><span class="varname">wtr-time</span></i> ] [ <strong><span>link-type</span></strong> { <strong><span>loc</span></strong> | <strong><span>interface-status-tlv</span></strong> } <sup>*</sup> ]</span></span><p><p>Association between an interface and CFM is enabled on a specified MEP.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000014.html">Configuring CFM Association
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfm_cfg_000035.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>