
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring VRRP6 Stability Functions">
<meta name="abstract" content="To help a VRRP6 group work stably, enable the preemption function, set a preemption delay, and configure an interval for sending VRRP6 Advertisement packets. The configuration can minimize the impact of network flapping resulting from frequent master/backup VRRP6 switchovers on data forwarding.">
<meta name="description" content="To help a VRRP6 group work stably, enable the preemption function, set a preemption delay, and configure an interval for sending VRRP6 Advertisement packets. The configuration can minimize the impact of network flapping resulting from frequent master/backup VRRP6 switchovers on data forwarding.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0103.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0104.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0106.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00604599">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VRRPv6">
<meta name="featuretype" content="Network Reliability">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VRRPv6">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRPv6">
<meta name="featuretype" content="Network Reliability">
<meta name="featurename" content="VRRP6">
<meta name="featuretype" content="Network Reliability">
<meta name="OWNER" content="w00604599">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172361851">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>(Optional) Configuring VRRP6 Stability Functions</title>
</head>
<body><a name="EN-US_TASK_0172361851"></a><a name="EN-US_TASK_0172361851"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring VRRP6 Stability Functions</h1>
<div class="taskbody"><p>To help a VRRP6 group work stably, enable the preemption function, set a preemption delay, and configure an interval for sending VRRP6 Advertisement packets. The configuration can minimize the impact of network flapping resulting from frequent master/backup VRRP6 switchovers on data forwarding.</p>
<div class="context"><a name="EN-US_TASK_0172361851__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A VRRP6 group performs a master/backup switchover if the master device fails or if a network is busy. After the original master device recovers or network communication is restored, the VRRP6 group reselects the master device based on device priorities.</p>
<p>If a network frequently flaps, service traffic may fail to be forwarded. To resolve this issue, configure VRRP6 stability functions to improve VRRP6 group stability. This minimizes network interruptions or packet loss caused by frequent master/backup VRRP6 switchovers. <a href="#EN-US_TASK_0172361851__tab_dc_vrp_vrrp6_cfg_010501">Table 1</a> describes VRRP6 stability functions.</p>

<div class="tableBorder"><a name="EN-US_TASK_0172361851__tab_dc_vrp_vrrp6_cfg_010501"></a><a name="tab_dc_vrp_vrrp6_cfg_010501"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172361851__tab_dc_vrp_vrrp6_cfg_010501" frame="border" border="1" rules="all"><caption><b>Table 1 </b>VRRP6 stability functions</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="41.3%" id="mcps1.4.1.3.2.3.1.1" liSelected="liSelected"><p>Function Item</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="58.699999999999996%" id="mcps1.4.1.3.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="41.3%" headers="mcps1.4.1.3.2.3.1.1 "><p><a href="#EN-US_TASK_0172361851__step_01">Enabling VRRP6 preemption and configuring a preemption delay</a></p>
</td>
<td class="cellrowborder" valign="top" width="58.699999999999996%" headers="mcps1.4.1.3.2.3.1.2 "><p>If a network is unstable, configure either of the following preemption modes to improve master/backup state stability, and to prevent dual masters from coexisting and hosts from learning an incorrect MAC address of the master device due to frequent master/backup switchovers:</p>
<ul><li>Immediate preemption: The preemption delay is 0s, indicating that a backup device immediately preempts the master role after the master device fails. This mode minimizes service interruption duration.</li><li>Delayed preemption: The master device preempts the master role after a specified preemption delay following recovery. Specifically, the master device waits for other services to recover (for example, route convergence is complete) before it preempts the master role to minimize packet loss.</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.3%" headers="mcps1.4.1.3.2.3.1.1 "><p><a href="#EN-US_TASK_0172361851__step_02">Configuring an interval for sending VRRP6 Advertisement packets</a></p>
</td>
<td class="cellrowborder" valign="top" width="58.699999999999996%" headers="mcps1.4.1.3.2.3.1.2 "><p>A backup device may fail to receive VRRP6 Advertisement packets before the configured timeout period expires, leading to incorrect preemption of the master role due to heavy network traffic or timer differences between devices. To resolve this problem, set the interval for sending VRRP6 Advertisement packets on the master device to a larger value.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.3%" headers="mcps1.4.1.3.2.3.1.1 "><p><a href="#EN-US_TASK_0172361851__step_03">Configuring a VRRP6 status recovery delay</a></p>
</td>
<td class="cellrowborder" valign="top" width="58.699999999999996%" headers="mcps1.4.1.3.2.3.1.2 "><p>Frequent changes to the status of the interface on which a VRRP6 group resides result in the VRRP6 status frequently flapping. To resolve this problem, configure a VRRP6 status recovery delay. Once set, the VRRP6 group only responds to a VRRP6 interface up event after the specified status recovery delay expires, preventing frequent VRRP6 status flapping caused by frequent interface status changes.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="41.3%" headers="mcps1.4.1.3.2.3.1.1 "><p><a href="#EN-US_TASK_0172361851__cmd75111873620">Configuring a delay for sending the first packet of a VRRP6 group</a></p>
</td>
<td class="cellrowborder" valign="top" width="58.699999999999996%" headers="mcps1.4.1.3.2.3.1.2 "><p>When the device or board is restarted and the traffic is heavy, the backup device may not receive protocol packets from the master device immediately after the restart. As a result, the backup device becomes the master device due to a timeout, causing VRRP status flapping or the configured preemption delay not to take effect. To prevent this issue, you can set a delay for sending the first packet of the VRRP group.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172361851__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li id="EN-US_TASK_0172361851__step_01"><span id="EN-US_TASK_0172361851__">Enable VRRP6 preemption and configure a preemption delay.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The view of the interface on which a VRRP6 group resides is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>preempt-mode</span></strong> <strong><span>timer</span></strong> <strong><span>delay</span></strong> <i><span class="varname">delay-time</span></i></span><p><p>A preemption delay is configured for the device in the VRRP6 group.</p>
<p>When a VRRP6 group works in immediate preemption mode, a backup device in the group can immediately preempt the master role when its priority is higher than that of the master device.</p>
<p>You can run the <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>preempt-mode</span></strong> <strong><span>disable</span></strong> command to configure the non-preemption mode for devices in a VRRP6 group. When a VRRP6 group works in non-preemption mode, a backup device (regardless of priority) cannot preempt the master role as long as the master device is working properly.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When the IP address owner recovers from a fault, it immediately becomes the master device despite the configured delay. A preemption delay is a period of time during which the original master device in the backup state is waiting to preempt the master role, and it does not apply to the IP address owner. Consequently, in a VRRP6 group that needs to be configured with a preemption delay, the master device cannot be configured as the IP address owner.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172361851__step_02"><span id="EN-US_TASK_0172361851__">Configure an interval for sending VRRP6 Advertisement packets.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The view of the interface on which a VRRP6 group resides is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>timer</span></strong> <strong><span>advertise</span></strong> <i><span class="varname">advertise-interval</span></i></span><p><p>An interval at which the master device in the VRRP6 group sends VRRP6 Advertisement packets is configured.</p>
</p><p></p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>timer</span></strong> <strong><span>advertise</span></strong> <strong><span>millisecond</span></strong> <i><span class="varname">millisecond-interval</span></i></span><p><p>An interval (in milliseconds) for sending VRRP6 Advertisement packets is set.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172361851__step_03"><span id="EN-US_TASK_0172361851__">Configure a VRRP6 status recovery delay.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The view of the interface on which a VRRP6 group resides is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp6+recover-delay"><b><span class="cmdname">vrrp6 recover-delay</span></b></a> <i><span class="varname">delay-value</span></i></span><p><p>A VRRP6 status recovery delay is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span><a name="EN-US_TASK_0172361851__cmd75111873620"></a><a name="cmd75111873620"></a>Configure a delay for sending the first packet of a VRRP6 group.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp+first-packet-delay"><b><span class="cmdname">vrrp first-packet-delay</span></b></a> <i><span class="varname">delay-value</span></i></span><p><p>A delay for sending the first packet of the VRRP6 group is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0103.html">Configuring Basic VRRP6 Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0104.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vrrp6_cfg_0106.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>