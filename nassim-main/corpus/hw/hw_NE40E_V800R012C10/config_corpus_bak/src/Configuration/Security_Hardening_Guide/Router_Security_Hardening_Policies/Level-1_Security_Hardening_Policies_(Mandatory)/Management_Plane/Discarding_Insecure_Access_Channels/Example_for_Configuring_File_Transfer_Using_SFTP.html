
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Example for Configuring File Transfer Using SFTP">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_hardening_2003.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="l00799643,z00588052">
<meta name="DC.Publisher" content="20240229">
<meta name="OWNER" content="l00799643,z00588052">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x60031980">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0000001134463702">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring File Transfer Using SFTP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CONCEPT_0000001134463702"></a><a name="EN-US_CONCEPT_0000001134463702"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring File Transfer Using SFTP</h1>
<div><p></p>
<div class="section"><h4 class="sectiontitle">Networking Requirements</h4><p>In <a href="#EN-US_CONCEPT_0000001134463702__fig_01">Figure 1</a>, if the SFTP server function is enabled on the device functioning as an SSH server, the PC functioning as an SFTP client can connect to the SSH server after being authenticated in all, RSA, DSA, password, password-rsa, or password-dsa mode.</p>
<p>This example describes how to configure login to the SSH server in password mode.</p>
<div class="fignone" id="EN-US_CONCEPT_0000001134463702__fig_01"><a name="EN-US_CONCEPT_0000001134463702__fig_01"></a><a name="fig_01"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for performing file operations using SFTP</span><br><span><img class="vsd" src="figure/en-us_image_0000001180503161.png" width="NaN" height="NaN"></span></div>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary=""><tr><td valign="top"><p>Device Name</p>
</td>
<td valign="top"><p>Interface</p>
</td>
<td valign="top"><p>IP Address</p>
</td>
</tr>
<tr><td valign="top"><p>SSH Server</p>
</td>
<td valign="top"><p>GE<span>0/1/1</span></p>
</td>
<td valign="top"><p>10.137.217.225/16</p>
</td>
</tr>
<tr><td valign="top"><p>SSH Server</p>
</td>
<td valign="top"><p>Loopback0</p>
</td>
<td valign="top"><p>1.1.1.1/32</p>
</td>
</tr>
</table></div>
</div>
<div class="section"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Generate a local key pair on the SSH server to implement secure data exchange between the server and client.</li><li>Configure an SSH user, including setting an authentication type, username, password, and authorized directory for the user.</li><li>Enable the SFTP server function on the SSH server and configure the service type for the SSH user.</li><li>Configure the source interface of the SSH server.</li></ol>
</div>
<div class="section"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li>SSH user's authentication type: password authentication; username: client001 (with the password YsHsjx_202206)</li><li>User level 3 for user <strong>client001</strong>.</li><li>IP address of the SSH server: 10.137.217.225</li><li>Loopback address of the SSH server: 1.1.1.1</li></ul>
</div>
<div class="section"><h4 class="sectiontitle">Procedure</h4><ol><li>Generate a local key pair on the server.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname SSH Server</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>rsa local-key-pair create</strong></pre>
<pre class="screen">The key name will be: HUAWEI_Host   
The range of public key size is (2048, 3072).  
NOTE: Key pair generation will take a short while.  
Please input the modulus [default = 3072]:3072</pre>
</li><li>Configure the username and password for the SSH user on the server.<pre class="screen">[<span class="keyword">*</span>SSH Server] <strong>aaa</strong>
[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 password</strong>
Please configure the password (8-128)
Enter Password:
Confirm Password:
Info: A new user is added.
<span>[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 level 3</strong></span>
[<span class="keyword">*</span>SSH Server-aaa] <strong>local-user client001 service-type ssh</strong>
[<span class="keyword">*</span>SSH Server-aaa] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-aaa] <strong>quit</strong></pre>
</li><li>Enable the SFTP server function and set the service type to SFTP.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>interface loopback 0 </strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server-LoopBack0] <strong>ip address 1.1.1.1 255.255.255.255</strong>
[<span class="keyword">*</span>SSH Server-LoopBack0] <strong>quit</strong>
[<span class="keyword">*</span>SSH Server] <strong>sftp server enable</strong>
[<span class="keyword">*</span>SSH Server] <strong>ssh server-source -i loopback 0</strong>
[<span class="keyword">*</span>SSH Server] <strong>ssh user client001</strong>
[<span class="keyword">*</span>SSH Server] <strong>ssh user client001 authentication-type password</strong>
[<span class="keyword">*</span>SSH Server] <strong>ssh user client001 service-type sftp</strong>
[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</li><li>Configure the authorized directory for the SSH user.<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>SSH Server] <strong>ssh user client001 sftp-directory cfcard:</strong>
[<span class="keyword">*</span>SSH Server] <strong>commit</strong></pre>
</li><li>Verify the configuration.<p>Start the SFTP software on the client, and enter the user name, password, and port number (22 by default) to access the SSH server and transfer files.</p>
</li></ol>
</div>
<div class="section"><h4 class="sectiontitle">Configuration File</h4><ul><li>SSH server configuration file</li></ul>
<pre class="screen">#
 sysname SSH Server
#
aaa
 local-user client001 password irreversible-cipher $1a$jbB7=)5o.6$::j(W-#|XF&amp;f6"M0&gt;X**1bD0%2_"{4XX!lO="Sn0$
<span> local-user client001 level 3</span>
 local-user client001 service-type ssh
#
<span>interface GigabitEthernet<span>0/1/1</span></span>
 undo shutdown
 ip address 10.137.217.225 255.255.0.0
#
interface loopback 0
 ip address 1.1.1.1 255.255.255.255
<span>sftp server enable</span>
ssh server-source -i loopback 0
ssh user client001
ssh user client001 authentication-type password
ssh user client001 service-type sftp
ssh user client001 sftp-directory cfcard:
#
return</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_sec_hardening_2003.html">Discarding Insecure Access Channels
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
</div>
</div>
</body>
</html>