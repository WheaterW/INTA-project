
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring PPP Negotiation Parameters">
<meta name="abstract" content="For a PPP link to be established between two communicating devices that have PPP enabled, configure the following PPP negotiation parameters: MRU, negotiation timeout period, PPP LCP link dead duration, and DNS server IP address.">
<meta name="description" content="For a PPP link to be established between two communicating devices that have PPP enabled, configure the following PPP negotiation parameters: MRU, negotiation timeout period, PPP LCP link dead duration, and DNS server IP address.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ppp_cfg_0027.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ppp_cfg_0028.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ppp_cfg_0030.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,pppne,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PPP">
<meta name="featuretype" content="WAN Access">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PPP">
<meta name="featuretype" content="WAN Access">
<meta name="featurename" content="PPP">
<meta name="featuretype" content="WAN Access">
<meta name="featurename" content="PPP">
<meta name="featuretype" content="WAN Access">
<meta name="OWNER" content="f00453093">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="f00453093">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172364164">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>(Optional) Configuring PPP Negotiation Parameters</title>
</head>
<body><a name="EN-US_TASK_0172364164"></a><a name="EN-US_TASK_0172364164"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring PPP Negotiation Parameters</h1>
<div class="taskbody"><p>For a PPP link to be established between two communicating devices that have PPP enabled, configure the following PPP negotiation parameters: MRU, negotiation timeout period<span>, PPP LCP link dead duration</span><span>, and DNS server IP address</span>.</p>
<div class="context"><a name="EN-US_TASK_0172364164__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A PPP link is established between two communicating devices after successful LCP negotiation and NCP negotiation. After the physical link goes Up, the two devices enter the link establishment phase, during which one device initiates LCP negotiation. <span>After LCP negotiation succeeds, if the two devices have a network layer protocol configured, the device continues to initiate NCP negotiation on network layer packet attributes and types.</span></p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Usage scenario for negotiation parameters</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="26.090000000000003%" id="mcps1.4.1.2.2.4.1.1" liSelected="liSelected"><p>Negotiation Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="55.52%" id="mcps1.4.1.2.2.4.1.2" liSelected="liSelected"><p>Usage Scenario</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="18.39%" id="mcps1.4.1.2.2.4.1.3" liSelected="liSelected"><p>Negotiation Phase</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.1.2.2.4.1.1 "><p>PPP MRU</p>
</td>
<td class="cellrowborder" valign="top" width="55.52%" headers="mcps1.4.1.2.2.4.1.2 "><p>If an MTU is configured on an interface of a PPP link, enable the PPP MRU negotiation function so that interfaces on both ends of the PPP link have the same MTU, which ensures proper data transmission. If the interfaces have different MTUs, the smaller MTU will be selected as the PPP link MTU after the negotiation.</p>
</td>
<td class="cellrowborder" valign="top" width="18.39%" headers="mcps1.4.1.2.2.4.1.3 "><p>LCP negotiation phase</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.1.2.2.4.1.1 "><p>Negotiation timeout period</p>
</td>
<td class="cellrowborder" valign="top" width="55.52%" headers="mcps1.4.1.2.2.4.1.2 "><p>During LCP negotiation, the local device sends an LCP negotiation packet to the remote device. If the local device does not receive a reply packet from the remote device within the specified negotiation timeout period, the local device resends an LCP negotiation packet.</p>
</td>
<td class="cellrowborder" valign="top" width="18.39%" headers="mcps1.4.1.2.2.4.1.3 "><p>LCP negotiation phase</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.1.2.2.4.1.1 "><p>LCP link dead duration</p>
</td>
<td class="cellrowborder" valign="top" width="55.52%" headers="mcps1.4.1.2.2.4.1.2 "><p>During LCP negotiation, if the local device fails to receive a reply packet from the remote device after retransmitting LCP negotiation packets for a specified number of times, the LCP negotiation enters the Dead state, and the devices stop performing LCP negotiation. In this situation, configure an LCP link dead duration. After the duration elapses, the local device will re-initiate LCP negotiation.</p>
</td>
<td class="cellrowborder" valign="top" width="18.39%" headers="mcps1.4.1.2.2.4.1.3 "><p>LCP negotiation phase</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.1.2.2.4.1.1 "><p>DNS server IP address</p>
</td>
<td class="cellrowborder" valign="top" width="55.52%" headers="mcps1.4.1.2.2.4.1.2 "><div class="p">During IPCP negotiation, the local device can either provide a DNS server IP address for the remote device or accept the DNS server IP address assigned by the remote device. A DNS server is responsible for resolving domain names.<ul><li>When a device is connected to a remote device over a PPP link, for example, a PC dials up to the device, configure the device to assign a DNS server IP address to the PC.</li><li>When a device is connected to a carrier's access server over a PPP link, configure the device to accept the DNS server IP address assigned by the access server.</li></ul>
</div>
</td>
<td class="cellrowborder" valign="top" width="18.39%" headers="mcps1.4.1.2.2.4.1.3 "><p>NCP negotiation phase</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="26.090000000000003%" headers="mcps1.4.1.2.2.4.1.1 "><p>OSICP and MPLSCP</p>
</td>
<td class="cellrowborder" valign="top" width="55.52%" headers="mcps1.4.1.2.2.4.1.2 "><p>When the default OSICP and MPLSCP configurations differ on devices that are to communicate, enables or disables negotiation to ensure consistent configurations on both devices.</p>
</td>
<td class="cellrowborder" valign="top" width="18.39%" headers="mcps1.4.1.2.2.4.1.3 "><p>NCP negotiation phase</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In VS mode, the configuration of Negotiation timeout period is supported only on the admin VS.</p>
</div></div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172364164__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure PPP MRU negotiation.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ppp+mru-negotiate"><b><span class="cmdname">ppp mru-negotiate</span></b></a> <span>{ <strong><span>ipv4</span></strong> | <strong><span>ipv6</span></strong> }</span></span></span><p><p>MRU negotiation is enabled at the link control layer.</p>
</p><p><div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>If an IPv6 MTU is configured on the interface, enable PPP IPv6 MRU negotiation for the device. After PPP MRU negotiation is enabled, to make this configuration take effect, you must run the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a>, <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a>, <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname">undo shutdown</span></b></a>, and <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> commands in sequence, or run the <a href="cmdqueryname=restart"><b><span class="cmdname">restart</span></b></a> and <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> commands.</p>
</div></div>
</p></li></ol>
</li><li><span>Configure a negotiation timeout period.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ppp+timer+negotiate"><b><span class="cmdname">ppp timer negotiate</span></b></a> <i><span class="varname">seconds</span></i></span></span><p><p>A negotiation timeout period is configured.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a PPP LCP link dead duration.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ppp+timer+link-dead"><b><span class="cmdname">ppp timer link-dead</span></b></a> <i><span class="varname">time</span></i></span></span><p><p>The PPP LCP link dead duration is configured.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a DNS server IP address</span><p><ul><li>Configure the device to assign a DNS server IP address to the remote device.<ol><li>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p>The system view is displayed.</p>
</li><li>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span><p>The interface view is displayed.</p>
</li><li>Run <span><a href="cmdqueryname=ppp+ipcp+dns"><b><span class="cmdname">ppp ipcp dns</span></b></a> <i><span class="varname">primary-dns-address</span></i> [ <i><span class="varname">secondary-dns-address</span></i> ]</span><p>The device is configured to assign a DNS server IP address to the remote device.</p>
</li></ol>
</li><li>Configure the device to accept any DNS server IP address assigned by the remote device.<ol><li>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p>The system view is displayed.</p>
</li><li>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span><p>The interface view is displayed.</p>
</li><li>Run <span><a href="cmdqueryname=ppp+ipcp+dns+admit-any"><b><span class="cmdname">ppp ipcp dns admit-any</span></b></a></span><p>The device is configured to accept any DNS server address assigned by the remote device.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the remote device forcibly assigns a DNS server address to the local device, the local device may refuse to accept the address, causing a negotiation failure between the two devices. To prevent this situation, run the <strong>ppp ipcp dns admit-any</strong> command to configure the local device to accept any DNS server IP address assigned by the remote device.</p>
</div></div>
</li></ol>
</li></ul>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>After a DNS server address is configured, to make this configuration take effect, you must run the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a>, <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a>, <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname">undo shutdown</span></b></a>, <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a>, or <a href="cmdqueryname=restart"><b><span class="cmdname">restart</span></b></a>, <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> commands.</p>
</div></div>
</p></li><li><span>Configure the OSICP and MPLSCP</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=ppp+osicp"><b><span class="cmdname">ppp osicp</span></b></a> { <strong><span>enable</span></strong> | <strong><span>disable</span></strong> }</span> or<span><a href="cmdqueryname=ppp+mplscp"><b><span class="cmdname"> ppp mplscp</span></b></a> { <strong><span>enable</span></strong> | <strong><span>disable</span></strong> }</span></span><p><p>The negotiation between two devices before OSICP and MPLSCP go Up on both devices can be enabled or disabled.</p>
</p><p><div class="p">When the default OSICP and MPLSCP configurations differ on devices that are to communicate, run the <a href="cmdqueryname=ppp+osicp"><b><span class="cmdname">ppp osicp</span></b></a> or <a href="cmdqueryname=ppp+mplscp"><b><span class="cmdname">ppp mplscp</span></b></a> command as follows to ensure consistent configurations on both devices:<ul><li><p>If OSICP and MPLSCP are configured to go Up without negotiation on a peer device, run the <a href="cmdqueryname=ppp+osicp"><b><span class="cmdname">ppp osicp</span></b></a> <strong><span>disable</span></strong> or <a href="cmdqueryname=ppp+mplscp"><b><span class="cmdname">ppp mplscp</span></b></a> <strong><span>disable</span></strong> command on a local device.</p>
</li><li><p>If OSICP and MPLSCP are configured to go Up only after negotiation on a peer device, run the <a href="cmdqueryname=ppp+osicp"><b><span class="cmdname">ppp osicp</span></b></a> <strong><span>enable</span></strong> or <a href="cmdqueryname=ppp+mplscp"><b><span class="cmdname">ppp mplscp</span></b></a> <strong><span>enable</span></strong> command on a local device.</p>
</li></ul>
</div>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Run the <a href="cmdqueryname=shutdown"><b><span class="cmdname">shutdown</span></b></a> and <a href="cmdqueryname=undo+shutdown"><b><span class="cmdname">undo shutdown</span></b></a> command in the interface view to make the configuration take effect.</p>
</div></div>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ppp_cfg_0027.html">Configuring an Interface to Support PPP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ppp_cfg_0028.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_ppp_cfg_0030.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>