
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Basic IGMP Functions">
<meta name="abstract" content="This section provides an example for configuring basic IGMP functions.">
<meta name="description" content="This section provides an example for configuring basic IGMP functions.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2067.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2069.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366768">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring Basic IGMP Functions</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366768"></a><a name="EN-US_TASK_0172366768"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Basic IGMP Functions</h1>
<div class="taskbody"><p>This section provides an example for configuring basic IGMP functions.</p>
<div class="context"><a name="EN-US_TASK_0172366768__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the ISP network shown in <a href="#EN-US_TASK_0172366768__fig_dc_vrp_multicast_cfg_206801">Figure 1</a>, multicast services are deployed. An IGP has been deployed on the network, and unicast is running properly. Hosts on the network are required to receive VOD information in multicast mode. HostA and HostB are required to steadily receive popular programs from the multicast group 225.1.1.1.</p>
<div class="fignone" id="EN-US_TASK_0172366768__fig_dc_vrp_multicast_cfg_206801"><a name="EN-US_TASK_0172366768__fig_dc_vrp_multicast_cfg_206801"></a><a name="fig_dc_vrp_multicast_cfg_206801"></a><span class="figcap"><b>Figure 1 </b>Configuring basic IGMP functions</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interface1, interface2, interface3, and interface4 in this example represent GigabitEthernet<span>0/1/0</span>, GigabitEthernet<span>0/2/0</span>, GigabitEthernet<span>0/2/2</span>, and GigabitEthernet<span>0/2/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_multicast_cfg_206801.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.4.1.4.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.4.1.4.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.4.1.4.1.3" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>A</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>10.110.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>B</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.2.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>10.110.2.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>C</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.3.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>10.110.2.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>D</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.4.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.2.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/3</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.3.2/24</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366768__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>During configuration, note the following precautions:</p>
<ul><li><p>Both IGMP and PIM-SM must be enabled on the interfaces directly connected to hosts.</p>
</li><li><p>Interfaces connected to the same user network segment must run the same IGMP version.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366768__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><ol><li><p>Configure an IP address for each <span class="keyword">Router</span> interface and configure a unicast routing protocol.</p>
</li><li><p>Enable multicast routing on all multicast <span class="keyword">Router</span>s.</p>
</li><li><p>Enable PIM-SM on <span class="keyword">Router</span> interfaces.</p>
</li><li><p>Enable IGMP on interfaces that connect to hosts.</p>
</li><li><p>Configure GE <span>0/1/0</span> on <span class="keyword">Device</span> A to statically join IGMP group 225.1.1.1.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366768__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IGMPv2 runs on <span class="keyword">Router</span>s and hosts</p>
</li><li><p>Address of the IGMP group that the interface statically joins</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366768__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each <span class="keyword">Router</span> interface and a unicast routing protocol. For configuration details, see Configuration Files in this section.</span></li><li><span>Enable multicast routing on each <span class="keyword">Router</span> and PIM-SM on each <span class="keyword">Router</span> interface.</span><p><p># Configure <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>multicast routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/0</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface GigabitEthernet <span>0/2/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/2</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface GigabitEthernet <span>0/2/3</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/3</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/3</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/3</span>] <strong>quit</strong></pre>
<p>Repeat this step for <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, and <span class="keyword">Device</span> C. For configuration details, see Configuration Files in this section.</p>
</p></li><li><span>Configure a Rendezvous Point (RP).</span><p><p># Configure BSR RP on <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>pim</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim] <strong>c-bsr GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim] <strong>c-rp GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-pim] <strong>quit</strong></pre>
</p></li><li><span>Enable IGMP on interfaces that connect to hosts.</span><p><p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>igmp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<p>Repeat this step for <span class="keyword">Device</span> B and <span class="keyword">Device</span> C. For configuration details, see Configuration Files in this section.</p>
</p></li><li><span>Configure GE <span>0/1/0</span> on <span class="keyword">Device</span> A to statically join IGMP group 225.1.1.1.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>igmp static-group 225.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <strong>display igmp interface</strong> command to view brief IGMP information on the <span class="keyword">Router</span> interfaces. The following example uses IGMP information on GE <span>0/1/0</span> of <span class="keyword">Device</span> B.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display igmp interface</strong></pre>
<pre class="screen">Interface information of VPN-Instance: public net
 GigabitEthernet<span>0/1/0</span>(10.110.2.1):
   IGMP is enabled   
   Current IGMP version is 2   
   IGMP state: up
   IGMP group policy: none
   IGMP limit: -
   Value of <span>q</span>uery interval for IGMP (negotiated): -
   <span>Value of q</span>uery interval for IGMP(in seconds): 60 s
   <span>Value of o</span>ther querier timeout for IGMP(in seconds): 0 s
   Value of <span>m</span>aximum query response time for IGMP(in seconds): 10 s
   <strong>Querier for IGMP: 10.110.2.1 (this router)</strong>
   Total 1 IGMP Group reported</pre>
<p>The command output shows that <span class="keyword">Device</span> B is a querier. This is because GE <span>0/1/0</span> of <span class="keyword">Device</span> B has the lowest IP address among the interfaces connected to the user network segment.</p>
<p># Run the <a href="cmdqueryname=display+pim+routing-table"><b><span class="cmdname">display pim routing-table</span></b></a> command on <span class="keyword">Device</span> A to check whether GE <span>0/1/0</span> has joined IGMP group 225.1.1.1. The command output shows that the (*, 225.1.1.1) entry is generated, the downstream interface is GE <span>0/1/0</span>, and the protocol type is <strong>static</strong>. The information indicates that GE <span>0/1/0</span> has joined IGMP group 225.1.1.1.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display pim routing-table</strong></pre>
<pre class="screen">VPN-Instance: public net
 Total 1 (*, G) entry; 0 (S, G) entry
 (*, 225.1.1.1)
     RP: 192.168.4.1
     Protocol: pim-sm, Flag: WC
     UpTime: 00:12:17
     Upstream interface: GigabitEthernet<span>0/2/0</span>, Refresh time: 00:12:17
         Upstream neighbor: 192.168.1.2
         RPF prime neighbor: 192.168.1.2
     Downstream interface(s) information:
     Total number of downstreams: 1
         1: GigabitEthernet<span>0/1/0</span>
             <strong>Protocol: static</strong>, UpTime: 00:12:17, Expires: -</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172366768__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
#
multicast routing-enable
#
isis 1
 network-entity 10.0000.0000.0001.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.110.1.1 255.255.255.0
 pim sm
 igmp enable
 igmp static-group 225.1.1.1
 isis enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.1.1 255.255.255.0
 pim sm
 isis enable 1
#
return</pre>
</li><li><p><span class="keyword">Device</span> B configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>B
#
multicast routing-enable
#
isis 1
 network-entity 10.0000.0000.0002.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.110.2.1 255.255.255.0
 pim sm
 igmp enable
 isis enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.2.1 255.255.255.0
 pim sm
 isis enable 1
#
return</pre>
</li><li><p><span class="keyword">Device</span> C configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>C
#
multicast routing-enable
#
isis 1
 network-entity 10.0000.0000.0003.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.110.2.2 255.255.255.0
 pim sm
 igmp enable
 isis enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.3.1 255.255.255.0
 pim sm
 isis enable 1
#
return</pre>
</li><li><p><span class="keyword">Device</span> D configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>D
#
multicast routing-enable
#
isis 1
 network-entity 10.0000.0000.0004.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.4.1 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.1.2 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/2/2</span>
 undo shutdown
 ip address 192.168.2.2 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/2/3</span>
 undo shutdown
 ip address 192.168.3.2 255.255.255.0
 pim sm
 isis enable 1
#
pim
 c-bsr GigabitEthernet<span>0/1/0</span>
 c-rp GigabitEthernet<span>0/1/0</span>
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2067.html">Configuration Examples for IGMP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2069.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>