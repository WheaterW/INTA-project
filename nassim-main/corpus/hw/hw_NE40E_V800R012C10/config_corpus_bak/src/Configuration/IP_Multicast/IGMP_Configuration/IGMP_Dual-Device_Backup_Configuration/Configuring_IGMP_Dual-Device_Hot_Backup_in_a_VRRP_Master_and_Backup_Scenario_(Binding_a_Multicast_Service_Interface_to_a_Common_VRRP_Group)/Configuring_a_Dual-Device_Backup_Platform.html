
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Dual-Device Backup Platform">
<meta name="abstract" content="This section describes how to configure a dual-device backup platform to back up IGMP entries. If a network node or link fails, a rapid multicast service switchover is triggered, improving service reliability.">
<meta name="description" content="This section describes how to configure a dual-device backup platform to back up IGMP entries. If a network node or link fails, a rapid multicast service switchover is triggered, improving service reliability.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0123.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0117a.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IGMP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366752">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Dual-Device Backup Platform</title>
</head>
<body><a name="EN-US_TASK_0172366752"></a><a name="EN-US_TASK_0172366752"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Dual-Device Backup Platform</h1>
<div class="taskbody"><p>This section describes how to configure a dual-device backup platform to back up IGMP entries. If a network node or link fails, a rapid multicast service switchover is triggered, improving service reliability.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0172366752__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>A VRRP group has been created using the <a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> [ <strong><span>virtual-ip</span></strong> <i><span class="varname">virtual-address</span></i> ] command.</p>
<p>An mVRRP group has been created using the <a href="cmdqueryname=admin-vrrp+vrid"><b><span class="cmdname">admin-vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> [ <strong><span>ignore-if-down</span></strong> ] command.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366752__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Context</h4><p>In a VRRP master/backup scenario, a dual-device backup platform enables the master device to back up IGMP entries to the backup device through a remote backup service (RBS) channel, facilitating flexible control and management of multicast services and ensuring multicast service reliability. Configuring a dual-device backup platform includes configuring an RBS, a remote backup profile (RBP), and a dual-device VRRP backup platform.</p>
<p>Perform the following steps on both the master and backup devices:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366752__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an RBS.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-service"><b><span class="cmdname">remote-backup-service</span></b></a> <em>remote-backup-service-name</em></span><p><p>An RBS is created, and the RBS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-ip-address</span></i> <a href="cmdqueryname=source"><b><span class="cmdname">source</span></b></a> <i><span class="varname">source-ip-address</span></i> <a href="cmdqueryname=port"><b><span class="cmdname">port</span></b></a> <i><span class="varname">port-id</span></i></span><p><p>TCP connection parameters are set for the RBS.</p>
</p><p><p><i><span class="varname">peer-ip-address</span></i> specifies the IP address of the peer device that backs up the local device. <i><span class="varname">source-ip-address</span></i> specifies the IP address of the local device. The IP addresses of the master and backup devices must have been configured on their own interfaces, sub-interfaces, or logical interfaces (such as loopback interfaces) and be able to ping each other.</p>
<p><i><span class="varname">port-id</span></i> specifies a TCP port number. The TCP port numbers configured on the master and backup devices must be the same.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure an RBP.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>An RBP is created, and the RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=backup-id"><b><span class="cmdname">backup-id</span></b></a> <i><span class="varname">backup-id</span></i> <a href="cmdqueryname=remote-backup-service"><b><span class="cmdname">remote-backup-service</span></b></a> <i><span class="varname">service-name</span></i></span><p><p>A backup ID is set for the RBP, and the RBP is associated with a specified RBS.</p>
</p><p><p><i><span class="varname">backup-id</span></i> specifies a backup ID for an RBP. You can use a backup ID and an RBS to determine an RBP. The backup IDs configured for the same RBP must be the same on the master and backup devices and can no longer be configured for other RBPs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer-backup"><b><span class="cmdname">peer-backup</span></b></a> <strong><span>hot</span></strong></span><p><p>Hot backup is configured for user information backup between the master and backup devices.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure a dual-device VRRP backup platform.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>An RBP is created, and the RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp-id"><b><span class="cmdname">vrrp-id</span></b></a> <i><span class="varname">vrid</span></i> <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The ID and interface of a VRRP group are associated with the RBP.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure rapid service link switching.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=monitor-group"><b><span class="cmdname">monitor-group</span></b></a> <i><span class="varname">monitor-group-name</span></i></span><p><p>An interface monitoring group is created, and the group view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=monitor+enable"><b><span class="cmdname">monitor enable</span></b></a></span><p><p>The monitoring function is enabled for the interface monitoring group.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=binding+interface"><b><span class="cmdname">binding interface</span></b></a> { <em>interface-type</em><em>interface-number</em> | <em>interface-name</em> } [ <strong>down-weight</strong><em>down-weight-value</em> ]</span><p><p>The interface to be monitored is added to the interface monitoring group.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+routing-enable"><b><span class="cmdname">multicast routing-enable</span></b></a></span><p><p>IP multicast routing is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pim+sm"><b><span class="cmdname">pim sm</span></b></a></span><p><p>PIM-SM is enabled on the interface.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=igmp+enable"><b><span class="cmdname">igmp enable</span></b></a></span><p><p>IGMP is enabled.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects the master and backup devices) Run <a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>track</span></strong> <strong><span>monitor-group</span></strong> [ <i><span class="varname">monitor-group-name</span></i> ] <strong><span>failure-ratio</span></strong> <i><span class="varname">failure-ratio-value</span></i> [ <strong><span>link</span></strong> | [ <strong><span>reduced</span></strong> <i><span class="varname">priority-value</span></i> ] ]</span><p><p>The mVRRP group is enabled to track the interface monitoring group.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects to a downstream device) Run <a href="cmdqueryname=vrrp+vrid"><b><span class="cmdname">vrrp vrid</span></b></a> <i><span class="varname">virtual-router-id1</span></i> <strong><span>track</span></strong> <strong><span>admin-vrrp</span></strong> <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> <strong><span>vrid</span></strong> <i><span class="varname">virtual-router-id2</span></i></span><p><p>The service VRRP group is bound to the mVRRP group in flowdown mode.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects to a downstream device) Run <a href="cmdqueryname=multicast+track+vrrp"><b><span class="cmdname">multicast track vrrp</span></b></a> <strong><span>vrid</span></strong> <i><span class="varname">vrid-value</span></i></span><p><p>The multicast service interface is bound to the VRRP group.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects to a downstream device) Run <a href="cmdqueryname=pim+ignore+dr-state"><b><span class="cmdname">pim ignore dr-state</span></b></a></span><p><p>The interface is enabled to ignore the PIM DR state.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects to a downstream device) Run <a href="cmdqueryname=pim+ignore+assert-state"><b><span class="cmdname">pim ignore assert-state</span></b></a></span><p><p>The interface is enabled to ignore the PIM Assert state.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects to a downstream device) Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>The interface is bound to the RBP.</p>
</p></li><li class="substepexpand"><span>(On the interface that connects to a downstream device) Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0123.html">Configuring IGMP Dual-Device Hot Backup in a VRRP Master/Backup Scenario (Binding a Multicast Service Interface to a Common VRRP Group)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0117a.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>