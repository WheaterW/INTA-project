
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring MSDP Peer Authentication">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0056.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0058.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0111.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367010">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring MSDP Peer Authentication</title>
</head>
<body><a name="EN-US_TASK_0172367010"></a><a name="EN-US_TASK_0172367010"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring MSDP Peer Authentication</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0172367010__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>MSDP peer authentication modes include MSDP Message-Digest Algorithm 5 (MD5) authentication, TCP-AO authentication, and keychain authentication.</p>
<p>By default, no authentication mode is configured for an MSDP peer. You are advised to configure an authentication mode to ensure system security.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172367010__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li id="EN-US_TASK_0172367010__step_dc_vrp_multicast_cfg_005901"><span id="EN-US_TASK_0172367010__cmd1021179406214041">Configure MSDP MD5 authentication.</span><ol id="EN-US_TASK_0172367010__substeps192334320214041"><li class="substepexpand" id="EN-US_TASK_0172367010__substep79070223214041"><span id="EN-US_TASK_0172367010__cmd26924256214326">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172367010__cmdname278617871214326">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172367010__p623587537214326">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172367010__substep1039215285514"><span id="EN-US_TASK_0172367010__cmd6392112145517">Run <a href="cmdqueryname=undo+crypto+weak-algorithm+disable"><b><span class="cmdname" id="EN-US_TASK_0172367010__cmdname2388183119552">undo crypto weak-algorithm disable</span></b></a></span><p><p id="EN-US_TASK_0172367010__p122249171419">The weak algorithm plug-in is loaded.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172367010__substep633569596214041"><span id="EN-US_TASK_0172367010__cmd799183587214326">Run <span><a href="cmdqueryname=msdp"><b><span class="cmdname" id="EN-US_TASK_0172367010__cmdname1606569814214326">msdp</span></b></a> [ <strong><span id="EN-US_TASK_0172367010__cmdparmname2010655875214326">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172367010__varname542693715214326">vpn-instance-name</span></i> ]</span></span><p><p id="EN-US_TASK_0172367010__p647460093214326">The MSDP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172367010__substep1345208666214041"><span id="EN-US_TASK_0172367010__cmd214213846214041">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0172367010__cmdname1057594549214041">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172367010__varname2037652434214041">peer-address</span></i> <strong><span id="EN-US_TASK_0172367010__cmdparmname1962936801214041">password</span></strong> { <strong><span id="EN-US_TASK_0172367010__cmdparmname2078963502214041">cipher</span></strong> <i><span class="varname" id="EN-US_TASK_0172367010__varname1632999404214041">cipher-password</span></i> | <strong><span id="EN-US_TASK_0172367010__cmdparmname1725969612214041">simple</span></strong> <i><span class="varname" id="EN-US_TASK_0172367010__varname1662359548214041">simple-password</span></i> } MSDP</span><p><p id="EN-US_TASK_0172367010__p81280512462">MD5 authentication is configured.</p>
</p><p><div class="note" id="EN-US_TASK_0172367010__note962912215713"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0172367010__en-us_task_0171883152_ul389508518213918"><li id="EN-US_TASK_0172367010__en-us_task_0171883152_li1977065046213918"><p id="EN-US_TASK_0172367010__en-us_task_0171883152_password_tips_1"><a name="EN-US_TASK_0172367010__en-us_task_0171883152_li1977065046213918"></a><a name="en-us_task_0171883152_li1977065046213918"></a>The password must be at least eight characters long and contain at least two of the following character types: uppercase letters, lowercase letters, digits, and special characters (excluding question marks and spaces).</p>
</li><li id="EN-US_TASK_0172367010__en-us_task_0171883152_li363226100213918"><p id="EN-US_TASK_0172367010__en-us_task_0171883152_password_tips_2"><a name="EN-US_TASK_0172367010__en-us_task_0171883152_li363226100213918"></a><a name="en-us_task_0171883152_li363226100213918"></a>For security purposes, you are advised to specify the ciphertext mode and change the password periodically.</p>
</li><li id="EN-US_TASK_0172367010__li1825816410579">For security purposes, MD5 is not recommended. If it is required, run the <a href="cmdqueryname=undo+crypto+weak-algorithm+disable"><b><span class="cmdname" id="EN-US_TASK_0172367010__cmdname11541845105717">undo crypto weak-algorithm disable</span></b></a> command to enable the weak security algorithm function first.</li></ul>
</div></div>
</p><p><p id="EN-US_TASK_0172367010__step_dc_vrp_multicast_cfg_005903">MD5 authentication can be configured on MSDP peers to provide security protection. To use MD5 authentication, enable it on both peers and set the same password for them. After this function is enabled, the transmit end peer sends an MD5-encrypted MSDP message, which is transferred to the receive end peer over a TCP connection. The receive end peer decrypts the MSDP message based on the uniform MD5 encryption rules and the key carried in the message. After decrypting the message successfully, the receive end peer sends the message to the MSDP module for processing. Only the MSDP messages that pass MD5 authentication are processed, which prevents attacks that are conducted using malicious messages.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172367010__substep358663097214041"><span id="EN-US_TASK_0172367010__cmd1146166709214326">Run <span><a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172367010__cmdname951691502214326">commit</span></b></a></span></span><p><p id="EN-US_TASK_0172367010__p2024487812214326">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0172367010__step_dc_vrp_multicast_cfg_005902"><span id="EN-US_TASK_0172367010__cmd1722359117214041">Configure MSDP keychain authentication.</span><ol id="EN-US_TASK_0172367010__substeps1151776936214041"><li class="substepexpand" id="EN-US_TASK_0172367010__substep1279370134214041"><span id="EN-US_TASK_0172367010__cmd856514399214326">Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172367010__cmdname904262941214326">system-view</span></b></a></span></span><p><p id="EN-US_TASK_0172367010__p393282079214326">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172367010__substep2040765924214041"><span id="EN-US_TASK_0172367010__cmd32770060214326">Run <span><a href="cmdqueryname=msdp"><b><span class="cmdname" id="EN-US_TASK_0172367010__cmdname1599124923214326">msdp</span></b></a> [ <strong><span id="EN-US_TASK_0172367010__cmdparmname1446378985214326">vpn-instance</span></strong> <i><span class="varname" id="EN-US_TASK_0172367010__varname2098199179214326">vpn-instance-name</span></i> ]</span></span><p><p id="EN-US_TASK_0172367010__p292726810214326">The MSDP view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172367010__substep796676594214041"><span id="EN-US_TASK_0172367010__cmd182976313214041">Run <a href="cmdqueryname=peer"><b><span class="cmdname" id="EN-US_TASK_0172367010__cmdname1062170484214041">peer</span></b></a> <i><span class="varname" id="EN-US_TASK_0172367010__varname1694094842214041">peer-address</span></i> <strong><span id="EN-US_TASK_0172367010__cmdparmname1972150000214041">keychain</span></strong> <i><span class="varname" id="EN-US_TASK_0172367010__varname358489708214041">keychain-name</span></i></span><p><p id="EN-US_TASK_0172367010__p1122651391214326">MSDP keychain authentication is configured.</p>
<p id="EN-US_TASK_0172367010__p1567025682214041">Keychain and new TCP extension options enable each TCP connection to be configured with a password. You can set different encryption algorithms and validity periods for passwords. In addition, passwords can be changed at any time. This significantly improves security of encrypted messages. Only the messages that are authenticated using a keychain are processed. This effectively prevents attacks conducted using malicious messages.</p>
<p id="EN-US_TASK_0172367010__p373268294214041">Keychain authentication must be configured on both MSDP peers, and the keychains configured at both ends must use the same encryption algorithm and password so that a TCP connection can be set up and MSDP messages can be exchanged properly.</p>
<p id="EN-US_TASK_0172367010__p1978515362818">Before configuring MSDP keychain authentication, configure the keychain corresponding to <i><span class="varname" id="EN-US_TASK_0172367010__varname1178673612813">keychain-name</span></i>; otherwise, the TCP connection cannot be set up.</p>
<div class="note" id="EN-US_TASK_0172367010__note1735023721214041"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172367010__p2010719881214041">MSDP MD5 authentication and MSDP keychain authentication are mutually exclusive.</p>
<p id="EN-US_TASK_0172367010__p1118485414598">The encryption algorithm used for MD5 authentication poses security risks. Therefore, you are advised to use an authentication mode based on a more secure encryption algorithm.</p>
</div></div>
</p></li></ol>
</li><li><span>Configure TCP-AO authentication.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=msdp"><b><span class="cmdname">msdp</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span><p><p>The MSDP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <a href="cmdqueryname=tcp-ao"><b><span class="cmdname">tcp-ao</span></b></a> <i><span class="varname">tcpAoName</span></i></span><p><p>TCP-AO authentication is configured.</p>
</p><p><p>The <strong>tcp ao</strong> command must be run to configure a TCP-AO name before you configure MSDP TCP-AO authentication; otherwise, no TCP connection can be set up. TCP-AO authentication must be configured at both ends of MSDP peers and the encryption algorithms and passwords configured for TCP-AO on both peers must be the same; otherwise, no TCP connection can be set up between the MSDP peers and MSDP messages cannot be exchanged.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>TCP-AO, MD5, and keychain authentication modes are mutually exclusive.</p>
</div></div>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0056.html">Controlling MSDP Peer Connections
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0058.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0111.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>