
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an Anycast-RP Peer">
<meta name="abstract" content="When sending a PIM Register message to all Anycast-Rendezvous Point (RP) peers, the local RP needs to use the peer addresses as the destination addresses of the Register message.">
<meta name="description" content="When sending a PIM Register message to all Anycast-Rendezvous Point (RP) peers, the local RP needs to use the peer addresses as the destination addresses of the Register message.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2147.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2149.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2151.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366884">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an Anycast-RP Peer</title>
</head>
<body><a name="EN-US_TASK_0172366884"></a><a name="EN-US_TASK_0172366884"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an Anycast-RP Peer</h1>
<div class="taskbody"><p>When sending a PIM Register message to all Anycast-Rendezvous Point (RP) peers, the local RP needs to use the peer addresses as the destination addresses of the Register message.</p>
<div class="context"><a name="EN-US_TASK_0172366884__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The <span class="keyword">Router</span>s functioning as Anycast-RPs can be identified by the same logical address so that the RP in the PIM-SM domain is unique. However, the <span class="keyword">Router</span>s need to distinguish one another during the communication, so the Anycast-RP address cannot be used. To resolve this issue, configure Anycast-RP peers.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366884__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Configure a basic or an advanced ACL as needed.</span><p><ul><li><p>Configure a basic ACL.</p>
<ol type="a"><li>Run <span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl-number</span></i> [ <strong><span>match-order</span></strong> { <strong><span>auto</span></strong> | <strong><span>config</span></strong> } ]</span><p>A basic ACL is created, and the basic ACL view is displayed.</p>
</li><li>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> }</span><p>Rules are configured for the basic ACL.</p>
</li></ol>
</li><li><p>Configure an advanced ACL.</p>
<ol type="a"><li><p>Run <span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">advance-acl-name</span></i> [ <strong><span>advance</span></strong> | [ <strong><span>advance</span></strong> ] <strong><span>number</span></strong> <i><span class="varname">advance-acl-number</span></i> ] | [ <strong><span>number</span></strong> ] <i><span class="varname">advance-acl-number</span></i> } [ <strong><span>match-order</span></strong> { <strong><span>config</span></strong> | <strong><span>auto</span></strong> } ]</span></p>
<p>An advanced ACL is created, and the advanced ACL view is displayed.</p>
</li><li><p>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>ip</span></strong> [ <strong><span>destination</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } ] <sup>*</sup></span></p>
<p>Rules are configured for the advanced ACL.</p>
</li></ol>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=pim"><b><span class="cmdname">pim</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span><p><p>The PIM view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=anycast-rp"><b><span class="cmdname">anycast-rp</span></b></a> <i><span class="varname">rp-address</span></i></span><p><p>The Anycast-RP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> [ <strong><span>fwd-msdp-sa</span></strong> [ <i><span class="varname">acl-number</span></i> | <strong><span>acl-name</span></strong> <i><span class="varname">acl-name</span></i> ] ]</span><p><p>An Anycast-RP peer is specified.</p>
</p><p><ul><li><p><i><span class="varname">peer-address</span></i>: specifies the local address of an Anycast-RP peer.</p>
</li><li><p><strong><span>fwd-msdp-sa</span></strong>: enables a local RP to extract source and group information from received Multicast Source Discovery Protocol (MSDP) Source Active (SA) messages, encapsulate the information into Register messages, and send Register messages to Anycast-RP peers.</p>
</li><li><p>In a PIM-SM domain, all Anycast-RP-capable devices must be fully connected. Anycast-RP peer relationships must be configured between every two Anycast-RPs.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If no ACL is configured, the local RP extracts source/group information from received MSDP SA messages, encapsulates the information into a Register message, and sends the Register message to Anycast-RP peers.</li><li>If an ACL is configured, the local RP uses configured ACL rules to filter multicast group addresses in MSDP SA messages to be forwarded.<ul><li>If an MSDP SA message matches an ACL rule and the action is <strong>permit</strong>, the local RP forwards this message.</li><li>If an MSDP SA message matches an ACL rule and the action is <strong>deny</strong>, the local RP does not forward this message.</li><li>If an MSDP SA message does not match any ACL rule, the local RP does not forward this message.</li><li>If a specified ACL does not exist or does not contain rules, the local RP does not forward MSDP SA messages.</li></ul>
</li></ul>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2147.html">Configuring PIM Anycast-RP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2149.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2151.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>