
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Filtering Policies for SA Messages">
<meta name="abstract" content="By default, an MSDP peer permits all Source Active (SA) messages that pass the Reverse Path Forwarding (RPF) check, and forwards the SA messages to other MSDP peers. To control the transmission of SA messages among MSDP peers, configure filtering policies to filter SA messages to be created, received, or forwarded.">
<meta name="description" content="By default, an MSDP peer permits all Source Active (SA) messages that pass the Reverse Path Forwarding (RPF) check, and forwards the SA messages to other MSDP peers. To control the transmission of SA messages among MSDP peers, configure filtering policies to filter SA messages to be created, received, or forwarded.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0061.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0062.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0063.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367015">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Filtering Policies for SA Messages</title>
</head>
<body><a name="EN-US_TASK_0172367015"></a><a name="EN-US_TASK_0172367015"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Filtering Policies for SA Messages</h1>
<div class="taskbody"><p>By default, an MSDP peer permits all Source Active (SA) messages that pass the Reverse Path Forwarding (RPF) check, and forwards the SA messages to other MSDP peers. To control the transmission of SA messages among MSDP peers, configure filtering policies to filter SA messages to be created, received, or forwarded.</p>
<div class="steps-unordered"><a name="EN-US_TASK_0172367015__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a filtering policy to filter the outgoing locally generated SA messages of a specified VPN instance.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Configure a basic or an advanced ACL as needed.</span><p><div class="p">Configure a basic ACL.<ol type="a"><li>Run the <span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl-number</span></i> [ <strong><span>match-order</span></strong> { <strong><span>auto</span></strong> | <strong><span>config</span></strong> } ]</span> command to create a basic ACL and enter the corresponding ACL view.</li><li>Run the <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> }</span> command to configure a rule for the basic ACL.</li></ol>
</div>
<div class="p">Configure an advanced ACL.<ol type="a"><li>Run the <span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">advance-acl-name</span></i> [ <strong><span>advance</span></strong> | [ <strong><span>advance</span></strong> ] <strong><span>number</span></strong> <i><span class="varname">advance-acl-number</span></i> ] | [ <strong><span>number</span></strong> ] <i><span class="varname">advance-acl-number</span></i> } [ <strong><span>match-order</span></strong> { <strong><span>config</span></strong> | <strong><span>auto</span></strong> } ]</span> command to create an advanced ACL and enter the corresponding ACL view.</li><li>Run the <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>ip</span></strong> [ <strong><span>destination</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } ] <sup>*</sup></span> command to configure a rule for the advanced ACL.</li></ol>
</div>
<p>If a basic ACL is used, run the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command and set the <strong><span>source</span></strong> parameter to the source address of multicast packets.</p>
<p>If an advanced ACL is used, run the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command, set the <strong><span>source</span></strong> parameter to the source address of multicast packets, and set the <strong><span>destination</span></strong> parameter to a multicast group address.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=msdp"><b><span class="cmdname">msdp</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span></span><p><p>The MSDP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=import-source"><b><span class="cmdname">import-source</span></b></a> <strong><span>acl</span></strong> <span>{ </span><i><span class="varname">acl-number</span></i><span> | <i><span class="varname">acl-name</span></i> }</span></span><p><p>The device is configured to filter the outgoing locally generated SA messages of a specified VPN instance.</p>
</p><p><ul><li><p>If no ACL is specified, the device does not send any locally generated SA messages.</p>
</li><li><p>If an ACL is specified, the device sends only the locally generated SA messages that match the filtering policy.</p>
</li></ul>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a filtering policy to filter the locally generated SA messages to be sent to a specified peer.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">advance-acl-name</span></i> [ <strong><span>advance</span></strong> | [ <strong><span>advance</span></strong> ] <strong><span>number</span></strong> <i><span class="varname">advance-acl-number</span></i> ] | [ <strong><span>number</span></strong> ] <i><span class="varname">advance-acl-number</span></i> } [ <strong><span>match-order</span></strong> { <strong><span>config</span></strong> | <strong><span>auto</span></strong> } ]</span></span><p><p>An advanced ACL is created, and the corresponding ACL view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>ip</span></strong> [ <strong><span>destination</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } ] <sup>*</sup></span></span><p><p>A rule is configured for the advanced ACL.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=msdp"><b><span class="cmdname">msdp</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span><p><p>The MSDP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <strong><span>sa-policy local-export acl</span></strong> { <i><span class="varname">advanced-acl-number</span></i> | <i><span class="varname">acl-name</span></i> }</span><p><p>The device is configured to filter the locally generated SA messages to be sent to the specified peer.</p>
</p><p><p>If no ACL is specified, the device does not send any locally generated SA message to the specified peer. If an ACL is specified, the device sends only the locally generated SA messages that match the filtering policy to the specified peer.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Both the <a href="cmdqueryname=import-source"><b><span class="cmdname">import-source</span></b></a> and <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <strong><span>sa-policy local-export</span></strong> commands can be used to configure a filtering policy for locally generated SA messages. If the <a href="cmdqueryname=import-source"><b><span class="cmdname">import-source</span></b></a> command is run in the MSDP view and the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <strong><span>sa-policy local-export</span></strong> command is also run on the MSDP peer, the rule specified in the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <strong><span>sa-policy local-export</span></strong> command preferentially takes effect.</p>
</div></div>
</p></li></ol>
</li><li><span>Configure a filtering policy to filter the SA messages to be received from a specified remote MSDP peer.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">advance-acl-name</span></i> [ <strong><span>advance</span></strong> | [ <strong><span>advance</span></strong> ] <strong><span>number</span></strong> <i><span class="varname">advance-acl-number</span></i> ] | [ <strong><span>number</span></strong> ] <i><span class="varname">advance-acl-number</span></i> } [ <strong><span>match-order</span></strong> { <strong><span>config</span></strong> | <strong><span>auto</span></strong> } ]</span></span><p><p>An advanced ACL is created, and the corresponding ACL view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>ip</span></strong> [ <strong><span>destination</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } ] <sup>*</sup></span></span><p><p>A rule is configured for the advanced ACL.</p>
</p><p><p>In the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command, set the <strong><span>source</span></strong> parameter to the source address of SA messages, and set the <strong><span>destination</span></strong> parameter to a multicast group address.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=msdp"><b><span class="cmdname">msdp</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span></span><p><p>The MSDP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <strong><span>sa-policy</span></strong> <strong><span>import</span></strong> [ <strong><span>acl </span></strong><span>{ </span><i><span class="varname">advanced-acl-number</span></i><span> | <i><span class="varname">acl-name</span></i> }</span> ]</span><p><p>The device is configured to filter the SA messages to be received from a specified remote MSDP peer.</p>
</p><p><p><i><span class="varname">peer-address</span></i>: specifies the IP address of a remote MSDP peer.</p>
<p><strong><span>acl</span></strong> <i><span class="varname">advanced-acl-number</span></i>: specifies the name of an advanced ACL to be used as the filtering policy. The device uses the ACL to determine whether to accept the SA messages to be received from the specified remote MSDP peer.</p>
<ul><li><p>If no ACL is specified, the device does not accept any (S, G) information from the peer specified by <i><span class="varname">peer-address</span></i>.</p>
</li><li><p>If an ACL is specified, the device accepts the matching SA messages received from the peer specified by <i><span class="varname">peer-address</span></i>.</p>
</li></ul>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a filtering policy to filter the SA messages to be forwarded to a specified remote MSDP peer.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=acl"><b><span class="cmdname">acl</span></b></a> { <strong><span>name</span></strong> <i><span class="varname">advance-acl-name</span></i> [ <strong><span>advance</span></strong> | [ <strong><span>advance</span></strong> ] <strong><span>number</span></strong> <i><span class="varname">advance-acl-number</span></i> ] | [ <strong><span>number</span></strong> ] <i><span class="varname">advance-acl-number</span></i> } [ <strong><span>match-order</span></strong> { <strong><span>config</span></strong> | <strong><span>auto</span></strong> } ]</span></span><p><p>An advanced ACL is created, and the corresponding ACL view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } <strong><span>ip</span></strong> [ <strong><span>destination</span></strong> { <i><span class="varname">destination-ip-address</span></i> { <i><span class="varname">destination-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } | <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> } | <strong><span>any</span></strong> } ] <sup>*</sup></span></span><p><p>A rule is configured for the advanced ACL.</p>
</p><p><p>In the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command, the <strong><span>source</span></strong> parameter is used to specify a multicast source address of SA messages, and the <strong><span>destination</span></strong> parameter is used to specify a multicast group address.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=msdp"><b><span class="cmdname">msdp</span></b></a> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span></span><p><p>The MSDP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <strong><span>sa-policy</span></strong> <strong><span>export</span></strong> [ <strong><span>acl </span></strong>{ <i><span class="varname">advanced-acl-number</span></i><span> | <i><span class="varname">acl-name</span></i> }</span> ]</span><p><p>The device is configured to filter the SA messages to be forwarded to the specified remote MSDP peer.</p>
</p><p><p><i><span class="varname">peer-address</span></i>: specifies the IP address of a remote MSDP peer.</p>
<p><strong><span>acl </span></strong><i><span class="varname">advanced-acl-number</span></i>: specifies the name of an advanced ACL to be used as the filtering policy. The device uses the ACL to determine whether to forward SA messages to the specified remote MSDP peer.</p>
<ul><li><p>If no ACL is specified, the device does not forward any SA messages to the specified remote MSDP peer.</p>
</li><li><p>If an ACL is specified, the device forwards only the matching SA messages to the remote MSDP peer specified by <i><span class="varname">peer-address</span></i>.</p>
</li></ul>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0061.html">Adjusting the Parameters of SA Messages
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0062.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0063.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>