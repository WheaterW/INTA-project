
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Querier Function">
<meta name="abstract" content="The querier function enables a device to send Query messages for its upstream device and respond to Join/Leave messages sent from downstream devices.">
<meta name="description" content="The querier function enables a device to send Query messages for its upstream device and respond to Join/Leave messages sent from downstream devices.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0024.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367866">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Querier Function</title>
</head>
<body><a name="EN-US_TASK_0172367866"></a><a name="EN-US_TASK_0172367866"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Querier Function</h1>
<div class="taskbody"><p>The querier function enables a device to send Query messages for its upstream device and respond to Join/Leave messages sent from downstream devices.</p>
<div class="context"><a name="EN-US_TASK_0172367866__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A Layer 3 multicast device on a multicast network running IGMP acts as an IGMP querier, sending IGMP Query messages to create and maintain multicast forwarding entries for normal multicast data forwarding.</p>
<div class="p">However, if the following situations exist:<ul><li>IGMP messages sent by the upstream device cannot reach the device.</li><li>Multicast forwarding entries on the upstream device are statically configured, not dynamically learned.</li></ul>
</div>
<p>In this case, the IGMP querier function of the upstream device cannot be implemented on the network.</p>
<p>To solve these issues, configure the querier function on the Layer 2 device so that it can create and maintain multicast forwarding entries at the data link layer, ensuring normal multicast data forwarding. The querier parameters can be set as required.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367866__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Perform either of the following operations based on the VLAN<span> or VPLS</span> networking:</span><p><ul><li>To enter the VLAN view, run the <a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i> command.</li><li>To enter the VSI view, run the <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i> [ <strong><span>static</span></strong> ] command.</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=igmp-snooping+enable"><b><span class="cmdname">igmp-snooping enable</span></b></a></span></span><p><p>IGMP snooping is enabled for the VLAN<span> or VSI</span>.</p>
</p></li><li><span>Run <a href="cmdqueryname=igmp-snooping+querier+enable"><b><span class="cmdname">igmp-snooping querier enable</span></b></a></span><p><p>The querier function is enabled.</p>
<p>By default, the querier function is disabled.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=igmp-snooping+querier-election"><b><span class="cmdname">igmp-snooping querier-election</span></b></a></span></span><p><p>Query election is enabled so that a device is elected as the querier to send Query messages to user hosts on behalf of the upstream device.</p>
<p>By default, query election is not enabled on all devices.</p>
<p>If the querier function is enabled on multiple devices in the VLAN<span> or VSI</span>, this step needs to be performed.</p>
</p></li><li><span>(Optional) Set querier parameters.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>An IGMPv1 host does not send a Leave message when leaving a multicast group. Therefore, this configuration is valid only when IGMPv2 messages can be processed in the VLAN<span> or VSI</span>.</p>
</div></div>
<ul><li><p>Run <span><a href="cmdqueryname=igmp-snooping+query-interval"><b><span class="cmdname">igmp-snooping query-interval</span></b></a></span> <i><span class="varname">query-interval</span></i></p>
<p>The interval at which a querier sends General Query messages is set.</p>
<p>By default, a querier sends General Query messages at an interval of 60s.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The default interval at which a querier sends General Query messages is 60 seconds, but the default interval defined in the corresponding protocol is 125 seconds. Currently, some vendor devices use the protocol-defined default interval of 125 seconds. To enable the querier to interwork with such devices, you must change the corresponding configuration to ensure that both ends send General Query messages at the same interval.</p>
</div></div>
</li><li><p>Run <span><a href="cmdqueryname=igmp-snooping+robust-count"><b><span class="cmdname">igmp-snooping robust-count</span></b></a></span> <i><span class="varname">robust-count</span></i></p>
<p>The number of times a Group-specific Query message is sent is set.</p>
<p>By default, a Group-specific Query message is sent twice.</p>
</li><li><p>Run <span><a href="cmdqueryname=igmp-snooping+max-response-time"><b><span class="cmdname">igmp-snooping max-response-time</span></b></a></span> <i><span class="varname">max-response-time</span></i></p>
<p>The maximum time for a downstream host to respond to a querier is set.</p>
<p>By default, the maximum time for a downstream host to respond to a querier is 10s.</p>
<p>The maximum response time must be shorter than the interval at which General Query messages are sent.</p>
</li><li><p>Run <span><a href="cmdqueryname=igmp-snooping+lastmember-queryinterval"><b><span class="cmdname">igmp-snooping lastmember-queryinterval</span></b></a></span> <i><span class="varname">lastmember-queryinterval</span></i></p>
<p>The interval at which a querier sends Group-specific Query messages or Group-and-Source-specific Query messages is set.</p>
<p>By default, a querier sends Group-specific Query messages at an interval of 1s.</p>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>(Optional) Configure a source IP address for IGMP General Query messages.</span><p><ul><li>Configuration in the system view: Run the <span><a href="cmdqueryname=igmp-snooping+send-query+source-address"><b><span class="cmdname">igmp-snooping send-query source-address</span></b></a></span> <i><span class="varname">ip-source-address</span></i> command.</li><li>Configuration in the VLAN view:<ol type="a"><li>Run the <a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i> command to enter the VLAN view.</li><li>Run the <span><a href="cmdqueryname=igmp-snooping+send-query+source-address"><b><span class="cmdname">igmp-snooping send-query source-address</span></b></a></span> <i><span class="varname">ip-source-address</span></i> command to configure the source IP address of IGMP Query messages in the VLAN view.</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</li></ol>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If both the system view and VLAN view have their own configurations, the configuration in the VLAN view is preferentially used.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0021.html">Configuring IGMP Snooping Proxy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0024.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>