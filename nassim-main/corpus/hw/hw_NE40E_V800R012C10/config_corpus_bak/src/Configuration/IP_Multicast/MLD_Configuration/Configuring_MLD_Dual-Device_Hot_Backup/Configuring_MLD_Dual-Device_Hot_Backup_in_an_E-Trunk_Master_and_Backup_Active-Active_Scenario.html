
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring MLD Dual-Device Hot Backup in an E-Trunk Master/Backup Active-Active Scenario">
<meta name="abstract" content="MLD dual-device backup backs up multicast user join information between devices, improving multicast service continuity and reliability.">
<meta name="description" content="MLD dual-device backup backs up multicast user join information between devices, improving multicast service continuity and reliability.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mld_cfg_2244.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mld_cfg_2245.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mld_cfg_2246.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MLD">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001199283099">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring MLD Dual-Device Hot Backup in an E-Trunk Master/Backup Active-Active Scenario</title>
</head>
<body><a name="EN-US_TASK_0000001199283099"></a><a name="EN-US_TASK_0000001199283099"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring MLD Dual-Device Hot Backup in an E-Trunk Master/Backup Active-Active Scenario</h1>
<div class="taskbody"><p>MLD dual-device backup backs up multicast user join information between devices, improving multicast service continuity and reliability.</p>
<div class="steps"><a name="EN-US_TASK_0000001199283099__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an RBS.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-service"><b><span class="cmdname">remote-backup-service</span></b></a> <em>remote-backup-service-name</em></span><p><p>An RBS is created, and the RBS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer-ipv6"><b><span class="cmdname">peer-ipv6</span></b></a> <i><span class="varname">peer-ipv6-address</span></i> <a href="cmdqueryname=source-ipv6"><b><span class="cmdname">source-ipv6</span></b></a> <i><span class="varname">source-ipv6-address</span></i> <a href="cmdqueryname=port"><b><span class="cmdname">port</span></b></a> <i><span class="varname">port-id</span></i></span><p><p>TCP connection parameters are configured for the RBS.</p>
</p><p><p><i><span class="varname">peer-ipv6-address</span></i> specifies the IP address of the peer device that backs up the local device. <i><span class="varname">source-ipv6-address</span></i> specifies the IP address of the local device. The IP address of the peer device must have been configured on a main interface, sub-interface, or logical interface (such as a loopback interface) of the peer device. The IP address of the local device must have been configured on a main interface, sub-interface, or logical interface (such as a loopback interface) of the local device. In addition, the two devices must be able to ping each other through the two IP addresses.</p>
<p><i><span class="varname">port-id</span></i> specifies a TCP port number. The TCP port numbers configured on the master and backup devices must be the same.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure an RBP.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>An RBP is created, and the RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=backup-id"><b><span class="cmdname">backup-id</span></b></a> <i><span class="varname">backup-id</span></i> <a href="cmdqueryname=remote-backup-service"><b><span class="cmdname">remote-backup-service</span></b></a> <i><span class="varname">service-name</span></i></span><p><p>A backup ID is configured for the RBP, and the RBP is associated with a specified RBS.</p>
</p><p><p><i><span class="varname">backup-id</span></i> specifies a backup ID. You can use a backup ID and an RBS to determine an RBP. The backup IDs configured for the same RBP must be the same on the master and backup devices and cannot be configured for other RBPs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer-backup"><b><span class="cmdname">peer-backup</span></b></a> <strong><span>hot</span></strong></span><p><p>Hot backup is configured for information backup between the master and backup devices.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>Configure a dual-device E-Trunk backup platform.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>The RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i> <strong><span>eth-trunk</span></strong> <i><span class="varname">eth-trunk-id</span></i></span><p><p>The E-Trunk master/backup protocol is configured, and an Eth-Trunk interface is bound to the RBP.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i></span><p><p>The E-Trunk view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=priority"><b><span class="cmdname">priority</span></b></a> <em><i><span class="varname">priority</span></i></em></span><p><p>An E-Trunk priority is configured.</p>
</p></li><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=security-key"><b><span class="cmdname">security-key</span></b></a></strong> { <strong><strong><span>simple</span></strong></strong> <em><i><span class="varname">simple-key</span></i></em> | <strong><strong><span>cipher</span></strong></strong> <em><i><span class="varname">cipher-key</span></i></em> }</span><p><p>An E-Trunk encryption password is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer-ipv6"><b><span class="cmdname">peer-ipv6</span></b></a> <i><span class="varname">peer-ipv6-address</span></i> <strong><span>source-ipv6</span></strong> <i><span class="varname">source-ipv6-address</span></i></span><p><p>Peer and local IP addresses are set for the E-Trunk.</p>
</p><p><p>The peer IP address of the local end is the local IP address of the peer end.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure the E-Trunk interface to work in the master state.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface+eth-trunk"><b><span class="cmdname">interface eth-trunk</span></b></a> <em>trunk-id</em></span><p><p>The Eth-Trunk interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <strong><span>mode force-master</span></strong></strong></span><p><p>The E-Trunk member interface is configured to work in the master state.</p>
</p><p><p>In an active-active scenario, this command must be configured on Eth-Trunk interfaces of both the master and backup devices.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li></ol>
</li><li><span>(Optional) Configure rapid service link switching.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></span><p><p>BFD is enabled globally.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <strong><a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> </strong><em><i><span class="varname">session-name</span></i></em><strong> <a href="cmdqueryname=bind"><b><span class="cmdname">bind</span></b></a></strong><strong><a href="cmdqueryname=peer-ipv6"><b><span class="cmdname"> peer-ipv6</span></b></a> </strong><em><i><span class="varname">peer-ipv6</span></i></em> [ <strong>vpn-instance</strong><em><i><span class="varname">vpn-name</span></i></em> ] [ <strong>source-ipv6</strong><em><i><span class="varname">source-ipv6</span></i></em> ] <strong><a href="cmdqueryname=track-interface"><b><span class="cmdname">track-interface</span></b></a></strong><strong> interface</strong> { <em><i><span class="varname">interface-name</span></i></em> | <em><span class="apiname">interface-type</span></em><em> i<i><span class="varname">nterface-number</span></i></em><i><span class="varname"> </span></i>}</span><p><p>A BFD for IPv6 session is created, related information is bound to the session, and the BFD session view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> {<strong><span> local</span></strong> | <strong><span>remote</span></strong> } <i><span class="varname">discr-value</span></i></span><p><p>Local and remote discriminators are configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname">e-trunk</span></b></a> <i><span class="varname">e-trunk-id</span></i></span><p><p>The E-Trunk view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=e-trunk+track+bfd-session"><b><span class="cmdname">e-trunk track bfd-session</span></b></a></span><p><p>The E-Trunk is bound to the BFD session.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Enable remote backup for MLD.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>The RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=service-type+mld"><b><span class="cmdname">service-type mld</span></b></a></span><p><p>Remote backup is enabled for MLD services.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The interface view is displayed.</p>
</p></li><li class="substepexpand"><span>(On the interface connected to a downstream device) Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>The RBP is bound to the interface.</p>
</p></li><li class="substepexpand"><span>(On the interface connected to a downstream device) Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mld_cfg_2244.html">Configuring MLD Dual-Device Hot Backup
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mld_cfg_2245.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mld_cfg_2246.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>