
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting the Maximum Number of Invalid IPv4 Multicast Protocol Messages That Can Be Stored">
<meta name="abstract" content="Setting the maximum number of invalid IPv4 multicast protocol messages that can be stored on a multicast device helps locate and rectify faults.">
<meta name="description" content="Setting the maximum number of invalid IPv4 multicast protocol messages that can be stored on a multicast device helps locate and rectify faults.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0077.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0103.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_mcast_cfg_6011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IP Multicast Routing Management">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IP Multicast Routing Management">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IP Multicast Routing Management">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367117">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Setting the Maximum Number of Invalid IPv4 Multicast Protocol Messages That Can Be Stored</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172367117"></a><a name="EN-US_TASK_0172367117"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting the Maximum Number of Invalid IPv4 Multicast Protocol Messages That Can Be Stored</h1>
<div class="taskbody"><p>Setting the maximum number of invalid IPv4 multicast protocol messages that can be stored on a multicast device helps locate and rectify faults.</p>
<div class="context"><a name="EN-US_TASK_0172367117__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>If forwarding entries cannot be created or Multicast Source Discovery Protocol (MSDP) peer relationships cannot be established on a multicast network, you can set the maximum number of invalid multicast protocol messages that can be stored on a multicast device and run the corresponding display command to check statistics and details about these messages. The command output helps you analyze these invalid messages and troubleshoot the faults.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367117__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=multicast+invalid-packet"><b><span class="cmdname">multicast invalid-packet</span></b></a> { <strong><span>igmp</span></strong> | <strong><span>mdt</span></strong> | <strong><span>msdp</span></strong> | <strong><span>pim</span></strong> } <strong><span>max-count</span></strong> <i><span class="varname">max-number</span></i></span></span><p><p>The maximum number of invalid multicast protocol messages that the device can store is configured.</p>
</p><p></p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172367117__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+current-configuration"><b><span class="cmdname">display current-configuration</span></b></a> <strong><span>| include multicast invalid-packet</span></strong> command to check the maximum number of invalid multicast protocol messages that the device can store.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display current-configuration | include multicast invalid-packet</strong>
 <strong>multicast invalid-packet igmp max-count 20</strong></pre>
<p>After setting the maximum number of invalid multicast protocol messages that the device can store, you can run the following commands to check statistics about invalid multicast protocol messages that the device stores:</p>
<ul><li><p>Run the <a href="cmdqueryname=display+igmp"><b><span class="cmdname">display igmp</span></b></a> <span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>all-instance</span></strong> ]</span> <strong><span>invalid-packet</span></strong> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type interface-number</span></i> | <strong><span>message-type</span></strong> { <strong><span>leave</span></strong> | <strong><span>query</span></strong> | <strong><span>report</span></strong> } ] <sup>*</sup> command to check statistics about invalid IGMP messages that the device stores.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display igmp invalid-packet</strong>

           Statistics of invalid packets for public net:
--------------------------------------------------------------------
IGMP Query invalid packet:
Unwanted Source List    : 1000        Zero Max Resp Code      : 0
Fault Length            : 1000        Invalid Multicast Group : 0
Bad Checksum            : 0

IGMP Report invalid packet:
Fault Length            : 0           Invalid Multicast Group : 0
Invalid Multicast Source: 0           Bad Checksum            : 0
Illegal Report Type     : 0

IGMP Leave invalid packet:
Invalid Multicast Group : 0           Bad Checksum            : 0
--------------------------------------------------------------------  </pre>
</li><li><p>Run the <a href="cmdqueryname=display+msdp"><b><span class="cmdname">display msdp</span></b></a> <span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>all-instance</span></strong> ]</span> <strong><span>invalid-packet</span></strong> [ <strong><span>peer</span></strong> <i><span class="varname">peer-address</span></i> | <strong><span>message-type</span></strong> { <strong><span>keepalive</span></strong> | <strong><span>notification</span></strong> | <strong><span>sa-request</span></strong> | <strong><span>sa-response</span></strong> | <strong><span>source-active</span></strong> } ] <sup>*</sup> command to check statistics about invalid MSDP messages that the device stores.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display msdp invalid-packet peer 1.1.1.1</strong>

             Statistics of invalid packets for public net:                      
--------------------------------------------------------------------            
MSDP SA invalid packet:
Fault Length            : 0           Bad Length-x            : 0
Bad Sprefix             : 0           Invalid Multicast Group : 0
Invalid Multicast Source: 0           Bad Encap Data          : 0
Illegal RP Addr         : 0           RP Loop                 : 0

MSDP SA Response invalid packet:
Fault Length            : 0           Bad Length-x            : 0
Bad Sprefix             : 0           Invalid Multicast Group : 0
Invalid Multicast Source: 0           Illegal RP Addr         : 0
RP Loop                 : 0

MSDP SA Request invalid packet:
Fault Length            : 0           Invalid Multicast Group : 0

MSDP Keep Alive invalid packet:
Fault Length            : 0

MSDP Notification invalid packet:
Fault Length            : 0                         
--------------------------------------------------------------------  
</pre>
</li><li><p>Run the <a href="cmdqueryname=display+pim"><b><span class="cmdname">display pim</span></b></a> <span>[ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>all-instance</span></strong> ] </span><strong><span>invalid-packet</span></strong> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type interface-number</span></i> | <strong><span>message-type</span></strong> { <strong><span>hello</span></strong> | <strong><span>join-prune</span></strong> | <strong><span>assert</span></strong> | <strong><span>bsr</span></strong><span> | <strong><span>announcement</span></strong> | <strong><span>discovery</span></strong></span><span> | <strong><span>graft</span></strong> | <strong><span>graft-ack</span></strong> | <strong><span>state-refresh</span></strong></span> } ] <sup>*</sup> command to check statistics about invalid PIM messages stored on the device.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display pim invalid-packet</strong>

             Statistics of invalid packets for public net:                      
--------------------------------------------------------------------         
PIM General invalid packet:
Invalid PIM Version     : 0           Invalid PIM Type        : 0
Fault Length            : 0           Bad Checksum            : 0

PIM Register invalid packet:
Invalid Multicast Source: 0           Invalid Multicast Group : 0
Invalid Dest Addr       : 0

PIM Register-Stop invalid packet:
Invalid Multicast Source: 0           Invalid Multicast Group : 0
Invalid Dest Addr       : 0           IP Source not RP        : 0

PIM CRP invalid packet:
Invalid Dest Addr       : 0           Invalid CRP Addr        : 0
Fault Length            : 0           CRP Adv Fault Length    : 0
Invalid Multicast Group : 0

PIM Assert invalid packet:
Invalid Dest Addr       : 0           Invalid IP Source Addr  : 0
Invalid Multicast Source: 0           Invalid Multicast Group : 0

PIM BSR invalid packet:
Bad Payload             : 0           Fault Length            : 0
Bad Scope Mask          : 0           Invalid Multicast Group : 0
Not CBSR But BSR        : 0           Invalid BSR Addr        : 0
Fault Hash Length       : 0           Invalid IP Source Addr  : 0

PIM Hello invalid packet:
Invalid Addr List       : 0           Fault Length            : 0
Bad Holdtime Length     : 0           Bad LanPruneDelay Length: 0
Bad DrPriority Length   : 0           Bad GenID Length        : 0
Invalid Dest Addr       : 0           Invalid IP Source Addr  : 0

PIM Join/Prune invalid packet:
Invalid Multicast Source: 0           Invalid Multicast Group : 0
Invalid Up Neighbor     : 0           Invalid IP Source Addr  : 0
Invalid Dest Addr       : 0           Fault Length            : 0  

PIM Graft invalid packet:
Invalid Multicast Source: 0           Invalid Multicast Group : 0
Invalid Up Neighbor     : 0           Invalid IP Source Addr  : 0
Fault Length            : 0

PIM Graft-Ack invalid packet:
Invalid Multicast Source: 0           Invalid Multicast Group : 0
Invalid Up Neighbor     : 0           Invalid IP Source Addr  : 0
Fault Length            : 0

PIM State Refresh invalid packet:
Invalid Multicast Source: 0           Invalid Multicast Group : 0
Invalid Originator Addr : 0           Fault Length            : 0
--------------------------------------------------------------------   
</pre>
</li><li><p>Run the <a href="cmdqueryname=display+multicast-domain"><b><span class="cmdname">display multicast-domain</span></b></a> { <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>all-instance</span></strong> } <strong><span>invalid-packet</span></strong> command to check statistics about invalid group switching messages stored on the device.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display multicast-domain vpn-instance vpn1 invalid-packet</strong>
             Statistics of invalid packets for vpn1:            
--------------------------------------------------------------------            
MDT Switch invalid packet:
Fault Length            : 0           Invalid Message Type    : 0
Invalid Multicast Source: 0           Invalid Multicast Group : 0
Invalid Switch Group    : 0                 
--------------------------------------------------------------------</pre>
</li></ul>
<p>After setting the maximum number of invalid multicast protocol messages that the device can store, you can run the following commands to check detailed information about invalid multicast protocol messages that the device stores:</p>
<ul><li><p>Run the <a href="cmdqueryname=display+igmp+invalid-packet"><b><span class="cmdname">display igmp invalid-packet</span></b></a> [ <i><span class="varname">packet-number</span></i> ] <strong><span>verbose</span></strong> command to check details about invalid IGMP messages that the device stores.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display igmp invalid-packet 1 verbose</strong>
       Detailed information of invalid packets
-----------------------------------------------------
Packet information (Index 6):
-----------------------------------------------------
Interface           :  GigabitEthernet<span>0/1/1</span>
Time                :  2010-6-9 11:03:51 UTC-08:00
Message Length      :  24
Invalid Type        :  Invalid Multicast Group
<span>Source Address      :  10.0.3.3</span>
0000: 16 3c 00 00 01 34 04 04
-----------------------------------------------------</pre>
</li><li><p>Run the <a href="cmdqueryname=display+msdp+invalid-packet"><b><span class="cmdname">display msdp invalid-packet</span></b></a> [ <i><span class="varname">packet-number</span></i> ] <strong><span>verbose</span></strong> command to check details about invalid MSDP messages that the device stores.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display msdp invalid-packet 1 verbose</strong>
       Detailed information of invalid packets         
-----------------------------------------------------  
Packet information (Index 1):                          
-----------------------------------------------------  
Interface           :  GigabitEthernet<span>0/1/1</span>                   
Time                :  2010-6-9 11:25:46 UTC-08:00     
Message Length      :  22                              
Invalid Type        :  Invalid Addr List               
<span>Peer Address         :  10.42.162.13</span>
0000: 00 01 00 02 00 69 00 13 00 04 00 00 00 64 00 02  
0010: 00 04 81 f4 09 c4                                
-----------------------------------------------------  </pre>
</li></ul>
<ul><li><p>Run the <a href="cmdqueryname=display+pim+invalid-packet"><b><span class="cmdname">display pim invalid-packet</span></b></a> [ <i><span class="varname">packet-number</span></i> ] <strong><span>verbose</span></strong> command to check details about invalid PIM messages that the device stores.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display pim invalid-packet 1 verbose</strong>
       Detailed information of invalid packets
-----------------------------------------------------
Packet information (Index 1):
-----------------------------------------------------
Interface           :  GigabitEthernet<span>0/1/1</span>
Time                :  2010-6-1 20:04:35 UTC-08:00
Message Length      :  26
Invalid Type        :  Invalid Multicast Source
<span>Source Address      :  10.0.3.3</span>
0000: 25 00 96 77 01 00 00 20 e1 01 01 01 01 00 e0 00
0010: 00 00 80 00 00 64 00 00 00 00
-----------------------------------------------------  </pre>
</li><li><p>Run the <a href="cmdqueryname=display+multicast-domain"><b><span class="cmdname">display multicast-domain</span></b></a> <strong><span>invalid-packet</span></strong> [ <i><span class="varname">packet-number</span></i> ] <strong><span>verbose</span></strong> command to check details about invalid group switching messages that the device stores.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display multicast-domain invalid-packet 1 verbose</strong>
       Detailed information of invalid packets      
-----------------------------------------------------   
Packet information (Index 1):                         
----------------------------------------------------- 
<span>Neighbor</span>           :  1.1.1.1
Time                :  2011-8-9 10:50:08 UTC-08:00
Message Length      :  16
Invalid Type        :  Invalid Switch Group
0000: 01 00 10 00 64 64 64 64 e8 00 00 00 0a 00 00 00 
-----------------------------------------------------</pre>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0077.html">IPv4 Multicast Routing Management Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0103.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_mcast_cfg_6011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>