
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Setting the MED Attribute for MBGP Routes">
<meta name="abstract" content="The MED attribute indicates the metric used in IGP. After the MED attribute is set for routes, an EBGP peer can select a route with the smallest MED value for the traffic that enters an AS.">
<meta name="description" content="The MED attribute indicates the metric used in IGP. After the MED attribute is set for routes, an EBGP peer can select a route with the smallest MED value for the traffic that enters an AS.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1010.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1013.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MBGP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367049">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Setting the MED Attribute for MBGP Routes</title>
</head>
<body><a name="EN-US_TASK_0172367049"></a><a name="EN-US_TASK_0172367049"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Setting the MED Attribute for MBGP Routes</h1>
<div class="taskbody"><p>The MED attribute indicates the metric used in IGP. After the MED attribute is set for routes, an EBGP peer can select a route with the smallest MED value for the traffic that enters an AS.</p>
<div class="context"><a name="EN-US_TASK_0172367049__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The MED serves as the metric used by an IGP. MED determines the optimal route when traffic enters an AS. When an MBGP router obtains multiple routes to the same destination address but with different next hops through EBGP peers, the route with the smallest MED value is selected as the optimal route.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172367049__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Set the default MED value on the local device.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv4-family+multicast"><b><span class="cmdname">ipv4-family multicast</span></b></a> command to enter the BGP-IPv4 multicast address family view, or run the <strong><a href="cmdqueryname=ipv4-multicast+vpn-instance"><b><span class="cmdname">ipv4-multicast vpn-instance</span></b></a> </strong><em><i><span class="varname">vpn-instance-name</span></i></em> command to enter the BGP-multicast VPN instance IPv4 address family view.</span></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=default+med"><b><span class="cmdname">default med</span></b></a> <i><span class="varname">med</span></i></span></span><p><p>The default MED value is set.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Enable MBGP to compare the MED values of the routes from different ASs.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv4-family+multicast"><b><span class="cmdname">ipv4-family multicast</span></b></a> command to enter the BGP-IPv4 multicast address family view, or run the <strong><a href="cmdqueryname=ipv4-multicast+vpn-instance"><b><span class="cmdname">ipv4-multicast vpn-instance</span></b></a> </strong><em><i><span class="varname">vpn-instance-name</span></i></em> command to enter the BGP-multicast VPN instance IPv4 address family view.</span></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=compare-different-as-med"><b><span class="cmdname">compare-different-as-med</span></b></a></span></span><p><p>The function to compare the MED values of routes from different ASs is enabled.</p>
</p><p><p>To configure MBGP to compare the MED values of routes from different ASs, run this command.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure MBGP to use the maximum MED value for a route that has no MED value.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv4-family+multicast"><b><span class="cmdname">ipv4-family multicast</span></b></a> command to enter the BGP-IPv4 multicast address family view, or run the <strong><a href="cmdqueryname=ipv4-multicast+vpn-instance"><b><span class="cmdname">ipv4-multicast vpn-instance</span></b></a> </strong><em><i><span class="varname">vpn-instance-name</span></i></em> command to enter the BGP-multicast VPN instance IPv4 address family view.</span></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bestroute+med-none-as-maximum"><b><span class="cmdname">bestroute med-none-as-maximum</span></b></a></span></span><p><p>The maximum MED value is used for a route if the route has no MED value.</p>
</p><p><p>If this command is not configured, MBGP uses 0 as the MED value for a route if the route has no MED value.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Compare the sums of MED multiplied by a MED multiplier and IGP cost multiplied by an IGP cost multiplier.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv4-family+multicast"><b><span class="cmdname">ipv4-family multicast</span></b></a> command to enter the BGP-IPv4 multicast address family view, or run the <strong><a href="cmdqueryname=ipv4-multicast+vpn-instance"><b><span class="cmdname">ipv4-multicast vpn-instance</span></b></a> </strong><em><i><span class="varname">vpn-instance-name</span></i></em> command to enter the BGP-multicast VPN instance IPv4 address family view.</span></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=bestroute+med-plus-igp"><b><span class="cmdname">bestroute med-plus-igp</span></b></a> [ <strong><span>igp-multiplier</span></strong> <i><span class="varname">igp-multiplier</span></i> | <strong><span>med-multiplier</span></strong> <i><span class="varname">med-multiplier</span></i> ]</span></span><p><p>The sums of MED multiplied by a MED multiplier and IGP cost multiplied by an IGP cost multiplier are compared.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1010.html">Controlling MBGP Route Selection
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1013.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_1015.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>