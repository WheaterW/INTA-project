
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring PIM-SM Intra-domain Multicast">
<meta name="abstract" content="This section provides an example for configuring basic PIM-SM functions for a PIM-SM domain.">
<meta name="description" content="This section provides an example for configuring basic PIM-SM functions for a PIM-SM domain.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0036.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2272_a.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0038.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172366915">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring PIM-SM Intra-domain Multicast</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172366915"></a><a name="EN-US_TASK_0172366915"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring PIM-SM Intra-domain Multicast</h1>
<div class="taskbody"><p>This section provides an example for configuring basic PIM-SM functions for a PIM-SM domain.</p>
<div class="context"><a name="EN-US_TASK_0172366915__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the ISP network shown in <a href="#EN-US_TASK_0172366915__fig_dc_vrp_multicast_cfg_003701">Figure 1</a>, multicast services are deployed. The network is deployed with an IGP and is connected to the Internet. The unicast routing routes work normally. It is required that hosts receive VoD information in multicast mode.</p>
<div class="fignone" id="EN-US_TASK_0172366915__fig_dc_vrp_multicast_cfg_003701"><a name="EN-US_TASK_0172366915__fig_dc_vrp_multicast_cfg_003701"></a><a name="fig_dc_vrp_multicast_cfg_003701"></a><span class="figcap"><b>Figure 1 </b>Configuring PIM-SM intra-domain multicast</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1, 2, 3, and 4 in this example represent GE <span>0/1/0</span>, GE <span>0/2/0</span>, GE <span>0/3/0</span>, and GE <span>0/1/1</span>, respectively.</p>
</div></div>
<p><span><img class="vsd" src="figure/en-us_image_0185222816.png"></span></p>
</div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.4.1.4.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.4.1.4.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.4.1.4.1.3" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="3" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span> A</p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.9.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/3/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>10.110.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>B</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.2.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>10.110.2.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>C</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.3.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>10.110.2.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>D</p>
<p></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.4.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>10.110.4.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/3/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>10.110.5.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>E</p>
<p></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.3.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.2.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/3/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.9.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GE <span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.4.1/24</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366915__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>When configuring PIM-SM intra-domain multicast, note the following precautions:</p>
<ul><li><p>PIM-SM must be enabled before IGMP is enabled.</p>
</li><li><p>To use a static Rendezvous Point (RP), configure the same RP address on all <span class="keyword">Router</span>s.</p>
</li><li><p>Use the Protocol Independent Multicast - Source-specific Multicast (PIM-SSM) service when the users need to receive data from a specified multicast source. Ensure that all <span class="keyword">Router</span>s share the same SSM group address range.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366915__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure an IP address for each <span class="keyword">Router</span> interface and configure a unicast routing protocol.</p>
</li><li><p>Enable multicast routing on all multicast <span class="keyword">Router</span>s.</p>
</li><li><p>Enable PIM-SM on all <span class="keyword">Router</span> interfaces.</p>
</li><li><p>Enable IGMP on <span class="keyword">Router</span> interfaces that directly connect to hosts.</p>
</li><li><p>Configure RPs. An RP is a rendezvous point tree (RPT)'s root node on a PIM-SM network. Configuring a <span class="keyword">Router</span> that has more multicast branches as an RP is recommended. For example, configure <span class="keyword">Device</span> E as an RP on the network shown in <a href="#EN-US_TASK_0172366915__fig_dc_vrp_multicast_cfg_003701">Figure 1</a>.</p>
</li><li><p>(Optional) Configure BootStrap router (BSR) boundaries on interfaces connected to the Internet. Bootstrap messages cannot pass through the BSR boundaries, and each BSR serves only the local PIM-SM domain.</p>
</li><li><p>(Optional) Set the same SSM group address range on all <span class="keyword">Router</span>s, so a multicast <span class="keyword">Router</span> provides services only for the multicast groups in the SSM group address range. </p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172366915__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Multicast group address</p>
</li><li><p>Multicast source address</p>
</li><li><p>SSM group address range</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172366915__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each <span class="keyword">Router</span> interface and a unicast routing protocol. For configuration details, see <a href="#EN-US_TASK_0172366915__example1664711602214040">Configuration Files</a> in this section.</span></li><li><span>Enable multicast routing on each <span class="keyword">Router</span> and PIM-SM on each <span class="keyword">Router</span> interface.</span><p><p># Configure <span class="keyword">Device</span> E. Repeat this step for <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, <span class="keyword">Device</span> C, and <span class="keyword">Device</span> D. For configuration details, see <a href="#EN-US_TASK_0172366915__example1664711602214040">Configuration Files</a> in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E] <strong>multicast routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-GigabitEthernet<span>0/1/0</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E] <strong>interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-GigabitEthernet<span>0/2/0</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E] <strong>interface GigabitEthernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-GigabitEthernet<span>0/3/0</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E] <strong>interface GigabitEthernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-GigabitEthernet<span>0/1/1</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
</p></li><li><span>Enable IGMP on interfaces that directly connect to hosts.</span><p><p># Configure <span class="keyword">Device</span> A. Repeat this step for <span class="keyword">Device</span> B, <span class="keyword">Device</span> C, <span class="keyword">Device</span> D, and <span class="keyword">Device</span> E. For configuration details, see <a href="#EN-US_TASK_0172366915__example1664711602214040">Configuration Files</a> in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>igmp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>igmp version 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure RPs.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You can configure both a static RP and a BSR RP, or only one of them. When both a static RP and a BSR RP are configured, the BSR RP is used by default. To use the static RP, specify <strong>preferred</strong> in the <strong>static-rp</strong> <em>rp-address</em> command.</p>
<p>The following shows how to configure both a static RP and a BSR RP, with the BSR RP being preferred and the static RP being the backup.</p>
</div></div>
<p># Configure a BSR RP. Perform the following configurations on one or several <span class="keyword">Router</span>s in the PIM-SM domain. For example, on <span class="keyword">Device</span> E, set the range of groups severed by the RP and addresses of Candidate-BootStrap Routers (C-BSRs) and Candidate-Rendezvous Points (C-RPs).</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E] <strong>acl number 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-acl4-basic-2000] <strong>rule permit source 225.1.1.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-acl4-basic-2000] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E] <strong>pim</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-pim] <strong>c-bsr GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-pim] <strong>c-rp GigabitEthernet <span>0/2/0</span> group-policy 2000 priority 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-pim] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E-pim] <strong>quit</strong></pre>
<p># Configure a static RP on <span class="keyword">Device</span> E. Repeat this step for <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, <span class="keyword">Device</span> C, and <span class="keyword">Device</span> D. For configuration details, see <a href="#EN-US_TASK_0172366915__example1664711602214040">Configuration Files</a> in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E] <strong>pim</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-pim] <strong>static-rp 192.168.4.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-pim] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E-pim] <strong>quit</strong></pre>
</p></li><li><span>(Optional) Configure a BSR boundary on the interface that connects <span class="keyword">Device</span> D to the Internet.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D]<strong> interface GigabitEthernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>pim bsr-boundary</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
</p></li><li><span>(Optional) Set the SSM group address range to 232.1.1.0/24 on all <span class="keyword">Router</span>s.</span><p><p># Configure <span class="keyword">Device</span> E. Repeat this step for <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, <span class="keyword">Device</span> C, and <span class="keyword">Device</span> D. For configuration details, see <a href="#EN-US_TASK_0172366915__example1664711602214040">Configuration Files</a> in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E] <strong>acl number 2001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-acl4-basic-2001] <strong>rule permit source 232.1.1.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-acl4-basic-2001] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E] <strong>pim</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-pim] <strong>ssm-policy 2001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>E-pim] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>E-pim] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <strong>display pim interface</strong> command to view information about PIM interfaces on each <span class="keyword">Router</span>. The following example uses the command output on <span class="keyword">Device</span> E.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>E&gt; <strong>display pim interface</strong></pre>
<pre class="screen">VPN-Instance: public net
Interface              State NbrCnt HelloInt   DR-Pri     DR-Address
GigabitEthernet<span>0/1/0</span>   up     1       30         1        192.168.3.2(local)
GigabitEthernet<span>0/2/0</span>   up     1       30         1        192.168.2.2(local)
GigabitEthernet<span>0/3/0</span>   up     1       30         1        192.168.9.2(local)
GigabitEthernet<span>0/1/1</span>   up     1       30         1        192.168.4.2</pre>
<p># Run the <strong>display pim bsr-info</strong> command to check information about the BSRs on each <span class="keyword">Router</span>. The following examples use the command outputs on <span class="keyword">Device</span> D and <span class="keyword">Device</span> E (C-BSR information is also displayed on <span class="keyword">Device</span> E).</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display pim bsr-info</strong></pre>
<pre class="screen"> VPN-Instance: public net
 Elected AdminScope BSR Count: 0
 Elected BSR Address: 192.168.2.2
     Priority: 0
     Hash mask length: 30
     State: Accept Preferred
     Scope: Not scoped
     Uptime: 02:08:57
     Expires: 00:01:15
     C-RP Count: 1</pre>
<pre class="screen"></pre>
<pre class="screen">&lt;<span class="keyword">Device</span>E&gt; <strong>display pim bsr-info</strong></pre>
<pre class="screen"> VPN-Instance: public net
 Elected AdminScope BSR Count: 0
 Elected BSR Address: 192.168.2.2
     Priority: 0
     Hash mask length: 30
     State: Elected
     Scope: Not scoped
     Uptime: 02:25:03
     Next BSR message scheduled at: 00:00:57
     C-RP Count: 1
 Candidate AdminScope BSR Count: 0
 Candidate BSR Address: 192.168.2.2
     Priority: 0
     Hash mask length: 30
     State: Elected
     Scope: Not scoped
     Wait to be BSR: 0</pre>
<p># Run the <strong>display pim rp-info</strong> command to view information about the RPs on the <span class="keyword">Router</span>s. The following examples use the command outputs on <span class="keyword">Device</span> D and <span class="keyword">Device</span> E.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display pim rp-info</strong></pre>
<pre class="screen"> VPN-Instance: public net
 PIM-SM BSR RP Number:1
 Group/MaskLen: 225.1.1.0/24
     RP: 192.168.2.2
     Priority: 0
     Uptime: 02:27:17
     Expires: 00:02:15
 PIM SM static RP Number:1
     Static RP: 192.168.4.1</pre>
<pre class="screen">&lt;<span class="keyword">Device</span>E&gt; <strong>display pim rp-info</strong></pre>
<pre class="screen"> VPN-Instance: public net
 PIM-SM BSR RP Number:1
 Group/MaskLen: 225.1.1.0/24
     RP: 192.168.2.2 (local)
     Priority: 0
     Uptime: 02:27:27
     Expires: 00:02:03
 PIM SM static RP Number:1
     Static RP: 192.168.4.1 (local)</pre>
<p># Run the <strong>display pim routing-table</strong> command to view the PIM routing table on each <span class="keyword">Router</span>. Host A needs to receive traffic sent to multicast group 225.1.1.1/24, and Host B needs to receive traffic that multicast source 10.110.5.100/24 sends to multicast group 232.1.1.1/24. The following examples use the command outputs on <span class="keyword">Device</span> D and <span class="keyword">Device</span> E.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display pim routing-table</strong></pre>
<pre class="screen"> VPN-Instance: public net
 Total 0 (*, G) entry; 2 (S, G) entries

 (10.110.5.100, 225.1.1.1)
     RP: 192.168.2.2
     Protocol: pim-sm, Flag: SPT LOC ACT
     UpTime: 00:57:20
     Upstream interface: GigabitEthernet<span>0/3/0</span>, Refresh time: 00:57:20
         Upstream neighbor: NULL
         RPF prime neighbor: 10.110.5.100
     Downstream interface(s) information:
     Total number of downstreams: 1
        1: GigabitEthernet<span>0/2/0</span>
             Protocol:  pim-sm, UpTime: 00:57:20, Expires: 00:03:02

 (10.110.5.100, 232.1.1.1)
     Protocol: pim-ssm, Flag: LOC
     UpTime: 00:31:21
     Upstream interface: GigabitEthernet<span>0/3/0</span>, Refresh time: 00:31:21
         Upstream neighbor: NULL
         RPF prime neighbor: 10.110.5.100
     Downstream interface(s) information:
     Total number of downstreams: 1
        1: GigabitEthernet<span>0/1/0</span>
             Protocol:  pim-ssm, UpTime: 00:31:21, Expires: 00:03:09</pre>
<pre class="screen">&lt;<span class="keyword">Device</span>E&gt;<strong> display pim routing-table</strong></pre>
<pre class="screen"> VPN-Instance: public net
 Total 1 (*, G) entry; 1 (S, G) entry

 (*, 225.1.1.1)
     RP: 192.168.2.2 (local)
     Protocol: pim-sm, Flag: WC
     UpTime: 00:21:40
     Upstream interface: register, Refresh time: 00:21:40
         Upstream neighbor: 192.168.4.2
         RPF prime neighbor: 192.168.4.2
     Downstream interface(s) information:
     Total number of downstreams: 1
        1: GigabitEthernet<span>0/3/0</span>
             Protocol:  pim-sm, UpTime: 00:21:40, Expires: 00:02:43

 (10.110.5.100, 232.1.1.1)
     Protocol: pim-ssm, Flag:
     UpTime: 00:18:44
     Upstream interface: GigabitEthernet<span>0/1/1</span>, Refresh time: 00:18:44
         Upstream neighbor: 192.168.4.2
         RPF prime neighbor: 192.168.4.2
     Downstream interface(s) information:
     Total number of downstreams: 1
        1: GigabitEthernet<span>0/1/0</span>
             Protocol:  pim-ssm, UpTime: 00:18:44, Expires: 00:02:43</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172366915__example1664711602214040"><a name="EN-US_TASK_0172366915__example1664711602214040"></a><a name="example1664711602214040"></a><a name="EN-US_TASK_0172366915__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
#
multicast routing-enable
#
acl number 2001
 rule 5 permit source 232.1.1.0 0.0.0.255
#
isis 1
 network-entity 10.0000.0000.0001.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.9.1 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 10.110.1.1 255.255.255.0
 pim sm
 igmp enable
 igmp version 3
 isis enable 1
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 192.168.1.1 255.255.255.0
 pim sm
 isis enable 1
#
pim
 ssm-policy 2001
 static-rp 192.168.4.1
#
return</pre>
</li><li><p><span class="keyword">Device</span> B configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>B
#
multicast routing-enable
#
acl number 2001
 rule 5 permit source 232.1.1.0 0.0.0.255
#
isis 1
 network-entity 10.0000.0000.0002.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.2.1 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 10.110.2.1 255.255.255.0
 pim sm
 igmp enable
 igmp version 3
 isis enable 1
#
pim
 ssm-policy 2001
 static-rp 192.168.4.1
#
return</pre>
</li><li><p><span class="keyword">Device</span> C configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>C
#
multicast routing-enable
#
acl number 2001
 rule 5 permit source 232.1.1.0 0.0.0.255
#
isis 1
 network-entity 10.0000.0000.0003.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.110.2.2 255.255.255.0
 pim sm
 igmp enable
 igmp version 3
 isis enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.3.1 255.255.255.0
 pim sm
 isis enable 1
#
pim
 ssm-policy 2001
 static-rp 192.168.4.1
 #
return</pre>
</li><li><p><span class="keyword">Device</span> D configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>D
#
multicast routing-enable
#
acl number 2001
 rule 5 permit source 232.1.1.0 0.0.0.255
#
isis 1
 network-entity 10.0000.0000.0004.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.4.2 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.1.2 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 10.110.5.1 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.110.4.1 255.255.255.0
 pim bsr-boundary
 pim sm
 isis enable 1
#
pim
 ssm-policy 2001
 static-rp 192.168.4.1
#
return</pre>
</li><li><p><span class="keyword">Device</span> E configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>E
#
multicast routing-enable
#
acl number 2000
 rule 5 permit source 225.1.1.0 0.0.0.255
#
acl number 2001
 rule 5 permit source 232.1.1.0 0.0.0.255
#
isis 1
 network-entity 10.0000.0000.0005.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.3.2 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 192.168.2.2 255.255.255.0
 pim sm
 isis enable 1
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 192.168.9.2 255.255.255.0
 pim sm
 isis enable 1
#
 interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 192.168.4.1 255.255.255.0
 pim sm
 isis enable 1
#
pim
 ssm-policy 2001
 static-rp 192.168.4.1
 c-bsr GigabitEthernet<span>0/2/0</span>
 c-rp GigabitEthernet<span>0/2/0</span> group-policy 2000
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0036.html">Configuration Examples for PIM
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2272_a.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0038.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>