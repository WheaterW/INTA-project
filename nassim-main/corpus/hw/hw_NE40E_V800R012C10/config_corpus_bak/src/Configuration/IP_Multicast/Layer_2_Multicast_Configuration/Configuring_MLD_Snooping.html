
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring MLD Snooping">
<meta name="abstract" content="Multicast Listener Discovery (MLD) snooping enables a Layer 2 device to listen to and analyze MLD messages exchanged between a connected Layer 3 device and downstream user hosts. The Layer 2 device then uses the message information to set up multicast forwarding entries to implement on-demand multicast data forwarding at the data link layer.">
<meta name="description" content="Multicast Listener Discovery (MLD) snooping enables a Layer 2 device to listen to and analyze MLD messages exchanged between a connected Layer 3 device and downstream user hosts. The Layer 2 device then uses the message information to set up multicast forwarding entries to implement on-demand multicast data forwarding at the data link layer.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0066.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0080.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0072.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0073.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0074.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0075.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0076.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0077.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0078.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_protocol-packet_encapsulation.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0079.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00800033,l2multicastvrp,c00549182,w00556928,w00437000,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="Layer 2 Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367917">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring MLD Snooping</title>
</head>
<body><a name="EN-US_TASK_0172367917"></a><a name="EN-US_TASK_0172367917"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring MLD Snooping</h1>
<div class="taskbody"><p>Multicast Listener Discovery (MLD) snooping enables a Layer 2 device to listen to and analyze MLD messages exchanged between a connected Layer 3 device and downstream user hosts. The Layer 2 device then uses the message information to set up multicast forwarding entries to implement on-demand multicast data forwarding at the data link layer.</p>
<div class="context"><a name="EN-US_TASK_0172367917__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>On an IPv6 multicast network, after an upstream device sends the service flow of a multicast program, a Layer 2 device (switch) at the edge of the access layer forwards the flow to multicast users. The users can then enjoy the multicast program service. As shown in <a href="#EN-US_TASK_0172367917__fig_dc_vrp_l2mc_cfg_007101">Figure 1</a>, multicast data messages are broadcast at the data link layer by default, causing bandwidth waste.</p>
<p>To resolve this issue, configure MLD snooping on the Layer 2 device (switch), allowing this device to listen to the MLD messages exchanged between the upstream device and downstream hosts. The Layer 2 device can then analyze the messages and generate Layer 2 multicast forwarding entries based on the message information to implement on-demand multicast data forwarding at the link layer.</p>
<div class="fignone" id="EN-US_TASK_0172367917__fig_dc_vrp_l2mc_cfg_007101"><a name="EN-US_TASK_0172367917__fig_dc_vrp_l2mc_cfg_007101"></a><a name="fig_dc_vrp_l2mc_cfg_007101"></a><span class="figcap"><b>Figure 1 </b>Multicast message transmission before and after MLD snooping is configured on a Layer 2 device</span><br><span><img class="vsd" src="images/fig_dc_vrp_l2mc_cfg_007101.png" width="NaN" height="NaN"></span><br></div>
<p>On the network shown in <a href="#EN-US_TASK_0172367917__fig_dc_vrp_l2mc_cfg_007101">Figure 1</a>, Receiver A and Receiver B request the service of a multicast group, but Receiver C does not. Before MLD snooping is configured, the Layer 2 device broadcasts the multicast data at the data link layer, and all the receivers can receive the data. After MLD snooping is configured, the Layer 2 device sends the multicast data only to Receiver A and Receiver B who request the data. Therefore, Receiver C does not receive the data of the multicast group.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367917__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><ul><li><p>Configure basic VLAN and VPLS functions.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367917__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To configure MLD snooping, you need the following data.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="8.57%" id="mcps1.4.3.3.1.3.1.1" liSelected="liSelected"><p>No.</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="91.43%" id="mcps1.4.3.3.1.3.1.2" liSelected="liSelected"><p>Data</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="8.57%" headers="mcps1.4.3.3.1.3.1.1 "><p>1</p>
</td>
<td class="cellrowborder" valign="top" width="91.43%" headers="mcps1.4.3.3.1.3.1.2 "><p>VLAN ID<span> or VSI name</span> (required by MLD snooping)</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="8.57%" headers="mcps1.4.3.3.1.3.1.1 "><p>2</p>
</td>
<td class="cellrowborder" valign="top" width="91.43%" headers="mcps1.4.3.3.1.3.1.2 "><p>(Optional) Router interface aging time</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="8.57%" headers="mcps1.4.3.3.1.3.1.1 "><p>3</p>
</td>
<td class="cellrowborder" valign="top" width="91.43%" headers="mcps1.4.3.3.1.3.1.2 "><p>(Optional) Dynamic aging time of member entries, addresses of the multicast group and multicast source for prompt Join, and the range of multicast groups that member ports can promptly leave</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="8.57%" headers="mcps1.4.3.3.1.3.1.1 "><p>4</p>
</td>
<td class="cellrowborder" valign="top" width="91.43%" headers="mcps1.4.3.3.1.3.1.2 "><p>(Optional) Range and number of multicast groups to be limited</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="8.57%" headers="mcps1.4.3.3.1.3.1.1 "><p>5</p>
</td>
<td class="cellrowborder" valign="top" width="91.43%" headers="mcps1.4.3.3.1.3.1.2 "><p>(Optional) Aging time of entries triggered by multicast traffic</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0072.html">Configuring Basic MLD Snooping Functions</a>
</dt>
<dd>
Configuring basic MLD snooping functions involves enabling MLD snooping and setting the MLD version. Those basic functions need to be configured before you configure other MLD snooping functions.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0073.html">(Optional) Setting the Aging Time for Router Ports</a>
</dt>
<dd>
The aging time of router ports can be set based on the network stability to balance the update of multicast entries and network changes.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0074.html">(Optional) Configuring Static Ports</a>
</dt>
<dd>
On a network with a stable topology, you can configure static ports, including static router ports and static multicast group member ports.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0075.html">(Optional) Configuring Rapid Group Member Information Update</a>
</dt>
<dd>
Rapid group member information update can be configured to enable devices to quickly update Layer 2 multicast entries generated based on Report/Done messages received from group members, improving the multicast data forwarding efficiency.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0076.html">(Optional) Setting the Aging Time for Entries Triggered by Multicast Traffic</a>
</dt>
<dd>
Setting the aging time for Layer 2 multicast forwarding entries triggered by multicast traffic can balance the forwarding efficiency and system performance.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0077.html">(Optional) Configuring MLD Snooping Policies</a>
</dt>
<dd>
To improve service security, configure MLD snooping policies on a Layer 2 multicast device to filter multicast messages or restrict the multicast group range that hosts can join.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0078.html">(Optional) Configuring Prompt Response to Layer 2 Network Topology Changes</a>
</dt>
<dd>
Prompt response to Layer 2 network topology changes enables a device to correctly forward multicast data based on the new network topology, ensuring uninterrupted service forwarding.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_protocol-packet_encapsulation.html">(Optional) Configuring the System to Retain the Tag Carried in an MLD Report Message</a>
</dt>
<dd>
When an L2VPN accesses an L3VPN, you can configure the system to retain the tag carried in an MLD Report message so that the message can be normally processed when being forwarded from an L2VE sub-interface to an L3VE QinQ VLAN tag termination sub-interface.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0079.html">Verifying the Configuration</a>
</dt>
<dd>
After MLD snooping is configured, you can view the router port and member port lists, forwarding table, and querier parameters.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0000.html">Layer 2 Multicast Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0066.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2mc_cfg_0080.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>