
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring PIM Anycast-RP (IPv6)">
<meta name="abstract" content="In the scenario where multiple multicast sources and receivers are located in a PIM-SM domain, you can configure Anycast-RP peer relationships so that IP routing will automatically select the topologically closest Rendezvous Point (RP) for each source and receiver. This alleviates burdens on RPs, implements RP backup, and optimizes multicast forwarding paths.">
<meta name="description" content="In the scenario where multiple multicast sources and receivers are located in a PIM-SM domain, you can configure Anycast-RP peer relationships so that IP routing will automatically select the topologically closest Rendezvous Point (RP) for each source and receiver. This alleviates burdens on RPs, implements RP backup, and optimizes multicast forwarding paths.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2036.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2039.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2164.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367528">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring PIM Anycast-RP (IPv6)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172367528"></a><a name="EN-US_TASK_0172367528"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring PIM Anycast-RP (IPv6)</h1>
<div class="taskbody"><p>In the scenario where multiple multicast sources and receivers are located in a PIM-SM domain, you can configure Anycast-RP peer relationships so that IP routing will automatically select the topologically closest Rendezvous Point (RP) for each source and receiver. This alleviates burdens on RPs, implements RP backup, and optimizes multicast forwarding paths.</p>
<div class="context"><a name="EN-US_TASK_0172367528__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>In a traditional PIM-SM domain, all multicast groups map to one RP. When the network is overloaded or traffic congests on an RP, the RP may be overburdened. If the RP fails, routes converge slowly or multicast packets are forwarded over non-optimal paths. Configuring the PIM Anycast-RP can address these problems. IP routing will automatically select the topologically closest RP for each source and receiver. This feature can accelerate data transmission to receivers.</p>
<p>On the network shown in <a href="#EN-US_TASK_0172367528__fig_dc_vrp_multicast_cfg_216301">Figure 1</a>, there are multiple multicast sources and receivers in the PIM-SM domain. Receiver 2 requests multicast data from the source. Configure Anycast-RP peer relationships between <span class="keyword">Device</span> C and <span class="keyword">Device</span> D so that Receiver 2 can send a Join message to the closest RP, that is, <span class="keyword">Device</span> D. After receiving multicast data from the source, <span class="keyword">Device</span> A encapsulates the multicast data into a Register message and sends it to <span class="keyword">Device</span> C. Upon receipt, <span class="keyword">Device</span> C forwards the Register message to <span class="keyword">Device</span> D and Receiver 2 can receive the multicast data from the source.</p>
<div class="fignone" id="EN-US_TASK_0172367528__fig_dc_vrp_multicast_cfg_216301"><a name="EN-US_TASK_0172367528__fig_dc_vrp_multicast_cfg_216301"></a><a name="fig_dc_vrp_multicast_cfg_216301"></a><span class="figcap"><b>Figure 1 </b>Configuring PIM Anycast-RP</span><br><span><img class="vsd" src="images/fig_dc_vrp_multicast_cfg_216301.png"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.5.1.4.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.5.1.4.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.5.1.4.1.3" liSelected="liSelected"><p>IPv6 Address</p>
<p>Link-local Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span> A</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p>interface1, GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:1::1/64</p>
<p>FE80::1</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>interface2, GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:2::1/64</p>
<p>FE80::2</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span> B</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p>interface1, GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:3::1/64</p>
<p>FE80::3</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="5" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span> C</p>
<p></p>
<p></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p>interface1, GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:4::1/64</p>
<p>FE80::4</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>interface2, GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:2::2/64</p>
<p>FE80::5</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>interface3, GE <span>0/3/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:5::1/64</p>
<p>FE80::6</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>Loopback0</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:7::7/128</p>
<p>FE80::7</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>Loopback1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:8::8/128</p>
<p>FE80::8</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="5" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.1 "><p><span class="keyword">Device</span> D</p>
<p></p>
<p></p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.2 "><p>interface1, GE <span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:3::2/64</p>
<p>FE80::9</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>interface2, GE <span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:6::1/64</p>
<p>FE80::10</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>interface3, GE <span>0/3/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:4::2/64</p>
<p>FE80::11</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>Loopback0</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:7::7/128</p>
<p>FE80::12</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.2 "><p>Loopback1</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.5.1.4.1.3 "><p>2001:db8:9::9/128</p>
<p>FE80::13</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367528__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Assign an IPv6 address to each <span class="keyword">Router</span> interface and configure Open Shortest Path First version 3 (OSPFv3) to implement IP interworking.</p>
</li><li><p>Enable multicast routing on each <span class="keyword">Router</span> and PIM-SM on each <span class="keyword">Router</span> interface.</p>
</li><li><p>Enable Multicast Listener Discovery (MLD) on interfaces connecting <span class="keyword">Router</span>s to hosts.</p>
</li><li><p>On <span class="keyword">Device</span> C and <span class="keyword">Device</span> D, configure the Loopback 0 interfaces as both Candidate-Rendezvous Points (C-RPs) and Candidate-BootStrap Routers (C-BSRs).</p>
</li><li><p>Configure the address of the Loopback 0 interfaces on <span class="keyword">Device</span> C and <span class="keyword">Device</span> D as the Anycast-RP address.</p>
</li><li><p>On <span class="keyword">Device</span> C and <span class="keyword">Device</span> D, configure the addresses of the Loopback 1 interfaces as the local addresses of Anycast-RPs.</p>
</li><li><p>Configure Anycast-RP peer relationships between <span class="keyword">Device</span> C and <span class="keyword">Device</span> D.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367528__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Multicast group address: FF5E::6/64</p>
</li><li><p>RP address</p>
</li><li><p>Local RP address of the Anycast-RP</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367528__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IPv6 address to each <span class="keyword">Router</span> interface and configure OSPFv3 to implement IP interworking. For configuration details, see <a href="#EN-US_TASK_0172367528__sectiondc_vrp_multicast_cfg_216305">Configuration Files</a> in this section.</span><p><p># Enable global IPv6 on <span class="keyword">Device</span> A.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>A</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ipv6</strong></pre>
<p># Enable global IPv6 on <span class="keyword">Device</span> B.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>B</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ipv6</strong></pre>
<p># Enable global IPv6 on <span class="keyword">Device</span> C.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>C</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>ipv6</strong></pre>
<p># Enable global IPv6 on <span class="keyword">Device</span> D.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>D</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>ipv6</strong></pre>
<p># Assign an IPv6 address and a link-local address for each <span class="keyword">Router</span> interface based on <a href="#EN-US_TASK_0172367528__fig_dc_vrp_multicast_cfg_216301">Figure 1</a>.</p>
<p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address 2001:db8:1::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address fe80::1 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>ipv6 address 2001:db8:2::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>ipv6 address fe80::2 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address 2001:db8:3::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address fe80::3 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address 2001:db8:4::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address fe80::4 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>ipv6 address 2001:db8:2::2 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>ipv6 address fe80::5 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/3/0</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/3/0</span>] <strong>ipv6 address 2001:db8:5::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/3/0</span>] <strong>ipv6 address fe80::6 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>ipv6 address 2001:db8:7::7 128</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>ipv6 address fe80::7 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack1] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack1] <strong>ipv6 address 2001:db8:8::8 128</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack1] <strong>ipv6 address fe80::8 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack1] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address 2001:db8:3::2 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/0</span>] <strong>ipv6 address fe80::9 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>ipv6 address 2001:db8:6::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>ipv6 address fe80::10 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface GigabitEthernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/3/0</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/3/0</span>] <strong>ipv6 address 2001:db8:4::2 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/3/0</span>] <strong>ipv6 address fe80::11 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack0] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack0] <strong>ipv6 address 2001:db8:7::7 128</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack0] <strong>ipv6 address fe80::12 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack1] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack1] <strong>ipv6 address 2001:db8:9::9 128</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack1] <strong>ipv6 address fe80::13 link-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack1] <strong>quit</strong></pre>
<p># Configure OSPFv3 between <span class="keyword">Router</span>s to implement IP interworking.</p>
<p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>ospfv3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-1] <strong>router-id 10.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-1] <strong>area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>ospfv3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospfv3-1] <strong>router-id 10.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospfv3-1] <strong>area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospfv3-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>ospfv3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospfv3-1] <strong>router-id 10.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospfv3-1] <strong>area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospfv3-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/3/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack1] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack1] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>ospfv3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospfv3-1] <strong>router-id 10.4.4.4</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospfv3-1] <strong>area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospfv3-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface GigabitEthernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/3/0</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface loopback0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack0] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface loopback1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack1] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack1] <strong>quit</strong></pre>
</p></li><li><span>Enable IPv6 multicast routing. Enable IPv6 PIM-SM on each <span class="keyword">Router</span> interface and enable multicast listener discovery (MLD) on the interfaces connecting <span class="keyword">Router</span>s to user hosts.</span><p><p># Enable IPv6 multicast routing on all <span class="keyword">Router</span>s. Enable IPv6 PIM-SM on each <span class="keyword">Router</span> interface and enable MLD on the interfaces connecting <span class="keyword">Device</span> C and <span class="keyword">Device</span> D to user hosts.</p>
<p># Configure <span class="keyword">Device</span> A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>multicast ipv6 routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong></pre>
<p># Configure <span class="keyword">Device</span> B.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>multicast ipv6 routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B] <strong>commit</strong></pre>
<p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>multicast ipv6 routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/3/0</span>] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/3/0</span>] <strong>mld enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack1] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack1] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>multicast ipv6 routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/0</span>] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>mld enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface GigabitEthernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/3/0</span>] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/3/0</span>] <strong>mld enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack0] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>interface loopback 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack1] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-LoopBack1] <strong>quit</strong></pre>
</p></li><li><span>On <span class="keyword">Device</span> C and <span class="keyword">Device</span> D, configure the Loopback 0 interfaces as both C-RPs and C-BSRs.</span><p><p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>pim-ipv6</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6] <strong>c-bsr 2001:db8:7::7</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6] <strong>c-rp 2001:db8:7::7</strong></pre>
<p># Configure <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>pim-ipv6</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>c-bsr 2001:db8:7::7</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>c-rp 2001:db8:7::7</strong></pre>
</p></li><li><span>Configure the address of the Loopback 0 interfaces on <span class="keyword">Device</span> C and <span class="keyword">Device</span> D as the Anycast-RP address.</span><p><p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6] <strong>anycast-rp 2001:db8:7::7</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6-anycast-rp-2001:DB8:7::7] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>anycast-rp 2001:db8:7::7</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6-anycast-rp-2001:DB8:7::7] <strong>quit</strong></pre>
</p></li><li><span>On <span class="keyword">Device</span> C and <span class="keyword">Device</span> D, configure the addresses of the Loopback 1 interfaces as the local addresses of Anycast-RPs.</span><p><p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6] <strong>anycast-rp 2001:db8:7::7</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6-anycast-rp-2001:DB8:7::7] <strong>local-address 2001:DB8:8::8</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6-anycast-rp-2001:DB8:7::7] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>anycast-rp 2001:db8:7::7</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6-anycast-rp-2001:DB8:7::7] <strong>local-address 2001:db8:9::9</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6-anycast-rp-2001:DB8:7::7] <strong>quit</strong></pre>
</p></li><li><span>Configure Anycast-RP peer relationships between <span class="keyword">Device</span> C and <span class="keyword">Device</span> D.</span><p><p># Configure <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6] <strong>anycast-rp 2001:db8:7::7</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6-anycast-rp-2001:DB8:7::7] <strong>peer 2001:db8:9::9</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6-anycast-rp-2001:DB8:7::7] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim6] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>commit</strong></pre>
<p># Configure <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>anycast-rp 2001:db8:7::7</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6-anycast-rp-2001:DB8:7::7] <strong>peer 2001:db8:8::8</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6-anycast-rp-2001:DB8:7::7] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <strong>display pim ipv6 rp-info</strong> command on <span class="keyword">Device</span> C and <span class="keyword">Device</span> D to check RP information.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>C&gt; <strong>display pim ipv6 rp-info</strong></pre>
<pre class="screen"> VPN-Instance: public net
 PIM-SM BSR RP Number:1
 Group/MaskLen: FF00::/8
     <strong>RP: 2001:DB8:7::7 (local)</strong>
     Priority: 192
     Uptime: 00:17:45
     Expires: 00:01:45</pre>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display pim ipv6 rp-info</strong></pre>
<pre class="screen"> VPN-Instance: public net
 PIM-SM BSR RP Number:1
 Group/MaskLen: FF00::/8
     <strong>RP: 2001:DB8:7::7 (local)</strong>
     Priority: 192
     Uptime: 00:16:26
     Expires: 00:02:04</pre>
<p>The preceding command output shows that <span class="keyword">Device</span> C and <span class="keyword">Device</span> D both serve as an RP and can forward Register messages from the multicast source to each other.</p>
<p># Have Source (2001:db8:1::2/64) send multicast data to group G (ff5e::6). Have Source send a Register message to <span class="keyword">Device</span> C and have Receiver 2 send a Join message to <span class="keyword">Device</span> D. Then, run the <strong>display pim ipv6 routing-table</strong> command to check PIM entries on each <span class="keyword">Router</span>.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>C&gt; <strong>display pim ipv6 routing-table</strong></pre>
<pre class="screen"> VPN-Instance: public net
 Total 0 (*, G) entry; 1 (S, G) entry

 (2001:DB8:1::2, FF5E::6)
     <strong>RP: 2001:DB8:7::7 (local)</strong>
     Protocol: pim-sm, Flag: SPT ACT
     UpTime: 00:01:40
     Upstream interface: GigabitEthernet<span>0/2/0</span>, Refresh time: 00:01:40
         Upstream neighbor: FE80::2
         RPF prime neighbor: FE80::2
     Downstream interface(s) information:
     Total number of downstreams: 1
         1: GigabitEthernet<span>0/1/0</span>
             Protocol: pim-sm, UpTime: 00:00:45, Expires: 00:02:45
</pre>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display pim ipv6 routing-table</strong></pre>
<pre class="screen"> VPN-Instance: public net
 Total 1 (*, G) entry; 1 (S, G) entry

 (*, FF5E::6)
     <strong>RP: 2001:DB8:7::7 (local)</strong>
     Protocol: pim-sm, Flag: WC
     UpTime: 00:01:14
     Upstream interface: Register, Refresh time: 00:01:14
         Upstream neighbor: NULL
         RPF prime neighbor: NULL
     Downstream interface(s) information:
     Total number of downstreams: 1
         1: GigabitEthernet<span>0/2/0</span>
             Protocol: mld, UpTime: 00:01:14, Expires: -

 (2001:DB8:1::2, FF5E::6)
     <strong>RP: 2001:DB8:7::7 (local)</strong>
     Protocol: pim-sm, Flag: SWT ACT
     UpTime: 00:00:17
     Upstream interface: Register, Refresh time: 00:00:17
         Upstream neighbor: NULL
         RPF prime neighbor: NULL
     Downstream interface(s) information:
     Total number of downstreams: 1
         1: GigabitEthernet<span>0/2/0</span>
             Protocol: pim-sm, UpTime: 00:00:17, Expires: -
</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172367528__sectiondc_vrp_multicast_cfg_216305"><a name="EN-US_TASK_0172367528__sectiondc_vrp_multicast_cfg_216305"></a><a name="sectiondc_vrp_multicast_cfg_216305"></a><a name="EN-US_TASK_0172367528__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span> A configuration file</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>A
#
 multicast ipv6 routing-enable
#
ospfv3 1
 router-id 10.1.1.1
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:1::1/64
 ipv6 address FE80::1 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:2::1/64
 ipv6 address FE80::2 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
return
</pre>
</li><li><p><span class="keyword">Device</span> B configuration file</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>B
#
 multicast ipv6 routing-enable
#
ospfv3 1
 router-id 10.2.2.2
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:3::1/64
 ipv6 address FE80::3 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
return
</pre>
</li><li><p><span class="keyword">Device</span> C configuration file</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>C
#
 multicast ipv6 routing-enable
#
ospfv3 1
 router-id 10.3.3.3
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:4::1/64
 ipv6 address FE80::4 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:2::2/64
 ipv6 address FE80::5 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:5::1/64
 ipv6 address FE80::6 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
 mld enable
#
interface LoopBack0
 ipv6 enable
 ipv6 address 2001:DB8:7::7/128
 ipv6 address FE80::7 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:8::8/128
 ipv6 address FE80::8 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
<span>pim-ipv6</span>
 c-bsr 2001:DB8:7::7
 c-rp 2001:DB8:7::7
 anycast-rp 2001:DB8:7::7
  local-address 2001:DB8:8::8
  peer 2001:DB8:9::9
#
return</pre>
</li><li><p><span class="keyword">Device</span> D configuration file</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>D
#
 multicast ipv6 routing-enable
#
ospfv3 1
 router-id 10.4.4.4
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:3::2/64
 ipv6 address FE80::9 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:6::1/64
 ipv6 address FE80::10 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:4::2/64
 ipv6 address FE80::11 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
 mld enable
#
interface LoopBack0
 ipv6 enable
 ipv6 address 2001:DB8:7::7/128
 ipv6 address FE80::12 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:9::9/128
 ipv6 address FE80::13 link-local
 ospfv3 1 area 0.0.0.0
 pim ipv6 sm
#
<span>pim-ipv6</span>
 c-bsr 2001:DB8:7::7
 c-rp 2001:DB8:7::7
 anycast-rp 2001:DB8:7::7
  local-address 2001:DB8:9::9
  peer 2001:DB8:8::8
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2036.html">Configuration Examples for IPv6 PIM
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2039.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2164.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>