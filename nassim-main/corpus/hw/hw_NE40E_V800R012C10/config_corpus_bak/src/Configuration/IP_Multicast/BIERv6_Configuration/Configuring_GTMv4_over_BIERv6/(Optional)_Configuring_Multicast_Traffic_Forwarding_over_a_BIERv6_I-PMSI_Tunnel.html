
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Multicast Traffic Forwarding over a BIERv6 I-PMSI Tunnel">
<meta name="abstract" content="An I-PMSI tunnel connects all PEs on the network-side public network. If a wildcard is used when an address pool range and criteria are configured for the switching to a selective-PMSI (S-PMSI) tunnel, no I-PMSI tunnels need to be created.">
<meta name="description" content="An I-PMSI tunnel connects all PEs on the network-side public network. If a wildcard is used when an address pool range and criteria are configured for the switching to a selective-PMSI (S-PMSI) tunnel, no I-PMSI tunnels need to be created.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0032.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0033.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0035.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001188582637">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring Multicast Traffic Forwarding over a BIERv6 I-PMSI Tunnel</title>
</head>
<body><a name="EN-US_TASK_0000001188582637"></a><a name="EN-US_TASK_0000001188582637"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring Multicast Traffic Forwarding over a BIERv6 I-PMSI Tunnel</h1>
<div class="taskbody"><p>An I-PMSI tunnel connects all PEs on the network-side public network. If a wildcard is used when an address pool range and criteria are configured for the switching to a selective-PMSI (S-PMSI) tunnel, no I-PMSI tunnels need to be created.</p>
<div class="context"><a name="EN-US_TASK_0000001188582637__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>An I-PMSI tunnel is established between a sender PE and all receiver PEs. Therefore, you need to complete the following configurations on the sender PE and all receiver PEs.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001188582637__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure the sender PE.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+routing-enable"><b><span class="cmdname">multicast routing-enable</span></b></a></span><p><p>Multicast routing is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+mvpn+ipv6-underlay"><b><span class="cmdname">multicast mvpn ipv6-underlay</span></b></a> <i><span class="varname">mvpnid</span></i></span><p><p>An MVPN IPv6 ID is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+vpn-public"><b><span class="cmdname">multicast vpn-public</span></b></a></span><p><p>MVPN is enabled on the public network, and the public network IPv4 address family MVPN view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=sender-enable"><b><span class="cmdname">sender-enable</span></b></a></span><p><p>The PE is configured as a sender PE.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6+underlay+enable"><b><span class="cmdname">ipv6 underlay enable</span></b></a></span><p><p>IPv6 forwarding is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=src-dt4"><b><span class="cmdname">src-dt4</span></b></a> <strong><span>locator </span></strong><i><span class="varname">locator-name</span></i> <strong><span>sid</span></strong> <i><span class="varname">sid-val</span></i> [ <strong><span>signal-format msid</span></strong> ]</span><p><p>A Src.DT4 SID is configured.</p>
</p><p><p>The Src.DT4 SID must be an IPv6 address of the network segment to which the locator of the local device belongs.</p>
<p>By default, the device uses the Prefix-SID to carry Src.DT4 SID information. To configure the device to use the MSID to carry Src.DT4 SID information, run the <strong><span>signal-format msid</span></strong> command.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=target"><b><span class="cmdname">target</span></b></a><strong> </strong>{ <em>vrfRT</em> } &amp;&lt;1-8&gt; [ <em>vrfRTType</em> ]</span><p><p>An MVPN target is configured for the public network MVPN address family.</p>
</p><p><p>Multiple MVPN targets can be configured for the public network MVPN address family, and a maximum of eight MVPN targets can be configured using one target command.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=auto-discovery+inter-as"><b><span class="cmdname">auto-discovery inter-as</span></b></a></span><p><p>Inter-AS automatic discovery is enabled.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure a PIM-SM RPT setup mode.</span><p><p>To allow ASM RPTs to be set up across the public network, run the <a href="cmdqueryname=rpt-spt+mode"><b><span class="cmdname">rpt-spt mode</span></b></a> command. To prevent ASM RPTs from being set up across the public network, run the <a href="cmdqueryname=spt-only+mode"><b><span class="cmdname">spt-only mode</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=bier+load-balance-entropy+source-group"><b><span class="cmdname">bier load-balance-entropy source-group</span></b></a></span><p><p>The entropy mode is configured for GTMv4 over BIERv6 load balancing.</p>
</p><p><p>Perform this operation only if load balancing has been enabled using the <a href="cmdqueryname=max-load-balance"><b><span class="cmdname">max-load-balance</span></b></a> <i><span class="varname">number</span></i> command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=import+msdp"><b><span class="cmdname">import msdp</span></b></a></span><p><p>The device is configured to transmit (S, G) entry information in Multicast Source Discovery Protocol (MSDP) Source Active (SA) messages to a remote PE through BGP Source Active A-D routes.</p>
</p><p><p>If PIM-SM RPT setup is not across the public network, you can configure a PE or CE as an RP. If a CE is configured as an RP, an MSDP peer relationship needs to be established between the CE and its connected PE, and the CE transmit (S, G) entry information to the PE through MSDP SA messages. To enable this PE to transmit the (S, G) entry information to the remote PE through BGP Source Active A-D routes, run this command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipmsi-tunnel"><b><span class="cmdname">ipmsi-tunnel</span></b></a></span><p><p>The public network MVPN I-PMSI view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bier+%28MVPN-IPMSI+view%29"><b><span class="cmdname">bier</span></b></a> [ <strong><span>sub-domain</span></strong> <i><span class="varname">sub-domain-val</span></i> ] [ <strong><span>bsl</span></strong> { <strong><span>64</span></strong> | <strong><span>128</span></strong> | <strong><span>256</span></strong> } ]</span><p><p>The I-PMSI tunnel type is set to BIERv6.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the public network MVPN I-PMSI view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the public network IPv4 address family MVPN view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a receiver PE.</span><p><p>Perform the following operations on all receiver PEs.</p>
</p><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+routing-enable"><b><span class="cmdname">multicast routing-enable</span></b></a></span><p><p>Multicast routing is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+mvpn"><b><span class="cmdname">multicast mvpn</span></b></a> <strong><span>ipv6-underlay</span></strong> <i><span class="varname">mvpn-id</span></i></span><p><p>An MVPN ID is configured.</p>
</p><p><p>You are advised to set the MVPN ID to the loopback interface address of the local device.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=multicast+vpn-public"><b><span class="cmdname">multicast vpn-public</span></b></a></span><p><p>MVPN is enabled on the public network, and the public network IPv4 address family MVPN view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=target"><b><span class="cmdname">target</span></b></a><strong> </strong>{ <em>vrfRT</em> } &amp;&lt;1-8&gt; [ <em>vrfRTType</em> ]</span><p><p>An MVPN target is configured.</p>
</p><p><p>Multiple MVPN targets can be configured for the public network MVPN address family, and a maximum of eight MVPN targets can be configured using one target command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=c-multicast+signaling"><b><span class="cmdname">c-multicast signaling</span></b></a> <strong><span>bgp</span></strong></span><p><p>BGP is configured as the signaling protocol for transmitting C-multicast routes.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6+underlay+enable"><b><span class="cmdname">ipv6 underlay enable</span></b></a></span><p><p>IPv6 forwarding is enabled.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure a PIM-SM RPT setup mode.</span><p><p>To allow ASM RPTs to be set up across the public network, run the <a href="cmdqueryname=rpt-spt+mode"><b><span class="cmdname">rpt-spt mode</span></b></a> command. To prevent ASM RPTs from being set up across the public network, run the <a href="cmdqueryname=spt-only+mode"><b><span class="cmdname">spt-only mode</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=export+msdp"><b><span class="cmdname">export msdp</span></b></a></span><p><p>The device is enabled to transmit the (S, G) entry information learned through BGP Source Active A-D routes to the RP through MSDP SA messages.</p>
</p><p><p>If PIM-SM RPT setup is not across the public network, you can configure a PE or CE as an RP. If a CE is configured as an RP, an MSDP peer relationship needs to be established between the CE and its connected PE. To enable this PE to transmit the (S, G) entry information learned through BGP Source Active A-D routes to the remote CE, run the <a href="cmdqueryname=export+msdp"><b><span class="cmdname">export msdp</span></b></a> command.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the public network IPv4 address family MVPN view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0032.html">Configuring GTMv4 over BIERv6
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0033.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0035.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>