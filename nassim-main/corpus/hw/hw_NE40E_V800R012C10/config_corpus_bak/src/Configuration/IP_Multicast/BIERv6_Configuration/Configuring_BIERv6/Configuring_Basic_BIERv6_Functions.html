
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Basic BIERv6 Functions">
<meta name="abstract" content="Configuring basic BIERv6 functions involves configuring sub-domains, BFR-prefixes, End.BIER SIDs, and BSLs for bit forwarding routers (BFRs). In addition, a BFR-ID needs to be configured for each bit forwarding egress router (BFER).">
<meta name="description" content="Configuring basic BIERv6 functions involves configuring sub-domains, BFR-prefixes, End.BIER SIDs, and BSLs for bit forwarding routers (BFRs). In addition, a BFR-ID needs to be configured for each bit forwarding egress router (BFER).">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0004.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0318574770">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring Basic BIERv6 Functions</title>
</head>
<body><a name="EN-US_TASK_0318574770"></a><a name="EN-US_TASK_0318574770"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Basic BIERv6 Functions</h1>
<div class="taskbody"><p>Configuring basic BIERv6 functions involves configuring sub-domains, BFR-prefixes, End.BIER SIDs, and BSLs for bit forwarding routers (BFRs). In addition, a BFR-ID needs to be configured for each bit forwarding egress router (BFER).</p>
<div class="context"><a name="EN-US_TASK_0318574770__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A BIERv6 network consists of one or more sub-domains. <a href="#EN-US_TASK_0318574770__fig7375201444012">Figure 1</a> shows a BIERv6 network. All nodes that support BIERv6 forwarding are called BFRs. The ingress node of multicast traffic is called a bit forwarding ingress router (BFIR), and the egress node is called a BFER.</p>
<div class="fignone" id="EN-US_TASK_0318574770__fig7375201444012"><a name="EN-US_TASK_0318574770__fig7375201444012"></a><a name="fig7375201444012"></a><span class="figcap"><b>Figure 1 </b>BIERv6 networking</span><br><span><img class="imgResize" src="figure/en-us_image_0318574774.png" width="523.6875" height="368.62918400000007" title="Click to enlarge"></span></div>
<p></p>
<p>A BFR can belong to one or more sub-domains. When planning sub-domains, ensure that the BFIR and all the BFERs to which the multicast traffic received by the BFIR is to be sent reside in the same sub-domain. This is necessary because sub-domain stitching is currently not supported. To facilitate management and improve the forwarding efficiency on a multicast network, you are advised to plan sub-domains based on the suggestions provided in <a href="#EN-US_TASK_0318574770__table1511911521618">Table 1</a>. A domain consists of one or more sub-domains and does not need to be configured.</p>

<div class="tableBorder"><a name="EN-US_TASK_0318574770__table1511911521618"></a><a name="table1511911521618"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0318574770__table1511911521618" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Sub-domain planning suggestions</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="22.23%" id="mcps1.4.1.5.2.3.1.1" liSelected="liSelected"><p>Network Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="77.77%" id="mcps1.4.1.5.2.3.1.2" liSelected="liSelected"><p>Planning Suggestion</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="22.23%" headers="mcps1.4.1.5.2.3.1.1 "><p>Single-AS small- and medium-sized network</p>
</td>
<td class="cellrowborder" valign="top" width="77.77%" headers="mcps1.4.1.5.2.3.1.2 "><p>Plan only one sub-domain, with all IGP areas in it.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.23%" headers="mcps1.4.1.5.2.3.1.1 "><p>Single-AS large-scale network</p>
</td>
<td class="cellrowborder" valign="top" width="77.77%" headers="mcps1.4.1.5.2.3.1.2 "><p>The solutions are as follows:</p>
<p>Plan only one sub-domain, with all IGP areas in it. In addition, set BFR-IDs and BSLs to let the BFERs in the same IGP area have the same set ID. This helps improve forwarding efficiency. The concept and calculation formula of a set ID are described in the following section.</p>

</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.23%" headers="mcps1.4.1.5.2.3.1.1 "><p>Single-AS multi-topology network</p>
</td>
<td class="cellrowborder" valign="top" width="77.77%" headers="mcps1.4.1.5.2.3.1.2 "><p>Plan sub-domains in one domain based on the number of topologies, with each topology corresponding to one sub-domain.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="22.23%" headers="mcps1.4.1.5.2.3.1.1 "><p>Multi-AS large-scale network</p>
</td>
<td class="cellrowborder" valign="top" width="77.77%" headers="mcps1.4.1.5.2.3.1.2 "><p>Inter-AS static traversal must be deployed. The sub-domain planning solutions are as follows:</p>
<p>Plan only one sub-domain, with all ASs in it. In addition, set BFR-IDs and BSLs to let the BFERs in the same AS have the same set ID. This helps improve forwarding efficiency. The concept and calculation formula of a set ID are described in the following section.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>One BFR can be configured with one or more BSLs. The BFR-ID of a BFER in a sub-domain must be unique. Planning BSLs and BFR-IDs properly can reduce the number of multicast packet copies and improve the forwarding efficiency on the multicast network. When planning BSLs and BFR-IDs, you are advised to adhere to the following guidelines:</p>
<ul><li>Denseness: Set the maximum BFR-ID as the number of BFERs in a sub-domain to deploy as few sets as possible. For example, if a sub-domain contains up to 256 BFERs, allocate BFR-IDs to the BFERs within the range of 1 to 256. Similarly, if the sub-domain contains up to 512 BFERs, allocate BFR-IDs to the BFERs within the range of 1 to 512.</li><li>Uniqueness: Ensure that each BFR-ID is unique in a sub-domain.</li><li>Region: Allocate the BFERs in the same region to the same set.</li><li>Necessity: Allocate BFR-IDs only for BFERs. If a BFIR also needs to function as a BFER, you also need to configure a BFR-ID for it. For a BFIR-only node (functioning as a BFIR but not a BFER), it does not need to be configured with a BFR-ID.</li><li>Evolvability: Reserve some BFR-IDs in each set for future network expansion.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0318574770__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li id="EN-US_TASK_0318574770__step127334244280"><span id="EN-US_TASK_0318574770__">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Enable SRv6 and configure a locator address.</span><p><p>If SRv6 has been enabled and an SRv6 locator has been configured for the local device, skip this step. Otherwise, perform the following operations:</p>
</p><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=segment-routing+ipv6"><b><span class="cmdname">segment-routing ipv6</span></b></a> command to enable SRv6 and enter the SRv6 view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=locator"><b><span class="cmdname">locator</span></b></a> <i><span class="varname">locator-name</span></i> [ <strong><span>ipv6-prefix</span></strong> <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> [ [ <strong><span>static</span></strong> <i><span class="varname">static-length</span></i> ] | [ <strong><span>args</span></strong> <i><span class="varname">args-length</span></i> ] | [ <strong><span>flex-algo</span></strong> <i><span class="varname">flexAlgoId</span></i> ] ] <sup>*</sup> ] command to configure an SRv6 locator.</span><p><p>You can specify more attributes when creating an SRv6 locator. For details about locator attributes and configuration commands, see the corresponding Command Reference.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the SRv6 locator view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the SRv6 view.</span></li></ol>
</li><li><span>Configure an IPv6 address (to be used as the BFR-prefix) for an interface.</span><p><p>A BFR-prefix is a loopback interface IPv6 address of the BFR in a sub-domain. If an IPv6 address has been configured for the interface on the local device, skip this step; otherwise, perform the following operations:</p>
</p><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the interface view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=ipv6+address"><b><span class="cmdname">ipv6 address</span></b></a> { <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> } command to configure an IPv6 address for the interface.</span><p><p>The IPv6 address must be a global unicast address with the prefix length of 128 bits. It cannot be an address of the subnet to which the locator belongs. If you are prompted that IPv6 has not been enabled on the interface, run the <a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a> command. Similar details will be omitted in the rest of the document.</p>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the interface view.</span></li></ol>
</li><li><span>Run the <a href="cmdqueryname=bier"><b><span class="cmdname">bier</span></b></a> command to enable BIER and enter the BIER view.</span></li><li><span>Run the <a href="cmdqueryname=sub-domain"><b><span class="cmdname">sub-domain</span></b></a> <i><span class="varname">sub-domain-val</span></i><strong><span> ipv6</span></strong> command to specify a sub-domain for the BFR and enter the sub-domain view.</span></li><li><span>Configure BIERv6-related attributes.</span><p><p><a href="#EN-US_TASK_0318574770__table13897184015814">Table 2</a> describes these attributes.</p>

<div class="tableBorder"><a name="EN-US_TASK_0318574770__table13897184015814"></a><a name="table13897184015814"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0318574770__table13897184015814" frame="border" border="1" rules="all"><caption><b>Table 2 </b>BIERv6-related attributes</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25.48254825482548%" id="mcps1.4.2.6.2.2.2.4.1.1" liSelected="liSelected"><p>Operation</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="27.34273427342734%" id="mcps1.4.2.6.2.2.2.4.1.2" liSelected="liSelected"><p>Command</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="47.17471747174717%" id="mcps1.4.2.6.2.2.2.4.1.3" liSelected="liSelected"><p>Remarks</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25.48254825482548%" headers="mcps1.4.2.6.2.2.2.4.1.1 "><p>Configure a BFR-ID for the BFER.</p>
</td>
<td class="cellrowborder" valign="top" width="27.34273427342734%" headers="mcps1.4.2.6.2.2.2.4.1.2 "><p><a href="cmdqueryname=bfr-id"><b><span class="cmdname">bfr-id</span></b></a> <i><span class="varname">bfr-id-val</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="47.17471747174717%" headers="mcps1.4.2.6.2.2.2.4.1.3 "><p>This operation is not required for non-BFER nodes. If a BFIR also needs to function as a BFER, you also need to configure a BFR-ID for it.</p>
<p>On an MVPN over BIERv6 network, all receiver PEs are BFERs.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.48254825482548%" headers="mcps1.4.2.6.2.2.2.4.1.1 "><p>Set the BSL and Max-SI.</p>
</td>
<td class="cellrowborder" valign="top" width="27.34273427342734%" headers="mcps1.4.2.6.2.2.2.4.1.2 "><p><a href="cmdqueryname=encapsulation-type"><b><span class="cmdname">encapsulation-type</span></b></a> <strong><span>ipv6</span></strong>  <strong><span>bsl</span></strong> { <strong><span>64</span></strong> | <strong><span>128</span></strong> | <strong><span>256</span></strong> } <strong><span>max-si</span></strong> <i><span class="varname">max-si-val</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="47.17471747174717%" headers="mcps1.4.2.6.2.2.2.4.1.3 "><p>Max-SI is the maximum set ID in a sub-domain. The formula for calculating the set ID is as follows:</p>
<p><strong>Set ID = int [ (BFR-ID â 1)/BSL ]</strong></p>
<p>In the preceding formula, <strong>int</strong> rounds down to the nearest integer.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.48254825482548%" headers="mcps1.4.2.6.2.2.2.4.1.1 "><p>Specify the interface whose IP address is to be used as the BFR-prefix.</p>
</td>
<td class="cellrowborder" valign="top" width="27.34273427342734%" headers="mcps1.4.2.6.2.2.2.4.1.2 "><p><a href="cmdqueryname=bfr-prefix"><b><span class="cmdname">bfr-prefix</span></b></a> <strong><span>interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } [ <i><span class="varname">ipv6-address-value</span></i> ]</p>
</td>
<td class="cellrowborder" valign="top" width="47.17471747174717%" headers="mcps1.4.2.6.2.2.2.4.1.3 "><p>A loopback interface must be specified, and IS-IS IPv6 must be enabled on the interface.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.48254825482548%" headers="mcps1.4.2.6.2.2.2.4.1.1 "><p>Configure an End.BIER SID.</p>
</td>
<td class="cellrowborder" valign="top" width="27.34273427342734%" headers="mcps1.4.2.6.2.2.2.4.1.2 "><p><a href="cmdqueryname=end-bier"><b><span class="cmdname">end-bier</span></b></a> <strong><span>locator </span></strong><i><span class="varname">locator-name</span></i> <strong><span>sid</span></strong> <i><span class="varname">ipv6-sid</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="47.17471747174717%" headers="mcps1.4.2.6.2.2.2.4.1.3 "><p>The End.BIER SID must be an IPv6 address of the subnet to which the locator belongs.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.48254825482548%" headers="mcps1.4.2.6.2.2.2.4.1.1 "><p>Configure the underlay protocol to be used to advertise BIERv6 information.</p>
</td>
<td class="cellrowborder" valign="top" width="27.34273427342734%" headers="mcps1.4.2.6.2.2.2.4.1.2 "><p><a href="cmdqueryname=protocol"><b><span class="cmdname">protocol</span></b></a> <i><span class="varname">isis</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="47.17471747174717%" headers="mcps1.4.2.6.2.2.2.4.1.3 "><p>Currently, IS-IS or a static BIFT can be used to advertise BIERv6 information. The latter is used in inter-AS static traversal scenarios.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.48254825482548%" headers="mcps1.4.2.6.2.2.2.4.1.1 "><p>(Optional) Configure the maximum number of links for load balancing.</p>
</td>
<td class="cellrowborder" valign="top" width="27.34273427342734%" headers="mcps1.4.2.6.2.2.2.4.1.2 "><p><a href="cmdqueryname=max-load-balance"><b><span class="cmdname">max-load-balance</span></b></a> <i><span class="varname">max-load-balance-num</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="47.17471747174717%" headers="mcps1.4.2.6.2.2.2.4.1.3 "><p>Perform this operation only when BIERv6 link load balancing is required.</p>
<p>For<span class="keyword">NE40E</span><span class="keyword">-M2E</span>, the maximum value of <i><span class="varname">max-load-balance-num</span></i> is affected by the load balancing enhancement factor configured using the <a href="cmdqueryname=load-balance+enhance-factor"><b><span class="cmdname">load-balance enhance-factor</span></b></a> command.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25.48254825482548%" headers="mcps1.4.2.6.2.2.2.4.1.1 "><p>(Optional) Configure the BIERv6 load balancing enhancement factor.</p>
</td>
<td class="cellrowborder" valign="top" width="27.34273427342734%" headers="mcps1.4.2.6.2.2.2.4.1.2 "><p><a href="cmdqueryname=load-balance+enhance-factor"><b><span class="cmdname">load-balance enhance-factor </span></b></a><i><span class="varname">factor-value</span></i></p>
</td>
<td class="cellrowborder" valign="top" width="47.17471747174717%" headers="mcps1.4.2.6.2.2.2.4.1.3 "><p>The maximum value of <i><span class="varname">factor-value</span></i> is equal to the maximum BIERv6 load balancing number (64) divided by the value configured using the <a href="cmdqueryname=max-load-balance"><b><span class="cmdname">max-load-balance</span></b></a> command.</p>
<div class="note"><span class="notetitle"> NOTE: </span><div class="notebody"><p>Only <span class="keyword">NE40E</span><span class="keyword">-M2</span> supports the configuration.</p>
</div></div>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the sub-domain view.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the BIER view.</span></li><li id="EN-US_TASK_0318574770__step56492106710"><span id="EN-US_TASK_0318574770__">Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li><li><span>Repeat <a href="#EN-US_TASK_0318574770__step127334244280">1</a> to <a href="#EN-US_TASK_0318574770__step56492106710">9</a> to configure all other BFRs on the BIERv6 network.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0002.html">Configuring BIERv6
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0004.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>