
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring IPv6 PIM-SM Security">
<meta name="abstract" content="To prevent packet attacks, you can configure filtering policies to improve IPv6 PIM network security, including configuring valid source address ranges and Candidate-Rendezvous Point (C-RP) address ranges.">
<meta name="description" content="To prevent packet attacks, you can configure filtering policies to improve IPv6 PIM network security, including configuring valid source address ranges and Candidate-Rendezvous Point (C-RP) address ranges.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2036.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2037.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2163.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367525">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring IPv6 PIM-SM Security</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172367525"></a><a name="EN-US_TASK_0172367525"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring IPv6 PIM-SM Security</h1>
<div class="taskbody"><p>To prevent packet attacks, you can configure filtering policies to improve IPv6 PIM network security, including configuring valid source address ranges and Candidate-Rendezvous Point (C-RP) address ranges.</p>
<div class="context"><a name="EN-US_TASK_0172367525__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the ISP network shown in <a href="#EN-US_TASK_0172367525__fig_dc_vrp_multicast_cfg_203901">Figure 1</a>, IPv6 multicast services are deployed. An Interior Gateway Protocol (IGP) has been deployed on the network, and IPv6 unicast is running properly. It is required that filtering policies be configured on each <span class="keyword">Router</span> to improve the security of the IPv6 multicast network and ensure that users can receive secure and reliable IPv6 multicast data.</p>
<div class="fignone" id="EN-US_TASK_0172367525__fig_dc_vrp_multicast_cfg_203901"><a name="EN-US_TASK_0172367525__fig_dc_vrp_multicast_cfg_203901"></a><a name="fig_dc_vrp_multicast_cfg_203901"></a><span class="figcap"><b>Figure 1 </b>Configuring IPv6 PIM-SM security</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1, 2, 3, and 4 in this example represent GE <span>0/1/0</span>, GE <span>0/2/0</span>, GE <span>0/3/0</span>, and GE <span>0/1/1</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_multicast_cfg_203901.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367525__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>When configuring IPv6 PIM security, note the following precautions:</p>
<ul><li><p>IPv6 PIM-SM must be enabled before Multicast Listener Discovery (MLD) is enabled.</p>
</li><li><p>The multicast group range that each C-RP serves and the valid C-RP address range can be set only on Candidate-BootStrap Routers (C-BSRs).</p>
</li><li><p>Source address-based and BSR address-based filtering policies need to be configured on all <span class="keyword">Router</span>s.</p>
</li><li><p>Policies for filtering Register messages need to be configured on all C-RPs.</p>
</li><li><p>Policies for filtering Join/Prune messages are generally configured on the last-hop <span class="keyword">Router</span>.</p>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367525__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>Use PIM-SM to configure IPv6 multicast functions. To ensure the security of an IPv6 PIM network, you can configure filtering policies to limit the range of source addresses, BSR addresses, and RP addresses, filter Register messages, Join/Prune messages, and filter PIM neighbors.</p>
<ol><li><p>Configure an IPv6 address for each <span class="keyword">Router</span> interface and an IPv6 unicast routing protocol.</p>
</li><li><p>Enable IPv6 multicast routing on all <span class="keyword">Router</span>s.</p>
</li><li><p>Enable IPv6 PIM-SM on all <span class="keyword">Router</span> interfaces.</p>
</li><li><p>Enable MLD on interfaces that directly connect <span class="keyword">Router</span>s to hosts.</p>
</li><li><p>Configure C-BSRs and C-RPs to elect an RP.</p>
</li><li><p>Set the range of multicast groups that each C-RP serves on the C-BSR.</p>
</li><li><p>Create a policy for filtering Register messages on the C-RP to prevent attacks of the Register messages carrying invalid multicast source information.</p>
</li><li><p>Create source address-based filtering policies on all <span class="keyword">Router</span>s to deny all multicast packets from attack sources.</p>
</li><li><p>Create BSR address-based filtering policies on all <span class="keyword">Router</span>s to prevent BSR spoofing.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367525__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Multicast group address</p>
</li><li><p>Multicast source address</p>
</li><li><p>ACL rules for defining filtering policies</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367525__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IPv6 address for each <span class="keyword">Router</span> interface and an IPv6 unicast routing protocol. For configuration details, see Configuration Files in this section.</span></li><li><span>Enable IPv6 multicast routing on all routers and IPv6 PIM-SM on each <span class="keyword">Router</span> interface.</span><p><p># Configure <span class="keyword">Device</span>A. The configurations of <span class="keyword">Device</span>B, <span class="keyword">Device</span>C, and <span class="keyword">Device</span>D are similar to the configuration of <span class="keyword">Device</span>A. For configuration details, see Configuration Files in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A]<strong> multicast ipv6 routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>]<strong> pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet <span>0/3/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>] <strong>pim ipv6 sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/3/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Enable MLD on the interfaces connected to hosts.</span><p><p># Configure <span class="keyword">Device</span>B. The configuration of <span class="keyword">Device</span>C is similar to the configuration of <span class="keyword">Device</span>B. For configuration details, see Configuration Files in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>mld enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>B-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Configure C-BSRs and C-RPs.</span><p><p># Configure the locations of C-BSRs and C-RPs on <span class="keyword">Device</span> D.</p>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>pim-ipv6</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>c-rp 2001:db8:3::2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6]<strong> c-bsr 2001:db8:3::2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-pim6] <strong>quit</strong></pre>
</p></li><li><span>Configure the range of multicast groups that each C-RP serves and the range of valid C-RP addresses on the C-BSRs.</span><p><p># On <span class="keyword">Device</span>D, configure the range of multicast groups served by each C-RP to ff00::/8 and the range of valid C-RP addresses to 2001:db8:3::2/128.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>acl ipv6 number 3000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-acl6-advance-3000] <strong>rule permit ipv6 source 2001:db8:3::2 128 destination ff00:: 8</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-acl6-advance-3000] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>pim-ipv6</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6]<strong> crp-policy 3000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-pim6] <strong>quit</strong></pre>
</p></li><li><span>Configure a policy for filtering Register messages on all the C-RPs.</span><p><p># On <span class="keyword">Device</span>D, configure a policy for filtering Register messages, allowing an RP to receive only Register messages sent by multicast sources in the range of 2001:db8:5::5/64 to multicast groups in the range of ff0e::1/64.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>acl ipv6 number 3001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-acl6-advance-3001] <strong>rule permit ipv6 source 2001:db8:5::5 64 destination ff0e::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-acl6-advance-3001] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>pim-ipv6</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>register-policy 3001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-pim6] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-pim6] <strong>quit</strong></pre>
</p></li><li><span>Configure source address-based and BSR address-based filtering policies on all the <span class="keyword">Router</span>s.</span><p><p># Configure <span class="keyword">Router</span>A. The configurations of <span class="keyword">Router</span>B, <span class="keyword">Router</span>C, and <span class="keyword">Router</span>D are similar to the configuration of <span class="keyword">Router</span>A. For configuration details, see Configuration Files in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl ipv6 number 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-basic-2000] <strong>rule permit source 2001:db8:5::5 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-basic-2000] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>acl ipv6 number 2001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-basic-2001] <strong>rule permit source 2001:db8:3::2 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl6-basic-2001] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>pim-ipv6</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-pim6] <strong>source-policy 2000</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-pim6] <strong>bsr-policy 2001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-pim6] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-pim6] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <strong>display pim ipv6 bsr-info</strong> command to check BSR information on each <span class="keyword">Router</span>. You can see that the BSR address-based filtering policy takes effect. The following example uses the command output on <span class="keyword">Device</span>B and <span class="keyword">Device</span>D.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display pim ipv6 bsr-info</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Elected AdminScope BSR Count: 0</pre>
<pre class="screen"> Elected BSR Address: 2001:DB8:3::2</pre>
<pre class="screen">     Priority: 0</pre>
<pre class="screen">     Hash mask length: 126</pre>
<pre class="screen">     State: Accept Preferred</pre>
<pre class="screen">     Uptime: 00:04:22</pre>
<pre class="screen">     Expires: 00:01:46</pre>
<pre class="screen">     C-RP Count: 1
</pre>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display pim ipv6 bsr-info</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Elected AdminScope BSR Count: 0</pre>
<pre class="screen"> Elected BSR Address: 2001:DB8:3::2</pre>
<pre class="screen">     Priority: 0</pre>
<pre class="screen">     Hash mask length: 126</pre>
<pre class="screen">     State: Elected</pre>
<pre class="screen">     Uptime: 00:01:10</pre>
<pre class="screen">     Next BSR message scheduled at: 00:00:48</pre>
<pre class="screen">     C-RP Count: 1</pre>
<pre class="screen"> Candidate AdminScope BSR Count: 0</pre>
<pre class="screen"> Candidate BSR Address: 2001:DB8:3::2</pre>
<pre class="screen">     Priority: 0</pre>
<pre class="screen">     Hash mask length: 126</pre>
<pre class="screen">     State: Elected</pre>
<pre class="screen">     Wait to be BSR: 0</pre>
<p># Run the <strong>display pim ipv6 rp-info</strong> command to check RP information on each <span class="keyword">Router</span>. The following example uses the command output on <span class="keyword">Device</span>B.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display pim ipv6 rp-info</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> PIM-SM BSR RP information:</pre>
<pre class="screen"> Group/MaskLen: FF00::/8</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Priority: 192</pre>
<pre class="screen">     Uptime: 00:05:19</pre>
<pre class="screen">     Expires: 00:02:11</pre>
<p># Have the multicast source S (2001:db8:5::5) send multicast packets to multicast group FF15::1. The hosts can receive multicast data sent by the valid multicast source. Then, run the <strong>display pim ipv6 routing-table</strong> command to check the IPv6 PIM routing table on each <span class="keyword">Router</span>.</p>
<pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>display pim ipv6 routing-table</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Total 0 (*, G) entry; 2 (S, G) entries
</pre>
<pre class="screen"> (2001:DB8:5::5, FF15::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Protocol: pim-sm, Flag: SPT LOC ACT</pre>
<pre class="screen">     UpTime: 00:02:15</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:02:15</pre>
<pre class="screen">         Upstream neighbor: NULL</pre>
<pre class="screen">         RPF prime neighbor: NULL</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 3</pre>
<pre class="screen">         1: Register</pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:02:15, Expires:  -</pre>
<pre class="screen">         2: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:02:15, Expires: 00:03:15</pre>
<pre class="screen">         3: GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:02:15, Expires: 00:03:15</pre>
<pre class="screen">&lt;<span class="keyword">Device</span>B&gt; <strong>display pim ipv6 routing-table</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Total 1 (*, G) entry; 2 (S, G) entries
</pre>
<pre class="screen"> (*, FF15::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Protocol: pim-sm, Flag: WC</pre>
<pre class="screen">     UpTime: 00:14:44</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/3/0</span>, Refresh time: 00:14:44</pre>
<pre class="screen">         Upstream neighbor: FE80::9D62:0:FDC5:2</pre>
<pre class="screen">         RPF prime neighbor: FE80::9D62:0:FDC5:2</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: mld, UpTime: 00:14:44, Expires: -
</pre>
<pre class="screen">(2001:DB8:5::5, FF15::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Protocol: pim-sm, Flag: SPT ACT</pre>
<pre class="screen">     UpTime: 00:02:42</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:02:42</pre>
<pre class="screen">         Upstream neighbor: FE80::A01:10C:1</pre>
<pre class="screen">         RPF prime neighbor: FE80::A01:10C:1</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:14:44, Expires: -</pre>
<pre class="screen">&lt;<span class="keyword">Device</span>C&gt; <strong>display pim ipv6 routing-table</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Total 1 (*, G) entry; 1 (S, G) entry
</pre>
<pre class="screen"> (*, FF15::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Protocol: pim-sm, Flag: WC</pre>
<pre class="screen">     UpTime: 00:14:44</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:14:44</pre>
<pre class="screen">         Upstream neighbor: FE80::7493:FE25:1</pre>
<pre class="screen">         RPF prime neighbor: FE80::7493:FE25:1</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: mld, UpTime: 00:14:43, Expires: -
</pre>
<pre class="screen">(2001:DB8:5::5, FF15::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2</pre>
<pre class="screen">     Protocol: pim-sm, Flag: SPT ACT</pre>
<pre class="screen">     UpTime: 00:02:42</pre>
<pre class="screen">      Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:02:42</pre>
<pre class="screen">         Upstream neighbor: FE80::7493:FE25:1</pre>
<pre class="screen">         RPF prime neighbor: FE80::7493:FE25:1</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:02:14, Expires: -</pre>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display pim ipv6 routing-table</strong></pre>
<pre class="screen">VPN-Instance: public net</pre>
<pre class="screen"> Total 1 (*, G) entry; 1 (S, G) entry
</pre>
<pre class="screen"> (*, FF0E::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2 (local)</pre>
<pre class="screen">     Protocol: pim-sm, Flag: WC</pre>
<pre class="screen">     UpTime: 00:16:56</pre>
<pre class="screen">     Upstream interface: Register, Refresh time: 00:16:56</pre>
<pre class="screen">         Upstream neighbor: NULL</pre>
<pre class="screen">         RPF prime neighbor: NULL</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 2</pre>
<pre class="screen">         1: GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:16:56, Expires: 00:02:34</pre>
<pre class="screen">         2: GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:07:56, Expires: 00:02:35
</pre>
<pre class="screen"> (2001:DB8:5::5, FF15::1)</pre>
<pre class="screen">     RP: 2001:DB8:3::2 (local)</pre>
<pre class="screen">     Protocol: pim-sm, Flag: SWT ACT</pre>
<pre class="screen">     UpTime: 00:02:54</pre>
<pre class="screen">     Upstream interface: GigabitEthernet<span>0/1/0</span>, Refresh time: 00:02:54</pre>
<pre class="screen">         Upstream neighbor: FE81::659:10C:3</pre>
<pre class="screen">         RPF prime neighbor: FE81::659:10C:3</pre>
<pre class="screen">     Downstream interface(s) information:</pre>
<pre class="screen">     Total number of downstreams: 1</pre>
<pre class="screen">            1: GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen">             Protocol: pim-sm, UpTime: 00:02:54, Expires: 00:02:36</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172367525__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast ipv6 routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">acl ipv6 number 2000</pre>
<pre class="screen"> rule 5 permit source 2001:DB8:5::5 64</pre>
<pre class="screen">#
acl ipv6 number 2001
 rule 5 permit source 2001:DB8:3::2 64</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:5::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:1::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:2::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/1</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:6::1/64</pre>
<pre class="screen"> pim ipv6 bsr-boundary </pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 1.1.1.1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">pim-ipv6</pre>
<pre class="screen"> bsr-policy 2001
 source-policy 2000</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast ipv6 routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">acl ipv6 number 2000</pre>
<pre class="screen"> rule 5 permit source 2001:DB8:5::5 64</pre>
<pre class="screen">#
acl ipv6 number 2001
 rule 5 permit source 2001:DB8:3::2 64</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:1::2/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:7::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> mld enable</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:3::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 2.2.2.2</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">pim-ipv6</pre>
<pre class="screen"> bsr-policy 2001
 source-policy 2000</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast ipv6 routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">acl ipv6 number 2000</pre>
<pre class="screen"> rule 5 permit source 2001:DB8:5::5 64</pre>
<pre class="screen">#
acl ipv6 number 2001
 rule 5 permit source 2001:DB8:3::2 64</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:4::2/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:8::1/64</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen"> mld enable</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 3.3.3.3</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">pim-ipv6</pre>
<pre class="screen"> bsr-policy 2001
 source-policy 2000</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><p><span class="keyword">Device</span>D configuration file</p>
<pre class="screen">#</pre>
<pre class="screen"> sysname <span class="keyword">Device</span>D</pre>
<pre class="screen">#</pre>
<pre class="screen"> ipv6</pre>
<pre class="screen">#</pre>
<pre class="screen"> multicast ipv6 routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">acl ipv6 number 2000</pre>
<pre class="screen"> rule 5 permit source 2001:DB8:5::5 64</pre>
<pre class="screen">#
acl ipv6 number 2001
 rule 5 permit source 2001:DB8:3::2 64</pre>
<pre class="screen">#
acl ipv6 number 3000
 rule 5 permit ipv6 source 2001:DB8:3::2 128 destination ff00:: 8
#
acl ipv6 number 3001
 rule 5 permit ipv6 source 2001:DB8:5::5 64 destination ff0e::1 64</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:2::2/64</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:3::2/64</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/3/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ipv6 enable</pre>
<pre class="screen"> ipv6 address 2001:DB8:4::1/64</pre>
<pre class="screen"> ospfv3 1 area 0.0.0.0</pre>
<pre class="screen"> pim ipv6 sm</pre>
<pre class="screen">#</pre>
<pre class="screen">ospfv3 1</pre>
<pre class="screen"> router-id 4.4.4.4</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">pim-ipv6</pre>
<pre class="screen"> bsr-policy 2001
 register-policy 3001
 source-policy 2000
 c-bsr 2001:DB8:3::2
 crp-policy 3000
 c-rp 2001:DB8:3::2</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2036.html">Configuration Examples for IPv6 PIM
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2037.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2163.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>