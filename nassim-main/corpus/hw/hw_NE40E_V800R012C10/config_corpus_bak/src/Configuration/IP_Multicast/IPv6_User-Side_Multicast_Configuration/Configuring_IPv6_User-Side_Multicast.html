
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IPv6 User-Side Multicast">
<meta name="abstract" content="User-side multicast enables a BRAS on an IPv6 network to identify users who have joined or left a multicast group, implementing user-based multicast service control and management.">
<meta name="description" content="User-side multicast enables a BRAS on an IPv6 network to identify users who have joined or left a multicast group, implementing user-based multicast service control and management.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipv6bras-multicast_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/spec/IPv6_user-side_multicast_limitation.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_bras-multicast_cac_cfg_ipv6_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="User-Side Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="User-Side Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="User-Side Multicast">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367700">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring IPv6 User-Side Multicast</title>
</head>
<body><a name="EN-US_TASK_0172367700"></a><a name="EN-US_TASK_0172367700"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IPv6 User-Side Multicast</h1>
<div class="taskbody"><p>User-side multicast enables a BRAS on an IPv6 network to identify users who have joined or left a multicast group, implementing user-based multicast service control and management.</p>
<div class="context"><a name="EN-US_TASK_0172367700__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Conventional multicast cannot well support IPTV services on IPv6 networks because it cannot identify users. Carriers need to have user-side multicast supported to identify users for better management. With IPv6 user-side multicast, the BRAS can identify users in a multicast group and implement refined user service control and management.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367700__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring IPv6 user-side multicast, complete the tasks shown in <a href="#EN-US_TASK_0172367700__fig_dc_vrp_ipv6bras-multicast_cfg_000301">Figure 1</a>. For configuration details, see <a href="#EN-US_TASK_0172367700__table_dc_vrp_ipv6bras-multicast_cfg_000301">Table 1</a>.</p>
<div class="fignone" id="EN-US_TASK_0172367700__fig_dc_vrp_ipv6bras-multicast_cfg_000301"><a name="EN-US_TASK_0172367700__fig_dc_vrp_ipv6bras-multicast_cfg_000301"></a><a name="fig_dc_vrp_ipv6bras-multicast_cfg_000301"></a><span class="figcap"><b>Figure 1 </b>Pre-configuration tasks for user-side multicast configurations in IPv6</span><br><span><img class="vsd" src="images/fig_dc_vrp_ipv6bras-multicast_cfg_000301.png" width="NaN" height="NaN"></span><div class="p">
<div class="tableBorder"><a name="EN-US_TASK_0172367700__table_dc_vrp_ipv6bras-multicast_cfg_000301"></a><a name="table_dc_vrp_ipv6bras-multicast_cfg_000301"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0172367700__table_dc_vrp_ipv6bras-multicast_cfg_000301" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Description of each pre-configuration task</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="34.04%" id="mcps1.4.2.3.3.1.2.3.1.1" liSelected="liSelected"><p>Item</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="65.96%" id="mcps1.4.2.3.3.1.2.3.1.2" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="34.04%" headers="mcps1.4.2.3.3.1.2.3.1.1 "><p><span><img class="vsd" src="images/fig_dc_vrp_bras-multicast_cfg_000302.png"></span></p>
</td>
<td class="cellrowborder" valign="top" width="65.96%" headers="mcps1.4.2.3.3.1.2.3.1.2 "><p>Configure a local prefix pool and a local address pool. Bind the local prefix pool to the local address pool.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="34.04%" headers="mcps1.4.2.3.3.1.2.3.1.1 "><p><span><img class="vsd" src="images/fig_dc_vrp_bras-multicast_cfg_000303.png"></span></p>
</td>
<td class="cellrowborder" valign="top" width="65.96%" headers="mcps1.4.2.3.3.1.2.3.1.2 "><p>Configure Authentication, Authorization and Accounting (AAA) schemes.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="34.04%" headers="mcps1.4.2.3.3.1.2.3.1.1 "><p><span><img class="vsd" src="images/fig_dc_vrp_bras-multicast_cfg_000304.png"></span></p>
</td>
<td class="cellrowborder" valign="top" width="65.96%" headers="mcps1.4.2.3.3.1.2.3.1.2 "><p>Configure a domain and bind the local address pool to the domain.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="34.04%" headers="mcps1.4.2.3.3.1.2.3.1.1 "><p><span><img class="vsd" src="images/fig_dc_vrp_bras-multicast_cfg_000305.png"></span></p>
</td>
<td class="cellrowborder" valign="top" width="65.96%" headers="mcps1.4.2.3.3.1.2.3.1.2 "><p>Configure the PPPoE or IPoE access mode.</p>
<ul><li><p><a href="../ne/dc_ne_pppoe_cfg_0004.html">Configure the PPPoE access mode.</a></p>
</li><li><p>Configure the IPoE access mode.</p>
</li></ul>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="34.04%" headers="mcps1.4.2.3.3.1.2.3.1.1 "><p><span><img class="vsd" src="images/fig_dc_vrp_bras-multicast_cfg_000306.png"></span></p>
</td>
<td class="cellrowborder" valign="top" width="65.96%" headers="mcps1.4.2.3.3.1.2.3.1.2 "><p>Configure basic multicast functions.</p>
<ol><li><p><a href="dc_vrp_multicast_cfg_2006.html">Enable IPv6 multicast routing.</a></p>
</li><li><p><a href="dc_vrp_multicast_cfg_2007.html">Enable IPv6 PIM-SM.</a></p>
</li><li><p><a href="dc_vrp_multicast_cfg_2074.html">Enable MLD.</a></p>
</li></ol>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="34.04%" headers="mcps1.4.2.3.3.1.2.3.1.1 "><p><span><img class="vsd" src="images/fig_dc_vrp_bras-multicast_cfg_000307.png"></span></p>
</td>
<td class="cellrowborder" valign="top" width="65.96%" headers="mcps1.4.2.3.3.1.2.3.1.2 "><p>Configure a BAS interface.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367700__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">ifname</span></i></span><p><p>The interface or sub-interface view is displayed.</p>
<p>The interface can be a main, a common sub-interface, or a QinQ sub-interface.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=bas"><b><span class="cmdname">bas</span></b></a></span></span><p><p>A BAS interface is created, and the BAS interface view is displayed.</p>
</p></li><li><span>Configure a multicast replication mode as required.</span><p><ul><li><p>To use multicast replication by interface + VLAN, run the <a href="cmdqueryname=multicast+copy+by-vlan"><b><span class="cmdname">multicast copy by-vlan</span></b></a> command.</p>
<p>In a scenario where multiple users order a multicast program through the same interface and VLAN and MLD snooping is enabled on the downstream Layer 2 device, after multicast replication by interface + VLAN is configured, the BRAS replicates only one copy of a multicast traffic flow for the downstream Layer 2 device. Then, the downstream Layer 2 device replicates multicast data packets as needed. This replication mode reduces the burden on the BRAS and the bandwidth consumption. This mode applies to scenarios where user packets carry VLAN tags and inter-VLAN traffic forwarding is not needed.</p>
</li><li><p>To use multicast replication by user (session), run the <a href="cmdqueryname=multicast+copy+by-session"><b><span class="cmdname">multicast copy by-session</span></b></a> command.</p>
<p>In a scenario where the downstream Layer 2 device does not support MLD snooping, after multicast replication by user is configured, the BRAS replicates multicast packets for each authenticated user. This mode prevents the BRAS from replicating multicast packets for users who fail to be authenticated, thus implementing refined user service control and management.</p>
</li><li><p>To use multicast replication by multicast VLAN, perform the following steps:</p>
<ol type="a"><li><p>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the main or sub-interface view.</p>
</li><li><p>Run the <a href="cmdqueryname=multicast+user-aggregation"><b><span class="cmdname">multicast user-aggregation</span></b></a> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> command to configure multicast replication by multicast VLAN.</p>
<p>This replication mode applies to scenarios where users have joined multicast VLANs. In this mode, the BRAS replicates multicast packets based on multicast VLANs, and the downstream Layer 2 device replicates multicast packets based on user VLANs. For users who go online through the same interface and join the same multicast program, the BRAS replicates only one copy of a multicast traffic flow to the downstream Layer 2 device, irrespective of whether the users belong to the same VLAN. The downstream Layer 2 device then replicates multicast packets based on user VLANs. This replication mode reduces the burden on the BRAS and the bandwidth consumption. This mode applies to scenarios where user packets carry VLAN tags and inter-VLAN traffic forwarding is needed.</p>
</li></ol>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If all of the preceding multicast replication modes are configured, their priorities are as follows in descending order: replication by interface + VLAN, replication by user, replication by multicast VLAN, and replication by interface.</p>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172367700__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the following commands to check statistics about MLD messages:</p>
<ul><li><p>Run the <a href="cmdqueryname=display+mld-snooping+bas+invalid-packet"><b><span class="cmdname">display mld-snooping bas invalid-packet</span></b></a> command to check statistics about invalid MLD messages on BAS interfaces.</p>
</li></ul>
<p>Run the following command to check information about users and the multicast programs they join:</p>
<ul><li><p>Run the <a href="cmdqueryname=display+multicast+user-id"><b><span class="cmdname">display multicast user-id</span></b></a> <em>UserIdValue</em> command to check information about multicast programs that a specified user joins on a BAS interface.</p>
</li><li><p>Run the <a href="cmdqueryname=display+multicast+group-ip"><b><span class="cmdname">display multicast group-ip</span></b></a> command to check information about users of a specified multicast group. </p>
</li><li><p>Run the <a href="cmdqueryname=display+mld-snooping+bas+port-info"><b><span class="cmdname">display mld-snooping bas port-info</span></b></a> <strong><span>interface</span></strong> <i><span class="varname">interface-name</span></i> command to check user information of multicast programs on a BAS interface.</p>
</li></ul>
<p>Run the following commands to check IPv6 multicast routing entries:</p>
<ul><li><p>Run the <a href="cmdqueryname=display+multicast+ipv6+routing-table"><b><span class="cmdname">display multicast ipv6 routing-table</span></b></a> command to check information about IPv6 multicast routing entries.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipv6bras-multicast_cfg_0000.html">IPv6 User-Side Multicast Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/spec/IPv6_user-side_multicast_limitation.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_bras-multicast_cac_cfg_ipv6_0005.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>