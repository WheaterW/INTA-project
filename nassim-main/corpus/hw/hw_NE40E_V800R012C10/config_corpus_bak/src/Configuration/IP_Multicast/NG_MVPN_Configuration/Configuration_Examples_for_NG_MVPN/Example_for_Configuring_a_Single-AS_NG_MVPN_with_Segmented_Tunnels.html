
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring a Single-AS NG MVPN with Segmented Tunnels">
<meta name="abstract" content="This section provides an example for configuring a single-AS NG MVPN to carry multicast traffic over segmented tunnels.">
<meta name="description" content="This section provides an example for configuring a single-AS NG MVPN to carry multicast traffic over segmented tunnels.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0012.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0020.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0101.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv4 Multicast VPN_NG MVPN">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001270153609">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring a Single-AS NG MVPN with Segmented Tunnels</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001270153609"></a><a name="EN-US_TASK_0000001270153609"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring a Single-AS NG MVPN with Segmented Tunnels</h1>
<div class="taskbody"><p>This section provides an example for configuring a single-AS NG MVPN to carry multicast traffic over segmented tunnels.</p>
<div class="context"><a name="EN-US_TASK_0000001270153609__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>NG MVPN is deployed on the service provider's backbone network to solve multicast service issues that arise due to traffic congestion, transmission reliability, and data security. On the network shown in <a href="#EN-US_TASK_0000001270153609__fig_dc_vrp_cfg_ngmvpn_009801">Figure 1</a>, RSVP-TE tunnels and mLDP LSPs have been deployed in the backbone network's areas to carry BGP/MPLS IP VPN services. The service provider wants to provide MVPN services for users based on the existing network. To meet this requirement, configure a segmented NG MVPN to carry multicast traffic over RSVP-TE P2MP tunnels and mLDP LSPs.</p>
<div class="fignone" id="EN-US_TASK_0000001270153609__fig_dc_vrp_cfg_ngmvpn_009801"><a name="EN-US_TASK_0000001270153609__fig_dc_vrp_cfg_ngmvpn_009801"></a><a name="fig_dc_vrp_cfg_ngmvpn_009801"></a><span class="figcap"><b>Figure 1 </b>Segmented NG MVPN networking</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 and interface2 represent GE <span>0/1/0</span> and GE <span>0/1/1</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001225833704.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001270153609__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure BGP/MPLS IP VPN to ensure that the unicast VPN is running properly.</p>
</li><li><p>Establish a BGP MVPN peer relationship between the PEs so that the PEs can use BGP to exchange A-D and C-multicast routes.</p>
</li><li><p>Configure a route-policy on each PE and the ABR to establish BGP LSPs.</p>
</li><li><p>Configure the ABR as an RR to help PE1 and PE2 obtain the route destined for each other's loopback interface.</p>
</li><li><p>Configure PE1 to use RSVP-TE to establish an I-PMSI tunnel so that an RSVP-TE P2MP tunnel from PE1 to the ABR is established.</p>
</li><li><p>Configure the ABR to use mLDP to establish a stitching tunnel to PE2 so that an mLDP P2MP tunnel is established.</p>
</li><li><p>Configure PIM on the PE interfaces bound to VPN instances and on the CE interfaces connecting to PEs to allow a VPN multicast routing table to be established to guide multicast traffic forwarding.</p>
</li><li><p>Configure IGMP on the interfaces connecting a multicast device to a user network segment to allow the device to manage multicast group members on the network segment.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001270153609__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>OSPF process ID on PE1 and the ABR: 10</p>
</li><li><p>On PE2 and the ABR: IS-IS process ID (2), IS-IS level (Level-2), system ID of PE2 (45.0005.0005.0006.00), and system ID of the ABR (45.0005.0005.0005.00)</p>
</li><li><div class="p">VPN instance name on PE1 and PE2: vpn1; other data shown in <a href="#EN-US_TASK_0000001270153609__table_dc_vrp_cfg_ngmvpn_009801">Table 1</a>
<div class="tableBorder"><a name="EN-US_TASK_0000001270153609__table_dc_vrp_cfg_ngmvpn_009801"></a><a name="table_dc_vrp_cfg_ngmvpn_009801"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_TASK_0000001270153609__table_dc_vrp_cfg_ngmvpn_009801" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Data needed for each device</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="17.421731123388582%" id="mcps1.4.3.3.3.1.2.2.8.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="17.421731123388582%" id="mcps1.4.3.3.3.1.2.2.8.1.2" liSelected="liSelected"><p>Loopback 0 Interface Address </p>
</th>
<th align="left" class="cellrowborder" valign="top" width="17.421731123388582%" id="mcps1.4.3.3.3.1.2.2.8.1.3" liSelected="liSelected"><p>MPLS LSR-ID</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="17.421731123388582%" id="mcps1.4.3.3.3.1.2.2.8.1.4" liSelected="liSelected"><p>MVPN ID</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="6.445672191528545%" id="mcps1.4.3.3.3.1.2.2.8.1.5" liSelected="liSelected"><p>RD</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="6.445672191528545%" id="mcps1.4.3.3.3.1.2.2.8.1.6" liSelected="liSelected"><p>VPN-Target</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="17.421731123388582%" id="mcps1.4.3.3.3.1.2.2.8.1.7" liSelected="liSelected"><p>AS Number</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="middle" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.1 "><p>PE1</p>
</td>
<td class="cellrowborder" valign="top" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.2 "><p>1.1.1.1</p>
</td>
<td class="cellrowborder" valign="top" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.3 "><p>1.1.1.1</p>
</td>
<td class="cellrowborder" valign="top" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.4 "><p>1.1.1.1</p>
</td>
<td class="cellrowborder" valign="top" width="6.445672191528545%" headers="mcps1.4.3.3.3.1.2.2.8.1.5 "><p>1:1</p>
</td>
<td class="cellrowborder" valign="middle" width="6.445672191528545%" headers="mcps1.4.3.3.3.1.2.2.8.1.6 "><p>200:1</p>
</td>
<td class="cellrowborder" valign="middle" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.7 "><p>AS100</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="middle" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.1 "><p>ABR</p>
</td>
<td class="cellrowborder" valign="top" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.2 "><p>2.2.2.2</p>
</td>
<td class="cellrowborder" valign="top" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.3 "><p>2.2.2.2</p>
</td>
<td class="cellrowborder" valign="top" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.4 "><p>2.2.2.2</p>
</td>
<td class="cellrowborder" valign="top" width="6.445672191528545%" headers="mcps1.4.3.3.3.1.2.2.8.1.5 "><p>-</p>
</td>
<td class="cellrowborder" valign="middle" width="6.445672191528545%" headers="mcps1.4.3.3.3.1.2.2.8.1.6 "><p>-</p>
</td>
<td class="cellrowborder" valign="middle" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.7 "><p>AS100</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="middle" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.1 "><p>PE2</p>
</td>
<td class="cellrowborder" valign="top" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.2 "><p>1.1.2.2</p>
</td>
<td class="cellrowborder" valign="top" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.3 "><p>1.1.2.2</p>
</td>
<td class="cellrowborder" valign="top" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.4 "><p>1.1.2.2</p>
</td>
<td class="cellrowborder" valign="top" width="6.445672191528545%" headers="mcps1.4.3.3.3.1.2.2.8.1.5 "><p>6:1</p>
</td>
<td class="cellrowborder" valign="middle" width="6.445672191528545%" headers="mcps1.4.3.3.3.1.2.2.8.1.6 "><p>200:1</p>
</td>
<td class="cellrowborder" valign="middle" width="17.421731123388582%" headers="mcps1.4.3.3.3.1.2.2.8.1.7 "><p>AS100</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001270153609__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure BGP/MPLS IP VPN.</span><ol type="a"><li class="substepexpand"><span>Assign an IP address to each interface of devices on the VPN backbone network and VPN sites.</span><p><p>Configure an IP address for each interface according to <a href="#EN-US_TASK_0000001270153609__fig_dc_vrp_cfg_ngmvpn_009801">Figure 1</a>. For configuration details, see <a href="#EN-US_TASK_0000001270153609__example_dc_vrp_cfg_ngmvpn_009801">Configuration Files</a> in this section.</p>
</p></li><li class="substepexpand"><span>Configure an IGP for interworking on the BGP/MPLS IP VPN backbone network.</span><p><p>OSPF and IS-IS are used in this example. For configuration details, see <a href="#EN-US_TASK_0000001270153609__example_dc_vrp_cfg_ngmvpn_009801">Configuration Files</a> in this section.</p>
</p></li><li class="substepexpand"><span>Configure basic MPLS functions and enable MPLS TE to establish MPLS TE tunnels on the MPLS backbone network.</span><p><ul><li><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>mpls lsr-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>mpls te p2mp-te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>mpls rsvp-te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>mpls te cspf</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>mpls te p2mp-template t1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-te-p2mp-template-t1] <strong>record-route label</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-te-p2mp-template-t1] <strong>bandwidth ct0 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-te-p2mp-template-t1] <strong>fast-reroute bandwidth</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-te-p2mp-template-t1] <strong>bypass-attributes bandwidth 10 priority 7 7</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-te-p2mp-template-t1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>ospf enable 10 area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>mpls rsvp-te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface LoopBack0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-LoopBack0] <strong>ospf enable 10 area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface Tunnel10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel10] <strong>ip address unnumbered interface LoopBack0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel10] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel10] <strong>destination 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel10] <strong>mpls te tunnel-id 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-Tunnel10] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</li><li><p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>mpls lsr-id 1.1.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls-ldp] <strong>mldp p2mp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-mpls-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>interface LoopBack0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-LoopBack0] <strong>isis enable 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</li><li><p># Configure the ABR.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ABR] <strong>mpls lsr-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-mpls] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-mpls] <strong>mpls te p2mp-te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-mpls] <strong>mpls rsvp-te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-mpls] <strong>mpls te cspf</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-mpls-ldp] <strong>mldp p2mp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-mpls-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-GigabitEthernet<span>0/1/0</span>] <strong>isis enable 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-GigabitEthernet<span>0/1/0</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-GigabitEthernet<span>0/1/0</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-GigabitEthernet<span>0/1/1</span>] <strong>ospf enable 10 area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-GigabitEthernet<span>0/1/1</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-GigabitEthernet<span>0/1/1</span>] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-GigabitEthernet<span>0/1/1</span>] <strong>mpls rsvp-te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>interface LoopBack0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-LoopBack0] <strong>ospf enable 10 area 0.0.0.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-LoopBack0] <strong>isis enable 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>interface Tunnel10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-Tunnel10] <strong>ip address unnumbered interface LoopBack0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-Tunnel10] <strong>tunnel-protocol mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-Tunnel10] <strong>destination 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-Tunnel10] <strong>mpls te tunnel-id 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-Tunnel10] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR]<strong>tunnel-policy p1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-tunnel-policy-p1]<strong>tunnel select-seq te load-balance-number 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-tunnel-policy-p1]<strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR]<strong>tunnel-selector tps permit node 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-tunnel-selector]<strong>apply tunnel-policy p1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-tunnel-selector]<strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>commit</strong></pre>
</li></ul>
</p></li><li class="substepexpand"><span>Establish an MP-IBGP peer relationship between each PE and the ABR.</span><p><ul><li><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>router-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>peer 2.2.2.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>peer 2.2.2.2 connect-interface LoopBack0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>ipv4-family vpnv4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-af-vpnv4] <strong>policy vpn-target</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-af-vpnv4] <strong>peer 2.2.2.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-af-vpnv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</li><li><p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>router-id 1.1.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>peer 2.2.2.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>peer 2.2.2.2 connect-interface LoopBack0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>ipv4-family vpnv4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-af-vpnv4] <strong>policy vpn-target</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-af-vpnv4] <strong>peer 2.2.2.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-af-vpnv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</li><li><p># Configure the ABR.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ABR] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>router-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>peer 1.1.1.1 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>peer 1.1.1.1 connect-interface LoopBack0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>peer 1.1.1.1 reflect-client</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>peer 1.1.2.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>peer 1.1.2.2 connect-interface LoopBack0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>peer 1.1.2.2 reflect-client</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>ipv4-family vpnv4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-vpnv4] <strong>peer 1.1.1.1 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-vpnv4] <strong>peer 1.1.1.1 reflect-client</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-vpnv4] <strong>peer 1.1.1.1 next-hop-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-vpnv4] <strong>peer 1.1.2.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-vpnv4] <strong>peer 1.1.2.2 reflect-client</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-vpnv4] <strong>peer 1.1.2.2 next-hop-local</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-vpnv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>commit</strong></pre>
</li></ul>
</p></li><li class="substepexpand"><span>Configure a VPN instance on each PE for the access of the corresponding CE.</span><p><ul><li><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>tunnel-policy p1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-tunnel-policy-p1] <strong>tunnel binding destination 2.2.2.2 te Tunnel10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-tunnel-policy-p1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>ip vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>route-distinguisher 1:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>tnl-policy p1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>vpn-target 200:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>] <strong>ip binding vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>] <strong>ip address 192.168.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</li><li><p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>ip vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong>route-distinguisher 6:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong>vpn-target 200:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>] <strong>ip binding vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>] <strong>ip address 192.168.2.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</li></ul>
</p></li><li class="substepexpand"><span>Configure OSPF multi-instance on each PE to import VPN routes.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>ospf 2 vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-ospf-2] <strong>import-route bgp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-ospf-2] <strong>area 0.0.0.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-ospf-2-area-0.0.0.0] <strong>network 192.168.1.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-ospf-2-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-ospf-2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>ipv4-family vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-vpn1] <strong>import-route ospf 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p>The configuration of PE2 is similar to that of PE1. For configuration details, see <a href="#EN-US_TASK_0000001270153609__example_dc_vrp_cfg_ngmvpn_009801">Configuration Files</a> in this section.</p>
</p></li><li class="substepexpand"><span>Configure OSPF on each CE.</span><p><p># Configure CE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong>ospf 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-ospf-2] <strong>area 0.0.0.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-ospf-2] <strong>network 10.1.3.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-ospf-2] <strong>network 192.168.1.0 0.0.0.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-ospf-2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>commit</strong></pre>
<p>The configuration of CE2 is similar to that of CE1. For configuration details, see <a href="#EN-US_TASK_0000001270153609__example_dc_vrp_cfg_ngmvpn_009801">Configuration Files</a> in this section.</p>
</p></li></ol>
</li><li><span>Establish BGP MVPN peer relationships on the PEs and ABR.</span><p><ul><li><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>ipv4-family mvpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-af-mvpn] <strong>policy vpn-target</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-af-mvpn] <strong>peer 2.2.2.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-af-mvpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</li><li><p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>ipv4-family mvpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-af-mvpn] <strong>policy vpn-target</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-af-mvpn] <strong>peer 2.2.2.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp-af-mvpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</li><li><p># Configure the ABR.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ABR] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>ipv4-family mvpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-mvpn] <strong>reflect change-path-attribute</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-mvpn] <strong>undo policy vpn-target</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-mvpn] <strong>peer 1.1.1.1 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-mvpn] <strong>peer 1.1.2.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-mvpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>commit</strong></pre>
</li></ul>
</p></li><li><span>Configure the ABR as an RR to help PE1 and PE2 obtain the route destined for each other's loopback interface.</span><p><p># Configure the ABR.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ABR] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>ipv4-family mvpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-mvpn] <strong>peer 1.1.1.1 reflect-client</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-mvpn] <strong>peer 1.1.2.2 reflect-client</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-mvpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>commit</strong></pre>
</p></li><li><span>Configure a route-policy on each PE and the ABR to establish BGP LSPs.</span><p><p># Create a route-policy on PE1 and apply the route-policy to the routes to be advertised to a specified peer.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>route-policy policy2 permit node 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-route-policy] <strong>apply mpls-label</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-route-policy] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>ipv4-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-af-ipv4] <strong>peer 2.2.2.2 route-policy policy2 export</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
<p>The configuration of PE2 is similar to that of PE1.</p>
<p># Create a route-policy on the ABR and apply the route-policy to the routes to be advertised to specified peers.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ABR] <strong>route-policy policy2 permit node 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-route-policy] <strong>apply mpls-label</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-route-policy]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>ipv4-family unicast</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-ipv4] <strong>peer 1.1.1.1 route-policy policy2 export</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-ipv4] <strong>peer 1.1.2.2 route-policy policy2 export</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>commit</strong></pre>
</p></li><li><span>Configure NG MVPN to support intra-AS inter-area segmented tunnels.</span><p><ul><li><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>ip vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>multicast routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>mvpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn] <strong>inter-area-segmented enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</li><li><p># Configure the ABR.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ABR] <strong>multicast mvpn inter-area-segmented enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>commit</strong></pre>
</li></ul>
</p></li><li><span>Set the setup mode to RSVP-TE for the I-PMSI tunnel between PE1 and the ABR, and set the setup mode to mLDP for the stitching PMSI between the ABR and PE2.</span><p><ul><li><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>multicast mvpn 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>ip vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>mvpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn] <strong>sender-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn] <strong>c-multicast signaling bgp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn] <strong>inter-area-segmented enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn] <strong>ipmsi-tunnel</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn-ipmsi] <strong>mpls te</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn-ipmsi-mpls-te] <strong>p2mp-template t1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn-ipmsi-mpls-te] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn-ipmsi] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</li><li><p># Configure the ABR.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ABR] <strong>multicast mvpn 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>route-policy rp1 permit node 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-route-policy-rp1]<strong>apply stitch-pmsi mldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-route-policy-rp1]<strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ABR] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>ipv4-family mvpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-mvpn] <strong>peer 1.1.2.2 route-policy rp1 export</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp-af-mvpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ABR] <strong>commit</strong></pre>
</li><li><p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>multicast mvpn 1.1.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>ip vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong>mvpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1-af-ipv4-mvpn] <strong>c-multicast signaling bgp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1-af-ipv4-mvpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vpn-instance-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</li></ul>
<p>After the configuration is complete, run the <a href="cmdqueryname=display+mvpn+inter-region-segmented+ipmsi"><b><span class="cmdname">display mvpn inter-region-segmented ipmsi</span></b></a> command on the ABR to check I-PMSI tunnel information.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ABR] <strong>display mvpn inter-region-segmented  ipmsi</strong></pre>
<pre class="screen">Inter-region-segmented I-PMSI routes: total 1
I-PMSI(RD:OrigIP): 1:1: 1.1.1.1
Received Upstream I-PMSI: Tunnel type: RSVP-TE P2MP LSP, P2MP-ID: 0x02020202, Tunnel ID: 49281, Extended Tunnel ID: 1.1.1.1
Leaf:
  1: 2.2.2.2 (local)
Advertised Downstream I-PMSI(Policy: rp1): Tunnel type: mLDP P2MP LSP, Root-IP: 2.2.2.2, Opaque value: 0x0100040000A001
Leaf:
  1: 1.1.2.2</pre>
<p>The command output shows that an RSVP-TE P2MP tunnel has been established, with PE1 as the root node and the ABR as a leaf node. The command output also shows that an mLDP P2MP stitching tunnel has been established, with the ABR as the root node and PE2 as a leaf node.</p>
</p></li><li><span>Configure an S-PMSI tunnel.</span><p><ul><li><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>ip vpn-instance vpn1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>mvpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn] <strong>spmsi-tunnel</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn-ipmsi-mpls-te] <strong>group 225.1.1.1 255.255.255.255 source 10.1.3.5 255.255.255.255 rsvp-te p2mp-template t1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn-spmsi-mpls-te] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn-ipmsi] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4-mvpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vpn-instance-vpn1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</li></ul>
</p></li><li><span>Configure PIM.</span><p><ul><li><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1] <strong>commit</strong></pre>
</li><li><p># Configure CE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong>multicast routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/0</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1] <strong>commit</strong></pre>
</li><li><p># Configure PE2.</p>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>commit</strong></pre>
</li><li><p># Configure CE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong>multicast routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>interface gigabitethernet<span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/0</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>commit</strong></pre>
</li></ul>
</p></li><li><span>Configure IGMP.</span><p><ul><li><p># Configure CE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong>interface gigabitethernet<span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>] <strong>igmp enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>] <strong>igmp version 3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2] <strong>commit</strong></pre>
</li></ul>
</p></li><li><span>Verify the configuration.</span><p><p>After the configuration is complete, segmented NG MVPN functions have been configured. If CE2 has access users, CE1 can use the BGP/MPLS IP VPN to forward multicast data to the users. In this example, the user connected to CE2 sends an IGMP Report message, and the multicast source 10.1.3.5 sends multicast data. A check on multicast routing entries can determine whether segmented NG MVPN is configured successfully.</p>
<p>Run the <a href="cmdqueryname=display+pim+routing-table"><b><span class="cmdname">display pim routing-table</span></b></a> command on CE2 and CE1 to check their PIM routing tables. Run the <a href="cmdqueryname=display+pim+vpn-instance"><b><span class="cmdname">display pim vpn-instance</span></b></a> <strong><span>routing-table</span></strong> command on PE2, the ABR, and PE1 to check their PIM routing tables of the VPN instance.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2] <strong>display pim routing-table</strong></pre>
<pre class="screen"> VPN-Instance: public net
 Total 0 (*, G) entry; 1 (S, G) entry

 (10.1.3.5, 225.1.1.1)
     RP: NULL
     Protocol: pim-sm, Flag: SPT SG_RCVR ACT
     UpTime: 08:48:25
     Upstream interface: GigabitEthernet<span>0/1/0</span>
         Upstream neighbor: 192.168.2.1
         RPF prime neighbor: 192.168.2.1
     Downstream interface(s) information:
     Total number of downstreams: 1
        1: GigabitEthernet<span>0/1/1</span>
             Protocol: igmp, UpTime: 08:48:25, Expires: - </pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>display pim vpn-instance vpn1 routing-table</strong></pre>
<pre class="screen"> VPN-Instance: vpn1
 Total 0 (*, G) entry; 1 (S, G) entry

 (10.1.3.5, 225.1.1.1)
     RP: NULL
     Protocol: pim-sm, Flag: SPT ACT
     UpTime: 00:05:16
     Upstream interface: through-BGP
         Upstream neighbor: 2.2.2.2
         RPF prime neighbor: 2.2.2.2
     Downstream interface(s) information:
     Total number of downstreams: 1
        1: GigabitEthernet<span>0/1/1</span>
             Protocol: pim-sm, UpTime: 00:05:16, Expires: 00:03:16</pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>display pim vpn-instance vpn1 routing-table</strong></pre>
<pre class="screen"> VPN-Instance: vpn1
 Total 0 (*, G) entry; 2 (S, G) entries

 (10.1.3.5, 225.1.1.1)
     RP: NULL
     Protocol: pim-sm, Flag: SPT SG_RCVR ACT
     UpTime: 00:01:00
     Upstream interface: GigabitEthernet<span>0/1/1</span>
         Upstream neighbor: 192.168.1.1
         RPF prime neighbor: 192.168.1.1
     Downstream interface(s) information:
     Total number of downstreams: 1
        1: pseudo
             Protocol: BGP, UpTime: 00:01:00, Expires: -
</pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1] <strong>display pim routing-table</strong></pre>
<pre class="screen"> VPN-Instance: public net
 Total 0 (*, G) entry; 2 (S, G) entries

 (10.1.3.5, 225.1.1.1)
     RP: NULL
     Protocol: pim-sm, Flag: SPT LOC ACT
     UpTime: 00:08:39
     Upstream interface: GigabitEthernet<span>0/1/0</span>
         Upstream neighbor: NULL
         RPF prime neighbor: NULL
     Downstream interface(s) information:
     Total number of downstreams: 1
        1: GigabitEthernet<span>0/1/1</span>
             Protocol: pim-sm, UpTime: 00:08:39, Expires: 00:02:51
</pre>
<p>The command output shows that the CE connected to the multicast source has received PIM Join messages from the CEs connected to multicast receivers and that PIM routing entries are generated.</p>
<p>After the user orders a multicast program and the multicast traffic is switched to the S-PMSI tunnel, run the <a href="cmdqueryname=display+mvpn+inter-region-segmented+spmsi"><b><span class="cmdname">display mvpn inter-region-segmented spmsi</span></b></a> command on the ABR to view S-PMSI tunnel information.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ABR] <strong>display mvpn inter-region-segmented  spmsi</strong></pre>
<pre class="screen">Inter-region-segmented S-PMSI routes: total 1
S-PMSI(RD:OrigIP:C-S,C-G): 1:1: 1.1.1.1:10.1.3.5,225.1.1.1
Received Upstream S-PMSI: Tunnel type: RSVP-TE P2MP LSP, P2MP-ID: 0x02020205, Tunnel ID: 49665, Extended Tunnel ID: 1.1.1.1
Leaf:
  1: 2.2.2.2 (local)
Advertised Downstream S-PMSI(Policy: rp1): Tunnel type: mLDP P2MP LSP, Root-IP: 2.2.2.2, Opaque value: 0x01000400008001
Leaf:
  1: 1.1.2.2</pre>
<p>The command output shows that an RSVP-TE P2MP tunnel has been established, with PE1 as the root node and the ABR as a leaf node. The command output also shows that an mLDP P2MP stitching tunnel has been established, with the ABR as the root node and PE2 as a leaf node.</p>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0000001270153609__example_dc_vrp_cfg_ngmvpn_009801"><a name="EN-US_TASK_0000001270153609__example_dc_vrp_cfg_ngmvpn_009801"></a><a name="example_dc_vrp_cfg_ngmvpn_009801"></a><a name="EN-US_TASK_0000001270153609__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>CE1 configuration file</p>
<pre class="screen">#
sysname CE1
#
multicast routing-enable
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.3.1 255.255.255.0
 pim sm
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 192.168.1.2 255.255.255.0
 pim sm
#
ospf 2
 area 0.0.0.0
  network 10.1.3.0 0.0.0.255
  network 192.168.1.0 0.0.0.255
#
return</pre>
</li><li><p>PE1 configuration file</p>
<pre class="screen">#
sysname PE1
#
multicast mvpn 1.1.1.1
#
ip vpn-instance vpn1
 ipv4-family
  route-distinguisher 1:1
  apply-label per-instance
  tnl-policy p1
  vpn-target 200:1 export-extcommunity
  vpn-target 200:1 import-extcommunity
  multicast routing-enable
  mvpn
   sender-enable
   c-multicast signaling bgp
   inter-area-segmented enable
   ipmsi-tunnel
    mpls te
     p2mp-template t1
   spmsi-tunnel
    group 225.1.1.1 255.255.255.255 source 10.1.3.5 255.255.255.255 rsvp-te p2mp-template t1
#
mpls lsr-id 1.1.1.1
#
mpls
 mpls te
 mpls te p2mp-te
 mpls rsvp-te
 mpls te cspf
#
mpls te p2mp-template t1
 record-route label
 bandwidth ct0 100
 fast-reroute bandwidth
 bypass-attributes bandwidth 10 priority 7 7
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 1.0.0.1 255.255.255.0
 ospf enable 10 area 0.0.0.1
 mpls
 mpls te
 mpls rsvp-te
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip binding vpn-instance vpn1
 ip address 192.168.1.1 255.255.255.0
 pim sm
#
interface LoopBack0
 ip address 1.1.1.1 255.255.255.255
 ospf enable 10 area 0.0.0.1
#
interface Tunnel10
 ip address unnumbered interface LoopBack0
 tunnel-protocol mpls te
 destination 2.2.2.2
 mpls te tunnel-id 100
#
bgp 100
 router-id 1.1.1.1
 peer 2.2.2.2 as-number 100
 peer 2.2.2.2 connect-interface LoopBack0
 #
 ipv4-family unicast
  undo synchronization
  peer 2.2.2.2 enable
  peer 2.2.2.2 route-policy policy2 export
  peer 2.2.2.2 label-route-capability
 #
 ipv4-family mvpn
  policy vpn-target
  peer 2.2.2.2 enable
 #
 ipv4-family vpnv4
  policy vpn-target
  peer 2.2.2.2 enable
 #
 ipv4-family vpn-instance vpn1
  import-route ospf 2
#
ospf 2 vpn-instance vpn1
 import-route bgp
 area 0.0.0.0
  network 192.168.1.0 0.0.0.255
#
ospf 10
 opaque-capability enable
 area 0.0.0.1
  mpls-te enable
#
route-policy policy2 permit node 2
 apply mpls-label
#
tunnel-policy p1
 tunnel binding destination 2.2.2.2 te Tunnel10
#
return</pre>
</li><li><p>CE2 configuration file</p>
<pre class="screen">#
sysname CE2
#
multicast routing-enable
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 192.168.2.2 255.255.255.0
 pim sm
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 10.1.4.1 255.255.255.0
 pim sm
 igmp enable
 igmp version 3
 igmp static-group 225.1.1.1 source 10.1.3.5
#
ospf 2
 area 0.0.0.0
  network 10.1.4.0 0.0.0.255
  network 192.168.2.0 0.0.0.255
#
return</pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#
sysname PE2
#
multicast mvpn 1.1.2.2
#
ip vpn-instance vpn1
 ipv4-family
  route-distinguisher 6:1
  apply-label per-instance
  vpn-target 200:1 export-extcommunity
  vpn-target 200:1 import-extcommunity
  multicast routing-enable
  mvpn
   c-multicast signaling bgp
#
mpls lsr-id 1.1.2.2
#
mpls
#
mpls ldp
 mldp p2mp
#
isis 1
 is-level level-2
 network-entity 45.0005.0005.0006.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 1.0.1.2 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip binding vpn-instance vpn1
 ip address 192.168.2.1 255.255.255.0
 pim sm
#
interface LoopBack0
 ip address 1.1.2.2 255.255.255.255
 isis enable 1
#
bgp 100
 router-id 1.1.2.2
 peer 2.2.2.2 as-number 100
 peer 2.2.2.2 connect-interface LoopBack0
 #
 ipv4-family unicast
  undo synchronization
  peer 2.2.2.2 enable
  peer 2.2.2.2 route-policy policy2 export
  peer 2.2.2.2 label-route-capability
 #
 ipv4-family mvpn
  policy vpn-target
  peer 2.2.2.2 enable
 #
 ipv4-family vpnv4
  policy vpn-target
  peer 2.2.2.2 enable
 #
 ipv4-family vpn-instance vpn1
  import-route ospf 2
#
ospf 2 vpn-instance vpn1
 import-route bgp
 area 0.0.0.0
  network 192.168.2.0 0.0.0.255
#
route-policy policy2 permit node 3
 apply mpls-label
#
return
</pre>
</li><li><p>ABR configuration file</p>
<pre class="screen">#
sysname ABR
#
multicast mvpn 2.2.2.2
#
multicast mvpn inter-area-segmented enable
#
tunnel-selector tps permit node 10
 apply tunnel-policy p1
#
mpls lsr-id 2.2.2.2
#
mpls
 mpls te
 mpls te p2mp-te
 mpls rsvp-te
 mpls te cspf
#
mpls ldp
 mldp p2mp
 #
 ipv4-family
#
isis 2
 is-level level-2
 network-entity 45.0005.0005.0005.00
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 1.0.1.1 255.255.255.0
 isis enable 2
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 1.0.0.2 255.255.255.0
 ospf enable 10 area 0.0.0.1
 mpls
 mpls te
 mpls rsvp-te
#
interface LoopBack0
 ip address 2.2.2.2 255.255.255.255
 ospf enable 10 area 0.0.0.1
 isis enable 2
#
interface Tunnel10
 ip address unnumbered interface LoopBack0
 tunnel-protocol mpls te
 destination 1.1.1.1
 mpls te tunnel-id 100
#
bgp 100
 router-id 2.2.2.2
 peer 1.1.1.1 as-number 100
 peer 1.1.1.1 connect-interface LoopBack0
 peer 1.1.2.2 as-number 100
 peer 1.1.2.2 connect-interface LoopBack0
 #
 ipv4-family unicast
  undo synchronization
  import-route direct
  peer 1.1.1.1 enable
  peer 1.1.1.1 route-policy policy2 export
  peer 1.1.1.1 reflect-client
  peer 1.1.1.1 next-hop-local
  peer 1.1.1.1 label-route-capability
  peer 1.1.2.2 enable
  peer 1.1.2.2 route-policy policy2 export
  peer 1.1.2.2 reflect-client
  peer 1.1.2.2 next-hop-local
  peer 1.1.2.2 label-route-capability
 #
 ipv4-family mvpn
  reflect change-path-attribute
  undo policy vpn-target
  peer 1.1.1.1 enable
  peer 1.1.1.1 reflect-client
  peer 1.1.2.2 enable
  peer 1.1.2.2 route-policy rp1 export
  peer 1.1.2.2 reflect-client
 #
 ipv4-family vpnv4
  undo policy vpn-target
  tunnel-selector tps
  peer 1.1.1.1 enable
  peer 1.1.1.1 reflect-client
  peer 1.1.1.1 next-hop-local
  peer 1.1.2.2 enable
  peer 1.1.2.2 reflect-client
  peer 1.1.2.2 next-hop-local
#
ospf 10
 opaque-capability enable
 area 0.0.0.1
  mpls-te enable
#
route-policy policy2 permit node 1
 apply mpls-label
#
route-policy rp1 permit node 1
 apply stitch-pmsi mldp
#
tunnel-policy p1
 tunnel select-seq te load-balance-number 1
#
return
</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0012.html">Configuration Examples for NG MVPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0020.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_ngmvpn_0101.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>