
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Dual-Root 1+1 Protection">
<meta name="abstract" content="In an MVPNv6 over BIERv6 scenario, if a node or link fails, multicast services can be restored only after BGP peer convergence is complete. However, such convergence takes a long time and therefore cannot meet the high reliability requirements of multicast services. To speed up BGP convergence, which in turn accelerates multicast service convergence, you can configure BFD for BGP. You can also deploy the dual-root 1+1 protection solution, which further improves the performance of multicast service convergence.">
<meta name="description" content="In an MVPNv6 over BIERv6 scenario, if a node or link fails, multicast services can be restored only after BGP peer convergence is complete. However, such convergence takes a long time and therefore cannot meet the high reliability requirements of multicast services. To speed up BGP convergence, which in turn accelerates multicast service convergence, you can configure BFD for BGP. You can also deploy the dual-root 1+1 protection solution, which further improves the performance of multicast service convergence.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_bierv6_1118.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="BIERv6">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0312693159">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/thickbox.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/imageResize.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-migrate-1.2.1.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery-ui.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/jquery.mousewheel.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/thickbox.js"></script>
<title>(Optional) Configuring Dual-Root 1+1 Protection</title>
</head>
<body><a name="EN-US_TASK_0312693159"></a><a name="EN-US_TASK_0312693159"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring Dual-Root 1+1 Protection</h1>
<div class="taskbody"><p>In an MVPNv6 over BIERv6 scenario, if a node or link fails, multicast services can be restored only after BGP peer convergence is complete. However, such convergence takes a long time and therefore cannot meet the high reliability requirements of multicast services. To speed up BGP convergence, which in turn accelerates multicast service convergence, you can configure BFD for BGP. You can also deploy the dual-root 1+1 protection solution, which further improves the performance of multicast service convergence.</p>
<div class="context"><a name="EN-US_TASK_0312693159__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In <a href="#EN-US_TASK_0312693159__fig2048117501308">Figure 1</a>, the MVPNv6 over BIERv6 dual-root 1+1 protection solution is deployed as follows:</p>
<ol><li>Two sender PEs (Root1 and Root2) are deployed. Root1 and Root2 each set up a PMSI tunnel with themselves as the BFIRs. PE1 is a leaf node on the two tunnels.</li><li>VPN fast reroute (FRR) is configured on PE1 so that PE1 has two routes to the same multicast source. In this example, PE1 selects the route advertised by Root1 as the primary route, and the one advertised by Root2 as the backup route.</li><li><p>Traffic detection-based C-multicast FRR is configured on PE1.</p>
</li></ol>
<div class="fignone" id="EN-US_TASK_0312693159__fig2048117501308"><a name="EN-US_TASK_0312693159__fig2048117501308"></a><a name="fig2048117501308"></a><span class="figcap"><b>Figure 1 </b>MVPNv6 over BIERv6 dual-root 1+1 protection networking</span><br><span><img class="imgResize" src="figure/en-us_image_0312695483.png" width="522.37828125" height="227.307486301875" title="Click to enlarge"></span></div>
<p></p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0312693159__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Deploy two sender PEs (Root1 and Root2) and configure them each to set up a PMSI tunnel with themselves as the BFIRs.</span><p><p>For details, see <a href="dc_bierv6_cfg_0017.html">Configuring BGP MVPN Peer Relationships</a>, <a href="dc_bierv6_cfg_0018.html">(Optional) Configuring Multicast Traffic Forwarding over a BIERv6 I-PMSI Tunnel</a>, and <a href="dc_bierv6_cfg_0019.html">(Optional) Enabling the BIERv6 S-PMSI Tunnel Function and Configuring Switching Criteria</a>.</p>
</p></li><li><span>Configure VPN FRR on PE1.</span><ol type="a"><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to enter the VPN instance view.</span></li><li><span>Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> command to enter the VPN instance IPv6 address family view.</span></li><li><span>Run the <strong><a href="cmdqueryname=route-distinguisher"><b><span class="cmdname">route-distinguisher</span></b></a> </strong><em>route-distinguisher</em> command to configure an RD for the VPN instance IPv6 address family.</span></li><li><span>Run the <a href="cmdqueryname=vpn+frr"><b><span class="cmdname">vpn frr</span></b></a> command to enable VPN FRR.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the VPN instance IPv6 address family view.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the VPN instance view.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>Configure traffic detection-based C-multicast FRR on PE1.</span><ol type="a"><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=acl+ipv6"><b><span class="cmdname">acl ipv6</span></b></a>  [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl6-number</span></i> command to create a basic ACL6 to be associated with C-multicast FRR and enter the basic ACL6 view.</span></li><li><span>Run the <a href="cmdqueryname=rule"><b><span class="cmdname">rule </span></b></a>[ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>permit</span></strong> | <strong><span>deny</span></strong> } [ <strong><span>source</span></strong> { <i><span class="varname">source-ip-address</span></i> { <i><span class="varname">source-wildcard</span></i> | <strong><span>0</span></strong> | <i><span class="varname">src-netmask</span></i> } | <strong><span>any</span></strong> } | <strong><span>time-range</span></strong> <i><span class="varname">time-name</span></i> | [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>vpn-instance-any</span></strong> ] | <strong><span>logging</span></strong> ] <sup>*</sup> command to configure a rule for the ACL6.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the basic ACL6 view.</span></li><li><span>Run the <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to enter the VPN instance view.</span></li><li><span>Run the <a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a> command to enter the VPN instance IPv6 address family view.</span></li><li><span>Run the <strong><a href="cmdqueryname=route-distinguisher"><b><span class="cmdname">route-distinguisher</span></b></a> </strong><em>route-distinguisher</em> command to configure an RD for the VPN instance IPv6 address family.</span></li><li><span>Run the <a href="cmdqueryname=mvpn"><b><span class="cmdname">mvpn</span></b></a> command to enter the VPN instance IPv6 address family MVPN view.</span></li><li><span>Run the <a href="cmdqueryname=c-multicast+frr"><b><span class="cmdname">c-multicast frr</span></b></a> [ <i><span class="varname">frrPlyNum</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">frrPlyName</span></i> ] command to enable C-multicast FRR.</span></li><li><span>Run the <a href="cmdqueryname=c-multicast+frr+flow-detection-based"><b><span class="cmdname">c-multicast frr flow-detection-based</span></b></a> { <i><span class="varname">frrPlyNum</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl-name</span></i> } command to set the traffic detection mode for C-multicast FRR. </span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the VPN instance IPv6 address family MVPN view.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the VPN instance IPv6 address family view.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to exit the VPN instance view.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0016.html">Configuring MVPNv6 over BIERv6
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_bierv6_cfg_0021.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_bierv6_1118.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>

<script language="JavaScript">
<!--
image_size('.imgResize');
var msg_imageMax = "view original image";
var msg_imageClose = "close";
//--></script></body>
</html>