
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a BSR RP">
<meta name="abstract" content="Select several Routers and configure them as Candidate-BootStrap Routers (C-BSRs) and Candidate-Rendezvous Points (C-RPs). A BSR is dynamically elected from C-BSRs. The BSR collects C-RP information and summarizes C-RP information into an RP-Set. The RP-Set is encapsulated in a Bootstrap message and advertised to all the Routers in the IPv6 PIM domain. Then, the C-RPs elect a BSR RP based on a uniform election rule.">
<meta name="description" content="Select several Routers and configure them as Candidate-BootStrap Routers (C-BSRs) and Candidate-Rendezvous Points (C-RPs). A BSR is dynamically elected from C-BSRs. The BSR collects C-RP information and summarizes C-RP information into an RP-Set. The RP-Set is encapsulated in a Bootstrap message and advertised to all the Routers in the IPv6 PIM domain. Then, the C-RPs elect a BSR RP based on a uniform election rule.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2009.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="IPv6 PIM">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367463">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a BSR RP</title>
</head>
<body><a name="EN-US_TASK_0172367463"></a><a name="EN-US_TASK_0172367463"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a BSR RP</h1>
<div class="taskbody"><p>Select several <span class="keyword">Router</span>s and configure them as Candidate-BootStrap Routers (C-BSRs) and Candidate-Rendezvous Points (C-RPs). A BSR is dynamically elected from C-BSRs. The BSR collects C-RP information and summarizes C-RP information into an RP-Set. The RP-Set is encapsulated in a Bootstrap message and advertised to all the <span class="keyword">Router</span>s in the IPv6 PIM domain. Then, the C-RPs elect a BSR RP based on a uniform election rule.</p>
<div class="context"><a name="EN-US_TASK_0172367463__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>If an IPv6 PIM-SM network is divided into multiple IPv6 PIM-SM domains and a dynamic RP needs to used, <a href="dc_vrp_multicast_cfg_2015.html">configure a BSR boundary</a> on the interfaces of edge <span class="keyword">Router</span>s in IPv6 PIM-SM domains to limit the range of each IPv6 PIM-SSM domain. Then, configure C-BSRs and C-RPs in each IPv6 PIM-SM domain.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367463__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Configure a basic numbered ACL6 or a named ACL6 as needed.</span><p><ul><li><p>Configure a basic numbered ACL6.</p>
<ol type="a"><li>Run <span><span><a href="cmdqueryname=acl+ipv6"><b><span class="cmdname">acl ipv6</span></b></a> [ <strong><span>number</span></strong> ] <i><span class="varname">basic-acl6-number</span></i> [ <strong><span>match-order</span></strong> { <strong><span>auto</span></strong> | <strong><span>config</span></strong> } ]</span></span><p>A basic numbered ACL6 is created, and the basic numbered ACL6 view is displayed.</p>
</li><li>Run <span><span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } [ <strong><span>fragment</span></strong> | <strong><span>source</span></strong> { <i><span class="varname">source-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">source-ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> | <strong><span>any</span></strong> } ] <sup>*</sup></span></span><p>Rules are configured for the basic numbered ACL6.</p>
</li></ol>
</li><li>Configure a named ACL6.<ol type="a"><li>Run <span><a href="cmdqueryname=acl+ipv6"><b><span class="cmdname">acl ipv6</span></b></a> <strong><span>name</span></strong> <i><span class="varname">acl6-name</span></i> <strong><span>basic</span></strong> [ <strong><span>match-order</span></strong> { <strong><span>auto</span></strong> | <strong><span>config</span></strong> } ]</span><p>A named ACL6 is created, and the named ACL6 view is displayed.</p>
</li><li>Run <span><span><a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> [ <i><span class="varname">rule-id</span></i> ] [ <strong><span>name</span></strong> <i><span class="varname">rule-name</span></i> ] { <strong><span>deny</span></strong> | <strong><span>permit</span></strong> } [ <strong><span>fragment</span></strong> | <strong><span>source</span></strong> { <i><span class="varname">source-ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">source-ipv6-address</span></i>/<i><span class="varname">prefix-length</span></i> | <strong><span>any</span></strong> } ] <sup>*</sup></span></span><p>Rules are configured for the named ACL6.</p>
</li></ol>
</li></ul>
<p>You can use the <strong><span>source</span></strong> parameter in the <a href="cmdqueryname=rule"><b><span class="cmdname">rule</span></b></a> command to define the range of multicast groups served by the C-RP.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=pim-ipv6"><b><span class="cmdname">pim-ipv6</span></b></a></span><p><p>The IPv6 PIM view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=c-bsr"><b><span class="cmdname">c-bsr</span></b></a> <i><span class="varname">ipv6-address</span></i> [ <i><span class="varname">hash-length</span></i> ]</span></span><p><p>A C-BSR is configured.</p>
</p><p><ul><li><p><i><span class="varname">ipv6-address</span></i>: specifies the IPv6 address of the interface where a C-BSR resides. The interface must be enabled with IPv6 PIM-SM.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To avoid frequent protocol changes caused by interface flapping, use the loopback interface address as the global IPv6 unicast address of the C-BSR.</p>
</div></div>
</li><li><p><i><span class="varname">hash-length</span></i>: specifies the hash mask length.</p>
<p>Based on the group address G, C-RP address, and the value of <i><span class="varname">hash-length</span></i>, <span class="keyword">Router</span>s use hash functions to calculate the C-RPs that have the same priority and want to serve G, and then compare the calculation results. The C-RP that has the largest calculated value is elected as the RP for group G.</p>
<p>When a multicast network is overloaded or traffic congests on an RP, the RP may be overburdened. In this situation, you can configure <i><span class="varname">hash-length</span></i> to enable different RPs to transmit services for different multicast groups and implement load balancing.</p>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=c-rp"><b><span class="cmdname">c-rp</span></b></a> <i><span class="varname">ipv6-address</span></i> [ <strong><span>advertisement-interval</span></strong> <i><span class="varname">adv-interval</span></i> | <strong><span>group-policy</span></strong> { <i><span class="varname">basic-acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6-name</span></i> } | <strong><span>holdtime</span></strong> <i><span class="varname">hold-interval</span></i> | <strong><span>priority</span></strong> <i><span class="varname">priority</span></i> ] <sup>*</sup></span></span><p><p>A C-RP is configured.</p>
</p><p><ul><li><p><i><span class="varname">ipv6-address</span></i>: specifies the IPv6 address of the interface where a C-RP resides. The interface must be enabled with IPv6 PIM-SM.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To avoid frequent protocol changes caused by interface flapping, use the loopback interface address as the global IPv6 unicast address of the C-RP.</p>
</div></div>
</li><li><p><strong><span>group-policy</span></strong> { <i><span class="varname">basic-acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6-name</span></i> }: indicates that a C-RP serves only IPv6 multicast groups within the IPv6 multicast group range defined by a specified IPv6 ACL. By default, a C-RP serves all IPv6 multicast groups.</p>
</li><li><p><strong><span>priority</span></strong> <i><span class="varname">priority</span></i>: specifies the priority of a C-RP. A larger <strong><span>priority</span></strong> value indicates a lower priority.</p>
<p>An RP is elected based on the following rules:</p>
<ul><li>The C-RP with the highest priority wins.</li><li>If interfaces have the same priority, the hash function is used and the C-RP with the largest hash value wins.</li><li>If interfaces have the same priority and the same hash value, the C-RP with the highest IPv6 address wins.</li></ul>
</li><li><p><strong><span>holdtime</span></strong> <i><span class="varname">hold-interval</span></i>: specifies the timeout period during which the BSR waits to receive Advertisement message from a C-RP.</p>
</li><li><p><strong><span>advertisement-interval</span></strong> <i><span class="varname">adv-interval</span></i>: specifies the interval at which a C-RP sends Advertisement messages.</p>
</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>If no ACL is configured, the C-RP serves all multicast groups.</li><li>If an ACL is configured, the device uses configured ACL rules to filter multicast groups to be served by the C-RP.<ul><li>If a multicast group matches an ACL rule and the action is <strong>permit</strong>, the C-RP serves this multicast group.</li><li>If a multicast group matches an ACL rule and the action is <strong>deny</strong>, the C-RP does not serve this multicast group.</li><li>If a multicast group does not match any ACL rule or if a specified ACL does not exist or does not contain rules, the C-RP serves all multicast groups.</li></ul>
</li></ul>
</div></div>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=bsm+semantic+fragmentation"><b><span class="cmdname">bsm semantic fragmentation</span></b></a></span></span><p><p>BSR packet fragmentation is enabled.</p>
</p><p><p>Enabling BSR packet fragmentation on all devices is recommended because BSR packet fragmentation can solve the problem faced by IP fragmentation that all fragments become unavailable due to loss of fragment information.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2005.html">Configuring IPv6 PIM-SM
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2009.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_2011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>