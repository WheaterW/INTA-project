
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Inter-AS Multicast by Using Static RPF Peers">
<meta name="abstract" content="You can set up MSDP peer relationships between Rendezvous Points (RPs) in different PIM-SM domains in the same autonomous system (AS) or static Reverse Path Forwarding (RPF) relationships between the RPs in different ASs so that hosts can receive multicast data from the source in another PIM-SM domain in the AS or from the source in another AS.">
<meta name="description" content="You can set up MSDP peer relationships between Rendezvous Points (RPs) in different PIM-SM domains in the same autonomous system (AS) or static Reverse Path Forwarding (RPF) relationships between the RPs in different ASs so that hosts can receive multicast data from the source in another PIM-SM domain in the AS or from the source in another AS.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0072.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0073.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0075.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="z00603461,w00606909,w00447999">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="featurename" content="MSDP">
<meta name="featuretype" content="IP Multicast">
<meta name="OWNER" content="w00447999">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="w00447999">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172367029">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring Inter-AS Multicast by Using Static RPF Peers</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172367029"></a><a name="EN-US_TASK_0172367029"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Inter-AS Multicast by Using Static RPF Peers</h1>
<div class="taskbody"><p>You can set up MSDP peer relationships between Rendezvous Points (RPs) in different PIM-SM domains in the same autonomous system (AS) or static Reverse Path Forwarding (RPF) relationships between the RPs in different ASs so that hosts can receive multicast data from the source in another PIM-SM domain in the AS or from the source in another AS.</p>
<div class="context"><a name="EN-US_TASK_0172367029__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0172367029__fig_dc_vrp_multicast_cfg_007401">Figure 1</a>, there are two ASs. Each AS contains at least one PIM-SM domain and each PIM-SM domain may contain no or one multicast source and receiver. To enable the receiver in PIM-SM2 domain to receive both multicast data sent by S2 in PIM-SM3 domain and multicast data sent by S1 in PIM-SM1 domain, configure inter-AS multicast, without changing the unicast topology.</p>
<div class="fignone" id="EN-US_TASK_0172367029__fig_dc_vrp_multicast_cfg_007401"><a name="EN-US_TASK_0172367029__fig_dc_vrp_multicast_cfg_007401"></a><a name="fig_dc_vrp_multicast_cfg_007401"></a><span class="figcap"><b>Figure 1 </b>Configuring inter-AS multicast by using static RPF peers</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 through 2 in this example represent GE <span>0/1/0</span>, and GE <span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_multicast_cfg_007401.png"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.4.1.4.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.4.1.4.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.4.1.4.1.4.1.3" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span> A</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.5.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.4.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>B</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.2.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>C</p>
<p></p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.4.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>Loopback0</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>1.1.1.1/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>D</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.3.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>Loopback0</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>2.2.2.2/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>E</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.3.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/2/0</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.2.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="2" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.1 "><p><span class="keyword">Device</span>F</p>
<p></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.2 "><p>GigabitEthernet<span>0/1/0</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.5.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>Loopback0</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>3.3.3.3/32</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367029__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>If static RPF peers are incorrectly configured, source active (SA) message loops may occur. Therefore, exercise caution when configuring them.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367029__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure an IP address for each <span class="keyword">Router</span> interface; configure OSPF in each AS and configure External Border Gateway Protocol (EBGP) between ASs; configure BGP and OSPF to import routes from each other.</p>
</li><li><p>Enable multicast routing and PIM-SM on each interface. Configure loopback0 and specify it as a C-BSR and C-RP on <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, and <span class="keyword">Device</span>F in their PIM-SM domains.</p>
</li><li><p>Establish an MSDP peer relationship between RPs in different domains. Specifically, establish an MSDP peer relationship between <span class="keyword">Device</span>C and <span class="keyword">Device</span>D, and between <span class="keyword">Device</span>C and <span class="keyword">Device</span>F.</p>
</li><li><p>Specify static RPF peers for MSDP peers. Specifically, specify <span class="keyword">Device</span>D and <span class="keyword">Device</span>F as static RPF peers of <span class="keyword">Device</span>C, and specify <span class="keyword">Device</span>C as the static RPF peer of <span class="keyword">Device</span>D and <span class="keyword">Device</span>F.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172367029__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>AS numbers and router IDs of <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, and <span class="keyword">Device</span>C</p>
</li><li><p>AS numbers and router IDs of <span class="keyword">Device</span>D and <span class="keyword">Device</span>E</p>
</li><li><p>AS numbers of <span class="keyword">Device</span>F and <span class="keyword">Device</span>G and router ID of <span class="keyword">Device</span>F</p>
</li><li><p>Policy used by <span class="keyword">Device</span> C to filter the SA messages received from <span class="keyword">Device</span> D and <span class="keyword">Device</span> F</p>
</li><li><p>Policy used by <span class="keyword">Device</span> D and <span class="keyword">Device</span> F to filter the SA messages received from <span class="keyword">Device</span> C</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172367029__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address for each <span class="keyword">Router</span> interface and configure OSPF in the ASs. For configuration details, see Configuration Files in this section.</span></li><li><span>Enable multicast routing on each device and PIM-SM on each interface.</span><p><p># Enable the multicast function on all <span class="keyword">Router</span>s and enable PIM-SM on involved interfaces. The configurations on other <span class="keyword">Router</span>s are similar to that on <span class="keyword">Device</span>C. For configuration details, see Configuration Files in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>multicast routing-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-GigabitEthernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Configure a BSR boundary on GE <span>0/1/0</span> on <span class="keyword">Device</span> A and <span class="keyword">Device</span> F, and GE <span>0/2/0</span> on <span class="keyword">Device</span> B and <span class="keyword">Device</span> E. The configurations of <span class="keyword">Device</span> B, <span class="keyword">Device</span> E, and <span class="keyword">Device</span> F are similar to the configuration of <span class="keyword">Device</span> A. For configuration details, see Configuration Files in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>pim bsr-boundary</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
</p></li><li><span>Enable IGMP on interfaces connected to hosts. For configuration details, see Configuration Files in this section.</span></li><li><span>Configure Loopback 0 as both a C-BSR and a C-RP.</span><p><p># Create Loopback 0 and configure Loopback 0 as both a C-BSR and a C-RP on <span class="keyword">Device</span>C, <span class="keyword">Device</span>D, and <span class="keyword">Device</span>F. The configurations of <span class="keyword">Device</span> D and <span class="keyword">Device</span> F are similar to the configuration of <span class="keyword">Device</span> C. For configuration details, see Configuration Files in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>ip address 1.1.1.1 255.255.255.255</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>pim sm</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-LoopBack0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>pim</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim] <strong>c-bsr loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim] <strong>c-rp loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-pim] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-pim] <strong>quit</strong></pre>
</p></li><li><span>Configure static RPF peers.</span><p><p># Configure <span class="keyword">Device</span> D and <span class="keyword">Device</span> F as static RPF peers of <span class="keyword">Device</span> C.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>ip ip-prefix list-df permit 192.168.0.0 16 greater-equal 16 less-equal 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>msdp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-msdp] <strong>peer 192.168.3.2 connect-interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-msdp] <strong>peer 192.168.5.1 connect-interface GigabitEthernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-msdp] <strong>static-rpf-peer 192.168.3.2 rp-policy list-df</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-msdp] <strong>static-rpf-peer 192.168.5.1 rp-policy list-df </strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-msdp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C-msdp] <strong>quit</strong></pre>
<p># Configure <span class="keyword">Device</span> C as static RPF peers of <span class="keyword">Device</span> D and <span class="keyword">Device</span> F. The configuration of <span class="keyword">Device</span> F is similar to the configuration of <span class="keyword">Device</span> D. For configuration details, see Configuration Files in this section.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D] <strong>ip ip-prefix list-c permit 192.168.0.0 16 greater-equal 16 less-equal 32</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D] <strong>msdp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-msdp] <strong>peer 192.168.1.1 connect-interface GigabitEthernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-msdp] <strong>static-rpf-peer 192.168.1.1 rp-policy list-c</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>D-msdp] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>D-msdp] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Run the <strong>display bgp peer</strong> command. The command output shows BGP peer relationships established between <span class="keyword">Router</span>s. <span class="keyword">Device</span> C has no output, which indicates that the BGP peer relationships are not set up between <span class="keyword">Device</span> C and <span class="keyword">Device</span> D, or between <span class="keyword">Device</span> C and <span class="keyword">Device</span> F.</p>
<p># Run the <strong>display msdp brief</strong> command. The command output shows MSDP peer relationships established between <span class="keyword">Router</span>s. When S1 in PIM-SM1 domain sends multicast data, the receivers in PIM-SM2 and PIM-SM3 domains can receive the data. For example, the command output of MSDP peers on <span class="keyword">Device</span> C, <span class="keyword">Device</span> D, and <span class="keyword">Device</span> F is as follows:</p>
<pre class="screen">&lt;<span class="keyword">Device</span>C&gt; <strong>display msdp brief</strong></pre>
<pre class="screen"></pre>
<pre class="screen">MSDP Peer Brief Information of VPN-Instance: public net</pre>
<pre class="screen">  Configured   Up           Listen       Connect      Shutdown     Down</pre>
<pre class="screen">  2            2            0            0            0            0</pre>
<pre class="screen"></pre>
<pre class="screen">  Peer's Address     State     Up/Down time    AS     SA Count   Reset Count</pre>
<pre class="screen">  192.168.3.2        Up        01:07:08        ?      8          0</pre>
<pre class="screen">  192.168.5.1        Up        00:16:39        ?      13         0</pre>
<pre class="screen"></pre>
<pre class="screen">&lt;<span class="keyword">Device</span>D&gt; <strong>display msdp brief</strong></pre>
<pre class="screen">MSDP Peer Brief Information of VPN-Instance: public net</pre>
<pre class="screen">  Configured   Up           Listen       Connect      Shutdown     Down</pre>
<pre class="screen">  1            1            0            0            0            0</pre>
<pre class="screen"></pre>
<pre class="screen">  Peer's Address     State     Up/Down time    AS     SA Count   Reset Count</pre>
<pre class="screen">  192.168.1.1        Up        01:07:09        ?      8          0</pre>
<pre class="screen"></pre>
<pre class="screen">&lt;<span class="keyword">Device</span>F&gt; <strong>display msdp brief</strong></pre>
<pre class="screen">MSDP Peer Brief Information of VPN-Instance: public net</pre>
<pre class="screen">  Configured   Up           Listen       Connect      Shutdown     Down</pre>
<pre class="screen">  1            1            0            0            0            0</pre>
<pre class="screen"></pre>
<pre class="screen">  Peer's Address     State     Up/Down time    AS     SA Count   Reset Count</pre>
<pre class="screen">  192.168.4.1        Up        00:16:40        ?      13         0</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172367029__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><span class="keyword">Device</span>A configuration file<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>A</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.5.2 255.255.255.0</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen"> pim bsr-boundary</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.4.2 255.255.255.0</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.5.0 0.0.0.255</pre>
<pre class="screen">  network 192.168.4.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return </pre>
</li><li><span class="keyword">Device</span>B configuration file<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>B</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.2 255.255.255.0</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.2.2 255.255.255.0</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen"> pim bsr-boundary</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.1.0 0.0.0.255</pre>
<pre class="screen">  network 192.168.2.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return </pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>C</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast routing-enable</pre>
<pre class="screen">ip ip-prefix list-df index 10 permit 192.168.0.0 16 greater-equal 16 less-equal 32</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.1.1 255.255.255.0</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.4.1 255.255.255.0</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack0</pre>
<pre class="screen"> ip address 1.1.1.1 255.255.255.255</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen">#</pre>
<pre class="screen">pim</pre>
<pre class="screen"> c-bsr LoopBack0</pre>
<pre class="screen"> c-rp LoopBack0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.1.0 0.0.0.255</pre>
<pre class="screen">  network 192.168.4.0 0.0.0.255</pre>
<pre class="screen">  network 1.1.1.1 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">msdp</pre>
<pre class="screen"> peer 192.168.3.2 connect-interface GigabitEthernet <span>0/1/0</span></pre>
<pre class="screen"> peer 192.168.5.1 connect-interface GigabitEthernet <span>0/2/0</span></pre>
<pre class="screen"> static-rpf-peer 192.168.3.2 rp-policy list-df</pre>
<pre class="screen"> static-rpf-peer 192.168.5.1 rp-policy list-df</pre>
<pre class="screen">#</pre>
<pre class="screen">return </pre>
</li><li><p><span class="keyword">Device</span> D configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>D</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast routing-enable</pre>
<pre class="screen">ip ip-prefix list-c index 10 permit 192.168.0.0 16 greater-equal 16 less-equal 32</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.3.2 255.255.255.0</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack0</pre>
<pre class="screen"> ip address 2.2.2.2 255.255.255.255</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen">#</pre>
<pre class="screen">pim</pre>
<pre class="screen"> c-bsr LoopBack0</pre>
<pre class="screen"> c-rp LoopBack0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.3.0 0.0.0.255</pre>
<pre class="screen">  network 2.2.2.2 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">msdp</pre>
<pre class="screen"> peer 192.168.1.1 connect-interface GigabitEthernet <span>0/1/0</span></pre>
<pre class="screen"> static-rpf-peer 192.168.1.1 rp-policy list-c</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li><li><span class="keyword">Device</span>E configuration file<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>E</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast routing-enable</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.3.1 255.255.255.0</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/2/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.2.1 255.255.255.0</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen"> pim bsr-boundary</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.2.0 0.0.0.255</pre>
<pre class="screen">  network 192.168.3.0 0.0.0.255</pre>
<pre class="screen">#</pre>
<pre class="screen">return </pre>
</li><li><p><span class="keyword">Device</span>F configuration file</p>
<pre class="screen">#</pre>
<pre class="screen">sysname <span class="keyword">Device</span>F</pre>
<pre class="screen">#</pre>
<pre class="screen">multicast routing-enable</pre>
<pre class="screen">ip ip-prefix list-c index 10 permit 192.168.0.0 16 greater-equal 16 less-equal 32</pre>
<pre class="screen">#</pre>
<pre class="screen">interface GigabitEthernet<span>0/1/0</span></pre>
<pre class="screen"> undo shutdown</pre>
<pre class="screen"> ip address 192.168.5.1 255.255.255.0</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen">#</pre>
<pre class="screen">interface LoopBack0</pre>
<pre class="screen"> ip address 3.3.3.3 255.255.255.255</pre>
<pre class="screen"> pim sm</pre>
<pre class="screen">#</pre>
<pre class="screen">pim</pre>
<pre class="screen"> c-bsr LoopBack0</pre>
<pre class="screen"> c-rp LoopBack0</pre>
<pre class="screen">#</pre>
<pre class="screen">ospf 1</pre>
<pre class="screen"> area 0.0.0.0</pre>
<pre class="screen">  network 192.168.5.0 0.0.0.255</pre>
<pre class="screen">  network 3.3.3.3 0.0.0.0</pre>
<pre class="screen">#</pre>
<pre class="screen">msdp</pre>
<pre class="screen"> peer 192.168.4.1 connect-interface GigabitEthernet <span>0/1/0</span></pre>
<pre class="screen"> static-rpf-peer 192.168.4.1 rp-policy list-c</pre>
<pre class="screen">#</pre>
<pre class="screen">return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0072.html">Configuration Examples for MSDP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0073.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_multicast_cfg_0075.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>