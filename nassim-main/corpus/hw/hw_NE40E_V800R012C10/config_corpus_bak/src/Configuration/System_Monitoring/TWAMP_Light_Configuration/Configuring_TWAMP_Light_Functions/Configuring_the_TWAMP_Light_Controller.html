
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the TWAMP Light Controller">
<meta name="abstract" content="The TWAMP Light Controller integrates the Control-Client and Session-Sender functions in the standard model. The TWAMP Light Control-Client establishes, starts, and stops a test session. The TWAMP Light Session-Sender starts performance tests and sends test packets to the Responder, or stops performance tests.">
<meta name="description" content="The TWAMP Light Controller integrates the Control-Client and Session-Sender functions in the standard model. The TWAMP Light Control-Client establishes, starts, and stops a test session. The TWAMP Light Session-Sender starts performance tests and sends test packets to the Responder, or stops performance tests.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_twamp-light_0005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_twamp-light_0012.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_twamp-light_cfg_0016.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="TWAMP Light">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="TWAMP Light">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="TWAMP Light">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="TWAMP Light">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="c00511010">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00511010">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001211758343">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the TWAMP Light Controller</title>
</head>
<body><a name="EN-US_TASK_0000001211758343"></a><a name="EN-US_TASK_0000001211758343"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the TWAMP Light Controller</h1>
<div class="taskbody"><p>The TWAMP Light Controller integrates the Control-Client and Session-Sender functions in the standard model. The TWAMP Light Control-Client establishes, starts, and stops a test session. The TWAMP Light Session-Sender starts performance tests and sends test packets to the Responder, or stops performance tests.</p>
<div class="steps"><a name="EN-US_TASK_0000001211758343__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure a TWAMP Light Control-Client and create a test session.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nqa+twamp-light"><b><span class="cmdname">nqa twamp-light</span></b></a></span><p><p>The TWAMP Light view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=client"><b><span class="cmdname">client</span></b></a></span><p><p>The TWAMP Light Control-Client function is enabled, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>Create a test session on the Controller:</span><p><ul><li>To create a test session in Eth-Trunk member interface-based test scenarios, run the <a href="cmdqueryname=test-session"><b><span class="cmdname">test-session</span></b></a><span> <i><span class="varname">session-id</span></i> <span>{ </span><strong><span>sender-ip</span></strong> <i><span class="varname">sender-ip-address</span></i> <strong><span>reflector-ip</span></strong> <i><span class="varname">reflector-ip-address</span></i><span> | <a href="cmdqueryname=sender-ipv6"><b><span class="cmdname">sender-ipv6</span></b></a> <i><span class="varname">sender-address-v6</span></i> <a href="cmdqueryname=reflector-ipv6"><b><span class="cmdname">reflector-ipv6</span></b></a> <i><span class="varname">reflector-address-v6</span></i></span><span> }</span> <strong><span>sender-port</span></strong> <i><span class="varname">sender-port</span></i> <strong><span>reflector-port</span></strong> <i><span class="varname">reflector-port</span></i><span> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span> <span><strong><span>link-bundle-interface</span></strong> { <i><span class="varname">link-bundle-interface-type</span></i> <i><span class="varname">link-bundle-interface-number</span></i> | <i><span class="varname">link-bundle-interface-name</span></i> }</span> [ <strong><span>dscp</span></strong> <i><span class="varname">dscp-value</span></i> | <strong><span>padding</span></strong> <i><span class="varname">padding-length</span></i><span> | <strong><span>padding-type</span></strong> <i><span class="varname">padding-type</span></i></span> | <strong><span>description</span></strong> <i><span class="varname">description</span></i> ] <sup>*</sup></span> command.</li><li>To create a session in other test scenarios, run the <a href="cmdqueryname=test-session"><b><span class="cmdname">test-session</span></b></a><span> <i><span class="varname">session-id</span></i> <span>{ </span><strong><span>sender-ip</span></strong> <i><span class="varname">sender-ip-address</span></i> <strong><span>reflector-ip</span></strong> <i><span class="varname">reflector-ip-address</span></i><span> | <a href="cmdqueryname=sender-ipv6"><b><span class="cmdname">sender-ipv6</span></b></a> <i><span class="varname">sender-address-v6</span></i> <a href="cmdqueryname=reflector-ipv6"><b><span class="cmdname">reflector-ipv6</span></b></a> <i><span class="varname">reflector-address-v6</span></i></span><span> }</span> <strong><span>sender-port</span></strong> <i><span class="varname">sender-port</span></i> <strong><span>reflector-port</span></strong> <i><span class="varname">reflector-port</span></i><span> [ <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ]</span><span> [ [</span> [ <strong><span>dscp</span></strong> <i><span class="varname">dscp-value</span></i> | <strong><span>padding</span></strong> <i><span class="varname">padding-length</span></i><span> | <strong><span>padding-type</span></strong> <i><span class="varname">padding-type</span></i></span> | <strong><span>description</span></strong> <i><span class="varname">description</span></i> ] <sup>*</sup></span> command.</li></ul>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>After a test session is configured, its parameters cannot be modified. To modify parameters of a test session, delete the session and reconfigure it.</p>
</li><li><p>The IP address configured for a test session must be a unicast address.</p>
</li><li><p>The UDP port number of the Controller must be a port number not in use.</p>
</li><li><p>The VPN instance configured for a TWAMP Light test session must exist. This instance cannot be deleted after it is bound to a test session (the system displays a prompt if an attempt is made to delete the VPN instance).</p>
</li></ul>
</div></div>
<ul><li>To collect statistics of packets with multiple priorities in a single session, you can specify different UDP port numbers for the Session-Sender. For example:<ul><li>Session 1: <a href="cmdqueryname=test-session"><b><span class="cmdname">test-session</span></b></a> 1 <strong><span>sender-ip</span></strong> 1.1.1.1 <strong><span>reflector-ip</span></strong> 2.2.2.2 <strong><span>sender-port</span></strong> 1025 <strong><span>reflector-port</span></strong> 1025 <strong><span>dscp</span></strong> 3</li><li>Session 2: <a href="cmdqueryname=test-session"><b><span class="cmdname">test-session</span></b></a> 2 <strong><span>sender-ip</span></strong> 1.1.1.1 <strong><span>reflector-ip</span></strong> 2.2.2.2 <strong><span>sender-port</span></strong> 1026 <strong><span>reflector-port</span></strong> 1025 <strong><span>dscp</span></strong> 6<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0000001211758343__en-us_cliref_0172384417_p891148520214157">When configuring a TWAMP Light client to send IPv6 packets, ensure that the length of the IPv6 packets to be sent is smaller than the smallest MTU configured on interfaces along the path. Otherwise, packets are discarded. </p>
<p id="EN-US_TASK_0000001211758343__en-us_cliref_0172384417_p1136739853214547">Before the configuration, perform the ping test. Ensure that the source address, destination address, and packet length of the ping packet are the same as those of the TWAMP Light IPv6 packet. Then run the <a href="cmdqueryname=display+ipv6+pathmtu"><b><span class="cmdname" id="EN-US_TASK_0000001211758343__en-us_cliref_0172384417_cmdname1885490015214547">display ipv6 pathmtu</span></b></a> command to check the <strong id="EN-US_TASK_0000001211758343__en-us_cliref_0172384417_b600421465214547">PMTU</strong> value of each interface along the path. For details, see <a href="feature_0029040638.html">Path MTU Test</a>.</p>
</div></div>
</li></ul>
</li></ul>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=test-session"><b><span class="cmdname">test-session</span></b></a> <i><span class="varname">session-id</span></i> <a href="cmdqueryname=ptp-compatible+enable"><b><span class="cmdname">ptp-compatible enable</span></b></a></span><p><p>The PTP compatible mode is enabled for the TWAMP Light test session.</p>
</p><p><p>In the scenario where a Huawei device interworks with a non-Huawei device, if the non-Huawei device uses a PTP server as the clock source but the Huawei device uses an NTP server as the clock source, you can run this command to enable the PTP compatible mode on the Huawei device. This prevents inaccurate measurement data caused by asynchronous clocks (different primary reference clocks).</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=test-session"><b><span class="cmdname">test-session </span></b></a><i><span class="varname">session-id</span></i> <strong><span>bind interface</span></strong> { <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <i><span class="varname">interface-name</span></i> }</span><p><p>An interface is bound to a TWAMP Light test session.</p>
</p><p><p>After an interface is bound to a TWAMP Light test session, valid statistics are reported to the bound interface. Other functional modules can obtain the statistics from this interface.</p>
</p></li></ol>
</li><li><span>Configure the TWAMP Light Session-Sender and start the TWAMP Light performance test.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=nqa+twamp-light"><b><span class="cmdname">nqa twamp-light</span></b></a></span><p><p>The TWAMP Light view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=one-way+delay-measure+enable"><b><span class="cmdname">one-way delay-measure enable</span></b></a></span><p><p>TWAMP Light one-way delay measurement is enabled.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before configuring TWAMP Light one-way delay measurement, ensure that devices on the network have achieved PTP clock synchronization.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=sender"><b><span class="cmdname">sender</span></b></a></span><p><p>The TWAMP Light Session-Sender function is enabled, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Start TWAMP Light performance measurement:</span><p><ul><li>To perform one-off performance measurement, run the <a href="cmdqueryname=test+start"><b><span class="cmdname">test start</span></b></a> <strong><span>test-session</span></strong> <i><span class="varname">session-id</span></i> { <strong><span>duration</span></strong> <i><span class="varname">duration</span></i> | <strong><span>packet-count</span></strong> <i><span class="varname">packet-count</span></i> } [ <strong><span>period</span></strong> { <strong><span>10</span></strong> | <strong><span>100</span></strong> | <strong><span>1000</span></strong> | <strong><span>30000</span></strong> } ] [ <strong><span>time-out</span></strong> <i><span class="varname">time-out</span></i> ] command.</li><li>To perform continuous performance measurement, run the <a href="cmdqueryname=test+start-continual"><b><span class="cmdname">test start-continual</span></b></a> <strong><span>test-session</span></strong> <i><span class="varname">session-id</span></i> [ <strong><span>period</span></strong> { <strong><span>10</span></strong> | <strong><span>100</span></strong> | <strong><span>1000</span></strong> | <strong><span>30000</span></strong> } ] [ <strong><span>time-out</span></strong> <i><span class="varname">time-out</span></i> ] command.</li><li>To perform continuous performance measurement periodically, run the <a href="cmdqueryname=test+start-regular"><b><span class="cmdname">test start-regular</span></b></a> <strong><span>test-session</span></strong> <i><span class="varname">session-id</span></i> [ <strong><span>regular-time</span></strong> <i><span class="varname">timevalue</span></i> ] [ <strong><span>packet-count</span></strong> <i><span class="varname">packet-count</span></i> ] [ <strong><span>time-out</span></strong> <i><span class="varname">time-out</span></i> ] command.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Statistics collection automatically stops when the specified interval is reached or the specified number of sent packets is reached. <span>You can also run the <a href="cmdqueryname=test+stop"><b><span class="cmdname">test stop</span></b></a> { <strong><span>all</span></strong> | <strong><span>test-session</span></strong> <i><span class="varname">session-id</span></i> } command to stop statistics collection.</span></p>
</div></div>
</p></li></ol>
</li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_twamp-light_0005.html">Configuring TWAMP Light Functions
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_cfg_twamp-light_0012.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_twamp-light_cfg_0016.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>