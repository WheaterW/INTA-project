
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Using GMAC Ping to Check Link Connectivity on a Layer 2 Network">
<meta name="abstract" content="Generic MAC (GMAC) ping applies to a part of or a whole network for monitoring connectivity without configuring a maintenance domain (MD), maintenance association (MA), or maintenance association end point (MEP).">
<meta name="description" content="Generic MAC (GMAC) ping applies to a part of or a whole network for monitoring connectivity without configuring a maintenance domain (MD), maintenance association (MA), or maintenance association end point (MEP).">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Ping/Tracert">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="m00915594">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373184">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Using GMAC Ping to Check Link Connectivity on a Layer 2 Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172373184"></a><a name="EN-US_TASK_0172373184"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Using GMAC Ping to Check Link Connectivity on a <span>Layer 2 </span>Network</h1>
<div class="taskbody"><p>Generic MAC (GMAC) ping applies to a part of or a whole network for monitoring connectivity without configuring a maintenance domain (MD), maintenance association (MA), or maintenance association end point (MEP).</p>
<div class="context"><a name="EN-US_TASK_0172373184__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>GMAC ping has principles similar to those of 802.1ag MAC ping. The difference is that a source device does not need to be a MEP, and a destination device does not need to be a MEP or maintenance association intermediate point (MIP). In other words, GMAC ping can be implemented without the need to configure an MD, MA, or MEP on the source, intermediate, or destination device.</p>
<p>Enable the GMAC ping function on the source and destination devices. The intermediate devices must support the bridge forwarding function.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373184__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ping+mac+enable"><b><span class="cmdname">ping mac enable</span></b></a></span><p><p>The GMAC ping function is enabled globally.</p>
</p><p><p>If the GMAC ping function is enabled:</p>
<ul><li><p>A source device starts the GMAC ping function by sending a loopback message (LBM) to a destination device.</p>
</li><li><p>After receiving the LBM, the destination device replies to the source device with a loopback reply (LBR).</p>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li><span><span>(Optional) In a VLAN scenario: </span>Run <a href="cmdqueryname=ping+mac"><b><span class="cmdname">ping mac</span></b></a> <i><span class="varname">mac-address</span></i> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> <span><strong><span>-p</span></strong> <i><span class="varname">priority-value</span></i> </span>] <sup>*</sup></span><p><p>The VLAN network connectivity is checked.</p>
</p><p><p>The following shows an example:</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong> 
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ping mac enable</strong> 
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong> 
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ping mac 00e0-fc12-3456 vlan 10 -c 2 -s 112</strong> 
Reply from 00e0-fc12-3456: bytes = 112 time &lt; 1ms 
Reply from 00e0-fc12-3456: bytes = 112 time &lt; 1ms 
Packets: Sent = 2, Received = 2, loss = 0 (0.00% loss) 
Minimum = 1ms, Maximum = 1ms, Average = 1ms </pre>
</p></li><li><span>(Optional) In a VLL scenario: Run <a href="cmdqueryname=ping+mac"><b><span class="cmdname">ping mac</span></b></a> <i><span class="varname">mac-address</span></i> <strong><span>l2vc</span></strong> <i><span class="varname">l2vc-id</span></i> { <strong><span>raw</span></strong> | <strong><span>tagged</span></strong> } [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | { <strong><span>pe-vid</span></strong> <i><span class="varname">pe-vid</span></i> <strong><span>ce-vid</span></strong> <i><span class="varname">ce-vid</span></i> | <strong><span>dot1q-vlan</span></strong> <i><span class="varname">vlan-id</span></i> } <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-p</span></strong> <i><span class="varname">priority-value</span></i> ] <sup>*</sup></span><p><p>The VLL network connectivity is checked.</p>
</p><p><p>The following is an example:</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ping mac enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ping mac 00e0-fc12-3456 l2vc 1 raw -c 2 -s 112</strong>
Reply from 00e0-fc12-3456: bytes = 112 time &lt; 1ms
Reply from 00e0-fc12-3456: bytes = 112 time &lt; 1ms
Packets: Sent = 2, Received = 2, loss = 0 (0.00% loss)
Minimum = 1ms, Maximum = 1ms, Average = 1ms</pre>
</p></li><li><span>(Optional) In a VPLS scenario: Run <a href="cmdqueryname=ping+mac"><b><span class="cmdname">ping mac</span></b></a> <i><span class="varname">mac-address</span></i> <strong><span>vsi</span></strong> <i><span class="varname">vsi-name</span></i> [ <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> | { <strong><span>pe-vid</span></strong> <i><span class="varname">pe-vid</span></i> <strong><span>ce-vid</span></strong> <i><span class="varname">ce-vid</span></i> | <strong><span>dot1q-vlan</span></strong> <i><span class="varname">vlan-id</span></i> } <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-p</span></strong> <i><span class="varname">priority-value</span></i> ] <sup>*</sup></span><p><p>The VPLS network connectivity is checked.</p>
</p><p><p>The following is an example:</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ping mac enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ping mac 00e0-fc12-3456 vsi vsi1 -c 2 -s 112</strong>
Reply from 00e0-fc12-3456: bytes = 112 time &lt; 1ms
Reply from 00e0-fc12-3456: bytes = 112 time &lt; 1ms
Packets: Sent = 2, Received = 2, loss = 0 (0.00% loss)
Minimum = 1ms, Maximum = 1ms, Average = 1ms</pre>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0016.html">Using Ping/Tracert to Test a Layer 2 Network
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ping_cfg_0015.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>