
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Sampling IPv6 Flows">
<meta name="abstract" content="You can enable NetStream to sample and analyze the incoming or outgoing flows on an interface as required.">
<meta name="description" content="You can enable NetStream to sample and analyze the incoming or outgoing flows on an interface as required.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_2001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_3027.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_2007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,netstream_vrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Netstream">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00799643">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372975">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Sampling IPv6 Flows</title>
</head>
<body><a name="EN-US_TASK_0172372975"></a><a name="EN-US_TASK_0172372975"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Sampling IPv6 Flows</h1>
<div class="taskbody" id="taskbody142271256214103"><p id="shortdesc737378283214103">You can enable NetStream to sample and analyze the incoming or outgoing flows on an interface as required.</p>
<div class="context"><a name="EN-US_TASK_0172372975__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0172372975__context709936982214103"><div class="note" id="EN-US_TASK_0172372975__note491713742214103"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172372975__p715788138214103">If a NetStream-enabled interface is bound to a VPN instance, all packets in the VPN instance are sampled.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372975__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172372975__steps1367674152214103"><li id="EN-US_TASK_0172372975__step1835369544214103"><span id="EN-US_TASK_0172372975__cmd600820500214103">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172372975__cmdname1376689947214103">system-view</span></b></a></span><p><p id="EN-US_TASK_0172372975__p95191345119">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172372975__step1737821951214103"><span id="EN-US_TASK_0172372975__cmd1795931257214103">Configure a sampling mode and sampling ratio by performing at least one of the following steps:</span><p><ul id="EN-US_TASK_0172372975__ul2036879877214103"><li id="EN-US_TASK_0172372975__li1576047942214103">Configure a sampling mode and sampling ratio globally.<ol type="a" id="EN-US_TASK_0172372975__ol640528138214103"><li id="EN-US_TASK_0172372975__li1108060224214103">Run <a href="cmdqueryname=ipv6+netstream+sampler"><b><span class="cmdname" id="EN-US_TASK_0172372975__cmdname2135417646214103">ipv6 netstream sampler</span></b></a> <span id="EN-US_TASK_0172372975__ph511792456214155">{ <strong><span id="EN-US_TASK_0172372975__cmdparmname1397150135214155">fix-packets</span></strong> <i><span class="varname" id="EN-US_TASK_0172372975__varname1957451036214155">fix-packet-number</span></i> | <strong><span id="EN-US_TASK_0172372975__cmdparmname1584373888214155">random-packets</span></strong> <i><span class="varname" id="EN-US_TASK_0172372975__varname256919550214155">random-packet-number</span></i> | <strong><span id="EN-US_TASK_0172372975__cmdparmname764403137214155">fix-time</span></strong> <i><span class="varname" id="EN-US_TASK_0172372975__varname1330965535214155">fix-time-number</span></i> }</span> { <strong><span id="EN-US_TASK_0172372975__cmdparmname458088884214155">inbound</span></strong> | <strong><span id="EN-US_TASK_0172372975__cmdparmname1693899026214155">outbound</span></strong> }<p id="EN-US_TASK_0172372975__p72941326103514">A sampling mode and sampling ratio are configured globally.</p>
</li><li id="EN-US_TASK_0172372975__li2037942554214103">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172372975__cmdname1967084561214103">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372975__varname1072196692214103">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172372975__varname1965181194214103">interface-number</span></i><p id="EN-US_TASK_0172372975__p178402504351">The interface view is displayed.</p>
</li></ol>
</li><li id="EN-US_TASK_0172372975__li1592849135214103">Configure a sampling mode and sampling ratio on an interface.<ol type="a" id="EN-US_TASK_0172372975__ol136699371214103"><li id="EN-US_TASK_0172372975__li1936819975214103">Run <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172372975__cmdname1166089070214103">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172372975__varname956610881214103">interface-type</span></i> <i><span class="varname" id="EN-US_TASK_0172372975__varname2047152329214103">interface-number</span></i><p id="EN-US_TASK_0172372975__p2550161719363">The interface view is displayed.</p>
</li><li id="EN-US_TASK_0172372975__li1639059287214103">Run <a href="cmdqueryname=ipv6+netstream+sampler"><b><span class="cmdname" id="EN-US_TASK_0172372975__cmdname531491712214103">ipv6 netstream sampler</span></b></a> <span id="EN-US_TASK_0172372975__ph196591449824">{ <strong><span id="EN-US_TASK_0172372975__cmdparmname2660154918213">fix-packets</span></strong> <i><span class="varname" id="EN-US_TASK_0172372975__varname1966074910214">fix-packet-number</span></i> | <strong><span id="EN-US_TASK_0172372975__cmdparmname966064912214">random-packets</span></strong> <i><span class="varname" id="EN-US_TASK_0172372975__varname116601849923">random-packet-number</span></i> | <strong><span id="EN-US_TASK_0172372975__cmdparmname266018491525">fix-time</span></strong> <i><span class="varname" id="EN-US_TASK_0172372975__varname19660164913212">fix-time-number</span></i> }</span> { <strong><span id="EN-US_TASK_0172372975__cmdparmname866010491524">inbound</span></strong> | <strong><span id="EN-US_TASK_0172372975__cmdparmname106601349424">outbound</span></strong> }<p id="EN-US_TASK_0172372975__p1987611426497">A sampling mode and sampling ratio are configured on the interface.</p>
<div class="p" id="EN-US_TASK_0172372975__p1030064637214103"><div class="note" id="EN-US_TASK_0172372975__note1430675592214103"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172372975__p293572716618">The sampling mode and sampling ratio configured in the system view apply to all interfaces on the device. The sampling mode and sampling ratio configured in the interface view take precedence over those configured in the system view.</p>
</div></div>
The <a href="cmdqueryname=ipv6+netstream+sampler"><b><span class="cmdname" id="EN-US_TASK_0172372975__cmdname101465305019">ipv6 netstream sampler</span></b></a> command run in the system view has the same function as that run in the interface view.<ul id="EN-US_TASK_0172372975__ul1210681227214103"><li id="EN-US_TASK_0172372975__li1602097013214103">The execution of either command takes effect on all packets, and there is no need to configure both of them. If both of them are configured, ensure that the sampling modes configured using the two commands are the same.</li><li id="EN-US_TASK_0172372975__li204401728184916">Packets are sampled at the set sampling ratio, regardless of packet types. For example, if the sampling ratio in fixed packet sampling mode is set to 1000:1, one packet will be sampled every 1000 packets, regardless of whether these packets are IPv4 or IPv6 packets.</li></ul>
</div>
</li></ol>
</li></ul>
</p></li><li id="EN-US_TASK_0172372975__step206706204214103"><span id="EN-US_TASK_0172372975__cmd1630113429214103">Run <a href="cmdqueryname=ipv6+netstream"><b><span class="cmdname" id="EN-US_TASK_0172372975__cmdname7386817145716">ipv6 netstream</span></b></a> { <strong><span id="EN-US_TASK_0172372975__cmdparmname508541854214103">inbound</span></strong> | <strong><span id="EN-US_TASK_0172372975__cmdparmname947747985214103">outbound</span></strong> }</span><p><p id="EN-US_TASK_0172372975__p575120194616">NetStream statistics collection is enabled on the interface. When NetStream is enabled on an interface and statistics about the BGP next hop of packets are collected, the original flow information output in V5 format cannot carry BGP next hop information.</p>
</p></li><li id="EN-US_TASK_0172372975__step1022133444416"><span id="EN-US_TASK_0172372975__cmd1022112344443">(Optional) Run <a href="cmdqueryname=ipv6+netstream+statistics+enable"><b><span class="cmdname" id="EN-US_TASK_0172372975__cmdname11750928105017">ipv6 netstream statistics enable</span></b></a></span><p><p id="EN-US_TASK_0172372975__p598882711275">The traffic statistics diagnosis function is enabled so that you can compare the traffic statistics collected by the device with those restored by the NMS to determine the cause of inaccurate sampling.</p>
</p></li><li id="EN-US_TASK_0172372975__step14655152104918"><span id="EN-US_TASK_0172372975__cmd66552294919">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172372975__cmdname19934426174917">quit</span></b></a></span><p><p id="EN-US_TASK_0172372975__p48802038123016">The system view is displayed.</p>
</p></li><li id="EN-US_TASK_0172372975__step395841713214103"><span id="EN-US_TASK_0172372975__cmd7331985214103">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172372975__cmdname192412114214103">commit</span></b></a></span><p><p id="EN-US_TASK_0172372975__p1466515523574">The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_2001.html">Collecting Statistics About IPv6 Original Flows
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_3027.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_2007.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>