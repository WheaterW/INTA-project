
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring STAMP">
<meta name="abstract" content="This section provides an example for configuring STAMP in a basic IPv4 static route scenario.">
<meta name="description" content="This section provides an example for configuring STAMP in a basic IPv4 static route scenario.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stamp_cfg_0007.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="cwx718287,z00603461,f00454608,c00819848,l00468467,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="STAMP">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="STAMP">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="STAMP">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="STAMP">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="c00511010">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00511010">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001389132440">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring STAMP</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000001389132440"></a><a name="EN-US_TASK_0000001389132440"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring STAMP</h1>
<div class="taskbody"><p>This section provides an example for configuring STAMP in a basic IPv4 static route scenario.</p>
<div class="context"><a name="EN-US_TASK_0000001389132440__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p><span class="keyword">Device</span>A, <span class="keyword">Device</span>B, and <span class="keyword">Device</span>C are three devices on the network shown in <a href="#EN-US_TASK_0000001389132440__fig_dc_vrp_twamp_cfg_001001">Figure 1</a>. It is required that link quality be monitored through simple configurations. By deploying STAMP on <span class="keyword">Device</span>A and <span class="keyword">Device</span>C, you can configure each of them to function as both the Session-Sender and Session-Reflector to collect packet loss and delay statistics.</p>
<div class="fignone" id="EN-US_TASK_0000001389132440__fig_dc_vrp_twamp_cfg_001001"><a name="EN-US_TASK_0000001389132440__fig_dc_vrp_twamp_cfg_001001"></a><a name="fig_dc_vrp_twamp_cfg_001001"></a><span class="figcap"><b>Figure 1 </b>Configuring STAMP</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this example, interface1 and interface2 represent GE<span>0/1/0</span> and GE<span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001389191068.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001389132440__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li>Configure an IP address and a routing protocol for each involved interface so that all devices can communicate at the network layer.</li><li><p>Configure STAMP on <span class="keyword">Device</span>A and <span class="keyword">Device</span>C.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001389132440__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li>IP addresses of interfaces on <span class="keyword">Device</span>A: 10.3.3.3 and 10.1.1.1</li><li>IP addresses of interfaces on <span class="keyword">Device</span>B: 10.1.1.2 and 10.2.2.1</li><li>IP addresses of interfaces on <span class="keyword">Device</span>C: 10.4.4.4 and 10.2.2.2</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001389132440__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, and <span class="keyword">Device</span>C to be reachable at the network layer. For configuration details, see the configuration files.</span></li><li><span>Configure STAMP on <span class="keyword">Device</span>A.</span><p><pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>nqa stamp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-stamp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>interface gigabitethernet </strong><strong><span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Gigabitethernet<span>0/1/0</span>] <strong>ip address 10.1.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Gigabitethernet<span>0/1/0</span>]<strong> stamp ipv4 enable nexthop-ip 10.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-Gigabitethernet<span>0/1/0</span>]<strong> </strong><strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A]<strong> </strong><strong>commit</strong></pre>
</p></li><li><span>Configure STAMP on <span class="keyword">Device</span>B.</span><p><pre class="screen">&lt;<span class="keyword">Device</span>C&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>C] <strong>nqa stamp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-stamp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C] <strong>interface gigabitethernet </strong><strong><span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-Gigabitethernet<span>0/1/0</span>] <strong>ip address 10.2.2.2 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-Gigabitethernet<span>0/1/0</span>]<strong> stamp ipv4 enable nexthop-ip 10.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C-Gigabitethernet<span>0/1/0</span>]<strong> </strong><strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>C]<strong> </strong><strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Check real-time STAMP session statistics on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display stamp ipv4 test-session interface</strong> <strong>gigabitethernet </strong><strong><span>0/1/0</span></strong></pre>
<pre class="screen">Session ID                       : 2147483647
Session Type                     : dynamic
State                            : active
Type                             : continual
Sender IP                        : 10.1.1.1
Sender Port                      : 50862
Reflector IP                     : 10.2.2.2
Reflector Port                   : 862
Mode                             : unauthenticated
DSCP                             : 0
VPN Instance                     : -
Interface                        : Gigabitethernet<span>0/1/0</span>
Last Start Time                  : 2022-10-29 07:18:51
Last Stop Time                   : never
Period Time(in millisecond)      : 1000
Time Out(in second)              : 5</pre>
<p># Check two-way delay statistics of STAMP sessions on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display stamp ipv4 statistic-type twoway-delay interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">Latest two-way delay statistics(usec):
--------------------------------------------------------------------------------
     Index      Delay(Avg)  Jitter(Avg)    Tx-Jitter(Avg)   Rx-Jitter(Avg) 
--------------------------------------------------------------------------------
         1             629          227                56              580
         2             533          186                34              350
         3             936          611                57              564
         4             530           93                44              453
         5             634          127                56              469
         6             618          171                46              453
         7             532          106                34              341
         8             542          157                36              341
         9             784          489                46              350
        10             619          171                24              230
        11             547          142                45              453
        12             668          246                69              675
        13             626          241                47              469
        14             510          146                46              477
        15             858          448                35              350
        16             658          131                36              341
        17             628          213                24              350
--------------------------------------------------------------------------------
Average Delay    :        638    Average Jitter   :        230
Maximum Delay    :       2596    Maximum Jitter   :       1864
Minimum Delay    :        335    Minimum Jitter   :          5
Average TxJitter :         43    Average RxJitter :        426
Maximum TxJitter :        107    Maximum RxJitter :       1073
Minimum TxJitter :          0    Minimum RxJitter :          0</pre>
<p># Check two-way packet loss statistics of STAMP sessions on <span class="keyword">Device</span>A.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>display stamp ipv4 statistic-type twoway-loss interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">Latest two-way loss statistics:
--------------------------------------------------------------------------------
     Index      Loss count      Loss ratio      Error count      Error ratio
--------------------------------------------------------------------------------
         1               0         0.0000%                0          0.0000%
         2               0         0.0000%                0          0.0000%
         3               0         0.0000%                0          0.0000%
         4               0         0.0000%                0          0.0000%
         5               0         0.0000%                0          0.0000%
         6               0         0.0000%                0          0.0000%
         7               0         0.0000%                0          0.0000%
         8               0         0.0000%                0          0.0000%
         9               0         0.0000%                0          0.0000%
        10               0         0.0000%                0          0.0000%
        11               0         0.0000%                0          0.0000%
        12               0         0.0000%                0          0.0000%
        13               0         0.0000%                0          0.0000%
        14               0         0.0000%                0          0.0000%
        15               0         0.0000%                0          0.0000%
        16               0         0.0000%                0          0.0000%
        17               0         0.0000%                0          0.0000%
        18               0         0.0000%                0          0.0000%
        19               0         0.0000%                0          0.0000%
        20               0         0.0000%                0          0.0000%
        21               0         0.0000%                0          0.0000%
--------------------------------------------------------------------------------
Average Loss Count   :          0    Average Loss Ratio   :   0.0000%
Maximum Loss Count   :          0    Maximum Loss Ratio   :   0.0000%
Minimum Loss Count   :          0    Minimum Loss Ratio   :   0.0000%
Average RxError Count:          0    Average RxError Ratio:   0.0000%
Maximum RxError Count:          0    Maximum RxError Ratio:   0.0000%
Minimum RxError Count:          0    Minimum RxError Ratio:   0.0000%</pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000001389132440__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>A
#
interface Gigabitethernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.1.1 255.255.255.0
 stamp ipv4 enable nexthop-ip 10.2.2.2
#
interface Gigabitethernet<span>0/2/0</span>
 undo shutdown
 ip address 10.3.3.3 255.255.255.0
#
ip route-static 0.0.0.0 0.0.0.0 10.1.1.2
#
nqa stamp
#
return</pre>
</li><li><p><span class="keyword">Device</span>B configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>B
#
interface Gigabitethernet<span>0/1/0</span>
 undo shutdown
 ip address 10.1.1.2 255.255.255.0
#
interface Gigabitethernet<span>0/2/0</span>
 undo shutdown
 ip address 10.2.2.1 255.255.255.0
#
ip route-static 10.3.3.0 255.255.255.0 10.1.1.1
ip route-static 10.4.4.0 255.255.255.0 10.2.2.2
#
return</pre>
</li><li><p><span class="keyword">Device</span>C configuration file</p>
<pre class="screen">#
sysname <span class="keyword">Device</span>C
#
interface Gigabitethernet<span>0/1/0</span>
 undo shutdown
 ip address 10.2.2.2 255.255.255.0
 stamp ipv4 enable nexthop-ip 10.1.1.1
#
interface Gigabitethernet<span>0/2/0</span>
 undo shutdown
 ip address 10.4.4.4 255.255.255.0
#
ip route-static 0.0.0.0 0.0.0.0 10.2.2.1
#
nqa stamp
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_stamp_cfg_0007.html">Configuration Examples for STAMP
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
</div>
</div>
</body>
</html>