
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an MCP">
<meta name="abstract" content="A Measurement Control Point (MCP) collects statistics reported by Data Collecting Points (DCPs), summarizes and calculates the statistics, and reports measurement results to user terminals or the network management system (NMS).">
<meta name="description" content="A Measurement Control Point (MCP) collects statistics reported by Data Collecting Points (DCPs), summarizes and calculates the statistics, and reports measurement results to user terminals or the network management system (NMS).">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipfpm_cfg_0015.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipfpm_cfg_0018.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="IP FPM">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="IP FPM">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="IP FPM">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="IP FPM">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00511010">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172372890">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an MCP</title>
</head>
<body><a name="EN-US_TASK_0172372890"></a><a name="EN-US_TASK_0172372890"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an MCP</h1>
<div class="taskbody"><p>A Measurement Control Point (MCP) collects statistics reported by Data Collecting Points (DCPs), summarizes and calculates the statistics, and reports measurement results to user terminals or the network management system (NMS).</p>
<div class="context"><a name="EN-US_TASK_0172372890__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">On the network shown in <a href="#EN-US_TASK_0172372890__fig_dc_vrp_ipfpm_cfg_000701">Figure 1</a>, IP Flow Performance Measurement (FPM) hop-by-hop performance statistics collection is implemented. The target flow enters the transport network through <span class="keyword">Device</span> A, travels across <span class="keyword">Device</span> B, and leaves the transport network through <span class="keyword">Device</span> C. To locate faults when network performance deteriorates, configure IP FPM hop-by-hop performance statistics collection on <span class="keyword">Device</span> A, <span class="keyword">Device</span> B, and <span class="keyword">Device</span> C to measure packet loss and delay hop by hop. <span class="keyword">Device</span> A functions as an MCP to collect statistics reported by DCP1, DCP2, and DCP3, summarize and calculate the statistics, and report measurement results to user terminals or the NMS.<div class="fignone" id="EN-US_TASK_0172372890__fig_dc_vrp_ipfpm_cfg_000701"><a name="EN-US_TASK_0172372890__fig_dc_vrp_ipfpm_cfg_000701"></a><a name="fig_dc_vrp_ipfpm_cfg_000701"></a><span class="figcap"><b>Figure 1 </b>IP FPM hop-by-hop performance statistics collection</span><br><span><img class="vsd" src="images/fig_dc_vrp_ipfpm_cfg_000701.png" width="NaN" height="NaN"></span></div>
</div>
<p>Perform the following steps on <span class="keyword">Device</span> A:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172372890__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=nqa+ipfpm+mcp"><b><span class="cmdname">nqa ipfpm mcp</span></b></a></span></span><p><p>MCP is enabled globally, and the IPFPM-MCP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=mcp+id"><b><span class="cmdname">mcp id</span></b></a> <i><span class="varname">mcp-id</span></i></span><p><p>An MCP ID is configured.</p>
<p>Using the Router ID of a device that is configured as an MCP as its MCP ID is recommended.</p>
<p>The MCP ID must be an IP address reachable to DCPs. The MCP ID configured on an MCP must be the same as that specified in the <a href="cmdqueryname=mcp"><b><span class="cmdname">mcp</span></b></a> <i><span class="varname">mcp-id</span></i> [ <strong><span>port</span></strong> <i><span class="varname">port-number</span></i> ] command run in the IP FPM instance view of all DCPs associated with this MCP. If an MCP ID is changed on an MCP, it must be changed for all DCPs associated with this MCP in an IP FPM instance. Otherwise, the MCP cannot process the statistics reported by the DCPs.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=protocol+udp+port"><b><span class="cmdname">protocol udp port</span></b></a> <i><span class="varname">port-number</span></i></span></span><p><p>A UDP port number is specified for the MCP to communicate with DCPs.</p>
<p>The UDP port number configured on an MCP must be the same as that specified in the <a href="cmdqueryname=mcp"><b><span class="cmdname">mcp</span></b></a> <i><span class="varname">mcp-id</span></i> [ <strong><span>port</span></strong> <i><span class="varname">port-number</span></i> ] command run in the IP FPM instance view of all DCPs associated with this MCP. If a UDP port number is changed on an MCP, it must be changed for all DCPs associated with this MCP in an IP FPM instance. Otherwise, the MCP cannot process the statistics reported by the DCPs.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=authentication-mode"><b><span class="cmdname">authentication-mode</span></b></a> <strong><span>hmac-sha256</span></strong> <strong><span>key-id</span></strong> <i><span class="varname">key-id</span></i> [ <strong><span>cipher</span></strong> ] [ <i><span class="varname">password</span></i> | <strong><span>password</span></strong> ] An authentication mode and password are configured on the MCP.</span><p><p>The authentication mode and password configured on the MCP must be the same as those configured using the <a href="cmdqueryname=authentication-mode"><b><span class="cmdname">authentication-mode</span></b></a> <strong><span>hmac-sha256</span></strong> <strong><span>key-id</span></strong> <i><span class="varname">key-id</span></i> [ <strong><span>cipher</span></strong> ] [ <i><span class="varname">password</span></i> | <strong><span>password</span></strong> ] command on the DCPs associated with the MCP. Otherwise, the MCP cannot obtain the statistics reported by the DCPs.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=instance"><b><span class="cmdname">instance</span></b></a> <i><span class="varname">instance-id</span></i></span></span><p><p>An IP FPM instance is created, and the instance view is displayed.</p>
<p><i><span class="varname">instance-id</span></i> must be unique on an MCP and all its associated DCPs. The MCP and all its associated DCPs must have the same IP FPM instance configured. Otherwise, statistics collection does not take effect.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">text</span></i></span></span><p><p>The description is configured for the IP FPM instance.</p>
<p>The description of an IP FPM instance can contain the functions of the instance, facilitating applications.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=dcp"><b><span class="cmdname">dcp</span></b></a> <i><span class="varname">dcp-id</span></i></span></span><p><p>A DCP ID is specified in the IP FPM instance.</p>
<p>The DCP ID configured in an IP FPM instance must be the same as that specified in the <a href="cmdqueryname=dcp+id"><b><span class="cmdname">dcp id</span></b></a> <i><span class="varname">dcp-id</span></i> command run on a DCP. Otherwise, the MCP associated with this DCP cannot process the statistics reported by the DCP.</p>
</p></li><li><span>Configure an Atomic Closed Hop (ACH).</span><p><p>An ACH identifies a range between two neighboring measurement points. The network shown in <a href="#EN-US_TASK_0172372890__fig_dc_vrp_ipfpm_cfg_000701">Figure 1</a> is classified into three ACHs: ACH1 {TLP100, TLP200}, ACH2 {TLP200, TLP300}, and ACH3 {TLP200, TLP310}. In ACH1, TLP100 is the in-point, and TLP200 is the out-point. In ACH2, TLP200 is the in-point, and TLP300 is the out-point. In ACH3, TLP200 is the in-point, and TLP310 is the out-point.</p>
<ol type="a"><li>Run the <a href="cmdqueryname=ach"><b><span class="cmdname">ach</span></b></a> <i><span class="varname">ach-id</span></i> command to create an ACH and enter its view.</li><li>Run the <a href="cmdqueryname=flow"><b><span class="cmdname">flow</span></b></a> { <strong><span>forward</span></strong> | <strong><span>backward</span></strong> | <strong><span>bidirectional</span></strong> } command to specify the direction in which hop-by-hop delay measurement is implemented for the target flow.</li><li><p>Run the <a href="cmdqueryname=in-group"><b><span class="cmdname">in-group</span></b></a> <strong><span>dcp</span></strong> <i><span class="varname">dcp-id</span></i> <strong><span>tlp</span></strong> <i><span class="varname">tlp-id</span></i> command to configure the TLP in-group.</p>
</li><li><p>Run the <a href="cmdqueryname=out-group"><b><span class="cmdname">out-group</span></b></a> <strong><span>dcp</span></strong> <i><span class="varname">dcp-id</span></i> <strong><span>tlp</span></strong> <i><span class="varname">tlp-id</span></i> command to configure the TLP out-group.</p>
</li></ol>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172372890__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>When DCP configurations are being changed, the MCP may receive incorrect statistics from the DCP. To prevent this, run the <a href="cmdqueryname=measure+disable"><b><span class="cmdname">measure disable</span></b></a> command to disable IP FPM performance statistics collection of a specified instance on the MCP. After the DCP configuration change is complete, run the <a href="cmdqueryname=undo+measure+disable"><b><span class="cmdname">undo measure disable</span></b></a> or <a href="cmdqueryname=measure+enable"><b><span class="cmdname">measure enable</span></b></a> command to enable IP FPM performance statistics collection for the specified instance on the MCP. This ensures accurate measurement.</p>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipfpm_cfg_0015.html">Configuring IP FPM Hop-by-Hop Performance Measurement
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipfpm_cfg_0018.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>