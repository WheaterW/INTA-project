
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Flow Recognition on a Media Network">
<meta name="abstract" content="This section provides an example for configuring flow recognition on a media network.">
<meta name="description" content="This section provides an example for configuring flow recognition on a media network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_flow-recognition_cfg_0004.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="flow-recognition">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="flow-recognition">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="flow-recognition">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="flow-recognition">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="l00799643">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373420">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Flow Recognition on a Media Network</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172373420"></a><a name="EN-US_TASK_0172373420"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Flow Recognition on a Media Network</h1>
<div class="taskbody"><p>This section provides an example for configuring flow recognition on a media network.</p>
<div class="context"><a name="EN-US_TASK_0172373420__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><div class="p"><h4 class="sectiontitle">Networking Requirements</h4><div class="p"><a href="#EN-US_TASK_0172373420__fig_dc_ne_cfg_flow-recognition_00002">Figure 1</a> shows a typical media network. The functions of each node are described as follows: <ul><li>Controller: delivers control instructions to the device to control, manage, and monitor the system.</li><li>Device: provides functions such as forwarding, replication, scheduling, clean switching, and flow recognition of media traffic.</li><li>Multimedia terminal A: functions as the transmit end of media signals and transmits traffic to the device.</li><li>Multimedia terminal B: functions as the receive end of media signals and receives traffic from the device.</li></ul>
On the network:</div>
<ol><li>Multimedia terminal A transmits video and audio streams to the device.</li><li>The device collects the streams on the inbound interface, and reports each stream's septuple information (source and destination MAC addresses, source and destination IP addresses, source and destination port numbers, and protocol type) and other information (such as the numbers of packets and bytes) to the controller.</li><li>The controller calculates the stream rate based on the information to identify audio and video streams.</li></ol>
<div class="fignone" id="EN-US_TASK_0172373420__fig_dc_ne_cfg_flow-recognition_00002"><a name="EN-US_TASK_0172373420__fig_dc_ne_cfg_flow-recognition_00002"></a><a name="fig_dc_ne_cfg_flow-recognition_00002"></a><span class="figcap"><b>Figure 1 </b>Typical media network</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Interface 1 in this example represents GE <span>0/1/1</span>.</li></ul>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0173687657.png"></span></div>
<h4 class="sectiontitle">Configuration Roadmap</h4><div class="p">The configuration roadmap is as follows:<ol><li>Configure an IP address and a routing protocol for each interface so that all the nodes can communicate at the network layer.</li><li>Configure static telemetry subscription.</li><li>Configure flow recognition.</li></ol>
</div>
<h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li>Interface 1's IP address: 10.1.1.1</li><li>Controller IP address: 10.1.1.2; port number: 10001</li><li>Telemetry sampling path: huawei-flow-recognition:flowrecognition/streaminfos/streaminfo</li><li>Proto file used for flow recognition: huawei-flow-recognition.proto</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373420__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure an IP address and a routing protocol for each interface so that all the nodes can communicate at the network layer. For configuration details about the device, see <a href="#EN-US_TASK_0172373420__dc_ne_recg_cfg_0001">Configuration Files</a>.</span></li><li><span>Configure static telemetry subscription. For configuration details, see <a href="#EN-US_TASK_0172373420__dc_ne_recg_cfg_0001">Configuration Files</a> (Only key configurations are provided here. For details, see Telemetry Configuration).</span></li><li><span>Configure flow recognition.</span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>interface GigabitEthernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>flow-recognition inbound</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-GigabitEthernet<span>0/1/1</span>] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p># Check the flow table information of flow recognition in a specified slot.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>display flow-recognition cache slot <span>1</span></strong></pre>
<pre class="screen">Information of flow-recognition cache on slot <span>1</span>
----------------------------------------------------------
Interface      :  GigabitEthernet<span>0/1/1</span>
Direction      :  inbound
Protocol       :  6
SrcMac         :  00e0-fc12-3456
DstMac         :  00e0-fc34-5678
SrcPort        :  10
DstPort        :  30
SrcAddr        :  10.10.1.3
DstAddr        :  10.10.10.2
FirstTimestamp :  2019-05-20 14:32:46
LastTimestamp  :  2019-05-20 14:52:47
PacketsCount   :  399564
BytesCount     :  51144192
----------------------------------------------------------</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172373420__dc_ne_recg_cfg_0001"><a name="EN-US_TASK_0172373420__dc_ne_recg_cfg_0001"></a><a name="dc_ne_recg_cfg_0001"></a><a name="EN-US_TASK_0172373420__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Configuration Files</h4><pre class="screen">#
telemetry
 #
 sensor-group sensor1
  sensor-path huawei-flow-recognition:flow-recognition/streaminfos/streaminfo self-defined-event
 #
 destination-group destination1
  ipv4-address 10.1.1.2 port 10001 protocol grpc
 #
 subscription subscription1
  sensor-group sensor1
  destination-group destination1
#
#
interface GigabitEthernet <span>0/1/1</span>
 flow-recognition inbound
#</pre>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_flow-recognition_cfg_0004.html">Configuration Examples for Flow Recognition
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
</div>
</div>
</body>
</html>