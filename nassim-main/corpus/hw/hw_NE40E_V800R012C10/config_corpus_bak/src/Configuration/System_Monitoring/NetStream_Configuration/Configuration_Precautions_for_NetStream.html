
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Configuration Precautions for NetStream">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0003.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Publisher" content="20240229">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NetStream">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="Netstream">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="NetStream">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0000001175908136">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuration Precautions for NetStream</title>
</head>
<body><a name="EN-US_TOPIC_0000001175908136"></a><a name="EN-US_TOPIC_0000001175908136"></a>

<div class="articleBoxWithoutHead">

	<h1 class="topicTitle-h1">Configuration Precautions for NetStream</h1>

	<div>
		
		

		<div class="section"><h4 class="sectiontitle">Feature Requirements</h4>
			
		
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Feature requirements</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="60%" id="mcps1.3.1.2.2.4.1.1" liSelected="liSelected"><p>Feature Requirements</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="15%" id="mcps1.3.1.2.2.4.1.2" liSelected="liSelected"><p>Series</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.3.1.2.2.4.1.3" liSelected="liSelected"><p>Models</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>1. In tunnel sampling scenarios where traffic leaves a GRE tunnel, if the traffic forwarding mode is hardware switching or software loopback, sampling is not supported.</p>
<p>2. If sampling is required, you need to configure hardware loopback on the GRE tunnel interface. After hardware loopback is configured, the forwarding performance of all GRE tunnels is reduced by half.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In an L3VPN over SRv6 TE Policy scenario, if the outbound interface is a QinQ sub-interface/dot1q VLAN tag termination interface and slicing is deployed, the IP next hop and BGP next hop cannot be displayed in downstream sampling.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In the L3VPN over SRv6 TE Policy scenario where packet fragmentation is configured, the downstream sampling flow table field on the ingress is displayed as unfragmented.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>Sampling is not supported in multi-PE load balancing scenarios.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In upstream original flow sampling on a sub-interface, the source VLAN ID of packets cannot be collected. The source VLAN ID is fixed at 0. Only the destination VLAN ID of packets can be collected.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In the case of MPLS tunnel forwarding, neither the upstream nor the downstream next-hop IP address information of the ingress PE can be collected. Instead, FEC next-hop information can be collected.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In tunnel forwarding scenarios, the inbound interface cannot be restored in downstream sampling on the P node.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>Information about the outbound interface, VLAN, and next hop cannot be collected for discarded packets.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>If the outbound interface of a route is found based on the source IP address and used as the inbound interface for downstream sampling, the outbound interface may be different from that of the actual traffic. If the outbound interface of a route cannot be found based on the source IP address, the inbound interface can only be restored to the physical main interface of the actual inbound interface or the physical member interface of the trunk interface.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>During aging processing, the aging time of multi-core boards has a maximum error of 10s.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In P2MP &amp; NG MVPN scenarios: </p>
<p>1. In upstream sampling, the outbound interface, next hop, TopLabelType, and TopLabelIpAddress information cannot be obtained. </p>
<p>2. In downstream sampling, the next hop, TopLabelType, and TopLabelIpAddress information cannot be obtained.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>When downstream sampling is configured on the multicast VPN root node, only the source main interface can be sampled, and the VPN and corresponding RD value cannot be obtained.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>VXLAN packet sampling supports VXLAN packet sampling after VXLAN encapsulation and before VXLAN decapsulation, but does not support user packet sampling before user packets enter a VXLAN tunnel. In this scenario, the next hop and outbound interface cannot be sampled.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>When traffic loading balancing is configured, a maximum of 64 equal-cost routes can be sampled.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>1. In IPv4 multicast packet sampling, the outbound interface, next hop, and number of replication times cannot be obtained. </p>
<p>2. Transparently transmitted packets cannot be sampled. </p>
<p>3. In multicast VPN downstream sampling, only the source main interface can be sampled, and sub-interfaces and other logical interfaces cannot be sampled.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>SR-MPLS TE does not support downstream sampling on the ingress PE.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>Inbound sampling on Layer 3 sub-interfaces does not collect VLAN information of packets in the following scenarios:</p>
<p>1. MPLS forwarding, including LDP, TE, BGP LSP, and SR Policy</p>
<p>2. QinQ forwarding</p>
<p>3. 6to4/4to6 tunnel</p>
<p>4. GRE/MGRE</p>
<p>5. VXLAN</p>
<p>6. BRAS scenarios</p>
<p>7. SRv6 TE Policy scenarios</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>When NetStream works with CGN, if inbound sampling is configured and the sampling packet type is original packet, destination VPN, outbound interface, and destination route information cannot be collected if inbound-interface, outbound-interface, IPv4 route, or IPv6 route-based traffic diversion is configured.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>When NetStream works with CGN and the sampling direction is outbound and the sampled packet type is original packet, the source VPN information of the IPv4 forward behavior cannot be collected in the scenario where inbound interface traffic diversion, outbound interface traffic diversion, IPv4 route traffic diversion, IPv6 route traffic diversion, or hairpin is configured, and inbound interface information and source route information cannot be collected.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>When NetStream and IPsec are configured together and the sampling direction is inbound, the destination VPN information, outbound interface information, and destination address routing information cannot be collected.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>When NetStream and IPsec are configured together and the sampling direction is outbound, the source VPN information, inbound interface information, and source address routing information cannot be collected.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>The mask sampled from SRv6 packets is affected in the following scenarios:</p>
<p>1. In an SRv6 BE tunnel scenario, the mask in sampled inner packets on a transit node is displayed as 0.</p>
<p>2. In an SRv6 TE Policy scenario, the sampled mask on a transit node is displayed as 0.</p>
<p>3. On the network side of a PE where an SRv6 BE/TE Policy is configured, the mask in sampled outer packets is displayed as 0.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In an L2VPN/EVPN over SRv6 tunnel scenario, inner packet sampling does not take effect on a transit node. After inner packet sampling is enabled, the transit node still samples packets based on outer packets.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>1. In an L2VPN/EVPN L2VPN over SRv6 tunnel scenario, sampling is not supported in the network-side outbound direction of the ingress and egress.</p>
<p>2. In an L2VPN/EVPN L2VPN over SRv6 tunnel scenario, sampling is supported in the network-side inbound direction of the ingress and egress. The ipv6 netstream srv6-aware inner-header command fails to take effect after being run, and outer packets are still sampled. In addition, information about the outbound interface (displayed as Unknown), next hop (displayed as 0.0.0.0), BGP next hop (displayed as 0.0.0.0), BGP AS number (displayed as 0), and mask (displayed as 0) cannot be obtained.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In an L2VPN/EVPN L2VPN over SRv6 tunnel scenario, after inbound interface sampling is configured on the AC interface of the ingress and the public network interface of the egress, the outbound interface (Unknown), next hop (0.0.0.0), BGP next hop (0.0.0.0), BGP AS number (0), and mask (0) cannot be obtained. When outbound interface sampling is configured, the inbound interface (Unknown), next hop (0.0.0.0), BGP next hop (0.0.0.0), BGP AS number (0), and mask (0) cannot be obtained. In this case, SRv6 sampling results are affected.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In SRv6 scenarios, information about packets with more than two layers of IPv6+SRH headers or packets with more than two layers of SRH headers following the IPv6 header cannot be collected.</p>
<p>A reference packet format is as follows:</p>
<p>IPv6+SRH+IPv6+SRH+IPv6+SRH+PayLoad or IPv6+SRH+SRH+SRH+Payload.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>SRv6 sampling results are affected in the following network slicing scenarios:</p>
<p>1. The basic interface and slice interface are different physical interfaces in a FlexE group, and outbound interface sampling is configured. When traffic enters through the slice interface, the inbound interface for sampling is restored to the main interface where the slice interface resides.</p>
<p>2. In the scenario where the basic interface is a physical main interface and the slice interface is a channelized sub-interface, after outbound interface sampling is configured, the inbound interface for sampling is restored to the basic interface when traffic enters through the slice interface.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In IP over SRv6 TE Policy scenarios (including L3 EVPNv4/EVPNv6 over SRv6 TE flow group, L3VPNv4/L3VPNv6 over SRv6 TE flow group, L3VPNv4/L3VPNv6 over SRv6 TE Policy, EVPN L3VPNv4/L3VPNv6 over SRv6 TE Policy, public network IP over SRv6 TE Policy, public network IP over SRv6 TE flow group, IPv6 shortcut to SRv6 TE Policy, and IPv6 shortcut to SRv6 TE flow group) and in slicing scenarios where an IP over SRv6 TE Policy is deployed, SRv6 sampling results are affected if inbound sampling (interface or flow sampling) on the ingress PE meets one of the following conditions:</p>
<p>1. The list has only one layer, and the first SID is the local End.X SID.</p>
<p>2. The first SID is a binding SID or local End SID.</p>
<p>3. The first SID is shortcut to Policy or flow group.</p>
<p>4. In L3VPNv4/L3VPNv6 over SRv6 BE, EVPN L3VPNv4/L3VPNv6 over SRv6, and public network IPv4/IPv6 over SRv6 BE scenarios, the shortcut function is implemented on the locator route of the SRv6 BE ingress.</p>
<p>DstIf is displayed as UnKnown, NextHop is 0.0.0.0 or::, BGPNextHop is 0.0.0.0 or::, and DstAs is 0.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In IP over SRv6 TE Policy scenarios (including L3 EVPNv4/EVPNv6 over SRv6 TE flow group, L3VPNv4/L3VPNv6 over SRv6 TE flow group, L3VPNv4/L3VPNv6 over SRv6 TE Policy, EVPN L3VPNv4/L3VPNv6 over SRv6 TE Policy, public network IP over SRv6 TE Policy, public network IP over SRv6 TE flow group, IPv6 shortcut to SRv6 TE Policy, and IPv6 shortcut to SRv6 TE flow group scenarios) and in slicing scenarios where an IP over SRv6 TE Policy is deployed, SRv6 sampling results are affected if outbound sampling (interface or flow sampling) on the ingress PE meets one of the following conditions:</p>
<p>1. The list has only one layer, and the first SID is the local End.X SID.</p>
<p>2. The first SID is a binding SID or local End SID.</p>
<p>3. The first SID is shortcut to Policy or flow group.</p>
<p>4. In L3VPNv4/L3VPNv6 over SRv6 BE, EVPN L3VPNv4/L3VPNv6 over SRv6, and public network IPv4/IPv6 over SRv6 BE scenarios, the locator route of the SRv6 BE ingress can be shortcut to a Policy.</p>
<p>The display of SrcIf is related to the encapsulation source-address command configuration.</p>
<p>1. If the configured source-address corresponds to an interface, SrcIf is displayed as the interface.</p>
<p>2. If the configured source-address does not correspond to any interface, the interface displayed in the SrcIf field is incorrect. The interface may be any physical, NULL0, or unknown interface on the sampling board. BGPnexthop is displayed as ::, and DstAs is 0.</p>
<p>3. If source-address is not configured, the interface displayed in the SrcIf field is incorrect. The interface may be any physical or unknown interface on the sampling board. BGPNextHop is ::, and DstAs is 0.</p>
<p>4. The VPN field indicates the public network VPN.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In IP over SRv6 TE Policy scenarios (including L3 EVPNv4/EVPNv6 over SRv6 TE flow group, L3VPNv4/L3VPNv6 over SRv6 TE flow group, L3VPNv4/L3VPNv6 over SRv6 TE Policy, EVPN L3VPNv4/L3VPNv6 over SRv6 TE Policy, public network IP over SRv6 TE Policy, public network IP over SRv6 TE flow group, IPv6 shortcut to SRv6 TE Policy, and IPv6 shortcut to SRv6 TE flow group scenarios) and in slicing scenarios where an IP over SRv6 TE Policy is deployed, SRv6 sampling results are affected if outbound sampling (interface or flow sampling) on the ingress PE meets one of the following conditions:</p>
<p>1. The first-hop SID route is unreachable.</p>
<p>2. The standby link for a switchover is a TI-LFA link.</p>
<p>3. Switchover microloop avoidance takes effect.</p>
<p>4. Switchback microloop avoidance takes effect.</p>
<p>5. TE FRR is triggered.</p>
<p>The display of SrcIf is related to the encapsulation source-address command configuration.</p>
<p>1. If the configured source-address corresponds to an interface, SrcIf is displayed as the interface.</p>
<p>2. If the configured source-address does not correspond to any interface, the interface displayed in the SrcIf field is incorrect. The interface may be any physical, NULL0, or unknown interface on the sampling board. The BGP NextHop is ::, and DstAs is 0.</p>
<p>3. If source-address is not configured, the interface displayed in the SrcIf field is incorrect. The interface may be any physical or unknown interface on the sampling board. BGPNextHop is::, and DstAs is 0.</p>
<p>4. The VPN field indicates the public network VPN.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>When service chains are configured in IP over SRv6 TE Policy scenarios (including L3EVPN4/L3EVPNv6 over SRv6 TE flow group, L3VPNv4/L3VPNv6 over SRv6 TE flow group, L3VPNv4/L3VPNv6 over SRv6 TE Policy, EVPN L3VPNv4/L3VPNv6 over SRv6 TE Policy, public network IP over SRv6 TE Policy, public network IP over SRv6 TE flow group, IPv6 shortcut to SRv6 TE Policy, IPv6 shortcut to SRv6 TE flow group scenarios), SRv6 sampling results are affected in the following situation: When inbound interface sampling is performed on the SFF in the SFF -&gt; SF scenario, the value of DstIf is displayed as UnKnown, and inaccurate values are displayed in the NextHop and BgpNextHop fields. When outbound interface sampling is configured on the SFF, the values of NextHop, BgpNextHop, and DstAs are inaccurate.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In an IP over SRv6 service chain scenario, SRv6 sampling results are affected in the following situation: In the SF -&gt; SFF scenario, when inbound interface sampling is performed on the SFF for traffic from the SF, DstIf is displayed as UnKnown, and inaccurate values are displayed in the NextHop and BgpNextHop fields.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In IP over SRv6 TE Policy scenarios (including L3 EVPNv4/EVPNv6 over SRv6 TE flow group, L3VPNv4/L3VPNv6 over SRv6 TE flow group, L3VPNv4/L3VPNv6 over SRv6 TE Policy, EVPN L3VPNv4/L3VPNv6 over SRv6 TE Policy, public network IP over SRv6 TE Policy, public network IP over SRv6 TE flow group, IPv6 shortcut to SRv6 TE Policy, and IPv6 shortcut to SRv6 TE flow group scenarios) and in slicing scenarios where an IP over SRv6 TE Policy is deployed, outbound interface sampling is performed for penultimate hop popping. When the actual outbound interface is different from the outbound interface specified in the last-level SID's route information, SRv6 sampling results are affected, and the value displayed in the BgpNextHop field is incorrect, and DstAs is displayed as 0.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In a scenario where BGP FlowSpec and ACL redirection to a tunnel are configured, after inbound interface sampling is configured, the information collected for NextHop and BGP NextHop is 0.0.0.0 or ::, and DstAs is displayed as 0. If the actual outbound interface is a logical interface such as a sub-interface or tunnel interface, the outbound interface can only be displayed as the corresponding physical main interface or trunk main interface.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>BGPFLowspec, ACL redirection, NextHop and BGP NextHop information is 0.0.0.0 or::, and DstAs is 0.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In IP over SRv6 TE Policy scenarios (including L3EVPN over SRv6 TE flow group, L3VPN over SRv6 TE flow group, L3VPN over SRv6 TE Policy, EVPN L3VPN over SRv6 TE Policy, public network IP over SRv6 TE Policy, public network IP over SRv6 TE flow group, IPv6 shortcut to SRv6 TE Policy, and IPv6 shortcut to SRv6 TE Flow group scenarios), SRv6 sampling is not supported in SID compression scenarios.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>When EVC sub-interface sampling or AC-side sampling on the ingress/egress is configured, information about packets' public-network-side interface (displayed as Unknown in the flow table and 0 in the reported data), mask (displayed as 0), as (displayed as 0), nexthop (displayed as 0), bgpnexthop (displayed as 0), and DstVlanId (displayed as 0) cannot be obtained.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In an L2VPN/EVPN L2VPN accessing L3 tunnel scenario, upstream and downstream sampling on a PE cannot obtain or output RD values.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In SRv6 TE Policy scenarios (including EVPN L3VPNv4 over SRv6 TE flow group, L3VPNv4 over SRv6 TE flow group, L3VPNv4 over SRv6 TE Policy, EVPN L3VPNv4 over SRv6 TE Policy, EVPN L3VPNv6 over SRv6 TE flow group, L3VPNv6 over SRv6 TE flow group, L3VPNv6 over SRv6 TE Policy, and EVPN L3VPNv6 over SRv6 TE Policy scenarios) and in slicing scenarios where an IP over SRv6 TE Policy is deployed, inbound sampling (interface or flow sampling) is performed on a P node. When one of the following conditions is met, information displayed in the DstIf, nexthop, BGPnexthop, and DstAs fields is incorrect:</p>
<p>1. The list has only one layer, and the first SID is the local End.X SID.</p>
<p>2. The first SID is a binding or local End SID.</p>
<p>3. The first SID is shortcut to Policy or flow group.</p>
<p>4. The first-hop SID route is unreachable.</p>
<p>5. The standby link for a switchover is a TI-LFA link.</p>
<p>6. Switchover microloop avoidance takes effect.</p>
<p>7. Switchback microloop avoidance takes effect.</p>
<p>8. TE FRR is triggered.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In SRv6 TE Policy scenarios (including EVPN L3VPNv4 over SRv6 TE flow group, L3VPNv4 over SRv6 TE flow group, L3VPNv4 over SRv6 TE Policy, EVPN L3VPNv4 over SRv6 TE Policy, EVPN L3VPNv6 over SRv6 TE flow group, L3VPNv6 over SRv6 TE flow group, L3VPNv6 over SRv6 TE Policy, and EVPN L3VPNv6 over SRv6 TE Policy scenarios) and in slicing scenarios where an IP over SRv6 TE Policy is deployed, outbound sampling (interface or flow sampling) is performed on a P node. When one of the following conditions is met, information displayed in the Nexthop, BGP Nexthop, and DstAs fields is incorrect: </p>
<p>1. The list has only one layer, and the first SID is the local End.X SID. </p>
<p>2. The first SID is a binding or local End SID. </p>
<p>3. The first SID is shortcut to Policy or flow group. </p>
<p>4. The first-hop SID route is unreachable. </p>
<p>5. The standby link for a switchover is a TI-LFA link. </p>
<p>6. Switchover microloop avoidance takes effect. </p>
<p>7. Switchback microloop avoidance takes effect. </p>
<p>8. TE FRR is triggered.</p>
<p>8) TEFRR is triggered.</p>
<p>9) In binding SID insert mode, the binding SID has only one hop, and reduce is configured.</p>
<p>The Nexthop, BGP Nexthop, and DstAs information is incorrect.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>1. In End.X PSP scenarios where an SRv6 TE Policy in encap or insert mode crosses Policy P nodes (including Sid, ShortCut, EPE, etc.) or in End.X Usd scenarios where traffic leaves a tunnel, when inbound interface sampling is performed, NextHop and DstAS information is incorrectly collected. When the actual outbound interface is different from the outbound interface in the routing information of the last-level SID, outbound interface (DstIf) information is incorrectly collected, affecting SRv6 sampling results. During outbound interface sampling, inbound interface (SrcIf) information may be incorrectly collected, and the NextHop and DstAS information is  incorrectly collected.</p>
<p>2. In SRv6 slicing scenarios where downstream sampling is performed (endx, reduce endx, and tefrr are popped out on the penultimate hop), because the upstream NP removes the End.X SID, which cannot be obtained during downstream sampling, only the next-layer SID can be used to query reindex, causing information such as the next hop to be incorrectly obtained.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>In IP over SRv6 TE Policy reduce scenarios (including L3EVPN over SRv6 TE flow group, L3VPN over SRv6 TE flow group, L3VPN over SRv6 TE Policy, EVPN L3VPN over SRv6 TE Policy, public network IP over SRv6 TE Policy, public network IP over SRv6 TE flow group, IPv6 shortcut to SRv6 TE Policy, and IPv6 shortcut to SRv6 TE flow group scenarios) and in slicing scenarios where an IP over SRv6 TE Policy is deployed, when outbound sampling is performed on the first P node (the node is an End.X node) or ingress BSID node, the correct DIP ReIndex cannot be obtained, and NextHop, BgpNextHop, and DstAs information is incorrectly displayed.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>Sampling for communication between Option B SRv6 and MPLS:</p>
<p>1. In the SRv6 -&gt; MPLS direction, the inbound interface restored for outbound interface sampling is the main interface. The outbound interface restored for inbound interface sampling is the main interface. The sampling data of the next hop and BGP next hop is 0. </p>
<p>2. In the MPLS -&gt; SRv6 direction, the inbound interface restored for outbound interface sampling is the main interface. The sampling data of the next hop and BGP next hop is 0.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="60%" headers="mcps1.3.1.2.2.4.1.1 "><p>After the upgrade, the 16-bit NSIndex is dynamically allocated to interfaces on the device. The NSIndex allocated to each interface may change. The sampling server needs to synchronize the mapping between the interface index and NSIndex on the device. Otherwise, the sampling server may fail to restore interface traffic based on the NSIndex before the upgrade.</p>
</td>
<td class="cellrowborder" valign="top" width="15%" headers="mcps1.3.1.2.2.4.1.2 "><p>NE40E-M2</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.3.1.2.2.4.1.3 "><p>NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>

	</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0000.html">NetStream Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0001.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ns_cfg_0003.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>