
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Reflector">
<meta name="abstract" content="This section describes how to configure a reflector, which loops traffic back to an initiator. Parameters configured on the reflector vary according to scenarios.">
<meta name="description" content="This section describes how to configure a reflector, which loops traffic back to an initiator. Parameters configured on the reflector vary according to scenarios.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nqa_cfg_0052.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nqa_cfg_0054.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,network-monitor_vrp,w00556928,c00511010,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="c00511010">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00799643">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373120">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Reflector</title>
</head>
<body><a name="EN-US_TASK_0172373120"></a><a name="EN-US_TASK_0172373120"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Reflector</h1>
<div class="taskbody"><p>This section describes how to configure a reflector, which loops traffic back to an initiator. Parameters configured on the reflector vary according to scenarios.</p>
<div class="context"><a name="EN-US_TASK_0172373120__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Devices performing an Ethernet service activation test play two roles: initiator and reflector. An initiator sends simulated service traffic to a reflector, and the reflector reflects the service traffic.</p>
<p>The reflector must be specified before a test is started.</p>
<p>A reflector can reflect test traffic in either of the following modes:</p>
<ul><li>Interface-based mode: A reflector reflects all traffic that its interface receives.</li><li>Flow-based mode: A reflector reflects only traffic meeting specified conditions. In flow-based mode, a test flow must have been configured.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373120__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=nqa+test-flow"><b><span class="cmdname">nqa test-flow</span></b></a> <i><span class="varname">flow-id</span></i></span><p><p>A test flow is configured, and the NQA test flow view is displayed.</p>
</p></li><li><span>Configure service flow characteristics.</span><p><ol type="a"><li id="EN-US_TASK_0172373120__li1729501329214104"><div class="p" id="EN-US_TASK_0172373120__p1537674358214104"><a name="EN-US_TASK_0172373120__li1729501329214104"></a><a name="li1729501329214104"></a>Run either of the following commands to configure a traffic type and specify a MAC/IP address (or range) for test packets:<ul id="EN-US_TASK_0172373120__ul_5303"><li id="EN-US_TASK_0172373120__li326428655214104"><span id="EN-US_TASK_0172373120__ph1624891229214405"><a href="cmdqueryname=traffic-type"><b><span class="cmdname" id="EN-US_TASK_0172373120__cmdname2144830551214405">traffic-type</span></b></a> <strong><span id="EN-US_TASK_0172373120__cmdparmname1164163010214405">mac</span></strong> { <strong><span id="EN-US_TASK_0172373120__cmdparmname555317128214405">destination</span></strong> <i><span class="varname" id="EN-US_TASK_0172373120__varname908086025214405">destination-mac</span></i> [ <i><span class="varname" id="EN-US_TASK_0172373120__varname1075743274214405">end-destination-mac</span></i> ] | <strong><span id="EN-US_TASK_0172373120__cmdparmname321929081214405">source</span></strong> <i><span class="varname" id="EN-US_TASK_0172373120__varname2089406991214405">source-mac</span></i> [ <i><span class="varname" id="EN-US_TASK_0172373120__varname1355298169214405">end-source-mac</span></i> ] }</span></li><li id="EN-US_TASK_0172373120__li318359271214104"><span id="EN-US_TASK_0172373120__ph790061903214405"><a href="cmdqueryname=traffic-type"><b><span class="cmdname" id="EN-US_TASK_0172373120__cmdname679014320214405">traffic-type</span></b></a> <strong><span id="EN-US_TASK_0172373120__cmdparmname82981762214405">ipv4</span></strong> { <strong><span id="EN-US_TASK_0172373120__cmdparmname26460359214405">destination</span></strong> <i><span class="varname" id="EN-US_TASK_0172373120__varname188100771214405">destination-ip</span></i> [ <i><span class="varname" id="EN-US_TASK_0172373120__varname1452964162214405">end-destination-ip</span></i> ] | <strong><span id="EN-US_TASK_0172373120__cmdparmname1644642735214405">source</span></strong> <i><span class="varname" id="EN-US_TASK_0172373120__varname1450401114214405">source-ip</span></i> [ <i><span class="varname" id="EN-US_TASK_0172373120__varname120270075214405">end-source-ip</span></i> ] }</span></li></ul>
</div>
<div class="note" id="EN-US_TASK_0172373120__note_1"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172373120__ln_3">Services may be forwarded based on the MAC or IP address or using MPLS based on the service type, such as Ethernet, IP, L2VPN, <span>L2VPN accessing L3VPN</span>, and L3VPN. When testing a service network, you must determine the specific service forwarding mode before configuring a traffic type for the service flow to be tested.</p>
<ul id="EN-US_TASK_0172373120__ul_5301"><li id="EN-US_TASK_0172373120__li621618887214104">For Ethernet Layer 2 switching and L2VPN services, a MAC address must be specified, and an IP address is optional.</li><li id="EN-US_TASK_0172373120__li846437018214104">For IP routing and L3VPN services, an IP address and a MAC address must be specified. If no IP address or MAC address is specified, the reflector will reflect all the traffic, affecting other service functions.</li><li id="EN-US_TASK_0172373120__li1511169509214104">For L2VPN accessing L3VPN, both MAC and IP addresses must be specified.</li></ul>
</div></div>
</li><li>Configure the following parameters as needed:<ul><li>In the NQA test flow view, run the <a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i> [ <i><span class="varname">end-vlan-vid</span></i> ] command to specify a single VLAN ID for Ethernet packets.</li><li>In the NQA test flow view, run the <a href="cmdqueryname=pe-vid"><b><span class="cmdname">pe-vid</span></b></a> <i><span class="varname">pe-vid</span></i> <strong><span>ce-vid</span></strong> <i><span class="varname">ce-vid</span></i> [ <i><span class="varname">ce-vid-end</span></i> ] command to specify double VLAN IDs for Ethernet packets.</li><li>Run the <a href="cmdqueryname=udp+destination-port"><b><span class="cmdname">udp destination-port</span></b></a> <i><span class="varname">destination-port</span></i> [ <i><span class="varname">end-destination-port</span></i> ] command to specify a destination UDP port number or range.</li><li>Run the <a href="cmdqueryname=udp+source-port"><b><span class="cmdname">udp source-port</span></b></a> <i><span class="varname">source-port</span></i> [ <i><span class="varname">end-source-port</span></i> ] command to specify a source UDP port number or range.<div class="p"><div class="note" id="EN-US_TASK_0172373120__note_2"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0172373120__ul_5302"><li id="EN-US_TASK_0172373120__li109115325214104"><p id="EN-US_TASK_0172373120__ln_1"><a name="EN-US_TASK_0172373120__li109115325214104"></a><a name="li109115325214104"></a>For the same test flow, a value range can be specified for only one of the following items: MAC or IP address (configured using the <a href="cmdqueryname=traffic-type"><b><span class="cmdname" id="EN-US_TASK_0172373120__cmdname650775085214104">traffic-type</span></b></a> command), VLAN (configured using the <a href="cmdqueryname=vlan"><b><span class="cmdname" id="EN-US_TASK_0172373120__cmdname1670581506214104">vlan</span></b></a> or <a href="cmdqueryname=pe-vid"><b><span class="cmdname" id="EN-US_TASK_0172373120__cmdname202279719214104">pe-vid</span></b></a> command), and UDP port number (configured using the <a href="cmdqueryname=udp+destination-port"><b><span class="cmdname" id="EN-US_TASK_0172373120__cmdname533683583214104">udp destination-port</span></b></a> or <a href="cmdqueryname=udp+source-port"><b><span class="cmdname" id="EN-US_TASK_0172373120__cmdname1466548274214104">udp source-port</span></b></a>command). In addition, the difference between the start and end values cannot be more than 127, and the end value must be greater than the start value.</p>
</li><li id="EN-US_TASK_0172373120__li734883619214104"><p id="EN-US_TASK_0172373120__ln_2"><a name="EN-US_TASK_0172373120__li734883619214104"></a><a name="li734883619214104"></a>In the <a href="cmdqueryname=traffic-type"><b><span class="cmdname" id="EN-US_TASK_0172373120__cmdname363500367214405">traffic-type</span></b></a> command, the start MAC or IP address can have only one different octet from the end MAC or IP address. For example, if the start IP address is set to 1.1.1.1, the end IP address can only be set to an IP address on the network segment 1.1.1.0. In addition, the difference between the start and end values cannot be more than 127, and the end value must be greater than the start value.</p>
</li></ul>
</div></div>
</div>
</li></ul>
</li></ol>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=nqa+reflector"><b><span class="cmdname">nqa reflector</span></b></a><strong> </strong><i><span class="varname">reflector-id</span></i><strong> </strong><strong><span>interface</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i><em> </em><i><span class="varname">interface-number</span></i> } [ [ [ <strong><span>test-flow</span></strong> { <i><span class="varname">testFlowId</span></i> } &amp;&lt;1-16&gt; ] | [ [ <strong><span>ipv4</span></strong><em> </em><i><span class="varname">ip-address</span></i> | <strong><span>simulate-ipipv4</span></strong><em> </em><i><span class="varname">ip-address2</span></i> | <strong><span>mac</span></strong><em> </em><i><span class="varname">mac-address</span></i> ] [ <strong><span>pe-vid</span></strong><em> </em><i><span class="varname">pe-vid</span></i><strong> </strong><strong><span>ce-vid</span></strong><em> </em><i><span class="varname">ce-vid</span></i> | <strong><span>vlan</span></strong><em> </em><i><span class="varname">vlan-id</span></i> ] [ <strong><span>source-port</span></strong><em> </em><i><span class="varname">source-port</span></i> ] [ <strong><span>destination-port</span></strong><em> </em><i><span class="varname">destination-port</span></i> ] ] ] | <strong><span>exclusive</span></strong> ] [ <strong><span>exchange-port</span></strong> ] [ <strong><span>agetime</span></strong><em> </em><i><span class="varname">agetime</span></i> | <strong><span>endtime</span></strong> { <i><span class="varname">endtime</span></i> | <i><span class="varname">enddateendtime</span></i> } ]</span><p><p>A reflector is specified.</p>
</p><p><p>If the <strong><span>test-flow</span></strong> <i><span class="varname">flow-id</span></i> &amp; &lt;1-16&gt; parameter is configured, the reflector reflects traffic based on a specified flow. Otherwise, the reflector reflects all traffic that its interface receives. The <strong><span>agetime</span></strong> <i><span class="varname">age-time</span></i> parameter is optional, and the default value is 14400s.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nqa_cfg_0052.html">Configuring a Y.1564 Ethernet Service Activation Test
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nqa_cfg_0054.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>