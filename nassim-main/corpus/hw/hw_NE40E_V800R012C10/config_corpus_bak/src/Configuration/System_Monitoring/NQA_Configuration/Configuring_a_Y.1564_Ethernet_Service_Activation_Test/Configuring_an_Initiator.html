
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring an Initiator">
<meta name="abstract" content="This section describes how to configure an initiator that sends simulated service traffic. You can set initiator parameters based on usage scenarios and test indicator types.">
<meta name="description" content="This section describes how to configure an initiator that sends simulated service traffic. You can set initiator parameters based on usage scenarios and test indicator types.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nqa_cfg_0052.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nqa_cfg_0053.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nqa_cfg_0055.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,network-monitor_vrp,w00556928,c00511010,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitor">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitor">
<meta name="featurename" content="NQA">
<meta name="featuretype" content="System Monitor">
<meta name="OWNER" content="c00511010">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="c00511010">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172373121">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring an Initiator</title>
</head>
<body><a name="EN-US_TASK_0172373121"></a><a name="EN-US_TASK_0172373121"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring an Initiator</h1>
<div class="taskbody"><p>This section describes how to configure an initiator that sends simulated service traffic. You can set initiator parameters based on usage scenarios and test indicator types.</p>
<div class="context"><a name="EN-US_TASK_0172373121__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Devices performing an Ethernet service activation test play two roles: initiator and reflector. An initiator sends simulated service traffic to a reflector, and the reflector reflects the service traffic.</p>
<p>The process of configuring an initiator is as follows:</p>
<ol><li><p>Configure a test flow.</p>
</li><li><p>Configure a test instance.</p>
</li></ol>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172373121__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=nqa+test-flow"><b><span class="cmdname">nqa test-flow</span></b></a> <i><span class="varname">flow-id</span></i></span><p><p>A test flow is configured, and the NQA test flow view is displayed.</p>
</p></li><li><span>Specify service flow characteristics.</span><p><ol type="a"><li><div class="p" id="EN-US_TASK_0172373121__en-us_task_0172373120_p1537674358214104">Run either of the following commands to configure a traffic type and specify a MAC/IP address (or range) for test packets:<ul id="EN-US_TASK_0172373121__en-us_task_0172373120_ul_5303"><li id="EN-US_TASK_0172373121__en-us_task_0172373120_li326428655214104"><span id="EN-US_TASK_0172373121__en-us_task_0172373120_ph1624891229214405"><a href="cmdqueryname=traffic-type"><b><span class="cmdname" id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdname2144830551214405">traffic-type</span></b></a> <strong><span id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdparmname1164163010214405">mac</span></strong> { <strong><span id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdparmname555317128214405">destination</span></strong> <i><span class="varname" id="EN-US_TASK_0172373121__en-us_task_0172373120_varname908086025214405">destination-mac</span></i> [ <i><span class="varname" id="EN-US_TASK_0172373121__en-us_task_0172373120_varname1075743274214405">end-destination-mac</span></i> ] | <strong><span id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdparmname321929081214405">source</span></strong> <i><span class="varname" id="EN-US_TASK_0172373121__en-us_task_0172373120_varname2089406991214405">source-mac</span></i> [ <i><span class="varname" id="EN-US_TASK_0172373121__en-us_task_0172373120_varname1355298169214405">end-source-mac</span></i> ] }</span></li><li id="EN-US_TASK_0172373121__en-us_task_0172373120_li318359271214104"><span id="EN-US_TASK_0172373121__en-us_task_0172373120_ph790061903214405"><a href="cmdqueryname=traffic-type"><b><span class="cmdname" id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdname679014320214405">traffic-type</span></b></a> <strong><span id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdparmname82981762214405">ipv4</span></strong> { <strong><span id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdparmname26460359214405">destination</span></strong> <i><span class="varname" id="EN-US_TASK_0172373121__en-us_task_0172373120_varname188100771214405">destination-ip</span></i> [ <i><span class="varname" id="EN-US_TASK_0172373121__en-us_task_0172373120_varname1452964162214405">end-destination-ip</span></i> ] | <strong><span id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdparmname1644642735214405">source</span></strong> <i><span class="varname" id="EN-US_TASK_0172373121__en-us_task_0172373120_varname1450401114214405">source-ip</span></i> [ <i><span class="varname" id="EN-US_TASK_0172373121__en-us_task_0172373120_varname120270075214405">end-source-ip</span></i> ] }</span></li></ul>
</div>
<div class="note" id="EN-US_TASK_0172373121__en-us_task_0172373120_note_1"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172373121__en-us_task_0172373120_ln_3">Services may be forwarded based on the MAC or IP address or using MPLS based on the service type, such as Ethernet, IP, L2VPN, <span>L2VPN accessing L3VPN</span>, and L3VPN. When testing a service network, you must determine the specific service forwarding mode before configuring a traffic type for the service flow to be tested.</p>
<ul id="EN-US_TASK_0172373121__en-us_task_0172373120_ul_5301"><li id="EN-US_TASK_0172373121__en-us_task_0172373120_li621618887214104">For Ethernet Layer 2 switching and L2VPN services, a MAC address must be specified, and an IP address is optional.</li><li id="EN-US_TASK_0172373121__en-us_task_0172373120_li846437018214104">For IP routing and L3VPN services, an IP address and a MAC address must be specified. If no IP address or MAC address is specified, the reflector will reflect all the traffic, affecting other service functions.</li><li id="EN-US_TASK_0172373121__en-us_task_0172373120_li1511169509214104">For L2VPN accessing L3VPN, both MAC and IP addresses must be specified.</li></ul>
</div></div>
</li><li>Configure the following parameters as needed:<ul><li>In the NQA test flow view, run the <a href="cmdqueryname=vlan"><b><span class="cmdname">vlan</span></b></a> <i><span class="varname">vlan-id</span></i> [ <i><span class="varname">end-vlan-vid</span></i> ] command to specify a single VLAN ID for Ethernet packets.</li><li>In the NQA test flow view, run the <a href="cmdqueryname=pe-vid"><b><span class="cmdname">pe-vid</span></b></a> <i><span class="varname">pe-vid</span></i> <strong><span>ce-vid</span></strong> <i><span class="varname">ce-vid</span></i> [ <i><span class="varname">ce-vid-end</span></i> ] command to specify double VLAN IDs for Ethernet packets.</li><li>Run the <a href="cmdqueryname=udp+destination-port"><b><span class="cmdname">udp destination-port</span></b></a> <i><span class="varname">destination-port</span></i> [ <i><span class="varname">end-destination-port</span></i> ] command to configure a destination UDP port number or range.</li><li>Run the <a href="cmdqueryname=udp+source-port"><b><span class="cmdname">udp source-port</span></b></a> <i><span class="varname">source-port</span></i> [ <i><span class="varname">end-source-port</span></i> ] command to configure a source UDP port number or range.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TASK_0172373121__en-us_task_0172373120_ul_5302"><li id="EN-US_TASK_0172373121__en-us_task_0172373120_li109115325214104"><p id="EN-US_TASK_0172373121__en-us_task_0172373120_ln_1"><a name="EN-US_TASK_0172373121__en-us_task_0172373120_li109115325214104"></a><a name="en-us_task_0172373120_li109115325214104"></a>For the same test flow, a value range can be specified for only one of the following items: MAC or IP address (configured using the <a href="cmdqueryname=traffic-type"><b><span class="cmdname" id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdname650775085214104">traffic-type</span></b></a> command), VLAN (configured using the <a href="cmdqueryname=vlan"><b><span class="cmdname" id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdname1670581506214104">vlan</span></b></a> or <a href="cmdqueryname=pe-vid"><b><span class="cmdname" id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdname202279719214104">pe-vid</span></b></a> command), and UDP port number (configured using the <a href="cmdqueryname=udp+destination-port"><b><span class="cmdname" id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdname533683583214104">udp destination-port</span></b></a> or <a href="cmdqueryname=udp+source-port"><b><span class="cmdname" id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdname1466548274214104">udp source-port</span></b></a>command). In addition, the difference between the start and end values cannot be more than 127, and the end value must be greater than the start value.</p>
</li><li id="EN-US_TASK_0172373121__en-us_task_0172373120_li734883619214104"><p id="EN-US_TASK_0172373121__en-us_task_0172373120_ln_2"><a name="EN-US_TASK_0172373121__en-us_task_0172373120_li734883619214104"></a><a name="en-us_task_0172373120_li734883619214104"></a>In the <a href="cmdqueryname=traffic-type"><b><span class="cmdname" id="EN-US_TASK_0172373121__en-us_task_0172373120_cmdname363500367214405">traffic-type</span></b></a> command, the start MAC or IP address can have only one different octet from the end MAC or IP address. For example, if the start IP address is set to 1.1.1.1, the end IP address can only be set to an IP address on the network segment 1.1.1.0. In addition, the difference between the start and end values cannot be more than 127, and the end value must be greater than the start value.</p>
</li></ul>
</div></div>
</li></ol>
</p></li><li><span>Run <a href="cmdqueryname=bandwidth+cir"><b><span class="cmdname">bandwidth cir</span></b></a> <i><span class="varname">cir-value</span></i> [ <strong><span>eir</span></strong> <i><span class="varname">eir-value</span></i> ]</span><p><p>A bandwidth profile is configured for the NQA test flow, including service parameters such as the CIR.</p>
</p><p><p>The default excess information rate (EIR) is 0 kbit/s. If the <strong><span>eir</span></strong><i><span class="varname"> eir-value</span></i> parameter is not configured, the EIR is not tested</p>
</p></li><li><span>Run <a href="cmdqueryname=sac"><b><span class="cmdname">sac</span></b></a> <strong><span>flr</span></strong> <i><span class="varname">flr-value</span></i> <strong><span>ftd</span></strong> <i><span class="varname">ftd-value</span></i> <strong><span>fdv</span></strong> <i><span class="varname">fdv-value</span></i></span><p><p>The frame loss ratio (FLR) is specified, expressed in 1/100000, the frame transfer delay (FTD) is specified, expressed in &micro;s, and the frame delay variation (FDV) is specified, expressed in &micro;s.</p>
</p></li><li><span>Enable the simple CIR test, enable traffic policing test, configure the color mode, and configure a test flow description as needed:</span><p><ol type="a"><li><p>Run the <a href="cmdqueryname=cir+simple-test+enable"><b><span class="cmdname">cir simple-test enable</span></b></a> command to enable the simple CIR test.</p>
</li><li><p>Run the <a href="cmdqueryname=traffic-policing+test+enable"><b><span class="cmdname">traffic-policing test enable</span></b></a> command to enable the traffic policing test.</p>
</li><li><p>Run the <a href="cmdqueryname=color-mode"><b><span class="cmdname">color-mode</span></b></a> { <strong><span>8021p</span></strong> <strong><span>green</span></strong> <i><span class="varname">begin-8021p-value</span></i> [ <i><span class="varname">end-8021p-value</span></i> ] <strong><span>yellow</span></strong> <i><span class="varname">begin-8021p-value</span></i> [ <i><span class="varname">end-8021p-value</span></i> ] | <strong><span>dscp</span></strong> <strong><span>green</span></strong> <i><span class="varname">begin-dscp-value</span></i> [ <i><span class="varname">end-dscp-value</span></i> ] <strong><span>yellow</span></strong> <i><span class="varname">begin-dscp-value</span></i> [ <i><span class="varname">end-dscp-value</span></i> ]}<sup>*</sup> command to enable the color mode and configure the mapping between packet priorities and colors.</p>
</li><li><p>Run the <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description</span></i> command to configure a description for the test flow.</p>
</li></ol>
</p></li><li><span>Configure an Ethernet service activation test.</span><ol type="a"><li><span>Run the <a href="cmdqueryname=nqa"><b><span class="cmdname">nqa</span></b></a> <strong><span>test-instance</span></strong> <i><span class="varname">admin-name test-name</span></i> command to create an NQA test instance and enter its view.</span></li><li><span>Run the <a href="cmdqueryname=test-type"><b><span class="cmdname">test-type</span></b></a> <strong><span>ethernet-service</span></strong> command to set the test instance type to Ethernet service activation.</span></li><li><span>Run the <a href="cmdqueryname=test-flow"><b><span class="cmdname">test-flow</span></b></a> <i><span class="varname">flow-id</span></i> &lt;1-16&gt; command to configure a referenced test flow. Multiple test flows can be configured.</span></li><li><span>Run the <a href="cmdqueryname=forwarding-simulation+inbound-interface"><b><span class="cmdname">forwarding-simulation inbound-interface</span></b></a> { <em><i><span class="varname">ifName</span></i></em> | <em>i<i><span class="varname">fType</span></i></em><em> <i><span class="varname">ifNum</span></i></em> } command to configure a simulated inbound interface.</span></li><li><span>(Optional) Run the <a href="cmdqueryname=packet-size"><b><span class="cmdname">packet-size</span></b></a> <i><span class="varname">packet-size</span></i> &lt;1-10&gt; command to configure one or multiple sizes for test packets. </span></li><li><span>(Optional) Run the <a href="cmdqueryname=duration"><b><span class="cmdname">duration</span></b></a> { <strong><span>configuration-test</span></strong> <i><span class="varname">configuration-test-time</span></i> | <strong><span>performance-test</span></strong> <i><span class="varname">performance-test-time</span></i> } command to set the durations of configuration and performance tests.</span></li><li><span>Run the <a href="cmdqueryname=start"><b><span class="cmdname">start</span></b></a> <strong><span>now</span></strong> command to start the test.</span></li></ol>
</li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nqa_cfg_0052.html">Configuring a Y.1564 Ethernet Service Activation Test
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nqa_cfg_0053.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nqa_cfg_0055.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>