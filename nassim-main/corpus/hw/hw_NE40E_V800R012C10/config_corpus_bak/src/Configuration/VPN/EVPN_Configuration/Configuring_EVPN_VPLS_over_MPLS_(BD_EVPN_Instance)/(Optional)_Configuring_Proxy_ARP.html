
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Proxy ARP">
<meta name="abstract" content="When users communicate with each other for the first time, they send ARP request packets, which are broadcast on the Layer 2 network. To reduce the number of broadcast ARP packets, configure proxy ARP.">
<meta name="description" content="When users communicate with each other for the first time, they send ARP request packets, which are broadcast on the Layer 2 network. To reduce the number of broadcast ARP packets, configure proxy ARP.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0065.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0007bd.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0018bd.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370460">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring Proxy ARP</title>
</head>
<body><a name="EN-US_TASK_0172370460"></a><a name="EN-US_TASK_0172370460"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring Proxy ARP</h1>
<div class="taskbody"><p>When users communicate with each other for the first time, they send ARP request packets, which are broadcast on the Layer 2 network. To reduce the number of broadcast ARP packets, configure proxy ARP.</p>
<div class="context"><a name="EN-US_TASK_0172370460__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Upon receipt of an ARP request packet, a device broadcasts the packet in the local BD. If the device receives a large number of ARP request packets within a certain period of time and broadcasts the packets, these packets consume many EVPN MPLS network resources, causing network congestion. As a result, network performance deteriorates, affecting user services.</p>
<p>To resolve this problem, configure proxy ARP on the device. Proxy ARP adheres to the following basic rules: The device listens to received ARP packets and generates ARP snooping entries to record source user information, including the source IP and MAC addresses, and inbound interfaces of the packets. After receiving an ARP request packet, the device preferentially responds to the request based on the information in the ARP snooping entry.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370460__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname">l2vpn-family evpn</span></b></a></span><p><p>The BGP EVPN address family view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer+advertise"><b><span class="cmdname">peer</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <i><span class="varname">group-name</span></i> } <strong><span>advertise</span></strong> <strong><span>arp</span></strong></span><p><p>ARP route advertisement is configured.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the BGP view.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=arp+host+ip-conflict-check"><b><span class="cmdname">arp host ip-conflict-check</span></b></a> <strong><span>period</span></strong> <i><span class="varname">period-value</span></i> <strong><span>retry-times</span></strong> <i><span class="varname">retry-times-value</span></i></span><p><p>The host IP address conflict check options are configured.</p>
</p></li><li><span>Run <a href="cmdqueryname=bridge-domain"><b><span class="cmdname">bridge-domain</span></b></a> <i><span class="varname">bd-id</span></i></span><p><p>The BD view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=arp+l2-proxy+enable"><b><span class="cmdname">arp l2-proxy enable</span></b></a></span><p><p>Proxy ARP is enabled.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=arp+l2-proxy+timeout"><b><span class="cmdname">arp l2-proxy timeout</span></b></a> <i><span class="varname">expire-time</span></i></span><p><p>An aging time is configured for ARP snooping entries.</p>
</p><p><p>Each ARP snooping entry has a lifecycle, called aging time. An ARP snooping entry will be deleted if it is not updated before its aging time expires. If the device stores a large number of ARP snooping entries, the CPU resources are wasted, and ARP snooping entries for new users cannot be generated. To resolve this problem, perform this step to set an aging time, which allows ARP snooping entries to be updated regularly.</p>
</p></li><li><span>Perform the following operations as required:</span><p><ul><li><p>If the device needs to carry Layer 2 services, run the <a href="cmdqueryname=arp+collect+host+enable"><b><span class="cmdname">arp collect host enable</span></b></a> command to enable EVPN MPLS to collect host information per BD.</p>
</li><li><p>If the device needs to carry Layer 3 services or carry both Layer 2 and Layer 3 services:</p>
<ol type="a"><li><p>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</p>
</li><li><p>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <strong><span>vbdif</span></strong> <i><span class="varname">bd-id</span></i> command to create a VBDIF interface and enter its view.</p>
</li><li><p>Run the <a href="cmdqueryname=arp+collect+host+enable"><b><span class="cmdname">arp collect host enable</span></b></a> command to enable EVPN MPLS to collect host information per VBDIF interface.</p>
</li></ol>
</li></ul>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0065.html">Configuring EVPN VPLS over MPLS (BD EVPN Instance)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0007bd.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0018bd.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>