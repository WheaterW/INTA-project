
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring PBB VPLS">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/spec/PBB_VPLS_limitation.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0011.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0006.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,pbbvpls,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="PBB VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="PBB VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="PBB VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370781">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring PBB VPLS</title>
</head>
<body><a name="EN-US_TASK_0172370781"></a><a name="EN-US_TASK_0172370781"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring PBB VPLS</h1>
<div class="taskbody"><p></p>
<div class="context"><a name="EN-US_TASK_0172370781__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>Typical scenarios of PBB VPLS are classified into the following types:</p>
<ul><li><p>Fully meshed PBB VPLS</p>
<p><a href="#EN-US_TASK_0172370781__fig_dc_vrp_pbb-vpls_cfg_000401">Figure 1</a> shows a typical HVPLS network with UPEs, SPEs, and NPEs. Basic PBB configurations need to be performed on this network to replace QinQ with MAC-in-MAC. This helps reduce the number of MAC address entries that SPEs must learn in a VPLS service, improving network scalability.</p>
<div class="p"><div class="fignone" id="EN-US_TASK_0172370781__fig_dc_vrp_pbb-vpls_cfg_000401"><a name="EN-US_TASK_0172370781__fig_dc_vrp_pbb-vpls_cfg_000401"></a><a name="fig_dc_vrp_pbb-vpls_cfg_000401"></a><span class="figcap"><b>Figure 1 </b>Network diagram of fully meshed PBB VPLS</span><br><span><img class="vsd" src="images/fig_dc_vrp_pbb-vpls_cfg_000401.png" width="NaN" height="NaN"></span><br></div>
</div>
</li><li><p>Network diagram of PBB VPLS with an E-Trunk determining the master/backup status of NPEs</p>
<p>On the network shown in <a href="#EN-US_TASK_0172370781__fig_dc_vrp_pbb-vpls_cfg_000402">Figure 2</a>, UPEs are dual-homed to SPEs, and SPEs are in turn dual-homed to NPEs. An E-Trunk determines the master/backup status of NPEs. If SPE1 directly connects to CE3, PBB VPLS can then enable CE1 to communicate with CE2 and CE3.</p>
<div class="fignone" id="EN-US_TASK_0172370781__fig_dc_vrp_pbb-vpls_cfg_000402"><a name="EN-US_TASK_0172370781__fig_dc_vrp_pbb-vpls_cfg_000402"></a><a name="fig_dc_vrp_pbb-vpls_cfg_000402"></a><span class="figcap"><b>Figure 2 </b>Network diagram of a PBB VPLS residential service with an E-Trunk determining the master/backup status of NPEs</span><br><span><img class="vsd" src="images/fig_dc_vrp_pbb-vpls_cfg_000402.png" width="NaN" height="NaN"></span><br></div>
<div class="fignone"><span class="figcap"><b>Figure 3 </b>Network diagram of a PBB VPLS enterprise service with an E-Trunk determining the master/backup status of NPEs</span><br><span><img class="vsd" src="images/fig_dc_vrp_pbb-vpls_cfg_000403.png" width="NaN" height="NaN"></span><br></div>
</li><li><p>Local PBB VPLS connection</p>
<p>On the network shown in <a href="#EN-US_TASK_0172370781__fig_fig_dc_vrp_pbb-vpls_cfg_000404">Figure 4</a>, CE1 is dual-homed to UPE1 and UPE2, and an E-Trunk determines the master/backup status of the UPEs. Normally, UPE1 serves the master device according to the E-Trunk negotiation result, and CE1 communicates with CE2 through UPE1 over a remote PBB VPLS connection. If the link between CE1 and UPE1 fails or UPE1 fails, CE1 communicates with CE2 through UPE2 over a local connection.</p>
<p>During the configuration of a local connection on UPE2, two I-VSIs are bound to the same B-VSI and assigned the same I-tag. One I-VSI's B-DMAC address is the same as the other I-VSI's B-SMAC address.</p>
<div class="fignone" id="EN-US_TASK_0172370781__fig_fig_dc_vrp_pbb-vpls_cfg_000404"><a name="EN-US_TASK_0172370781__fig_fig_dc_vrp_pbb-vpls_cfg_000404"></a><a name="fig_fig_dc_vrp_pbb-vpls_cfg_000404"></a><span class="figcap"><b>Figure 4 </b>Network diagram of a local PBB VPLS connection</span><br><span><img class="vsd" src="images/fig_dc_vrp_pbb-vpls_cfg_000404.png" width="NaN" height="NaN"></span><br></div>
</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0172370781__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring PBB VPLS, complete the following tasks:</p>
<ul><li>Configure LSR IDs for PEs and Ps, and configure an IGP for PEs and Ps to have reachable routes to each other and learn LSR IDs from each other.</li><li>Configure MPLS and MPLS LDP, and set up LDP sessions.</li><li>Enable MPLS L2VPN on PEs.</li></ul>
</div></div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0005.html">Enabling I-VSI and B-VSI Functions</a>
</dt>
<dd>
Enabling I-VSI and B-VSI functions is the prerequisite for configuring PBB VPLS.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0006.html">Configuring an I-VSI and a B-VSI</a>
</dt>
<dd>
An I-VSI can be bound to a B-VSI only after their B-MAC addresses and the I-VSI's I-tag are configured.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0007.html">Binding an I-VSI to a B-VSI</a>
</dt>
<dd>
A CE can access a PW only after the corresponding I-VSI is bound to a B-VSI.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0008.html">Binding an AC Interface to an I-VSI and Specifying a VPLS Peer for a B-VSI</a>
</dt>
<dd>
In PBB VPLS, an AC interface must be bound to each I-VSI and a VPLS peer must be specified for each B-VSI. </dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0009.html">(Optional) Enabling CFM</a>
</dt>
<dd>
To suppress unidirectional multicast and unknown unicast packets, enable CFM for PBB VPLS. </dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0010.html">Verifying the PBB VPLS Configuration</a>
</dt>
<dd>
After configuring PBB VPLS, check the configurations, including the B-SMAC address, B-DMAC address, and VSI information.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0001.html">PBB VPLS Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/spec/PBB_VPLS_limitation.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_pbb-vpls_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>