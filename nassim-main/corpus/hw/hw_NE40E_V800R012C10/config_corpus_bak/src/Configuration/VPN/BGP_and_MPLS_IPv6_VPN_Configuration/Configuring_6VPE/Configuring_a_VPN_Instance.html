
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a VPN Instance">
<meta name="abstract" content="A VPN instance of the IPv6 address family can be configured to manage IPv6 VPN routes.">
<meta name="description" content="A VPN instance of the IPv6 address family can be configured to manage IPv6 VPN routes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2112.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2120.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00847023">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369598">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a VPN Instance</title>
</head>
<body><a name="EN-US_TASK_0172369598"></a><a name="EN-US_TASK_0172369598"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a VPN Instance</h1>
<div class="taskbody"><p>A VPN instance of the IPv6 address family can be configured to manage IPv6 VPN routes.</p>
<div class="context"><a name="EN-US_TASK_0172369598__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>An instance is created to comprise the VPN forwarding information for each VPN in a BGP/MPLS IPv6 VPN. This instance is called a VPN instance or a VPN routing and forwarding (VRF) table. In related standards (BGP/MPLS IP VPNs), the VPN instance is also called a per-site forwarding table. VPN instances must be created in all BGP/MPLS IPv6 VPN solutions.</p>
<p>In a 6VPE scenario, both IPv4 and IPv6 address families must be enabled in a VPN instance. The IPv4 routing table of the VPN instance manages routes used to establish VPN LDP LSPs, whereas the IPv6 routing table of the VPN instance manages received VPN IPv6 routes.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369598__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ip+vpn-instance"><b><span class="cmdname">ip vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span><p><p>A VPN instance is created, and its view is displayed.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>A VPN instance name is case sensitive. For example, "vpn1" and "VPN1" are different VPN instances.</p>
</div></div>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description-information</span></i></span></span><p><p>A description is configured for the VPN instance.</p>
<p>Similar to a host name or an interface description, the VPN instance description helps users memorize the VPN instance.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a></span></span><p><p>The IPv4 address family is enabled for the VPN instance, and the VPN instance IPv4 address family view is displayed.</p>
<p>Configurations in a VPN instance can be performed only after an address family is enabled for the VPN instance based on the advertised route and forwarding data type.</p>
</p></li><li><span>Run <a href="cmdqueryname=route-distinguisher"><b><span class="cmdname">route-distinguisher</span></b></a> <i><span class="varname">route-distinguisher</span></i></span><p><p>An RD is configured for the VPN instance IPv4 address family.</p>
</p><p><p>A VPN instance IPv4 address family takes effect only after being assigned an RD. The RDs of different VPN instance IPv4 address families on a PE must be different.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>If you configure an RD for the VPN instance IPv4 address family in the created VPN instance view, the VPN instance IPv4 address family is automatically enabled, and its view is automatically displayed.</p>
</li></ul>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=vpn-target"><b><span class="cmdname">vpn-target</span></b></a> <i><span class="varname">vpn-target</span></i> &amp;&lt;1-8&gt; [ <strong><span>both</span></strong> | <strong><span>export-extcommunity</span></strong> | <strong><span>import-extcommunity</span></strong> ]</span></span><p><p>One or multiple VPN targets are configured for the VPN instance IPv4 address family.</p>
<p>A VPN target is a BGP extended community attribute. It is used to control the acceptance and advertisement of VPN routing information. A maximum of eight VPN targets can be configured using the <strong>vpn-target</strong> command. If you want to configure multiple VPN targets in the VPN instance IPv4 address family view, run the <strong>vpn-target</strong> command multiple times.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Exit from the VPN instance IPv4 address family view.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ipv6-family"><b><span class="cmdname">ipv6-family</span></b></a></span></span><p><p>The IPv6 address family is enabled for the VPN instance, and the VPN instance IPv6 address family view is displayed.</p>
<p>VPN instances support both the IPv4 and IPv6 address families. Configurations in a VPN instance can be performed only after an address family is enabled for the VPN instance based on the advertised route and forwarding data type.</p>
</p></li><li><span>Run <a href="cmdqueryname=route-distinguisher"><b><span class="cmdname">route-distinguisher</span></b></a> <i><span class="varname">route-distinguisher</span></i></span><p><p>An RD is configured for the VPN instance IPv6 address family.</p>
</p><p><p>A VPN instance IPv6 address family takes effect only after having an RD configured. The RDs of different VPN instance IPv6 address families on a PE must be different.</p>
</p></li><li><span>Run <a href="cmdqueryname=vpn-target"><b><span class="cmdname">vpn-target</span></b></a> <i><span class="varname">vpn-target</span></i> &amp;&lt;1-8&gt; [ <strong><span>both</span></strong> | <strong><span>export-extcommunity</span></strong> | <strong><span>import-extcommunity</span></strong> ]</span><p><p>One or multiple VPN targets are configured for the VPN instance IPv6 address family.</p>
<p>A VPN target is a BGP extended community attribute. They are used to control the import and export of VPN-IPv6 routes. A maximum of eight VPN targets can be configured using the <strong>vpn-target</strong> command. If you want to configure more VPN targets in the VPN instance IPv6 address family view, run the <strong>vpn-target</strong> command more than once.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172369598__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Follow-up Procedure</h4>
<div class="p"><p>You can configure a route-policy in a VPN instance to implement functions, such as filtering routes and limiting the number of allowed routes. For configuration details, see <a href="dc_vrp_mpls-l3vpn-v4_cfg_0155.html">Configuring an IPv4 VPN Instance</a> and <a href="dc_vrp_mpls-l3vpn-v6_cfg_2058.html">Configuring an IPv6 VPN Instance</a>.</p>
</div></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2112.html">Configuring 6VPE
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2120.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>