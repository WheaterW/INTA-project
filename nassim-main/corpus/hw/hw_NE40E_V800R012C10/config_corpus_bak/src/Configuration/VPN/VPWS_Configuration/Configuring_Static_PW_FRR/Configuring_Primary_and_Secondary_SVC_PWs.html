
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Primary and Secondary SVC PWs">
<meta name="abstract" content="To ensure that a primary PW fault does not interrupt services in a static PW FRR scenario, you need to configure a secondary PW for the primary PW, so that traffic can be switched to the secondary PW for transmission.">
<meta name="description" content="To ensure that a primary PW fault does not interrupt services in a static PW FRR scenario, you need to configure a secondary PW for the primary PW, so that traffic can be switched to the secondary PW for transmission.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6048.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6050.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369859">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Primary and Secondary SVC PWs</title>
</head>
<body><a name="EN-US_TASK_0172369859"></a><a name="EN-US_TASK_0172369859"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Primary and Secondary SVC PWs</h1>
<div class="taskbody"><p>To ensure that a primary PW fault does not interrupt services in a static PW FRR scenario, you need to configure a secondary PW for the primary PW, so that traffic can be switched to the secondary PW for transmission.</p>
<div class="steps-unordered"><a name="EN-US_TASK_0172369859__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a pair of primary and secondary PWs on each PE.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+l2vpn"><b><span class="cmdname">mpls l2vpn</span></b></a></span><p><p>MPLS L2VPN is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>(Optional) Configure a PW template.</span><p><div class="p"><ol type="a"><li>Run the <a href="cmdqueryname=pw-template"><b><span class="cmdname">pw-template</span></b></a> <i><span class="varname">pw-template-name</span></i> command to create a PW template and enter its view.</li><li>Configure the attributes of the PW template. The following steps can be performed in any order. Determine which steps to perform based on your requirements.<ul><li>Run the <a href="cmdqueryname=peer-address"><b><span class="cmdname">peer-address</span></b></a> <i><span class="varname">ip-address</span></i> command to specify the IP address of the peer device for the PW.</li><li>Run the <a href="cmdqueryname=control-word"><b><span class="cmdname">control-word</span></b></a> command to enable the control word function.</li><li>Run the <a href="cmdqueryname=tnl-policy"><b><span class="cmdname">tnl-policy</span></b></a> <i><span class="varname">policy-name</span></i> command to specify the tunnel policy to be used by the PW.</li><li>Run the <a href="cmdqueryname=mtu"><b><span class="cmdname">mtu</span></b></a> <i><span class="varname">mtu-value</span></i> command to configure the MTU in the PW template.</li><li>Run the <a href="cmdqueryname=bfd-detect"><b><span class="cmdname">bfd-detect</span></b></a> [ <strong><span>detect-multiplier</span></strong> <i><span class="varname">multiplier</span></i> | <strong><span>min-rx-interval</span></strong> <i><span class="varname">rx-interval</span></i> | <strong><span>min-tx-interval</span></strong> <i><span class="varname">tx-interval</span></i> ] <sup>*</sup> [ <strong><span>track</span></strong> <strong><span>group</span></strong> <i><span class="varname">group-name</span></i> ] command to set BFD session detection parameters.</li></ul>
<ul><li>Run the <a href="cmdqueryname=jitter-buffer+depth"><b><span class="cmdname">jitter-buffer depth</span></b></a> <i><span class="varname">depth</span></i> command to configure the depth of the jitter buffer for the TDMoPSN application.</li><li>Run the <a href="cmdqueryname=idle-code"><b><span class="cmdname">idle-code</span></b></a> <i><span class="varname">idle-code-value</span></i> command to configure the idle code that is filled when a jitter buffer underflow occurs.</li><li>Run the <a href="cmdqueryname=tdm-encapsulation-number"><b><span class="cmdname">tdm-encapsulation-number</span></b></a> <i><span class="varname">number</span></i> command to specify the number of TDM frames encapsulated in a CESoPSN packet for the TDMoPSN application.</li></ul>
</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</li></ol>
</div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [ .<i><span class="varname">subinterface-number</span></i> ]</span><p><p>The AC interface view is displayed.</p>
</p></li><li class="substepexpand"><span>Configure the primary PW.</span><p><div class="p">Run either of the following commands to create a VPWS PW according to the interface type:<ul><li><p>Ethernet interface:</p>
<p><span><a href="cmdqueryname=mpls+static-l2vc"><b><span class="cmdname">mpls static-l2vc</span></b></a></span> { { <strong><span>destination</span></strong> <i><span class="varname">ip-address</span></i> | <strong><span>pw-template</span></strong> <i><span class="varname">pw-template-name</span></i> <i><span class="varname">vc-id</span></i> } <sup>*</sup> | <strong><span>destination</span></strong> <i><span class="varname">ip-address</span></i> [ <i><span class="varname">vc-id</span></i> ] } <strong><span>transmit-vpn-label</span></strong> <i><span class="varname">transmit-label-value </span></i><strong><span>receive-vpn-label</span></strong> <i><span class="varname">receive-label-value</span></i> [ <strong><span>tunnel-policy</span></strong> <i><span class="varname">tnl-policy-name</span></i><span> [ { <strong><span>endpoint</span></strong> <i><span class="varname">endpoint-address</span></i> | [ <strong><span>endpoint</span></strong> <i><span class="varname">endpoint4-address</span></i> ] } <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> ]</span> | <strong><span>access-port</span></strong> | [ <strong><span>control-word</span></strong> | <strong><span>no-control-word</span></strong> ] | [ <strong><span>raw</span></strong> | <strong><span>tagged</span></strong> ] ] <sup>*</sup></p>
</li><li><p>TDM interface:</p>
<p><span><a href="cmdqueryname=mpls+static-l2vc"><b><span class="cmdname">mpls static-l2vc</span></b></a></span> { { <strong><span>destination</span></strong> <i><span class="varname">ip-address</span></i> | <strong><span>pw-template</span></strong> <i><span class="varname">pw-template-name</span></i> <i><span class="varname">vc-id</span></i> } <sup>*</sup> | <strong><span>destination</span></strong> <i><span class="varname">ip-address</span></i> [ <i><span class="varname">vc-id</span></i> ] } <strong><span>transmit-vpn-label</span></strong> <i><span class="varname">transmit-label-value </span></i><strong><span>receive-vpn-label</span></strong> <i><span class="varname">receive-label-value</span></i> [ <strong><span>tunnel-policy</span></strong> <i><span class="varname">tnl-policy-name</span></i><span> [ <strong><span>endpoint</span></strong> <i><span class="varname">endpoint-address</span></i> <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> ]</span> | [ <strong><span>control-word</span></strong> | <strong><span>no-control-word</span></strong> ] | <strong><span>jitter-buffer</span></strong> <i><span class="varname">depth</span></i> | <strong><span>tdm-encapsulation</span></strong> <i><span class="varname">number</span></i> | <strong><span>tdm-sequence-number</span></strong><span> | <strong><span>idle-code</span></strong> <i><span class="varname">idle-code-value</span></i></span> | <strong><span>rtp-header</span></strong> ] <sup>*</sup></p>
</li></ul>
</div>
</p></li><li class="substepexpand"><span>Configure the secondary PW.</span><p><div class="p">Run either of the following commands to create a secondary VPWS PW according to the interface type:<ul><li><p>Ethernet interface:</p>
<p><span><a href="cmdqueryname=mpls+static-l2vc"><b><span class="cmdname">mpls static-l2vc</span></b></a></span> { { <strong><span>destination</span></strong> <i><span class="varname">ip-address</span></i> | <strong><span>pw-template</span></strong> <i><span class="varname">pw-template-name</span></i> <i><span class="varname">vc-id</span></i> } <sup>*</sup> | <strong><span>destination</span></strong> <i><span class="varname">ip-address</span></i> [ <i><span class="varname">vc-id</span></i> ] } <strong><span>transmit-vpn-label</span></strong> <i><span class="varname">transmit-label-value </span></i><strong><span>receive-vpn-label</span></strong> <i><span class="varname">receive-label-value</span></i> [ <strong><span>tunnel-policy</span></strong> <i><span class="varname">tnl-policy-name</span></i><span> [ { <strong><span>endpoint</span></strong> <i><span class="varname">endpoint-address</span></i> | [ <strong><span>endpoint</span></strong> <i><span class="varname">endpoint4-address</span></i> ] } <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> ]</span> | <strong><span>access-port</span></strong> | [ <strong><span>control-word</span></strong> | <strong><span>no-control-word</span></strong> ] | [ <strong><span>raw</span></strong> | <strong><span>tagged</span></strong> ] ] <sup>*</sup> <strong><span>secondary</span></strong></p>
</li><li><p>TDM interface:</p>
<p><span><a href="cmdqueryname=mpls+static-l2vc"><b><span class="cmdname">mpls static-l2vc</span></b></a></span> { { <strong><span>destination</span></strong> <i><span class="varname">ip-address</span></i> | <strong><span>pw-template</span></strong> <i><span class="varname">pw-template-name</span></i> <i><span class="varname">vc-id</span></i> } <sup>*</sup> | <strong><span>destination</span></strong> <i><span class="varname">ip-address</span></i> [ <i><span class="varname">vc-id</span></i> ] } <strong><span>transmit-vpn-label</span></strong> <i><span class="varname">transmit-label-value </span></i><strong><span>receive-vpn-label</span></strong> <i><span class="varname">receive-label-value</span></i> [ <strong><span>tunnel-policy</span></strong> <i><span class="varname">tnl-policy-name</span></i><span> [ <strong><span>endpoint</span></strong> <i><span class="varname">endpoint-address</span></i> <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> ]</span> | [ <strong><span>control-word</span></strong> | <strong><span>no-control-word</span></strong>] | <strong><span>jitter-buffer</span></strong> <i><span class="varname">depth</span></i> | <strong><span>tdm-encapsulation</span></strong> <i><span class="varname">number</span></i> | <strong><span>tdm-sequence-number</span></strong><span> | <strong><span>idle-code</span></strong> <i><span class="varname">idle-code-value</span></i></span> | <strong><span>rtp-header</span></strong> ] <sup>*</sup> <strong><span>secondary</span></strong></p>
</li></ul>
</div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+l2vpn+stream-dual-receiving"><b><span class="cmdname">mpls l2vpn stream-dual-receiving</span></b></a></span><p><p>The primary and secondary PWs are configured to both receive packets.</p>
</p><p><p>In static PW FRR scenarios, if you do not configure the primary and secondary PWs to both receive packets, long-lasting packet loss or even service interruption may occur after a traffic switchover.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure VPWS switching on each SPE.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+l2vpn"><b><span class="cmdname">mpls l2vpn</span></b></a></span><p><p>MPLS L2VPN is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+switch-l2vc"><b><span class="cmdname">mpls switch-l2vc</span></b></a> [ <strong><span>instance-name</span></strong> <i><span class="varname">instance-name</span></i> ] <i><span class="varname">ip-address vc-id</span></i> <strong><span>trans</span></strong> <i><span class="varname">trans-label</span></i> <strong><span>recv</span></strong> <i><span class="varname">received-label</span></i> [ <strong><span>tunnel-policy</span></strong> <i><span class="varname">policy-name</span></i><span> [ { <strong><span>endpoint</span></strong> <i><span class="varname">endpoint-address</span></i> | [ <strong><span>endpoint</span></strong> <i><span class="varname">endpoint4-address</span></i> ] } <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> ]</span> ] <strong><span>between</span></strong> <i><span class="varname">ip-address vc-id</span></i> <strong><span>trans</span></strong> <i><span class="varname">trans-label</span></i> <strong><span>recv</span></strong> <i><span class="varname">received-label</span></i> [ <strong><span>tunnel-policy</span></strong> <i><span class="varname">policy-name</span></i><span> [ { <strong><span>endpoint</span></strong> <i><span class="varname">sw-endpoint-address</span></i> | [ <strong><span>endpoint</span></strong> <i><span class="varname">sw-endpoint4-address</span></i> ] } <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> ]</span> ] <strong><span>encapsulation</span></strong> <i><span class="varname">encapsulation-type</span></i> [ <strong><span>control-word</span></strong> | <strong><span>no-control-word</span></strong> ]</span><p><p>A static MS-PW is configured.</p>
</p><p></p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6048.html">Configuring Static PW FRR
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6050.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>