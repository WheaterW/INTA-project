
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Enabling the Keepalive Function">
<meta name="abstract" content="The keepalive function of a GRE tunnel prevents a service module from selecting a GRE tunnel that is unreachable to the peer end, preventing data loss.">
<meta name="description" content="The keepalive function of a GRE tunnel prevents a service module from selecting a GRE tunnel that is unreachable to the peer end, preventing data loss.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_gre_cfg_2003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_gre_cfg_1001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_gre_cfg_2041.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,grevrp,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="GRE">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="GRE">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="GRE">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="GRE">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369086">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Enabling the Keepalive Function</title>
</head>
<body><a name="EN-US_TASK_0172369086"></a><a name="EN-US_TASK_0172369086"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Enabling the Keepalive Function</h1>
<div class="taskbody"><p>The keepalive function of a GRE tunnel prevents a service module from selecting a GRE tunnel that is unreachable to the peer end, preventing data loss.</p>
<div class="context"><a name="EN-US_TASK_0172369086__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>The keepalive function can be configured on one end of a GRE tunnel to test the GRE tunnel status. If the remote end is found unreachable, the tunnel is disconnected on time to avoid data black hole.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>Networking of a GRE tunnel that supports the keepalive function</span><br><span><img class="vsd" src="images/fig_dc_vrp_gre_cfg_200901.png"></span><br></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369086__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=interface+tunnel"><b><span class="cmdname">interface tunnel</span></b></a> <i><span class="varname">interface-number</span></i> command to enter the tunnel interface view.</span></li><li><span>Run the <a href="cmdqueryname=keepalive"><b><span class="cmdname">keepalive</span></b></a> [ <strong><span>period</span></strong> <i><span class="varname">period</span></i> [ <strong><span>retry-times</span></strong> <i><span class="varname">retry-times</span></i> ] ] command to enable the keepalive function for the GRE tunnel.</span><p><p>The keepalive function of a GRE tunnel is unidirectional. To apply the keepalive function in both directions, enable the keepalive function on both ends of the GRE tunnel. Whether the peer end supports the keepalive function does not affect the keepalive function of the local end. However, you are advised to enable the keepalive function on both ends of the tunnel.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before you configure a tunnel policy and set the VPN tunnel type to GRE, you must enable the keepalive function. After this function is enabled, the local end will not use a GRE tunnel with an unreachable remote end, preventing data loss. This is because:</p>
<ul><li><p>Before the keepalive function is enabled, the local tunnel interface may be up even if the remote end is unreachable.</p>
</li><li><p>After the keepalive function is enabled on the local end, if the local end does not receive any keepalive response packet from the peer end within the timeout period, the local tunnel interface is set to down. In this case, the local VPN does not select the unreachable GRE tunnel, preventing data loss.</p>
</li></ul>
</div></div>
</p></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_gre_cfg_2003.html">Configuring a GRE Tunnel
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_gre_cfg_1001.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_gre_cfg_2041.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>