
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Traditional BD VPLS and EVPN VPLS over SRv6 to Coexist">
<meta name="abstract" content="If both a traditional VPLS network and an EVPN VPLS over SRv6 network are deployed, you need to configure traditional VPLS and EVPN VPLS over SRv6 to coexist.">
<meta name="description" content="If both a traditional VPLS network and an EVPN VPLS over SRv6 network are deployed, you need to configure traditional VPLS and EVPN VPLS over SRv6 to coexist.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0015.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="p00915595,w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0263581209">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Traditional BD VPLS and EVPN VPLS over SRv6 to Coexist</title>
</head>
<body><a name="EN-US_TASK_0263581209"></a><a name="EN-US_TASK_0263581209"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Traditional BD VPLS and EVPN VPLS over SRv6 to Coexist</h1>
<div class="taskbody"><p>If both a traditional VPLS network and an EVPN VPLS over SRv6 network are deployed, you need to configure traditional VPLS and EVPN VPLS over SRv6 to coexist.</p>
<div class="context"><a name="EN-US_TASK_0263581209__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Traditional L2VPNs use VPLS over MPLS for Layer 2 communication. Compared with VPLS, EVPN â a next-generation VPN technology â has many advantages, such as support for multi-homing all-active networking and control plane-based MAC address learning. Particularly, EVPN over SRv6 can accommodate the growth of IPv6 networks and 5G services. Therefore, VPLS over MPLS is gradually evolving to EVPN over SRv6. However, there are still a large number of existing VPLS services on the live network. If EVPN VPLS over SRv6 services are added, configure the co-existence of traditional VPLS and EVPN VPLS over SRv6 to ensure that both services run properly.</p>
<p>On the network shown in <a href="#EN-US_TASK_0263581209__fig579251613147">Figure 1</a>, VPLS over MPLS is deployed on PE3, and both VPLS over MPLS and EVPN VPLS over SRv6 are deployed on PE1, PE2, and PE4. In this case, you need to configure VPLS and EVPN VPLS over SRv6 to coexist on PE1, PE2, and PE4.</p>
<div class="fignone" id="EN-US_TASK_0263581209__fig579251613147"><a name="EN-US_TASK_0263581209__fig579251613147"></a><a name="fig579251613147"></a><span class="figcap"><b>Figure 1 </b>Configuring the co-existence of traditional VPLS and EVPN VPLS over SRv6</span><br><span><img class="vsd" src="figure/en-us_image_0000001232689697.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0263581209__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring the co-existence of traditional VPLS and EVPN VPLS over SRv6, complete the following tasks:</p>
<ul><li><p>Complete the task of <a href="dc_vrp_vpls_cfg_5003.html">Configuring LDP VPLS</a> or <a href="dc_vrp_vpls_cfg_6005.html">Configuring BGP VPLS</a> between PE3 and PE1, between PE3 and PE2, and between PE3 and PE4.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Create a BD VSI using the <a href="cmdqueryname=vsi+bd-mode"><b><span class="cmdname">vsi bd-mode</span></b></a> command.</p>
</div></div>
</li><li><p>Complete the task of <a href="dc_vrp_srv6_cfg_all_0023.html">Configuring EVPN VPLS over IS-IS SRv6 BE</a> or <a href="dc_vrp_cfg_evpn-vpls_over_srv6-te_policy.html">Configuring EVPN VPLS over SRv6 TE Policy</a> between PE1, PE2, and PE4.</p>
</li></ul>
<p>Perform the following steps on PE1, PE2, and PE4.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0263581209__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bridge-domain"><b><span class="cmdname">bridge-domain</span></b></a> <i><span class="varname">bd-id</span></i></span><p><p>The BD view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=l2+binding"><b><span class="cmdname">l2 binding</span></b></a> <strong><span>vsi</span></strong> <i><span class="varname">vsi-name</span></i> [ <strong><span>pw-tag</span></strong> <i><span class="varname">pw-tag-value</span></i> ]</span><p><p>The BD is bound to the VSI.</p>
</p></li><li><span>Run <a href="cmdqueryname=evpn+binding+vpn-instance"><b><span class="cmdname">evpn binding vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span><p><p>The BD is bound to the EVPN instance.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0263581209__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li><p>Run the <a href="cmdqueryname=display+bgp+evpn"><b><span class="cmdname">display bgp evpn</span></b></a> { <strong><span>all</span></strong> | <strong><span>route-distinguisher</span></strong> <i><span class="varname">route-distinguisher</span></i> } <strong><span>routing-table</span></strong> { <strong><span>ad-route</span></strong> | <strong><span>es-route</span></strong> | <strong><span>inclusive-route</span></strong> | <strong><span>mac-route</span></strong> | <strong><span>prefix-route</span></strong> } <i><span class="varname">prefix</span></i> command on PE1, PE2, and PE4 to check detailed BGP EVPN route information, including PW information.</p>
</li><li>Run the <a href="cmdqueryname=display+bgp+evpn"><b><span class="cmdname">display bgp evpn</span></b></a> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>routing-table</span></strong> { <strong><span>ad-route</span></strong> | <strong><span>es-route</span></strong> | <strong><span>inclusive-route</span></strong> | <strong><span>mac-route</span></strong> } <i><span class="varname">prefix</span></i> command on PE1, PE2, and PE4 to check the EVPN route information (including PW information) of the specified EVPN instance.</li><li><p>In a scenario where a CE is dual-homed to PEs, run the <a href="cmdqueryname=display+evpn+vpn-instance+name"><b><span class="cmdname">display evpn vpn-instance name</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>df result</span></strong> [ <strong><span>esi</span></strong> <i><span class="varname">esi</span></i> ] command on PEs to check the DF election result (including PW information) of the specified EVPN instance.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0000.html">Configuring Evolution from Traditional L2VPN to EVPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0007.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0015.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>