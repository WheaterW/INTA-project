
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Interworking Between EVPN L3VPN over SRv6 TE Policy and Common L3VPN over MPLS">
<meta name="abstract" content="During network evolution, EVPN L3VPN over SRv6 TE Policy and common L3VPN over MPLS may coexist. To allow these two types of networks to communicate, perform this task.">
<meta name="description" content="During network evolution, EVPN L3VPN over SRv6 TE Policy and common L3VPN over MPLS may coexist. To allow these two types of networks to communicate, perform this task.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_srv6-l3vpn-srv6.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_dianxinyanjin_01.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="p00915595,w00800033,w00556928,l00468467,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0188146564">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Interworking Between EVPN L3VPN over SRv6 TE Policy and Common L3VPN over MPLS</title>
</head>
<body><a name="EN-US_TASK_0188146564"></a><a name="EN-US_TASK_0188146564"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Interworking Between EVPN L3VPN over SRv6 TE Policy and Common L3VPN over MPLS</h1>
<div class="taskbody"><p>During network evolution, EVPN L3VPN over SRv6 TE Policy and common L3VPN over MPLS may coexist. To allow these two types of networks to communicate, perform this task.</p>
<div class="context"><a name="EN-US_TASK_0188146564__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In <a href="#EN-US_TASK_0188146564__fig_dc_vrp_evpn_cfg_015401">Figure 1</a>, network A is newly deployed and runs EVPN L3VPN over SRv6 TE Policy. Network B is a legacy network and runs common L3VPN over MPLS. Alternatively, network A runs EVPN L3VPNv6 over SRv6 TE Policy, and network B runs common L3VPNv6 over MPLS. To ensure that these two types of networks can communicate and services can run properly, configure interworking between EVPN L3VPN over SRv6 TE Policy and common L3VPN over MPLS on each border leaf node.</p>
<div class="fignone" id="EN-US_TASK_0188146564__fig_dc_vrp_evpn_cfg_015401"><a name="EN-US_TASK_0188146564__fig_dc_vrp_evpn_cfg_015401"></a><a name="fig_dc_vrp_evpn_cfg_015401"></a><span class="figcap"><b>Figure 1 </b>Configuring interworking between EVPN L3VPN over SRv6 TE Policy and common L3VPN over MPLS</span><br><span><img class="vsd" src="figure/en-us_image_0206400990.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0188146564__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring interworking between EVPN L3VPN over SRv6 TE Policy and common L3VPN over MPLS, complete the following tasks:</p>
<ul><li><p>Configure <a href="dc_vrp_cfg_evpn-l3vpn_over_srv6-te_policy.html">EVPN L3VPN over SRv6 TE Policy</a> or <a href="dc_vrp_cfg_evpn-l3vpnv6_over_srv6-te_policy.html">Configuring EVPN L3VPNv6 over SRv6 TE Policy</a> on the network that contains area A.</p>
</li><li><p><a href="dc_vrp_mpls-l3vpn-v4_cfg_0154.html">Configure basic BGP/MPLS IPv4 VPN</a> or <a href="dc_vrp_mpls-l3vpn-v6_cfg_2057.html">basic BGP/MPLS IPv6 VPN</a> on network B.</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0188146564__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure each border leaf node to advertise the re-originated BGP-EVPN address family routes to a specified VPNv4 or VPNv6 peer (PE) or peer group.</span><ol type="a"><li class="substepexpand"><span>Run <strong>system-view</strong></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong>l2vpn-family evpn</strong></span><p><p>The BGP-EVPN address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong>peer</strong> <em>ipv6-address</em> <strong>import</strong> <strong>reoriginate</strong></span><p><p>The border leaf node is configured to re-originate the routes received from a specified BGP EVPN IPv6 peer.</p>
</p></li><li class="substepexpand"><span>Run <strong>quit</strong></span><p><p>Return to the BGP view.</p>
</p></li><li class="substepexpand"><span>Run <strong>ipv4-family</strong> <strong>vpnv4</strong> or <strong>ipv6-family</strong> <strong>vpnv6</strong></span><p><p>The BGP-VPNv4 or BGP-VPNv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong>peer</strong> { <em>ipv4-address</em> | <em>group-name</em> } <strong>advertise</strong> <strong>route-reoriginated</strong> <strong>evpn</strong> { <strong>ip</strong> | <strong>ipv6</strong> }</span><p><p>The border leaf node is configured to advertise re-originated routes in the BGP-EVPN address family to a specified BGP VPNv4 or VPNv6 peer or peer group.</p>
</p><p><p>After this step is performed, the border leaf node re-originates SRv6-encapsulated EVPN IPv4 or IPv6 prefix routes received from access leaf nodes. Then, the border leaf node advertises MPLS-encapsulated BGP VPNv4 or VPNv6 routes to the specified BGP VPN peer (PE) or peer group.</p>
</p></li></ol>
</li><li><span>Configure the border leaf node to advertise the routes that are re-originated in the BGP-VPNv4 or BGP-VPNv6 address family to a specified BGP EVPN IPv6 peer (access leaf) or peer group.</span><ol type="a"><li class="substepexpand"><span>Run <strong>peer</strong> { <em>ipv4-address</em> | <em>group-name</em> } <strong>import</strong> <strong>reoriginate</strong></span><p><p>The border leaf node is configured to add a re-origination flag to routes received from a specified VPNv4 peer or peer group in the BGP-VPN address family view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the BGP view.</p>
</p></li><li class="substepexpand"><span>Run <strong>l2vpn-family evpn</strong></span><p><p>The BGP-EVPN address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong>peer</strong> <em>ipv6-address</em> <strong>advertise</strong> <strong>route-reoriginated</strong> { <strong>vpnv4</strong> | <strong>vpnv6</strong> }</span><p><p>The border leaf node is configured to advertise the routes re-originated in the BGP-VPNv4 or BGP-VPNv6 address family to a specified BGP EVPN IPv6 peer.</p>
</p><p><p>After this step is performed, the border leaf node re-originates MPLS-encapsulated VPNv4 or VPNv6 routes that are received from the PEs. Then, the border leaf node advertises the SRv6-encapsulated EVPN routes to the specified access leaf node.</p>
</p></li><li class="substepexpand"><span>Run <strong>quit</strong></span><p><p>Return to the BGP view.</p>
</p></li></ol>
</li><li><span>Enable EVPN route advertisement in the BGP-VPN instance address family view.</span><ol type="a"><li class="substepexpand"><span>Run <strong>ipv4-family</strong> <strong>vpn-instance</strong> <em>vpn-instance-name</em> or <strong>ipv6-family</strong> <strong>vpn-instance</strong> <em>vpn-instance-name</em></span><p><p>The BGP-VPN instance IPv4 or IPv6 address family view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <strong>advertise l2vpn evpn</strong></span><p><p>The border leaf node is configured to advertise IPv4 or IPv6 routes in the VPN instance as EVPN IPv4 or IPv6 prefix routes.</p>
</p></li></ol>
</li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0188146564__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li><p>Run the <strong>display bgp evpn all routing-table</strong> command to check information about EVPN routes re-originated after the border leaf node receives VPNv4 or VPNv6 routes encapsulated in MPLS packets from PEs.</p>
</li><li><p>Run the <strong>display bgp vpnv4 all routing-table</strong> command to check information about VPNv4 routes re-originated after the border leaf node receives EVPN IP prefix routes encapsulated in SRv6 packets from access leaf nodes.</p>
</li><li><p>Run the <strong>display bgp vpnv6 all routing-table</strong> command to check information about VPNv6 routes re-originated after the border leaf node receives EVPN IPv6 prefix routes encapsulated in SRv6 packets from access leaf nodes.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">EVPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_srv6-l3vpn-srv6.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_dianxinyanjin_01.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>