
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring the Global Redundancy Mode">
<meta name="abstract" content="A PE's global redundancy mode determines whether the PE can work with other PEs in load-balancing mode.">
<meta name="description" content="A PE's global redundancy mode determines whether the PE can work with other PEs in load-balancing mode.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0020.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0027.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0021.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="p00915595,w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0273479579">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring the Global Redundancy Mode</title>
</head>
<body><a name="EN-US_TASK_0273479579"></a><a name="EN-US_TASK_0273479579"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring the Global Redundancy Mode</h1>
<div class="taskbody"><p>A PE's global redundancy mode determines whether the PE can work with other PEs in load-balancing mode.</p>
<div class="context"><a name="EN-US_TASK_0273479579__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p" id="EN-US_TASK_0273479579__en-us_task_0273439417_context1677625172748"><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p951697322214055">By default, EVPN PEs work in all-active mode. If a CE is multi-homed to several EVPN PEs, these PEs will load-balance traffic. If you do not want to transmit traffic in load balancing mode, you can change the global redundancy mode of PEs to the single-active mode. When PEs work in all-active mode, each PE is in the active state. When PEs work in single-active mode, one PE is in the active state, and the other PEs are in the standby state.</p>
<div class="p" id="EN-US_TASK_0273479579__en-us_task_0273439417_p11185357915">Currently, either of the following methods can be used to determine the active/standby status of PEs:<ul id="EN-US_TASK_0273479579__en-us_task_0273439417_ul175541168229"><li id="EN-US_TASK_0273479579__en-us_task_0273439417_li1427584132018">The active/standby status is determined by an E-Trunk. In this case, the CE needs to be configured with an Eth-Trunk interface to connect to the PE, and the PE also needs to be configured with an Eth-Trunk interface to connect to the CE.</li><li id="EN-US_TASK_0273479579__en-us_task_0273439417_li156718222120">The active/standby status is determined based on the DF election result. In this case, a CE can be connected to a PE through an Eth-Trunk or a common physical interface, and no additional E-Trunk needs to be configured.</li></ul>
</div>
<p id="EN-US_TASK_0273479579__en-us_task_0273439417_p177782117114">Perform the following steps on all-active PEs as required.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0273479579__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul id="EN-US_TASK_0273479579__en-us_task_0273439417_steps-unordered179855520519"><li id="EN-US_TASK_0273479579__en-us_task_0273439417_step1398575215510"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd49851952957">The E-Trunk is used to determine the active/standby status.</span><ol id="EN-US_TASK_0273479579__en-us_task_0273439417_substeps177211293612"><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep958501496214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1259807125214055">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname1523642551214055">system-view</span></b></a></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p2079015918017">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep43660079214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1503024126214055">Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname128538931214055">e-trunk</span></b></a> <i><span class="varname" id="EN-US_TASK_0273479579__en-us_task_0273439417_varname800711063214055">e-trunk-id</span></i></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p12548118407">An E-Trunk is configured, and its view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep2147207450214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1800407962214055">Run <a href="cmdqueryname=priority"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname164981931214055">priority</span></b></a> <i><span class="varname" id="EN-US_TASK_0273479579__en-us_task_0273439417_varname278343388214055">priority</span></i></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p10764251500">An E-Trunk priority value is set.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep1882706501214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1624107409214055">Run <a href="cmdqueryname=peer-address"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname615873929214055">peer-address</span></b></a> <i><span class="varname" id="EN-US_TASK_0273479579__en-us_task_0273439417_varname1188773971214055">peer-ip-address</span></i> <strong><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdparmname804284350214055">source-address</span></strong> <i><span class="varname" id="EN-US_TASK_0273479579__en-us_task_0273439417_varname898019405214055">source-ip-address</span></i></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p9557104606">IP addresses are configured for the local and peer ends of the E-Trunk.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep1230652944214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1169025551214055">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname561322554214055">quit</span></b></a></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p8556153407">Return to the system view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep952854571214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd841219118214055">Run <a href="cmdqueryname=interface+eth-trunk"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname507550958183235">interface eth-trunk</span></b></a> <i><span class="varname" id="EN-US_TASK_0273479579__en-us_task_0273439417_varname3323702038153">trunk-id</span></i></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p208682117010">The Eth-Trunk interface view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep828423116214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1170827111214055">Run <a href="cmdqueryname=e-trunk"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname1028630463214055">e-trunk</span></b></a> <i><span class="varname" id="EN-US_TASK_0273479579__en-us_task_0273439417_varname890649955214055">e-trunk-id</span></i></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p95991598593">The Eth-Trunk interface is added to the E-Trunk.</p>
<p id="EN-US_TASK_0273479579__en-us_task_0273439417_p57172098214055">An Eth-Trunk interface can be added to only one E-Trunk.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep622856954214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1521530400214055">(Optional) Run <a href="cmdqueryname=e-trunk+mode"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname877433879214055">e-trunk mode</span></b></a> <strong><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdparmname1818130091214055">force-master</span></strong></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p1387605715598">The E-Trunk member interface is forced to work in master mode.</p>
<p id="EN-US_TASK_0273479579__en-us_task_0273439417_p15556741472">In an all-active scenario, you need to run this command to set the status of multiple PEs to master to implement load balancing. In single-active scenarios, this command cannot be run on PEs.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep771169400214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd980296155214055">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname2048593006214055">quit</span></b></a></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p11731055195913">Return to the system view.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep834321888214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1527240353214055">Run <a href="cmdqueryname=lacp+e-trunk+system-id"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname2140200298214055">lacp e-trunk system-id</span></b></a> <i><span class="varname" id="EN-US_TASK_0273479579__en-us_task_0273439417_varname1524944984519">mac-address</span></i></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p15567146141115">The LACP system ID is configured.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep613998292214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd810369809214055">(Optional) Run <a href="cmdqueryname=lacp+e-trunk+priority"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname545160397214055">lacp e-trunk priority</span></b></a> <i><span class="varname" id="EN-US_TASK_0273479579__en-us_task_0273439417_varname908723222214055">priority</span></i></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p11335181421119">The E-Trunk LACP system priority is configured.</p>
</p><p><div class="note" id="EN-US_TASK_0273479579__en-us_task_0273439417_note187313913417"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p473117912414">For devices in the same E-Trunk, their LACP system IDs must be the same, and their LACP system priorities must also be the same.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep768465510710"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1868445511710">(Optional) Run <a href="cmdqueryname=evpn+redundancy-mode+single-active"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname1936205596214055">evpn redundancy-mode single-active</span></b></a></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p8158114675913">The global redundancy mode is set to single-active.</p>
<p id="EN-US_TASK_0273479579__en-us_task_0273439417_p478918261086">In single-active scenarios, this command must be configured on PEs. In all-active scenarios, this command cannot be configured on PEs.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep1298939460214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd2104232465214055">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname397590437214055">commit</span></b></a></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p1496544405918">The configuration is committed.</p>
</p></li></ol>
</li><li id="EN-US_TASK_0273479579__en-us_task_0273439417_step248654514817"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1448684511812">The active/standby status is determined based on the DF election result (which applies to the single-active scenario).</span><ol id="EN-US_TASK_0273479579__en-us_task_0273439417_substeps173802516254"><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep793890155214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd595936274214055">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname765019293214055">system-view</span></b></a></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p535063955915">The system view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep1413976041214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd641283385214055">Run <a href="cmdqueryname=evpn+%28system+view%29"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname77014159214055">evpn</span></b></a></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p6348538205917">The EVPN global configuration view is displayed.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep397979184214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1572068730214055">Run <a href="cmdqueryname=esi"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname1188066149214055">esi</span></b></a> <i><span class="varname" id="EN-US_TASK_0273479579__en-us_task_0273439417_varname75241054163818">esi</span></i></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p86092032185911">A static ESI instance name is configured. The <i><span class="varname" id="EN-US_TASK_0273479579__en-us_task_0273439417_varname2089718369619">esi</span></i> value must be the same as the name of the statically configured ESI.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep811913758214055"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd157301829134512">Run <a href="cmdqueryname=evpn+redundancy-mode+single-active+df-election"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname171519202273">evpn redundancy-mode single-active df-election</span></b></a></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p11705574512">The device is enabled to determine the active/standby status based on the DF election result when static ESI instances work in single-active mode.</p>
</p><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p2800910143516">After the configurations are complete, the PE that is elected as the DF is in the active state, and the PEs that are not elected as DFs are in the standby state.</p>
<div class="note" id="EN-US_TASK_0273479579__en-us_task_0273439417_note936053323717"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p1136013318372">Currently, the active/standby status can be determined based on the DF election result only in the static ESI view. Therefore, you need to configure a static ESI when configuring an ESI on an interface.</p>
</div></div>
</p></li><li class="substepexpand" id="EN-US_TASK_0273479579__en-us_task_0273439417_substep171202343381"><span id="EN-US_TASK_0273479579__en-us_task_0273439417_cmd1812093453810">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0273479579__en-us_task_0273439417_cmdname512015346388">commit</span></b></a></span><p><p id="EN-US_TASK_0273479579__en-us_task_0273439417_p183928299592">The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0020.html">Configuring EVPN VPWS over MPLS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0027.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0021.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>