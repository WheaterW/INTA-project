
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Interworking Between VPLS in PW Redundancy Mode and Anycast VXLAN with EVPN Active-Active Networking">
<meta name="abstract" content="This section describes how to configure interworking to enable communication between VPLS in PW redundancy mode and anycast VXLAN with EVPN active-active networking.">
<meta name="description" content="This section describes how to configure interworking to enable communication between VPLS in PW redundancy mode and anycast VXLAN with EVPN active-active networking.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0154.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0040.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370495">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Interworking Between VPLS in PW Redundancy Mode and Anycast VXLAN with EVPN Active-Active Networking</title>
</head>
<body><a name="EN-US_TASK_0172370495"></a><a name="EN-US_TASK_0172370495"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Interworking Between VPLS in PW Redundancy Mode and Anycast VXLAN with EVPN Active-Active Networking</h1>
<div class="taskbody"><p>This section describes how to configure interworking to enable communication between VPLS in PW redundancy mode and anycast VXLAN with EVPN active-active networking.</p>
<div class="context"><a name="EN-US_TASK_0172370495__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On the network shown in <a href="#EN-US_TASK_0172370495__fig_dc_vrp_dci_cfg_003301">Figure 1</a>, anycast VXLAN with EVPN active-active networking is configured on the data center network. The egress devices of the data center network (PE1 and PE2) work in active-active mode with a bypass VXLAN tunnel deployed between them. They use an anycast VTEP address to establish a VXLAN tunnel with the EOR switch. PE1, PE2, and the EOR switch can then communicate with each other. PE1 and PE2 communicate with the external network through the VPLS network, on which PW redundancy is configured. Specifically, the PE-AGG connects to PE1 and PE2 through primary and secondary PWs, respectively.</p>
<div class="fignone" id="EN-US_TASK_0172370495__fig_dc_vrp_dci_cfg_003301"><a name="EN-US_TASK_0172370495__fig_dc_vrp_dci_cfg_003301"></a><a name="fig_dc_vrp_dci_cfg_003301"></a><span class="figcap"><b>Figure 1 </b>Configuring interworking between VPLS in PW redundancy mode and anycast VXLAN with EVPN active-active networking</span><br><span><img class="vsd" src="images/fig_vxlan_vpls_04.png"></span><br></div>
<div class="p">To configure interworking between VPLS in PW redundancy mode and anycast VXLAN with EVPN active-active networking, perform the following configurations:<ul><li><p><a href="dc_vrp_vpls_cfg_5049.html">Configure VPLS PW redundancy</a> on the PE-AGG, PE1, and PE2.</p>
</li><li><p><a href="dc_vrp_dci_cfg_0024.html">Configure dynamic VXLAN active-active</a> on PE1 and PE2.</p>
</li><li><p>Configure the PWs connecting to the VPLS network to work in AC mode on PE1 and PE2. This configuration is required on the anycast VXLAN with EVPN active-active networking to prevent split horizon, which is configured on PE1 and PE2, from interrupting traffic. For details, see <a href="#EN-US_TASK_0172370495__step_01">Procedure</a>.</p>
</li></ul>
</div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370495__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<a name="EN-US_TASK_0172370495__step_01"></a><a name="step_01"></a><ol id="EN-US_TASK_0172370495__step_01"><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i> <strong><span>bd-mode</span></strong></span></span><p><p>A BD VSI is created, and its view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=pwsignal"><b><span class="cmdname">pwsignal</span></b></a> <strong><span>ldp</span></strong></span></span><p><p>LDP is configured as the PW signaling protocol, and the VSI-LDP view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=vsi-id"><b><span class="cmdname">vsi-id</span></b></a> <i><span class="varname">vsi-id</span></i></span></span><p><p>A VSI ID is configured.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> [ <strong><span>negotiation-vc-id</span></strong> <i><span class="varname">vc-id</span></i> ] [ <strong><span>encapsulation</span></strong> { <strong><span>ethernet</span></strong> | <strong><span>vlan</span></strong> } ] [ <strong><span>tnl-policy</span></strong> <i><span class="varname">policy-name</span></i> ] <strong><span>ac-mode</span></strong></span></span><p><p>A PW is set to AC mode.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172370495__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After the configuration is complete, check VXLAN tunnel, primary PW, and secondary PW information. For details, see <a href="dc_vrp_vxlan_cfg_1053.html">Verifying the VXLAN Configuration</a> and <a href="dc_vrp_vpls_cfg_5055.html">Verifying the VPLS PW Redundancy Configuration</a>.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">EVPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0154.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0040.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>