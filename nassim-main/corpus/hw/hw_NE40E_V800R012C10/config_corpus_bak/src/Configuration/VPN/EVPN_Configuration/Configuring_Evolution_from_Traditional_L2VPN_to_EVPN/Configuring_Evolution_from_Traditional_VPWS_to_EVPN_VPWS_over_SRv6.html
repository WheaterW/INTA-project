
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Evolution from Traditional VPWS to EVPN VPWS over SRv6">
<meta name="abstract" content="EVPN over SRv6 is today's mainstream transport solution for 5G services. To prevent live network services from being affected, a new transport solution must be deployed based on these services. If a large number of traditional VPWS services exist on the live network, you can configure evolution from traditional VPWS to EVPN VPWS over SRv6 to prevent traffic interruption caused by direct transition from traditional VPWS to EVPN VPWS over SRv6.">
<meta name="description" content="EVPN over SRv6 is today's mainstream transport solution for 5G services. To prevent live network services from being affected, a new transport solution must be deployed based on these services. If a large number of traditional VPWS services exist on the live network, you can configure evolution from traditional VPWS to EVPN VPWS over SRv6 to prevent traffic interruption caused by direct transition from traditional VPWS to EVPN VPWS over SRv6.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0004.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0006.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001285353741">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Evolution from Traditional VPWS to EVPN VPWS over SRv6</title>
</head>
<body><a name="EN-US_TASK_0000001285353741"></a><a name="EN-US_TASK_0000001285353741"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Evolution from Traditional VPWS to EVPN VPWS over SRv6</h1>
<div class="taskbody"><p>EVPN over SRv6 is today's mainstream transport solution for 5G services. To prevent live network services from being affected, a new transport solution must be deployed based on these services. If a large number of traditional VPWS services exist on the live network, you can configure evolution from traditional VPWS to EVPN VPWS over SRv6 to prevent traffic interruption caused by direct transition from traditional VPWS to EVPN VPWS over SRv6.</p>
<div class="context"><a name="EN-US_TASK_0000001285353741__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Traditional L2VPNs use VPWS for Layer 2 communication. Compared with traditional VPWS, EVPN â a next-generation VPN technology â has many advantages, such as support for multi-homing all-active networking and easy maintenance. As such, traditional VPWS is gradually evolving to EVPN. However, there are still a large number of existing VPWS services on the live network. To use EVPN VPWS over SRv6, you must configure evolution from traditional VPWS to EVPN VPWS over SRv6 to ensure that existing services are not interrupted during the evolution.</p>
<p>On the network shown in <a href="#EN-US_TASK_0000001285353741__fig579251613147">Figure 1</a>, both traditional VPWS and EVPN VPWS over SRv6 are deployed on PE1 and PE2. In this case, you need to configure evolution from traditional VPWS to EVPN VPWS over SRv6 on PE1 and PE2.</p>
<div class="fignone" id="EN-US_TASK_0000001285353741__fig579251613147"><a name="EN-US_TASK_0000001285353741__fig579251613147"></a><a name="fig579251613147"></a><span class="figcap"><b>Figure 1 </b>Configuring evolution from traditional VPWS to EVPN VPWS over SRv6</span><br><span><img class="vsd" src="figure/en-us_image_0000001271449924.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001285353741__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring evolution from traditional VPWS to EVPN VPWS over SRv6, complete the following tasks:</p>
<ul><li><p><a href="dc_vrp_vpws_cfg_3004.html">Configure LDP VPWS</a> or <a href="dc_vrp_vpws_cfg_6054.html">BGP VPWS</a> between PE1 and PE2. </p>
</li><li><a href="dc_vrp_srv6_cfg_all_0021_copy.html">Configure EVPN VPWS over IS-IS SRv6 BE</a> or <a href="dc_vrp_cfg_evpn-vpws_over_srv6-te_policy_copy.html">EVPN VPWS over SRv6 TE Policy</a> between PE1 and PE2. <div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><div class="p">The pre-configuration tasks have the following requirements:<ul><li><p>VPWS and the EVPL instance that carry the same service must be configured on the same AC interface.</p>
</li><li><p>Traditional VPWS must be configured prior to the EVPL instance of EVPN VPWS on the AC interface. Otherwise, the configuration fails.</p>
</li></ul>
</div>
</div></div>
</li></ul>
<p>Perform the following steps on PE1 and PE2.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001285353741__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=evpn"><b><span class="cmdname">evpn</span></b></a></span><p><p>The EVPN global configuration view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=timer+migrate+delay"><b><span class="cmdname">timer migrate delay</span></b></a> <i><span class="varname">delay-value</span></i></span><p><p>An EVPN VPWS switching delay is configured.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>To forcibly roll services that have been switched to EVPN VPWS back to traditional VPWS, run the <a href="cmdqueryname=migration+rollback+l2vpn"><b><span class="cmdname">migration rollback l2vpn</span></b></a> command in the EVPL instance view.</p>
</div></div>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0000001285353741__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li><p>Run the <a href="cmdqueryname=display+bgp+evpn"><b><span class="cmdname">display bgp evpn</span></b></a> { <strong><span>all</span></strong> | <strong><span>route-distinguisher</span></strong> <i><span class="varname">route-distinguisher</span></i> } <strong><span>routing-table</span></strong> { <strong><span>ad-route</span></strong> | <strong><span>es-route</span></strong> | <strong><span>inclusive-route</span></strong> | <strong><span>mac-route</span></strong> | <strong><span>prefix-route</span></strong> } <i><span class="varname">prefix</span></i> command to check detailed BGP EVPN route information, including PW information.</p>
</li><li>Run the <a href="cmdqueryname=display+bgp+evpn"><b><span class="cmdname">display bgp evpn</span></b></a> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> <strong><span>routing-table</span></strong> { <strong><span>ad-route</span></strong> | <strong><span>es-route</span></strong> | <strong><span>inclusive-route</span></strong> | <strong><span>mac-route</span></strong> } <i><span class="varname">prefix</span></i> command to check the EVPN route information (including PW information) of the specified EVPN instance.</li><li><p>In a scenario where a CE is dual-homed to PEs, run the <a href="cmdqueryname=display+evpn+vpn-instance+name"><b><span class="cmdname">display evpn vpn-instance name</span></b></a> <i><span class="varname">vpn-instance-name</span></i> <strong><span>df result</span></strong> [ <strong><span>esi</span></strong> <i><span class="varname">esi</span></i> ] command to check the DF election result (including PW information) of the specified EVPN instance.</p>
</li><li>Run the <a href="cmdqueryname=display+l2vpn+traffic-forwarding"><b><span class="cmdname">display l2vpn traffic-forwarding</span></b></a> <strong>interface</strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-num</span></i> } command to check whether the current service type is EVPN VPWS or traditional VPWS on the specified interface.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0000.html">Configuring Evolution from Traditional L2VPN to EVPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0004.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2vpn_to_evpn_cfg_0006.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>