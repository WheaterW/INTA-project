
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring EVPN in Ring Network Access Mode">
<meta name="abstract" content="If EVPN VPLS over MPLS or EVPN VPLS over SRv6 in ring network access mode needs to be deployed on a network, you need to configure EVPN in this mode and deploy a loop avoidance protocol to prevent loops.">
<meta name="description" content="If EVPN VPLS over MPLS or EVPN VPLS over SRv6 in ring network access mode needs to be deployed on a network, you need to configure EVPN in this mode and deploy a loop avoidance protocol to prevent loops.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0161.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_csc_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0170.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0171.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0172.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001118104814">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring EVPN in Ring Network Access Mode</title>
</head>
<body><a name="EN-US_TASK_0000001118104814"></a><a name="EN-US_TASK_0000001118104814"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring EVPN in Ring Network Access Mode</h1>
<div class="taskbody"><p>If EVPN VPLS over MPLS or EVPN VPLS over SRv6 in ring network access mode needs to be deployed on a network, you need to configure EVPN in this mode and deploy a loop avoidance protocol to prevent loops.</p>
<div class="context"><a name="EN-US_TASK_0000001118104814__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On the network shown in <a href="#EN-US_TASK_0000001118104814__fig142211553144816">Figure 1</a>, EVPN VPLS over MPLS or EVPN VPLS over SRv6 needs to be deployed between PEs, and a loop avoidance protocol (MSTP in this example) needs to be deployed on the ring network formed by PE1, PE2, CE1, and CE2. Currently, STP, ERPS, and MSTP can be deployed.</p>
<div class="fignone" id="EN-US_TASK_0000001118104814__fig142211553144816"><a name="EN-US_TASK_0000001118104814__fig142211553144816"></a><a name="fig142211553144816"></a><span class="figcap"><b>Figure 1 </b>EVPN in ring network access mode</span><br><span><img class="vsd" src="figure/en-us_image_0000001118724120.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000001118104814__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring EVPN VPLS in ring network access mode, complete the following tasks:</p>
<ul><li>Configure <a href="dc_vrp_srv6_cfg_all_0023_copy.html">EVPN VPLS over SRv6 BE</a>, <a href="dc_vrp_cfg_evpn-vpls_over_srv6-te_policy_copy.html">EVPN VPLS over SRv6 TE Policy</a>, or EVPN VPLS over MPLS on PEs.</li><li>Configure <a href="dc_vrp_evpn_cfg_0065.html">EVPN VPLS over MPLS (BD EVPN instance)</a> on PEs.</li><li>Configure <a href="dc_vrp_isis_cfg_1000.html">basic IPv4 IS-IS functions</a> on PEs and CEs.</li><li>Configure a loop avoidance protocol on PEs and CEs. For details, see <a href="dc_vrp_mstp_cfg_0001.html">MSTP Configuration</a>, <a href="dc_vrp_stp_cfg_0000.html">STP/RSTP Configuration</a>, and  and <a href="dc_vrp_erps_cfg_0000.html">ERPS (G.8032) Configuration</a>.</li></ul>
</div></div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0170.html">Configuring Ring Network Topology Isolation</a>
</dt>
<dd>
In scenarios where multiple ring networks that belong to the same BD but different VLANs connect to an EVPN, you can configure ring network topology isolation on AC sub-interfaces. This configuration isolates the topologies of these ring networks and reduces the number of Layer 2 protocol packets transparently transmitted between the networks. In this way, the sub-interfaces transparently transmit Layer 2 protocol packets only after the packets pass the VLAN check on these sub-interfaces.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0171.html">Configuring Ring Network Access</a>
</dt>
<dd>
If MSTP is deployed on a ring network, run the <a href="cmdqueryname=evpn+stp-ring-id"><b><span class="cmdname">evpn stp-ring-id</span></b></a> command on dual-homing PEs to configure the same ring ID for them. The dual-homing PEs are then identified by the same ring ID.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0172.html">Verifying the Configuration</a>
</dt>
<dd>
After EVPN in ring network access mode is configured, you can check the spanning tree status of ports in the MSTP process on ring network devices and check EVPN route information on PEs.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">EVPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0161.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_csc_0001.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>