
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring PW APS Instances and Binding PW Protection Groups to These Instances">
<meta name="abstract" content="This section describes how to configure PW and E-PW APS instances and bind PW protection groups to the APS instances.">
<meta name="description" content="This section describes how to configure PW and E-PW APS instances and bind PW protection groups to the APS instances.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6034.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6035.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6031-01.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,vpws,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369884">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring PW APS Instances and Binding PW Protection Groups to These Instances</title>
</head>
<body><a name="EN-US_TASK_0172369884"></a><a name="EN-US_TASK_0172369884"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring PW APS Instances and Binding PW Protection Groups to These Instances</h1>
<div class="taskbody"><p>This section describes how to configure PW and E-PW APS instances and bind PW protection groups to the APS instances.</p>
<div class="context"><a name="EN-US_TASK_0172369884__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In an E-PW APS scenario, PW APS instances are further divided into master PW APS instances and slave PW APS instances. Only a master PW APS instance will establish the APS state machine, exchange APS signaling with the peer PW end, and notify the slave PW APS instance of the negotiated status through the bypass PW. APS protocol packets generally travel along the backup channel. The transmit and receive ends both know that they receive APS protocol packets through each other's backup channel. This implementation helps determine whether the primary and backup channel configurations on the two ends are consistent. In this example, the PW between PE1 and PE2 serves as the primary PW and that between PE1 and PE3 serves as the secondary PW. You need to configure the PW APS instance on PE3 as the master one and the PW APS instance on PE2 as the slave one.</p>
<p>In an E-PW APS scenario, perform the following configurations on PE1, PE2, and PE3.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172369884__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a PW APS instance and bind a PW protection group to the instance.</span><p><p>To configure a PW APS instance on PE1 and bind a PW protection group to the instance, see <a href="dc_vrp_vpws_cfg_6030.html">Configuring a PW APS Instance and Bind a PW Protection Group to the PW APS Instance</a>.</p>
</p></li><li><span>Configure E-PW APS instances and bind a PW protection group to each instance.</span><p><p>Perform the following steps on PE2 and PE3.</p>
</p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=pw-aps"><b><span class="cmdname">pw-aps</span></b></a> <em>apsId</em></span><p><p>A PW APS instance is created, and its view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">text</span></i></span><p><p>A description is configured for the PW APS instance.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=role"><b><span class="cmdname">role</span></b></a> { <strong><span>master</span></strong> | <strong><span>slave</span></strong> }</span><p><p>A master or slave role is configured for the E-PW APS instance.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Specify the role as <strong><span>slave</span></strong> for the E-PW APS instance on PE2 and as <strong><span>master</span></strong> for that on PE3.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-aps"><b><span class="cmdname">remote-aps</span></b></a> <span><i><span class="varname">remoteApsId</span></i></span></span><p><p>A remote ID is configured for the PW APS instance.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>On PE2 and PE3, the remote ID of the master PW APS instance must be the ID of the slave PW APS instance, and the remote ID of the slave PW APS instance must be the ID of the master PW APS instance.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span><p><p>The view of the AC interface configured with the PW protection group is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=mpls+l2vpn+pw-aps"><b><span class="cmdname">mpls l2vpn pw-aps</span></b></a> <em>apsId</em> { <strong><span>admin</span></strong> | <strong><span>reference</span></strong> }</span><p><p>The PW protection group is bound to the PW APS instance.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6034.html">Configuring E-PW APS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6035.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_6031-01.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>