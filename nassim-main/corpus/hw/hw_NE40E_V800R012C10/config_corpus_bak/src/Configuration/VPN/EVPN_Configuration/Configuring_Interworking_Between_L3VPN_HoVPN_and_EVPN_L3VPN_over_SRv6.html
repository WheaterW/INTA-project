
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Interworking Between L3VPN HoVPN and EVPN L3VPN over SRv6">
<meta name="abstract" content="During the evolution from L3VPN HoVPN to EVPN L3VPN over SRv6, these two types of services may coexist. In this case, you need to configure interworking between an L3VPN HoVPN and an EVPN L3VPN over SRv6.">
<meta name="description" content="During the evolution from L3VPN HoVPN to EVPN L3VPN over SRv6, these two types of services may coexist. In this case, you need to configure interworking between an L3VPN HoVPN and an EVPN L3VPN over SRv6.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0211.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_srv6-mpls.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="p00915595,w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0289315208">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Interworking Between L3VPN HoVPN and EVPN L3VPN over SRv6</title>
</head>
<body><a name="EN-US_TASK_0289315208"></a><a name="EN-US_TASK_0289315208"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Interworking Between L3VPN HoVPN and EVPN L3VPN over SRv6</h1>
<div class="taskbody"><p>During the evolution from L3VPN HoVPN to EVPN L3VPN over SRv6, these two types of services may coexist. In this case, you need to configure interworking between an L3VPN HoVPN and an EVPN L3VPN over SRv6.</p>
<div class="context"><a name="EN-US_TASK_0289315208__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>On the network shown in <a href="#EN-US_TASK_0289315208__fig1258918722520">Figure 1</a>, a traditional L3VPN HoVPN is deployed between the UPEs and SPEs, and an EVPN L3VPN over SRv6 is deployed between the SPEs and NPEs. In this case, you need to configure each SPE for interworking between the L3VPN HoVPN and the EVPN L3VPN over SRv6.</p>
<div class="fignone" id="EN-US_TASK_0289315208__fig1258918722520"><a name="EN-US_TASK_0289315208__fig1258918722520"></a><a name="fig1258918722520"></a><span class="figcap"><b>Figure 1 </b>Interworking between L3VPN HoVPN and EVPN L3VPN over SRv6</span><br><span><img class="vsd" src="figure/en-us_image_0289520887.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0289315208__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring interworking between L3VPN HoVPN and EVPN L3VPN over SRv6, complete the following tasks:</p>
<ul><li>Configure an IGP between UPEs and SPEs and between SPEs and NPEs to implement network-layer connectivity.</li><li>Configure an L3VPN HoVPN between the UPEs and SPEs. For details, see <a href="dc_vrp_mpls-l3vpn-v4_cfg_0165.html">Configuring an HoVPN</a>.</li><li>Complete the task of <a href="dc_vrp_srv6_cfg_all_0252.html">Configuring EVPN L3VPN over IS-IS SRv6 BE</a>, <a href="dc_vrp_cfg_evpn-l3vpn_over_srv6-te_policy.html">Configuring EVPN L3VPNv4 over SRv6 TE Policy</a>, or <a href="dc_vrp_cfg_evpn-l3vpnv6_over_srv6-te_policy.html">Configuring EVPN L3VPNv6 over SRv6 TE Policy</a> between the SPEs and NPEs.</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0289315208__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <em>as-number</em></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=ipv4-family+vpnv4"><b><span class="cmdname">ipv4-family vpnv4</span></b></a> or <a href="cmdqueryname=ipv6-family+vpnv6"><b><span class="cmdname">ipv6-family vpnv6</span></b></a></span><p><p>The BGP-VPNv4 or BGP-VPNv6 address family view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer+import+reoriginate"><b><span class="cmdname">peer</span></b></a> <em>ipv4-address</em> <strong>import</strong> <strong>reoriginate</strong> or <a href="cmdqueryname=peer+import+reoriginate"><b><span class="cmdname">peer</span></b></a> <em>group-name</em> <strong>import</strong> <strong>reoriginate</strong></span><p><p>The device is enabled to add the re-origination flag to VPNv4 or VPNv6 routes received from UPEs that function as peers.</p>
<p>The <em>ipv4-address</em> parameter specifies the IP address of a UPE peer, and the <em>group-name</em> parameter specifies the name of a UPE peer group.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the BGP view.</p>
</p></li><li><span>Run <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname">l2vpn-family evpn</span></b></a></span><p><p>The BGP-EVPN address family view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer+advertise+route-reoriginated"><b><span class="cmdname">peer</span></b></a> <em>peerIpv6Addr</em> <strong>advertise</strong> <strong>route-reoriginated</strong> { <strong>vpnv4</strong> | <strong>vpnv6</strong> } or <a href="cmdqueryname=peer+advertise+route-reoriginated"><b><span class="cmdname">peer</span></b></a> <em>peerGroupName</em> <strong>advertise</strong> <strong>route-reoriginated</strong> { <strong>vpnv4</strong> | <strong>vpnv6</strong> }</span><p><p>The device is enabled to re-originate the VPNv4 or VPNv6 routes received from UPEs into EVPN routes and advertise them to NPEs.</p>
<p>The <em>peerIpv6Addr</em> parameter specifies the IP address of an NPE peer, and the <em>peerGroupName</em> parameter specifies the name of an NPE peer group.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0289315208__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li><p>Run the <a href="cmdqueryname=display+ip+routing-table+vpn-instance"><b><span class="cmdname">display ip routing-table vpn-instance</span></b></a> <span>or <a href="cmdqueryname=display+ipv6+routing-table+vpn-instance"><b><span class="cmdname">display ipv6 routing-table vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i></span> command on a UPE or NPE to check the VPN routing table. The command output shows the default routes or specific routes sent by the remote ends.</p>
</li><li><p>Run the <a href="cmdqueryname=display+bgp+evpn+all+routing-table"><b><span class="cmdname">display bgp evpn all routing-table</span></b></a> <strong>prefix-route</strong> command on an NPE to check the EVPN IP prefix routing table. The command output shows the IP prefix routes sent from the remote ends.</p>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">EVPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0211.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_srv6-mpls.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>