
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Tunnel Selector">
<meta name="abstract" content="EVPN public network routes recurse to IP tunnels based on next hops by default. To enable EVPN public network routes to recurse to SRv6 TE Policies based on next hops, deploy a tunnel selector for route matching.">
<meta name="description" content="EVPN public network routes recurse to IP tunnels based on next hops by default. To enable EVPN public network routes to recurse to SRv6 TE Policies based on next hops, deploy a tunnel selector for route matching.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0211.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0212.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0214.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="p00915595">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001226313076">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Tunnel Selector</title>
</head>
<body><a name="EN-US_TASK_0000001226313076"></a><a name="EN-US_TASK_0000001226313076"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Tunnel Selector</h1>
<div class="taskbody"><p>EVPN public network routes recurse to IP tunnels based on next hops by default. To enable EVPN public network routes to recurse to SRv6 TE Policies based on next hops, deploy a tunnel selector for route matching.</p>
<div class="context"><a name="EN-US_TASK_0000001226313076__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>By default, EVPN public network routes recurse to IP tunnels based on next hops.</p>
<p>If EVPN L3VPN over SRv6 TE Policy interworks with EVPN L3VPN over MPLS in Option B mode, EVPN public network routes on ASBRs need to recurse to SRv6 TE Policies based on next hops.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001226313076__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step56173979214055"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd1370744020214055">Run <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname1076473488214055">system-view</span></b></a></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p75155195441">The system view of the ASBR is displayed.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step121891559101320"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd1718925916134">Run <a href="cmdqueryname=tunnel-policy"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname16957151011142">tunnel-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_varname395716100145">policy-name</span></i></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p1997211235442">A tunnel policy is created, and its view is displayed.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step608372675214055"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd749905358214055">Run <a href="cmdqueryname=tunnel+select-seq+ipv6"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname16276152812143">tunnel select-seq ipv6</span></b></a> <strong><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdparmname227602881412">srv6-te-policy</span></strong> <strong><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdparmname152761228191419">load-balance-number</span></strong> <i><span class="varname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_varname11276728131420">loadBalanceNumber</span></i></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p14334830114419">The type of tunnel to be selected and the maximum number of tunnels that can participate in load balancing are configured.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step1464811611412"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd26481616181411">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname747903219147">quit</span></b></a></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p10371103644412">Exit the tunnel policy view.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step114801817171416"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd548071713146">Run <a href="cmdqueryname=tunnel-selector"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname231991018214055">tunnel-selector</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_varname155327104291">name </span></i><i><span class="varname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_varname105321610142918">matchMode</span></i><strong><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdparmname753214106292"> node</span></strong> <i><span class="varname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_varname13533141016298">node</span></i></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p11295134204418">A tunnel selector is created, and its view is displayed.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step52331025141514"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd423372551510">Run <a href="cmdqueryname=apply+tunnel-policy"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname918873151512">apply tunnel-policy</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_varname36561723102919">tunnel-policy-name</span></i></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p19328346194419">A tunnel policy is applied to routes.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step593483710174"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd1893463718178">Run <a href="cmdqueryname=apply+segment-routing+ipv6"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname13193153310504">apply segment-routing ipv6</span></b></a><strong><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdparmname1521617421651"> traffic-engineer</span></strong></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p20631125294414">The function to recurse routes to SRv6 TE Policy next hops based on SID attributes is enabled.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step54941542151810"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd949444218183">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname97683839214055">quit</span></b></a></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p736558134418">Exit the tunnel selector view.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step136010377197"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd336012371195">Run <a href="cmdqueryname=bgp"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname1400080476214038">bgp</span></b></a> <i><span class="varname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_varname358534175214038">as-number</span></i></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p1076120584114">The BGP view is displayed.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step874064376214055"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd1611821952214055">Run <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname959239430214055">l2vpn-family evpn</span></b></a></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p1092361154515">The BGP-EVPN address family view is displayed.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step248408663214055"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd296189273214055">Run <a href="cmdqueryname=tunnel-selector"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname1808508570214055">tunnel-selector </span></b></a><i><span class="varname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_varname14151657113013">tunnel-selector-name</span></i></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p1058216153452">The tunnel selector is applied.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step363012462415"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd196301415240">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname1011559247">quit</span></b></a></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p4493161954513">Exit the BGP-EVPN address family view.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step1075811150241"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd97586157246">Run <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname49111612243">quit</span></b></a></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p5467102311452">Exit the BGP address family view.</p>
</p></li><li id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_step1280456703214055"><span id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmd702180734214055">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_cmdname1346697666214055">commit</span></b></a></span><p><p id="EN-US_TASK_0000001226313076__en-us_task_0000001132924608_p164862027194519">The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0211.html">Configuring Interworking Between EVPN L3VPN over SRv6 TE Policy and EVPN L3VPN over MPLS in Option B Mode
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0212.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0214.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>