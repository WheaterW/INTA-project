
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Creating a VSI and Configuring BGP AD Signaling">
<meta name="abstract" content="When configuring BGP AD VPLS, you need to create a VSI and configure BGP AD signaling.">
<meta name="description" content="When configuring BGP AD VPLS, you need to create a VSI and configure BGP AD signaling.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5057.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5058.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5005-03.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,vpls,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00545680">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370191">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Creating a VSI and Configuring BGP AD Signaling</title>
</head>
<body><a name="EN-US_TASK_0172370191"></a><a name="EN-US_TASK_0172370191"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Creating a VSI and Configuring BGP AD Signaling</h1>
<div class="taskbody"><p>When configuring BGP AD VPLS, you need to create a VSI and configure BGP AD signaling.</p>
<div class="context"><a name="EN-US_TASK_0172370191__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When configuring BGP AD VPLS, you need to create a VSI, enable automatic VPLS member discovery and automatic PW deployment, configure BGP AD signaling, and set the VPLS ID and VPN targets in the VSI-BGP AD view on PEs.</p>
<p>Perform the following steps on the endpoint PEs of a PW.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370191__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i></span><p><p>A VSI is created.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=description"><b><span class="cmdname">description</span></b></a> <i><span class="varname">description</span></i></span><p><p>A description is configured for the VSI.</p>
</p><p></p></li><li><span>Run <a href="cmdqueryname=encapsulation"><b><span class="cmdname">encapsulation</span></b></a> { <strong><span>ethernet</span></strong> | <strong><span>vlan</span></strong> }</span><p><p>An encapsulation mode is configured for the VSI.</p>
</p><p><ul><li><p>VSIs have two encapsulation modes: Ethernet and VLAN. When being transmitted over the public network, packets encapsulated in Ethernet mode cannot carry any VLAN tags, whereas packets encapsulated in VLAN mode must carry VLAN tags.</p>
</li><li><p>The two ends of a PW must use the same encapsulation mode.</p>
</li></ul>
</p></li><li><span>Run <span><a href="cmdqueryname=bgp-ad"><b><span class="cmdname">bgp-ad</span></b></a></span></span><p><p>Automatic VPLS member discovery and automatic PW deployment are enabled for the VSI, and the VSI-BGP AD view is displayed.</p>
</p></li><li><span>Run<a href="cmdqueryname=vpls-id"><b><span class="cmdname"> vpls-id</span></b></a> <i><span class="varname">vplsIdValue</span></i></span><p><p>A VPLS ID is configured.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>By default, a BGP AD VPLS uses its VPLS ID value as its RD value. If the VPLS ID has been set, the RD does not need to be set. The VSI ID is equal to the local LSR ID and does not need to be set.</p>
</li><li><p>The VPLS IDs for VSIs in the same VPLS domain must be the same.</p>
</li></ul>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=vpn-target"><b><span class="cmdname">vpn-target</span></b></a> <i><span class="varname">vpn-target</span></i> &amp; &lt;1-16&gt; [ <strong><span>both</span></strong> | <strong><span>export-extcommunity</span></strong> | <strong><span>import-extcommunity</span></strong> ]</span><p><p>VPN targets are configured for the VSI.</p>
</p><p><p>Note that the mapping between local and remote VPN targets must be correct:</p>
<ul><li><p><strong>export-extcommunity</strong> on the local end is the same as <strong>import-extcommunity</strong> on the peer end.</p>
</li><li><p><strong>import-extcommunity</strong> on the local end is the same as <strong>export-extcommunity</strong> on the peer end.</p>
</li></ul>
<p>Traffic can be transmitted bidirectionally only if the preceding two conditions are both met. If only one condition is met, traffic is transmitted only unidirectionally. For convenience, these four parameters are usually set to the same value.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=pw+spoke-mode"><b><span class="cmdname">pw spoke-mode</span></b></a></span><p><p>The PW attribute of the BGP AD VSI is set to spoke.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This command is generally used in star or tree network topologies where one PE serves as the hub PE and the other PEs act as spoke PEs. The hub PE can be a server or an authentication device, among others. This command functions similarly to configuring a peer PE as a UPE on an LDP HVPLS network. The difference lies in that this command configures the attributes of all PWs in the BGP AD VSI as spoke.</p>
</div></div>
</p></li><li><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> <strong><span>pw</span></strong> <i><span class="varname">pw-name</span></i></span><p><p>A PW is created, and its view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5057.html">Configuring BGP AD VPLS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5058.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5005-03.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>