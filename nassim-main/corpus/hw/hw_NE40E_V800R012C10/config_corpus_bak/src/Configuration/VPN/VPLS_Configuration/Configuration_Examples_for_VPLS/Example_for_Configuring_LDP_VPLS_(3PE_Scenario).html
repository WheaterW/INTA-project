
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring LDP VPLS (3PE Scenario)">
<meta name="abstract" content="LDP VPLS applies to scenarios where PEs can use LDP as the VPLS signaling protocol. To fully mesh PEs on a VPLS network using PWs, set up LDP sessions between all the PEs.">
<meta name="description" content="LDP VPLS applies to scenarios where PEs can use LDP as the VPLS signaling protocol. To fully mesh PEs on a VPLS network using PWs, set up LDP sessions between all the PEs.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5029.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5030.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6019.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000002042693058">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring LDP VPLS (3PE Scenario)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0000002042693058"></a><a name="EN-US_TASK_0000002042693058"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring LDP VPLS (3PE Scenario)</h1>
<div class="taskbody"><p>LDP VPLS applies to scenarios where PEs can use LDP as the VPLS signaling protocol. To fully mesh PEs on a VPLS network using PWs, set up LDP sessions between all the PEs.</p>
<div class="context"><a name="EN-US_TASK_0000002042693058__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>On the network shown in <a href="#EN-US_TASK_0000002042693058__fig_dc_vrp_vpls_cfg_503001">Figure 1</a>, LDP VPLS is configured on PE1, PE2, and PE3, which function as PEs. CE1, CE2, and CE3 connect to PE1, PE2, and PE3, respectively. CE1, CE2, and CE3 belong to the same VPLS network.</p>
<div class="fignone" id="EN-US_TASK_0000002042693058__fig_dc_vrp_vpls_cfg_503001"><a name="EN-US_TASK_0000002042693058__fig_dc_vrp_vpls_cfg_503001"></a><a name="fig_dc_vrp_vpls_cfg_503001"></a><span class="figcap"><b>Figure 1 </b>Network diagram of configuring LDP VPLS</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>In this example, subinterface1.1, interface2, and interface3 represent GE<span>0/1/0</span>.1, GE<span>0/2/0</span>, and GE<span>0/3/0</span>, respectively.</p>
</li></ul>
</div></div>
<br><span><img src="figure/en-us_image_0000002042879156.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0000002042693058__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Precautions</h4><p>During the configuration, note the following:</p>
<ul><li>PEs belonging to the same L2VPN must have the same VSI ID.</li></ul>
</div></div>
<div class="context"><a name="EN-US_TASK_0000002042693058__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure a routing protocol on the backbone network for communication between devices.</p>
</li><li><p>Set up LDP sessions between PEs.</p>
</li><li><p>Enable MPLS L2VPN on PEs.</p>
</li><li><p>Create VSIs, set the signaling protocol to LDP, and bind AC interfaces to VSIs on PEs.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0000002042693058__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>VSI names and IDs</p>
</li><li><p>Peer IP addresses and tunnel policies used for setting up peer relationships</p>
</li><li><p>Interfaces bound to VSIs</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000002042693058__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure interface addresses and an IGP on PEs according to <a href="#EN-US_TASK_0000002042693058__fig_dc_vrp_vpls_cfg_503001">Figure 1</a>. OSPF is used in this example.</span><p><p>When configuring OSPF, configure PE1, PE2, and PE3 to advertise their 32-bit loopback interface addresses (used as LSR IDs).</p>
<p>For detailed configurations, see <a href="#EN-US_TASK_0000002042693058__li714417045214053">Configuration Files</a>.</p>
<p>After the configuration is complete, run the <a href="cmdqueryname=display+ip+routing-table"><b><span class="cmdname">display ip routing-table</span></b></a> command on PE1, PE2, and PE3. The command output shows that they have learned routes from each other.</p>
</p></li><li><span>Configure basic MPLS functions and LDP.</span><p><p>For detailed configurations, see <a href="#EN-US_TASK_0000002042693058__li714417045214053">Configuration Files</a>.</p>
<p>After the configuration is complete, run the <strong>display mpls ldp session</strong> command on PE1, PE2, and PE3 to verify that peer relationships have been established between PEs (<strong>Status</strong> is <strong>Operational</strong> for each peer). Run the <strong>display mpls lsp</strong> command. The command output shows whether LSPs have been set up.</p>
</p></li><li><span>Enable MPLS L2VPN on PEs.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> mpls l2vpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-l2vpn]<strong> commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword">*</span>PE2] <strong>mpls l2vpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-l2vpn] <strong>commit</strong></pre>
<p># Configure PE3.</p>
<pre class="screen">[<span class="keyword">*</span>PE3] <strong>mpls l2vpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3-l2vpn] <strong>commit</strong></pre>
</p></li><li><span>Configure a VSI on each PE.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> vsi a2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2]<strong> pwsignal ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp]<strong> vsi-id 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp]<strong> peer 2.2.2.9</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp]<strong> peer 3.3.3.9</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2-ldp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-vsi-a2]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2]<strong> vsi a2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2]<strong> pwsignal ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp]<strong> vsi-id 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp]<strong> peer 1.1.1.9</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp]<strong> peer 3.3.3.9</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2-ldp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-vsi-a2]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> commit</strong></pre>
<p># Configure PE3.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE3]<strong> vsi a2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3-vsi-a2]<strong> pwsignal ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3-vsi-a2-ldp]<strong> vsi-id 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3-vsi-a2-ldp]<strong> peer 1.1.1.9</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3-vsi-a2-ldp]<strong> peer 2.2.2.9</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3-vsi-a2-ldp]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3-vsi-a2]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3]<strong> commit</strong></pre>
</p></li><li><span>Bind interfaces to VSIs on PEs.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> interface gigabitethernet<span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1]<strong> vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1]<strong> l2 binding vsi a2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/0</span>.1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2]<strong> interface gigabitethernet<span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1]<strong> vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1]<strong> l2 binding vsi a2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/0</span>.1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> commit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE3]<strong> interface gigabitethernet<span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3-GigabitEthernet<span>0/1/0</span>.1]<strong> vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3-GigabitEthernet<span>0/1/0</span>.1]<strong> l2 binding vsi a2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3-GigabitEthernet<span>0/1/0</span>.1]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE3]<strong> commit</strong></pre>
</p></li><li><span>Configure CEs.</span><p><p># Configure CE1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1]<strong> interface gigabitethernet<span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/0</span>.1] <strong>ip address 10.1.1.1 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1]<strong> commit</strong></pre>
<p># Configure CE2.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2]<strong> interface gigabitethernet<span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/0</span>.1] <strong>ip address 10.1.1.2 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2]<strong> commit</strong></pre>
<p># Configure CE3.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE3</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE3]<strong> interface gigabitethernet<span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3-GigabitEthernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3-GigabitEthernet<span>0/1/0</span>.1] <strong>ip address 10.1.1.3 255.255.255.0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3-GigabitEthernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE3]<strong> commit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>After the configuration is complete, run the <strong><a href="cmdqueryname=display+vsi"><b><span class="cmdname">display vsi</span></b></a> name a2 verbose</strong> command on PE1. The command output shows that a VSI named <strong>a2</strong> has established two PWs (one to PE2 and the other to PE3), and <strong>VSI State</strong> is <strong>up</strong>.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]display vsi name a2 verbose

 ***VSI Name               : a2
    <strong>Work Mode           : normal</strong>
    Administrator VSI      : no
    Isolate Spoken         : disable
    VSI Index              : 1
    PW Signaling           : ldp
    Member Discovery Style : --
    Bridge-domain Mode     : disable
    PW MAC Learn Style     : unqualify
    Encapsulation Type     : vlan
    MTU                    : 1500
    Diffserv Mode          : uniform
    Service Class          : --
    Color                  : --
    DomainId               : 255
    Domain Name            :
    Ignore AcState         : disable
    P2P VSI                : disable
    Multicast Fast Switch  : disable
    Create Time            : 0 days, 0 hours, 53 minutes, 11 seconds
    VSI State              : up
    Resource Status        : --

    VSI ID                 : 2
   *Peer Router ID         : 2.2.2.9
    Negotiation-vc-id      : 2
    Encapsulation Type     : vlan
    primary or secondary   : primary
    ignore-standby-state   : no
    VC Label               : 65583
    Peer Type              : dynamic
    Session                : up
    Tunnel ID              : 0x0000000001004c4b43
    Broadcast Tunnel ID    : --
    Broad BackupTunnel ID  : --
    CKey                   : 1
    NKey                   : 16777458
    Stp Enable             : 0
    PwIndex                : 1
    Control Word           : disable
    BFD for PW             : unavailable
   *Peer Router ID         : 3.3.3.9
    Negotiation-vc-id      : 2
    Encapsulation Type     : vlan
    primary or secondary   : primary
    ignore-standby-state   : no
    VC Label               : 65584
    Peer Type              : dynamic
    Session                : up
    Tunnel ID              : 0x0000000001004c4b44
    Broadcast Tunnel ID    : --
    Broad BackupTunnel ID  : --
    CKey                   : 2
    NKey                   : 16777459
    Stp Enable             : 0
    PwIndex                : 2
    Control Word           : disable
    BFD for PW             : unavailable

    Interface Name         : GigabitEthernet<span>0/1/0</span>.1
    State                  : up
    Ac Block State         : unblocked
    Access Port            : false
    Last Up Time           : 2024/10/11 07:26:34
    Total Up Time          : 0 days, 0 hours, 20 minutes, 57 seconds

  **PW Information:

   *Peer Ip Address        : 2.2.2.9
    PW State               : up
    Local VC Label         : 65583
    Remote VC Label        : 48093
    Remote Control Word    : disable
    PW Type                : label
    Local  VCCV            : alert lsp-ping bfd
    Remote VCCV            : alert lsp-ping bfd
    Tunnel ID              : 0x0000000001004c4b43
    Broadcast Tunnel ID    : --
    Broad BackupTunnel ID  : --
    Ckey                   : 1
    Nkey                   : 16777458
    Main PW Token          : 0x0
    Slave PW Token         : 0x0
    Tnl Type               : ldp
    OutInterface           : GigabitEthernet<span>0/3/0</span>
    Backup OutInterface    : --
    Stp Enable             : 0
    Mac Flapping           : 0
    Monitor Group Name     : --
    PW Last Up Time        : 2024/10/11 07:30:02
    PW Total Up Time       : 0 days, 0 hours, 17 minutes, 29 seconds
   *Peer Ip Address        : 3.3.3.9
    PW State               : up
    Local VC Label         : 65584
    Remote VC Label        : 48091
    Remote Control Word    : disable
    PW Type                : label
    Local  VCCV            : alert lsp-ping bfd
    Remote VCCV            : alert lsp-ping bfd
    Tunnel ID              : 0x0000000001004c4b44
    Broadcast Tunnel ID    : --
    Broad BackupTunnel ID  : --
    Ckey                   : 2
    Nkey                   : 16777459
    Main PW Token          : 0x0
    Slave PW Token         : 0x0
    Tnl Type               : ldp
    OutInterface           : GigabitEthernet<span>0/2/0</span>
    Backup OutInterface    : --
    Stp Enable             : 0
    Mac Flapping           : 0
    Monitor Group Name     : --
    PW Last Up Time        : 2024/10/11 07:33:08
    PW Total Up Time       : 0 days, 0 hours, 14 minutes, 23 seconds</pre>
<p># Configure CE1 (10.1.1.1) to ping CE2 (10.1.1.2). The ping is successful.</p>
<pre class="screen">&lt;CE1&gt; <strong>ping 10.1.1.2</strong>
  PING 10.1.1.2: 56  data bytes, press CTRL_C to break
    Reply from 10.1.1.2: bytes=56 Sequence=1 ttl=255 time=90 ms
    Reply from 10.1.1.2: bytes=56 Sequence=2 ttl=255 time=77 ms
    Reply from 10.1.1.2: bytes=56 Sequence=3 ttl=255 time=34 ms
    Reply from 10.1.1.2: bytes=56 Sequence=4 ttl=255 time=46 ms
    Reply from 10.1.1.2: bytes=56 Sequence=5 ttl=255 time=94 ms
  --- 10.1.1.2 ping statistics ---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 34/68/94 ms </pre>
<p># Configure CE1 (10.1.1.1) to ping CE3 (10.1.1.3). The ping is successful.</p>
<pre class="screen">&lt;CE1&gt; <strong>ping 10.1.1.3</strong>
  PING 10.1.1.3: 56  data bytes, press CTRL_C to break
    Reply from 10.1.1.3: bytes=56 Sequence=1 ttl=255 time=90 ms
    Reply from 10.1.1.3: bytes=56 Sequence=2 ttl=255 time=77 ms
    Reply from 10.1.1.3: bytes=56 Sequence=3 ttl=255 time=34 ms
    Reply from 10.1.1.3: bytes=56 Sequence=4 ttl=255 time=46 ms
    Reply from 10.1.1.3: bytes=56 Sequence=5 ttl=255 time=94 ms
  --- 10.1.1.3 ping statistics ---
    5 packet(s) transmitted
    5 packet(s) received
    0.00% packet loss
    round-trip min/avg/max = 34/68/94 ms </pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0000002042693058__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li id="EN-US_TASK_0000002042693058__li714417045214053"><p><a name="EN-US_TASK_0000002042693058__li714417045214053"></a><a name="li714417045214053"></a>CE1 configuration file</p>
<pre class="screen">#
sysname CE1
#
interface GigabitEthernet<span>0/1/0</span>.1
 undo shutdown
 vlan-type dot1q 10
 ip address 10.1.1.1 255.255.255.0
#
return</pre>
</li><li><p>CE2 configuration file</p>
<pre class="screen">#
sysname CE2
#
interface GigabitEthernet<span>0/1/0</span>.1
 undo shutdown
 vlan-type dot1q 10
 ip address 10.1.1.2 255.255.255.0
#
return</pre>
</li><li>CE3 configuration file<pre class="screen">#
sysname CE3
#
interface GigabitEthernet<span>0/1/0</span>.1
 undo shutdown
 vlan-type dot1q 10
 ip address 10.1.1.3 255.255.255.0
#
return</pre>
</li><li><p>PE1 configuration file</p>
<pre class="screen">#
sysname PE1
#
mpls lsr-id 1.1.1.9
#
mpls
#
mpls l2vpn
#
vsi a2
 pwsignal ldp 
  vsi-id 2
  peer 2.2.2.9    
  peer 3.3.3.9
# 
mpls ldp
#
interface GigabitEthernet<span>0/1/0</span>.1
 undo shutdown
 vlan-type dot1q 10
 l2 binding vsi a2
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 172.16.1.1 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 172.16.2.1 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 1.1.1.9 255.255.255.255
#
ospf 1
 area 0.0.0.0
  network 1.1.1.9 0.0.0.0
  network 172.16.1.0 0.0.0.255
  network 172.16.2.0 0.0.0.255
#
return</pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#
sysname PE2
#
mpls lsr-id 2.2.2.9
#
mpls
#
mpls l2vpn
#
vsi a2
 pwsignal ldp  
  vsi-id 2     
  peer 1.1.1.9 
  peer 3.3.3.9 
# 
mpls ldp
#
interface GigabitEthernet<span>0/1/0</span>.1
 undo shutdown
 vlan-type dot1q 10
 l2 binding vsi a2
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 172.17.3.1 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 172.16.2.2 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 2.2.2.9 255.255.255.255
#
ospf 1
 area 0.0.0.0
  network 2.2.2.9 0.0.0.0
  network 172.16.2.0 0.0.0.255
  network 172.17.3.0 0.0.0.255
#
return</pre>
</li><li><p>PE3 configuration file</p>
<pre class="screen">#
sysname PE3
#
mpls lsr-id 3.3.3.9
#
mpls
#
mpls l2vpn
#
vsi a2
 pwsignal ldp  
  vsi-id 2     
  peer 1.1.1.9 
  peer 2.2.2.9 
# 
mpls ldp
#
interface GigabitEthernet<span>0/1/0</span>.1
 undo shutdown
 vlan-type dot1q 10
 l2 binding vsi a2
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 ip address 172.16.1.2 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/3/0</span>
 undo shutdown
 ip address 172.17.3.2 255.255.255.0
 mpls
 mpls ldp
#
interface LoopBack1
 ip address 3.3.3.9 255.255.255.255
#
ospf 1
 area 0.0.0.0
  network 3.3.3.9 0.0.0.0
  network 172.16.1.0 0.0.0.255
  network 172.17.3.0 0.0.0.255
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5029.html">Configuration Examples for VPLS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5030.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_6019.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>