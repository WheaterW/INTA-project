
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring an IPsec Profile">
<meta name="abstract" content="Configure an IPsec profile to encrypt transmitted data to improve network security.">
<meta name="description" content="Configure an IPsec profile to encrypt transmitted data to improve network security.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_cfg_dsvpn_0021.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_cfg_dsvpn_0008.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_cfg_dsvpn_0010.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="dsvpn,w00800033,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DSVPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DSVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="DSVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="DSVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369151">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring an IPsec Profile</title>
</head>
<body><a name="EN-US_TASK_0172369151"></a><a name="EN-US_TASK_0172369151"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring an IPsec Profile</h1>
<div class="taskbody"><p>Configure an IPsec profile to encrypt transmitted data to improve network security.</p>
<div class="context"><a name="EN-US_TASK_0172369151__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Data transmitted between the HQ and branches, and between branches can be encrypted to increase data security. Bind an IPsec profile to DSVPN so that an mGRE tunnel and an IPsec tunnel are dynamically established between branches.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For security purposes, you are advised not to use weak security algorithms in this feature. If you need to use such an algorithm, run the <a href="cmdqueryname=undo+crypto+weak-algorithm+disable"><b><span class="cmdname">undo crypto weak-algorithm disable</span></b></a> command to enable the weak security algorithm function.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369151__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>For details, see <a href="dc_vrp_ipsec_cfg_all_0011.html">Configuring an IKE Proposal</a>.</span></li><li><span>For details, see <a href="dc_vrp_ipsec_cfg_all_0012.html">Configuring an IKE Peer</a>.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>You do not need to run the <a href="cmdqueryname=remote-id"><b><span class="cmdname">remote-id</span></b></a> <i><span class="varname">remote-id</span></i> command to set a peer ID or the <a href="cmdqueryname=remote-address"><b><span class="cmdname">remote-address</span></b></a> [ <strong><span>authentication-address</span></strong> | <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> ] <i><span class="varname">remote-low-address</span></i> [ <i><span class="varname">remote-high-address</span></i> ] command to set a peer IP address for DSVPN.</p>
<p>You do not need to run the <b><span class="cmdname">sa binding </span></b><strong><span>vpn-instance </span></strong><em><i><span class="varname">vpn-instance-name</span></i></em> command for DSVPN. The IPsec tunnel uses the reserved VPN instance __VPN_MGRE_IPSEC__ by default.</p>
</div></div>
</p></li><li><span>For details, see <a href="dc_vrp_ipsec_cfg_all_0013.html">Configuring an IPsec Proposal</a>.</span></li><li><span>(Optional) Configure an IKE filter set.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ike+identity"><b><span class="cmdname">ike identity</span></b></a> <i><span class="varname">name</span></i></span><p><p>The local filter set is configured for IKE negotiation, and the IKE filter set view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ip+address"><b><span class="cmdname">ip address</span></b></a> <i><span class="varname">ip-address</span></i> { <i><span class="varname">mask</span></i> | <i><span class="varname">mask-length</span></i> }</span><p><p>An IP address is configured for the IKE peer that is allowed to access the local device.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=fqdn"><b><span class="cmdname">fqdn</span></b></a> <i><span class="varname">fqdn</span></i></span><p><p>The domain name of the IKE peer that is allowed to access the device is configured.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=user-fqdn"><b><span class="cmdname">user-fqdn</span></b></a> <i><span class="varname">user-fqdn</span></i></span><p><p>A host domain name is configured for the IKE peer that is allowed to access the device.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=dn"><b><span class="cmdname">dn</span></b></a> <i><span class="varname">dn</span></i></span><p><p>The identifiable name of a digital certificate is configured for the IKE peer that is allowed to access the device.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the IKE filter set view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure an IPsec profile.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipsec+policy"><b><span class="cmdname">ipsec policy</span></b></a> <i><span class="varname">policy-name</span></i> <strong><span>profile</span></strong></span><p><p>The IPsec profile view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=proposal"><b><span class="cmdname">proposal</span></b></a> <i><span class="varname">proposal-name</span></i></span><p><p>An IPsec proposal is applied in the IPsec profile.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ike-peer"><b><span class="cmdname">ike-peer</span></b></a> <i><span class="varname">peer-name</span></i></span><p><p>An IKE peer is applied in the IPsec profile.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=pfs"><b><span class="cmdname">pfs</span></b></a> { <strong><span>dh-group1</span></strong> | <strong><span>dh-group2</span></strong> | <strong><span>dh-group5</span></strong> | <strong><span>dh-group14</span></strong><span></span><span> | <strong><span>group15</span></strong> | <strong><span>group16</span></strong> | <strong><span>dh-group19</span></strong> | <strong><span>dh-group20</span></strong> | <strong><span>dh-group21</span></strong></span> }</span><p><p>PFS used for negotiation is configured.</p>
</p><p><p>If the local end uses PFS, the peer must perform PFS exchange when initiating a negotiation. The DH groups specified on the local and peer ends must be consistent. Otherwise, the negotiation fails.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=remote+ike-identity"><b><span class="cmdname">remote ike-identity</span></b></a> <i><span class="varname">name</span></i></span><p><p>A filter set that allows matching IKE peers to access the local device is configured.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the IPsec profile applies the previously defined IKE filter set (IKE identity), the negotiation is performed based on the IKE filter set. Otherwise, filter is not performed.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the IPsec profile view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Apply the IPsec profile.</span><p><p>For details, see <a href="dc_vrp_ipsec_cfg_all_0015.html">Applying an IPsec Policy</a>.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_cfg_dsvpn_0021.html">Configuring DSVPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_cfg_dsvpn_0008.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_cfg_dsvpn_0010.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>