
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Configuring Inter-AS IPv6 VPN Option C (Solution 1)">
<meta name="abstract" content="EBGP connections in multi-hop mode are established between PEs of different ASs to exchange VPNv6 routes.">
<meta name="description" content="EBGP connections in multi-hop mode are established between PEs of different ASs to exchange VPNv6 routes.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2051.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2089.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2084.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2085.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2086.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2087.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2088.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00847023">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0172369643">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Inter-AS IPv6 VPN Option C (Solution 1)</title>
</head>
<body><a name="EN-US_CONCEPT_0172369643"></a><a name="EN-US_CONCEPT_0172369643"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Inter-AS IPv6 VPN Option C (Solution 1)</h1>
<div><p>EBGP connections in multi-hop mode are established between PEs of different ASs to exchange VPNv6 routes.</p>
<div class="section"><h4 class="sectiontitle">Usage Scenario</h4><p>If the MPLS backbone network carrying VPN-IPv6 routes spans multiple ASs, inter-AS VPN is needed.</p>
<p>If each AS has a large number of VPN-IPv6 routes for exchange, inter-AS VPN Option C can be adopted to prevent ASBRs from becoming a bottleneck. Two solutions can be adopted to realize inter-AS VPN Option C:</p>
<ul><li>Solution 1: After learning the labeled BGP routes of the public network in the remote AS from the remote ASBR, the local ASBR allocates labels for these routes and advertises these routes to the IBGP peer PE that supports the label switching capability. A complete LSP is then set up.</li><li>Solution 2: No IBGP peer relationship is needed between the PE and ASBR. In this solution, an ASBR learns the labeled public BGP routes of the remote AS from the peer ASBR. Then these labeled public BGP routes are imported into IGP to trigger LDP LSP setup. This process can establish a complete LDP LSP between two PEs.</li></ul>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In inter-AS IPv6 VPN Option C, do not enable LDP between ASBRs. If LDP is enabled on the interfaces between ASBRs, LDP sessions are then established between the ASBRs. In this case, the ASBRs establish an egress LSP and send Mapping messages to the upstream ASBR. After receiving Mapping messages, the upstream ASBR establishes a transit LSP. If there are a large number of BGP routes, enabling LDP on the interfaces between ASBRs leads to the consumption of a large number of LDP labels.</p>
</div></div>
</div>
<div class="section"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring inter-AS IPv6 VPN Option C, complete the following tasks:</p>
<ul><li><p>Configure IGP for the MPLS backbone network in each AS to ensure IP connectivity for the backbone network in each AS.</p>
</li><li><p>Configure basic MPLS capabilities on the MPLS backbone network in each AS.</p>
</li><li><p>Configure MPLS LDP to establish an LSP between the PE and ASBR in the same AS.</p>
</li><li><p>Configure an IBGP peer relationship between the PE and ASBR in the same AS.</p>
</li><li><p><span><a href="dc_vrp_mpls-l3vpn-v6_cfg_2058.html">Configure a VPN instance</a></span> on each PE that connects to a CE and <span><a href="dc_vrp_mpls-l3vpn-v6_cfg_2059.html">bind the interface that connects a PE to a CE to the VPN instance on that PE</a></span>.</p>
</li><li><p>Configure IPv6 addresses for CE interfaces connected to PEs.</p>
</li></ul>
</div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2084.html">Enabling Exchange of the IPv4 Routes with Labels</a>
</dt>
<dd>
In inter-AS IPv6 VPN Option C, an inter-AS BGP LSP needs to be established on the backbone network, and BGP peers on the backbone network can exchange labeled IPv4 routes with each other.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2085.html">Configuring a Route-Policy to Control Label Distribution</a>
</dt>
<dd>
You need to configure a route-policy to control label allocation for the inter-AS BGP LSP. If labeled IPv4 routes are advertised to the PE of the local AS, you need to re-allocate the MPLS label to these routes. If routes sent by the PE of the local AS are advertised to the peer ASBR, you need to allocate the MPLS label to these routes.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2086.html">Establishing the MP-EBGP Peer Between PEs</a>
</dt>
<dd>
With extended community attributes added to BGP, MP-IBGP can advertise VPNv4 routes between PEs. PEs of different ASs are indirectly connected in most cases. Therefore, to set up the EBGP connections between them, you need to configure the permitted maximum hops between the PEs and ensure that the PEs are reachable.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2087.html">Configuring Route Exchange Between the PE and CE</a>
</dt>
<dd>
The routing protocol between a PE and a CE can be BGP4+, static route, RIPng, OSPFv3, or IS-ISv6.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2088.html">Verifying the Configuration of Inter-AS IPv6 VPN-Option C (Solution 1)</a>
</dt>
<dd>
After inter-AS IPv6 VPN Option C is configured, you can view information about all BGP peer relationships, VPNv6 routing information and IPv6 VPN routing information on the PE, and information about labeled IPv4 routes on the ASBR.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2000.html">BGP/MPLS IPv6 VPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2051.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2089.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>