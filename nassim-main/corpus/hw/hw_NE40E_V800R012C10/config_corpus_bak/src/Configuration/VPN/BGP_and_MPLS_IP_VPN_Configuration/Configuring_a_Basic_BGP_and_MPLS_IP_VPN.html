
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Basic BGP/MPLS IP VPN">
<meta name="abstract" content="A basic BGP/MPLS IP VPN applies to the scenario in which there is only one carrier or the backbone networks of multiple carriers belong to the same AS, and each device plays only one role, either PE, P, or CE. After a basic BGP/MPLS IP VPN is configured, different sites in a VPN can communicate with each other.">
<meta name="description" content="A basic BGP/MPLS IP VPN applies to the scenario in which there is only one carrier or the backbone networks of multiple carriers belong to the same AS, and each device plays only one role, either PE, P, or CE. After a basic BGP/MPLS IP VPN is configured, different sites in a VPN can communicate with each other.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l3vpn_cfg_0001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0016.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0155.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0156.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_2005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0157.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0158.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0300.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0159.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,l00468467,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00830487">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369246">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Basic BGP/MPLS IP VPN</title>
</head>
<body><a name="EN-US_TASK_0172369246"></a><a name="EN-US_TASK_0172369246"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Basic BGP/MPLS IP VPN</h1>
<div class="taskbody"><p>A basic BGP/MPLS IP VPN applies to the scenario in which there is only one carrier or the backbone networks of multiple carriers belong to the same AS, and each device plays only one role, either PE, P, or CE. After a basic BGP/MPLS IP VPN is configured, different sites in a VPN can communicate with each other.</p>
<div class="context"><a name="EN-US_TASK_0172369246__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>After a basic BGP/MPLS IP VPN is configured, the network can provide VPN services for users so that multiple private networks can communicate across the backbone network of the carrier. VPN routes are isolated from the public network routes on the backbone network, and the routes of VPN instances are isolated from each other.</p>
<div class="p">On the network shown in <a href="#EN-US_TASK_0172369246__fig1224152141810">Figure 1</a>, the following functions need to be implemented:<ul><li><p>Site 1 can communicate with only Site 3.</p>
</li><li><p>Site 2 can communicate with only Site 4.</p>
</li><li><p>The MPLS backbone network is unaware of the VPN routes in each site.</p>
</li></ul>
To meet the preceding requirements, configure a basic BGP/MPLS IP VPN by adding Site 1 and Site 3 to a VPN (VPN 1) and Site 2 and Site 4 to another VPN (VPN 2). CEs and other devices deployed at sites only advertise and receive VPN routes. They are unaware of the public network. Ps residing on the public network do not receive VPN routes. PEs manage VPN routes and public network routes separately. VPN data packets are transmitted transparently over tunnels between the sites within the same VPN. The devices on the public network do not know the contents of VPN data packets, ensuring VPN data security.</div>
<div class="fignone" id="EN-US_TASK_0172369246__fig1224152141810"><a name="EN-US_TASK_0172369246__fig1224152141810"></a><a name="fig1224152141810"></a><span class="figcap"><b>Figure 1 </b>BGP/MPLS IP VPN</span><br><span><img class="vsd" src="figure/en-us_image_0000001431152178.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172369246__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring a basic BGP/MPLS IP VPN, complete the following tasks:</p>
<ul><li><p>Configure the routing policy to control the route receiving and sending of the VPN instance IPv4 address family if needed.</p>
</li><li><p>Configure an IGP on the PEs and Ps of the MPLS backbone network to ensure IP connectivity on the backbone network.</p>
</li><li><p>Establish non-LDP LSP tunnels based on tunnel policies or LDP LSPs on the MPLS backbone network.</p>
</li><li><p>Configure IP addresses on interfaces that connect CEs to PEs.</p>
</li></ul>
</div></div>
</div>

<ul class="ullinks">
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0155.html">Configuring a VPN Instance</a>
</dt>
<dd>
A VPN instance can be configured on a PE to manage VPN routes.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0156.html">Binding Interfaces to a VPN Instance</a>
</dt>
<dd>
After an interface is bound to a VPN instance, the interface becomes a part of the VPN. Packets entering the interface will be forwarded based on the VRF table of the VPN.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_2005.html">(Optional) Configuring a Router ID for a BGP-VPN Instance IPv4 Address Family</a>
</dt>
<dd>
You can configure different router IDs for BGP VPN instance IPv4 address families on the same device.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0157.html">Establishing MP-IBGP Peer Relationships Between PEs</a>
</dt>
<dd>
By introducing extended community attributes into BGP, MP-IBGP can advertise VPNv4 routes between PEs.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0158.html">Configuring Route Exchange Between PEs and CEs</a>
</dt>
<dd>
To enable CEs to communicate, the PEs and CEs must be capable of exchanging routes.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0300.html">(Optional) Configuring One-Label-per-Next-Hop Label Distribution</a>
</dt>
<dd>
To save label resources on a PE, configure one-label-per-next-hop label distribution on the PE. Only one label is allocated to the VPNv4 routes that have the same next-hop address and outgoing label.</dd>
</dl>
<dl>
<dt>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0159.html">Verifying the Configuration</a>
</dt>
<dd>
After configuring a basic BGP/MPLS IP VPN, check information about the VPN instance IPv4 address family created on the PE, including the RD and other attributes. You can also check information about IPv4 VPN routes to the local and remote sites on the PE and CE.</dd>
</dl>
</ul>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0000.html">BGP/MPLS IP VPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_l3vpn_cfg_0001.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0016.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>