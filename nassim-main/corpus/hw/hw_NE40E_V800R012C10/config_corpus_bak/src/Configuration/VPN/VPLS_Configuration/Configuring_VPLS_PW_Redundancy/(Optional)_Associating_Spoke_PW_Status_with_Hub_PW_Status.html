
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Associating Spoke PW Status with Hub PW Status">
<meta name="abstract" content="After spoke PW status is associated with hub PW status, a spoke PW will go down if the associated hub PWs all go down, triggering a primary/secondary spoke PW switchover.">
<meta name="description" content="After spoke PW status is associated with hub PW status, a spoke PW will go down if the associated hub PWs all go down, triggering a primary/secondary spoke PW switchover.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5049.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5051.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5053.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPLS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370179">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Associating Spoke PW Status with Hub PW Status</title>
</head>
<body><a name="EN-US_TASK_0172370179"></a><a name="EN-US_TASK_0172370179"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1"><span>(Optional)</span> Associating Spoke PW Status with Hub PW Status</h1>
<div class="taskbody"><p>After spoke PW status is associated with hub PW status, a spoke PW will go down if the associated hub PWs all go down, triggering a primary/secondary spoke PW switchover.</p>
<div class="context"><a name="EN-US_TASK_0172370179__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Context</h4><p><span>In a VPLS PW redundancy scenario: </span>If all the hub PWs of an SPE where the primary spoke PW resides go down but the primary spoke PW is still up, traffic still travels along the primary spoke PW to the SPE. Because all hub PWs of the SPE are down, the SPE discards received traffic. To prevent this situation, associate spoke PW status with hub PW status on the SPE where the primary spoke PW resides. Then, after all the hub PWs of the SPE where the primary spoke PW resides go down, the SPE instructs the UPE to switch traffic to the secondary spoke PW.</p>
<div class="fignone"><span class="figcap"><b>Figure 1 </b>VPLS PW<span> redundancy</span> networking</span><br><span><img class="vsd" src="figure/en-us_image_0192710678.png" width="NaN" height="NaN"></span></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370179__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=vsi"><b><span class="cmdname">vsi</span></b></a> <i><span class="varname">vsi-name</span></i></span><p><p>The view of the created VSI is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=pwsignal"><b><span class="cmdname">pwsignal</span></b></a> <strong><span>ldp</span></strong></span><p><p>The VSI-LDP view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a><i><span class="varname"> peer-address</span></i> [ <strong><span>negotiation-vc-id</span></strong> <i><span class="varname">vc-id</span></i> ] <strong><span>pw</span></strong> <i><span class="varname">pw-name</span></i></span><p><p>A PW is created, and its view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=track+hub-pw"><b><span class="cmdname">track hub-pw</span></b></a></span><p><p>Spoke PW status is associated with hub PW status.</p>
</p><p><p>This command applies only to spoke PWs. Ensure that spoke PWs have been created using the <a href="cmdqueryname=peer"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">peer-address</span></i> [ <strong><span>negotiation-vc-id</span></strong> <i><span class="varname">vc-id</span></i> ] [ <strong><span>tnl-policy</span></strong> <i><span class="varname">policy-name</span></i> ] [ [ <strong><span>endpoint</span></strong> <i><span class="varname">endpoint4-address</span></i> ] <strong><span>color</span></strong> <i><span class="varname">color-value</span></i> ] <strong><span>upe</span></strong> command.</p>
<p>After this command is run, SPE1 instructs the UPE to switch traffic to the secondary spoke PW after detecting that all connected hub PWs are down. The <a href="cmdqueryname=protect-group"><b><span class="cmdname">protect-group</span></b></a> <i><span class="varname">group-name</span></i> and <a href="cmdqueryname=protect-mode+pw-redundancy"><b><span class="cmdname">protect-mode pw-redundancy</span></b></a> <strong><span>master</span></strong> commands must have been run to create a PW protection group with the master/slave PW redundancy mode, and the primary and secondary PWs must have been added to the group.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5049.html">Configuring VPLS PW Redundancy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5051.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpls_cfg_5053.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>