
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring the Master/Slave Mode of PW Redundancy">
<meta name="abstract" content="PW redundancy in master/slave mode implements fault isolation for public and AC links.">
<meta name="description" content="PW redundancy in master/slave mode implements fault isolation for public and AC links.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="VPWS">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369837">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring the Master/Slave Mode of PW Redundancy </title>
</head>
<body><a name="EN-US_TASK_0172369837"></a><a name="EN-US_TASK_0172369837"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring the Master/Slave Mode of PW Redundancy </h1>
<div class="taskbody"><p>PW redundancy in master/slave mode implements fault isolation for public and AC links.</p>
<div class="context"><a name="EN-US_TASK_0172369837__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When creating a PW on the local end, configure the PWs that are connected to the two remote PEs. The primary/secondary PW status is manually specified on a local PE and the remote master PE and is notified to the remote slave PE connected to the local PE. The combined usage of PW redundancy in master/slave mode and the bypass PW can prevent network-side faults from affecting the AC side and AC-side faults from affecting the network side.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>This configuration is applicable only to the master/slave PW redundancy mode. If only the independent PW redundancy mode is used, skip this configuration.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369837__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Create a primary PW. See <a href="dc_vrp_vpws_cfg_3006.html">Configuring a VPWS Connection</a>.</span></li><li><span>Create a secondary PW. For details, see <a href="dc_vrp_vpws_cfg_5002.html">Configuring a Secondary PW</a>.</span></li><li><span>Configure the master/slave PW redundancy mode.</span><ol type="a"><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the AC interface view.</span></li><li><span>Run the <a href="cmdqueryname=mpls+l2vpn+redundancy"><b><span class="cmdname">mpls l2vpn redundancy</span></b></a> <strong><span>master</span></strong> command to configure the master/slave PW redundancy mode.</span></li><li><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li></ol>
</li><li><span>(Optional) Configure VPWS switching. For details, see <a href="dc_vrp_vpws_cfg_5001.html">Configuring VPWS Switching</a>.</span><p><p>If multi-segment PWs need to be set up, you must configure VPWS switching on each SPE. PW redundancy supports only dynamic VPWS switching.</p>
</p></li><li><span>Configure a bypass PW.</span><ol type="a"><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the AC interface view.</span></li><li class="substepexpand" id="EN-US_TASK_0172369837__substep40797152214052"><span id="EN-US_TASK_0172369837__cmd630450271214052">Run the <span><span><a href="cmdqueryname=mpls+l2vc"><b><span class="cmdname" id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdname735282380214052">mpls l2vc</span></b></a></span> { <i><span class="varname" id="EN-US_TASK_0172369837__en-us_task_0172369883_varname1387664703214052">ip-address</span></i> | <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname19306074214052">pw-template</span></strong> <i><span class="varname" id="EN-US_TASK_0172369837__en-us_task_0172369883_varname569278918214052">template-name</span></i> } <sup id="EN-US_TASK_0172369837__en-us_task_0172369883_sup545954554214052">*</sup> <i><span class="varname" id="EN-US_TASK_0172369837__en-us_task_0172369883_varname1458175040214052">vc-id</span></i> [ <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname1966999380214052">tunnel-policy</span></strong> <i><span class="varname" id="EN-US_TASK_0172369837__en-us_task_0172369883_varname606300340214052">tnl-policy-name</span></i><span> [ { <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname9892171915317">endpoint</span></strong> <i><span class="varname" id="EN-US_TASK_0172369837__en-us_task_0172369883_varname1989219197314">endpoint-address</span></i> | [ <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname0145151343710">endpoint</span></strong> <i><span class="varname" id="EN-US_TASK_0172369837__en-us_task_0172369883_varname1623463119378">endpoint4-address</span></i> ] } <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname17893519937">color</span></strong> <i><span class="varname" id="EN-US_TASK_0172369837__en-us_task_0172369883_varname1189341918319">color-value</span></i> ]</span> | [ <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname1616321159214052">control-word</span></strong> | <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname250921717214052">no-control-word</span></strong> ] | [ <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname1759897093214052">raw</span></strong> | <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname2118207766214052">tagged</span></strong> ] | <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname1083301451214052">access-port</span></strong> | <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname1969676296214052">ignore-standby-state</span></strong> ] <sup id="EN-US_TASK_0172369837__en-us_task_0172369883_sup556197484214052">*</sup> <strong><span id="EN-US_TASK_0172369837__en-us_task_0172369883_cmdparmname218800319214052">bypass</span></strong></span> command to configure a bypass PW.</span><p></p></li></ol>
</li><li><span>(Optional) Run <a href="cmdqueryname=mpls+l2vpn+stream-dual-receiving"><b><span class="cmdname">mpls l2vpn stream-dual-receiving</span></b></a></span><p><p>A CSG is enabled to receive packets on both primary and secondary PWs, preventing packet loss during a primary/secondary PW switchback.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=mpls+l2vpn+switchover"><b><span class="cmdname">mpls l2vpn switchover</span></b></a></span><p><p>Traffic is switched from the primary PW to the secondary PW.</p>
<p>In the scenario where PW redundancy in master/slave mode is configured, traffic is transmitted through the primary PW, and the secondary PW functions normally. To forcibly switch traffic from the primary PW to the secondary PW (for example, because of a device upgrade or service re-deployment), you can use this command. To switch traffic back to the primary PW (for example, after the device is upgraded), you can run the undo form of this command to forcibly switch traffic from the secondary PW to the primary PW.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5007.html">Configuring PW Redundancy
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_vpws_cfg_5009.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>