
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Associating DFs with BFD">
<meta name="abstract" content="If a CE is dual-homed to PEs, you can associate the DF with BFD. If an access link fails, this configuration accelerates primary/backup DF switching.">
<meta name="description" content="If a CE is dual-homed to PEs, you can associate the DF with BFD. If an access link fails, this configuration accelerates primary/backup DF switching.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0110.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_evpn_cfg_0005.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="p00915595,w00800033,w00556928,l00468467,w00606909,evpnvrp,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370445">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Associating DFs with BFD</title>
</head>
<body><a name="EN-US_TASK_0172370445"></a><a name="EN-US_TASK_0172370445"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Associating DFs with BFD</h1>
<div class="taskbody"><p>If a CE is dual-homed to PEs, you can associate the DF with BFD. If an access link fails, this configuration accelerates primary/backup DF switching.</p>
<div class="context"><a name="EN-US_TASK_0172370445__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In a CE dual-homing scenario, to speed up primary/backup DF switching if an access link fails, you can create a BFD session between the two PEs, specify an access-side Eth-Trunk<span> or PW VE</span> interface as the interface to be monitored by the BFD session, and then associate the interface with the BFD session. After the configurations are complete, if the access link connected to the PE on which the primary DF resides fails, BFD can rapidly detect the fault and transmit the fault status to the other PE through the BFD session. This allows the backup DF to quickly become the primary DF.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370445__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a></span><p><p>BFD is enabled globally, and the global BFD view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=bfd"><b><span class="cmdname">bfd</span></b></a> <i><span class="varname">bfd-session-name</span></i> <strong><span>bind peer-ip</span></strong> <i><span class="varname">pe-ip-address</span></i> <strong><span>track-interface</span></strong> <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The binding between a BFD session and a peer IP address is created, and the BFD session view is displayed. <i><span class="varname">pe-ip-address</span></i> indicates the IP address of the remote PE, and <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> indicates the type and number of the Eth-Trunk<span> or PW VE interface</span> on the access side.</p>
</p></li><li><span>Run the following commands to configure BFD session discriminators:</span><p><ol type="a"><li>To set the local discriminator, run the <a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> <strong><span>local</span></strong> <i><span class="varname">discr-value</span></i> command.</li><li>To set the remote discriminator, run the <a href="cmdqueryname=discriminator"><b><span class="cmdname">discriminator</span></b></a> <strong><span>remote</span></strong> <i><span class="varname">discr-value</span></i> command.</li></ol>
<p>The local discriminator at one end must be the remote discriminator at the other end.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Return to the system view.</p>
</p></li><li><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <span>{ </span><strong><span>eth-trunk</span></strong> <i><span class="varname">trunk-id</span></i><span> |<strong><span> pw-ve</span></strong> <i><span class="varname">interface-number</span></i> }</span></span><p><p>The Eth-Trunk interface view<span> or PW VE interface view</span> is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=es+track+bfd"><b><span class="cmdname">es track bfd</span></b></a> <i><span class="varname">bfd-session-name</span></i></span><p><p>The interface is associated with the BFD session.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0003.html">Configuring EVPN VPLS over MPLS (Common EVPN Instance)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0110.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_evpn_cfg_0005.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>