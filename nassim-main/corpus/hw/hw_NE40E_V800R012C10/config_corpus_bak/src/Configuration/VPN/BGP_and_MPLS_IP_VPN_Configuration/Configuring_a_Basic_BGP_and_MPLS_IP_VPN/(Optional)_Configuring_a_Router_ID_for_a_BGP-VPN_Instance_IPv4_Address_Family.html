
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring a Router ID for a BGP-VPN Instance IPv4 Address Family">
<meta name="abstract" content="You can configure different router IDs for BGP VPN instance IPv4 address families on the same device.">
<meta name="description" content="You can configure different router IDs for BGP VPN instance IPv4 address families on the same device.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0154.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0156.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0157.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,l00468467,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00425560">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369255">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring a Router ID for a BGP-VPN Instance IPv4 Address Family</title>
</head>
<body><a name="EN-US_TASK_0172369255"></a><a name="EN-US_TASK_0172369255"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">(Optional) Configuring a Router ID for a BGP-VPN Instance IPv4 Address Family</h1>



<div class="taskbody"><p>You can configure different router IDs for BGP VPN instance
IPv4 address families on the same device.</p>

<div class="context"><a name="EN-US_TASK_0172369255__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>By default, no router ID is configured for a BGP-VPN instance
IPv4 address family, and the BGP router ID is used. As a result, different
BGP-VPN instance IPv4 address families on the same device have the
same router ID. In some cases, different router IDs need to be configured
for different BGP-VPN instance IPv4 address families. For example,
BGP peer relationships need to be established between different BGP-VPN
instance IPv4 address families on the same PE.</p>
<div class="p">Two methods are
available for configuring a router ID for a BGP-VPN instance IPv4
address family. Choose either of the following methods as required:<ul><li><p>Configure router IDs for all BGP-VPN instance IPv4 address
families.</p>
</li><li><p>Configure a router ID for a specified BGP-VPN instance IPv4
address family.</p>
</li></ul>
</div>
<p>The router ID configured in the BGP-VPN instance IPv4
address family view takes precedence over the router ID configured
in the BGP view.</p>
<div class="notice"><span class="noticetitle"><img src="../../../../public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p>If a BGP session has been
established in a BGP-VPN instance IPv4 address family, changing or
deleting the configured router ID resets the BGP session.</p>
</div></div>
</div></div>

<div class="steps-unordered"><a name="EN-US_TASK_0172369255__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul>
<li><span>Configure router IDs for all BGP-VPN instance IPv4 address
families.</span>
<ol>
<li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span>
<p><p>The system view is displayed.</p>
</p>
</li>
<li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span>
<p><p>The BGP view is displayed.</p>
</p>
</li>
<li class="substepexpand"><span>Run <span><a href="cmdqueryname=router-id"><b><span class="cmdname">router-id</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <strong><span>vpn-instance auto-select</span></strong> }</span></span>
<p><p>Automatic router ID selection is configured for all
BGP-VPN instance IPv4 address families.</p>
<p>In the BGP view, the <a href="cmdqueryname=router-id"><b><span class="cmdname">router-id</span></b></a> <strong><span>vpn-instance auto-select</span></strong> command
takes precedence over the <a href="cmdqueryname=router-id"><b><span class="cmdname">router-id</span></b></a> <i><span class="varname">ipv4-address</span></i> command.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Rules for automatically
selecting a router ID for a BGP VPN instance IPv4 address family are
as follows:</p>
<ul><li><p>If the loopback interfaces configured with IP addresses are
bound to the VPN instance enabled with the IPv4 address family, the
highest IP address among the IP addresses of the loopback interfaces
is selected as the router ID.</p>
</li><li><p>If no loopback interfaces configured with IP addresses are
bound to the VPN instance enabled with the IPv4 address family, the
highest IP address among the IP addresses of other interfaces bound
to the VPN instance is selected as the router ID, regardless of whether
the interface is Up or Down.</p>
</li></ul>
</div></div>
</p>
</li>
<li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span>
<p><p>The configuration is
committed.</p>
</p>
</li>
</ol>

</li>
<li><span>Configure a router ID for a specified BGP-VPN instance
IPv4 address family.</span>
<ol>
<li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span>
<p><p>The system view is displayed.</p>
</p>
</li>
<li class="substepexpand"><span>Run <span><a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span></span>
<p><p>The BGP view is displayed.</p>
</p>
</li>
<li class="substepexpand"><span>Run <span><a href="cmdqueryname=ipv4-family"><b><span class="cmdname">ipv4-family</span></b></a> <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i></span></span>
<p><p>The BGP-VPN instance IPv4 address family view is displayed.</p>
</p>
</li>
<li class="substepexpand"><span>Run <span><a href="cmdqueryname=router-id"><b><span class="cmdname">router-id</span></b></a> { <i><span class="varname">ipv4-address</span></i> | <strong><span>auto-select</span></strong> }</span></span>
<p><p>A router ID or automatic route ID selection is configured
for the current BGP-VPN instance IPv4 address family.</p>
</p>
</li>
<li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span>
<p><p>The configuration is
committed.</p>
</p>
</li>
</ol>

</li>
</ul></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0154.html">Configuring a Basic BGP/MPLS IP VPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0156.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0157.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>