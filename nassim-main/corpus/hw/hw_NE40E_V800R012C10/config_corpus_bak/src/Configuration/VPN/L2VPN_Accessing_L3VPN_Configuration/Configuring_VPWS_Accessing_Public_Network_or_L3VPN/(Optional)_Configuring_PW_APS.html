
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring PW APS">
<meta name="abstract" content="This section describes how to configure PW APS, so that an active/standby PW switchover can be performed if a PW fails.">
<meta name="description" content="This section describes how to configure PW APS, so that an active/standby PW switchover can be performed if a PW fails.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5003.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5005.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5006.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370337">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring PW APS</title>
</head>
<body><a name="EN-US_TASK_0172370337"></a><a name="EN-US_TASK_0172370337"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring PW APS</h1>
<div class="taskbody" id="taskbody1715741873214054"><p id="shortdesc2088659141214054">This section describes how to configure PW APS, so that an active/standby PW switchover can be performed if a PW fails.</p>
<div class="context"><a name="EN-US_TASK_0172370337__1.4.1"></a><a name="1.4.1"></a>
<div class="p" id="EN-US_TASK_0172370337__context3525113551318"><h4 class="sectiontitle">Usage Scenario</h4><p id="EN-US_TASK_0172370337__p12194183141415">On a network where a PW protection group is configured, you can configure PW APS to ensure that if one PW in the protection group fails, the other PW takes over to forward traffic. To accelerate PW fault detection, configure <a href="dc_vrp_mplsoam_cfg_0001.html">MPLS OAM</a> or <a href="dc_vrp_mpls-tp_oam_cfg_0001.html">MPLS-TP OAM</a>.</p>
<p id="EN-US_TASK_0172370337__p171940351416">Perform the following steps on the PEs at both ends of a PW:</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370337__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol id="EN-US_TASK_0172370337__steps1438706067214054"><li id="EN-US_TASK_0172370337__step1806750872214054"><span id="EN-US_TASK_0172370337__cmd643137124214054">Configure PW APS.</span><ol type="a" id="EN-US_TASK_0172370337__substeps1708553101214054"><li id="EN-US_TASK_0172370337__substep1783888284214054"><span id="EN-US_TASK_0172370337__cmd791193421214054">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1270805525214054">system-view</span></b></a> command to enter the system view.</span></li><li id="EN-US_TASK_0172370337__substep1482404163214054"><span id="EN-US_TASK_0172370337__cmd1808978694214054">Run the <a href="cmdqueryname=pw-aps"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname444257574214054">pw-aps</span></b></a> <i><span class="varname" id="EN-US_TASK_0172370337__varname189127530339">apsId</span></i> command to create a PW APS instance.</span></li><li id="EN-US_TASK_0172370337__substep148624487214054"><span id="EN-US_TASK_0172370337__cmd408271548214054">(Optional) Run the <a href="cmdqueryname=description"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname828298460214054">description</span></b></a> <i><span class="varname" id="EN-US_TASK_0172370337__varname355901913271">text</span></i> command to configure a description for the PW APS instance.</span></li><li id="EN-US_TASK_0172370337__substep2042235221214054"><span id="EN-US_TASK_0172370337__cmd616229346214054">Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname347355239214054">quit</span></b></a> command to return to the system view.</span></li><li id="EN-US_TASK_0172370337__substep411567940214054"><span id="EN-US_TASK_0172370337__cmd177540593214054">Run the <a href="cmdqueryname=interface"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1951732145214054">interface</span></b></a> <i><span class="varname" id="EN-US_TASK_0172370337__varname560768773214054">interface-type interface-number</span></i> command to enter the view of the AC interface configured with a PW protection group.</span></li><li id="EN-US_TASK_0172370337__substep1535452497214054"><span id="EN-US_TASK_0172370337__cmd39131080214054">Run the <a href="cmdqueryname=mpls+l2vpn+pw-aps"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1526545815214054">mpls l2vpn pw-aps</span></b></a> <i><span class="varname" id="EN-US_TASK_0172370337__varname12118175545215">apsId</span></i> { <strong><span id="EN-US_TASK_0172370337__cmdparmname1170274517214054">admin</span></strong> | <strong><span id="EN-US_TASK_0172370337__cmdparmname1018813250214054">reference</span></strong> } command to bind the PW protection group to the PW APS instance.</span></li><li id="EN-US_TASK_0172370337__substep1112091843214054"><span id="EN-US_TASK_0172370337__cmd1377425460214054">Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname731182334214054">quit</span></b></a> command to return to the system view.</span></li><li id="EN-US_TASK_0172370337__substep2038381941214054"><span id="EN-US_TASK_0172370337__cmd278661796214054">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname613841472214054">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li id="EN-US_TASK_0172370337__step523035221214054"><span id="EN-US_TASK_0172370337__cmd1002392176214054">Configure PW OAM to detect PW faults.</span><p><div class="p" id="EN-US_TASK_0172370337__p1635165767214054"><ul id="EN-US_TASK_0172370337__ul882815310214054"><li id="EN-US_TASK_0172370337__li464551459214054">Configure MPLS OAM to detect PW faults.<ol type="a" id="EN-US_TASK_0172370337__ol849417354214054"><li id="EN-US_TASK_0172370337__li2052094233214054">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1009676425214054">system-view</span></b></a> command to enter the system view.</li><li id="EN-US_TASK_0172370337__li1130106075214054">Run the <a href="cmdqueryname=mpls"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1015019184214054">mpls</span></b></a> command to enter the MPLS view.</li><li id="EN-US_TASK_0172370337__li1388201818214054">Run the <a href="cmdqueryname=mpls+oam"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1365890270214054">mpls oam</span></b></a> command to enable MPLS OAM globally.</li><li id="EN-US_TASK_0172370337__li1134850116214054">Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname284875806214054">quit</span></b></a> command to return to the system view.</li><li id="EN-US_TASK_0172370337__li7943426214054">Run the <a href="cmdqueryname=mpls-oam"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1473858654214054">mpls-oam</span></b></a> command to enter the MPLS OAM view.</li><li id="EN-US_TASK_0172370337__li15568191985011">Run the <a href="cmdqueryname=mpls+oam+l2vc"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1757493555018">mpls oam l2vc peer-ip</span></b></a> <i><span class="varname" id="EN-US_TASK_0172370337__varname257413351503">peer-ip</span></i> <strong><span id="EN-US_TASK_0172370337__cmdparmname115742355505">vc-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname55745356504">vc-id</span></i> <strong><span id="EN-US_TASK_0172370337__cmdparmname17574335165012">vc-type</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname157453512507">vc-type</span></i> [ <strong><span id="EN-US_TASK_0172370337__cmdparmname457411354503">remote-peer-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname657410358509">remote-peer-ip</span></i> <strong><span id="EN-US_TASK_0172370337__cmdparmname12574133515013">remote-vc-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname8574193595016">remote-vc-id</span></i> <strong><span id="EN-US_TASK_0172370337__cmdparmname125747351508">remote-vc-type</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname857443513508">remote-vc-type</span></i> ] <strong><span id="EN-US_TASK_0172370337__cmdparmname11574735135018">type</span></strong> { <strong><span id="EN-US_TASK_0172370337__cmdparmname757420357509">cv</span></strong> | <strong><span id="EN-US_TASK_0172370337__cmdparmname175742358501">ffd</span></strong> <strong><span id="EN-US_TASK_0172370337__cmdparmname8574335195016">frequency</span></strong> { <strong><span id="EN-US_TASK_0172370337__cmdparmname11574103545013">3</span></strong> | <strong><span id="EN-US_TASK_0172370337__cmdparmname7574123513504">10</span></strong> | <strong><span id="EN-US_TASK_0172370337__cmdparmname1574203565019">20</span></strong> | <strong><span id="EN-US_TASK_0172370337__cmdparmname125741356509">50</span></strong> | <strong><span id="EN-US_TASK_0172370337__cmdparmname1457413354501">100</span></strong> | <strong><span id="EN-US_TASK_0172370337__cmdparmname2574113585016">200</span></strong> | <strong><span id="EN-US_TASK_0172370337__cmdparmname3574133520508">500</span></strong> } } [ <strong><span id="EN-US_TASK_0172370337__cmdparmname95741835185011">auto-protocol</span></strong> [ <strong><span id="EN-US_TASK_0172370337__cmdparmname12575183515013">overtime</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname1657563575013">overtime</span></i> ] ] [ <strong><span id="EN-US_TASK_0172370337__cmdparmname357593516508">compatibility-mode</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname1057583555010">compati-mode-val</span></i> ] [ <strong><span id="EN-US_TASK_0172370337__cmdparmname1957503575019">bdi-frequency</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname185751735165015">bdi-frep-val</span></i> ] [ <strong><span id="EN-US_TASK_0172370337__cmdparmname557593517507">exp</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname45751435165015">exp-value</span></i> ] command to configure MPLS OAM parameters at both ends of the PW.</li><li id="EN-US_TASK_0172370337__li1667596744214054">Run the <a href="cmdqueryname=mpls+oam+l2vc+enable"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname473532667214054">mpls oam l2vc enable</span></b></a> { <strong><span id="EN-US_TASK_0172370337__cmdparmname898525150214054">send</span></strong> | <strong><span id="EN-US_TASK_0172370337__cmdparmname1000921855214054">receive</span></strong> } <strong><span id="EN-US_TASK_0172370337__cmdparmname2037538562214054">peer-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname1341779319214054">peer-ip</span></i> <strong><span id="EN-US_TASK_0172370337__cmdparmname1390768969214054">vc-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname1975897939214054">vc-id</span></i> <strong><span id="EN-US_TASK_0172370337__cmdparmname1766513841214054">vc-type</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname2127706820214054">vc-type</span></i> command to enable OAM on the PW endpoint.</li><li id="EN-US_TASK_0172370337__li1476229149214054">Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname111515802214054">quit</span></b></a> command to return to the system view.</li><li id="EN-US_TASK_0172370337__li641773877214054">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname576909521214054">commit</span></b></a> command to commit the configuration.</li></ol>
</li><li id="EN-US_TASK_0172370337__li1589025853214054">Configure MPLS-TP OAM to detect PW faults.<ol type="a" id="EN-US_TASK_0172370337__ol12730335214054"><li id="EN-US_TASK_0172370337__li232403975214054">Run the <a href="cmdqueryname=system-view"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1776354887214054">system-view</span></b></a> command to enter the system view.</li><li id="EN-US_TASK_0172370337__li569971905214054">Run the <a href="cmdqueryname=mpls-tp+meg"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1476280924214054">mpls-tp meg</span></b></a> <i><span class="varname" id="EN-US_TASK_0172370337__varname492635671214054">meg-name</span></i> command to create a MEG and enter its view.</li><li id="EN-US_TASK_0172370337__li1061602013214054">Run the <a href="cmdqueryname=me+l2vc"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1456751577214054">me l2vc</span></b></a> <strong><span id="EN-US_TASK_0172370337__cmdparmname1497242253214054">peer-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname2109006011214054">peer-ip</span></i> <strong><span id="EN-US_TASK_0172370337__cmdparmname972631401214054">vc-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname278338712214054">vc-id</span></i> <strong><span id="EN-US_TASK_0172370337__cmdparmname343834812214054">vc-type</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname1939454065214054">vc-type</span></i> [ <strong><span id="EN-US_TASK_0172370337__cmdparmname1431924734214054">remote-peer-ip</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname2132681579214054">remote-peer-ip</span></i> | <strong><span id="EN-US_TASK_0172370337__cmdparmname1373760770214054">ttl</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname504115207214054">ttl-number</span></i> ] <strong><span id="EN-US_TASK_0172370337__cmdparmname877571060214054">mep-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname1160364519214054">mep-id</span></i> <strong><span id="EN-US_TASK_0172370337__cmdparmname521150805214054">remote-mep-id</span></strong> <i><span class="varname" id="EN-US_TASK_0172370337__varname1984760078214054">remote-mep-id</span></i> command to configure an ME instance and bind it to the PW.</li><li id="EN-US_TASK_0172370337__li1312317587214054">Run the <a href="cmdqueryname=cc+send+enable"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1579167419214054">cc send enable</span></b></a> command to enable the local end to send CC/CV packets.</li><li id="EN-US_TASK_0172370337__li115025487214054">Run the <a href="cmdqueryname=cc+receive+enable"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname300799157214054">cc receive enable</span></b></a> command to enable the local end to receive CC/CV packets.</li><li id="EN-US_TASK_0172370337__li86999575214054">Run the <a href="cmdqueryname=quit"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1427852218214054">quit</span></b></a> command to return to the system view.</li><li id="EN-US_TASK_0172370337__li328328068214054">Run the <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172370337__cmdname1825445023214054">commit</span></b></a> command to commit the configuration.</li></ol>
</li></ul>
</div>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5003.html">Configuring VPWS Accessing Public Network or L3VPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5005.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5006.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>