
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring a Tunnel Policy">
<meta name="abstract" content="A tunnel policy can determine the sequence in which tunnels are selected or bind a TE tunnel to a specified destination IP address.">
<meta name="description" content="A tunnel policy can determine the sequence in which tunnels are selected or bind a TE tunnel to a specified destination IP address.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_2007.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_2009.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,l00468467,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369282">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring a Tunnel Policy</title>
</head>
<body><a name="EN-US_TASK_0172369282"></a><a name="EN-US_TASK_0172369282"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Tunnel Policy</h1>
<div class="taskbody"><p>A tunnel policy can determine the sequence in which tunnels are selected or bind a TE tunnel to a specified destination IP address.</p>
<div class="context"><a name="EN-US_TASK_0172369282__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>In the tunnel policy view, the tunnel type prioritizing policy and tunnel binding policy are mutually exclusive. Choose one of the following configurations as needed.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172369282__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure a tunnel type prioritizing policy.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=tunnel-policy"><b><span class="cmdname">tunnel-policy</span></b></a> <i><span class="varname">policy-name</span></i> command to create a tunnel policy and enter its view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=tunnel+select-seq"><b><span class="cmdname">tunnel select-seq</span></b></a> { <span>{ </span><strong><span>cr-lsp</span></strong><span> | { <strong><span>te</span></strong> | <strong><span>sr-te</span></strong> } } </span>| <span><strong><span>gre</span></strong> | </span>{ <strong><span>lsp</span></strong> | { <strong><span>ldp</span></strong> | <strong><span>bgp</span></strong> <span>| <strong><span>sr-lsp</span></strong> </span>} } } <sup>*</sup> <strong><span>load-balance-number</span></strong> <i><span class="varname">load-balance-number</span></i><span> [ <strong><span>unmix</span></strong> ]</span> command to configure the sequence in which different types of tunnels are selected and the maximum number of tunnels that can participate in load balancing.</span><p></p><p><p>After this command is run, the system selects tunnels based on the specified sequence. If tunnels that have higher priorities are unreachable, the system will continue to select tunnels that have lower priorities based on the sequence. For example, if the <strong>tunnel select-seq cr-lsp lsp load-balance-number 3</strong> command is run, the system can select MPLS TE tunnels (as preferred ones) or LSPs for VPN service transmission and use a maximum of three tunnels for load balancing. If the number of available CR-LSPs is smaller than 3, LSPs will be qualified to join the CR-LSPs in load balancing.</p>
<p>LSPs include LDP LSPs<span>, SR-LSPs,</span> and BGP LSPs. If <strong><span>lsp</span></strong> is specified, the default priority sequence in descending order is LDP LSP &gt; BGP LSP<span> &gt; SR-LSP</span>. If <span><strong><span>sr-lsp</span></strong>, </span><strong><span>ldp</span></strong>, or <strong><span>bgp</span></strong> is specified, you can specify the sequence in which LSPs are selected.</p>
<p>CR-LSPs include RSVP-TE tunnels and SR-MPLS TE tunnels. If <strong><span>cr-lsp</span></strong> is specified in the command, the tunnel that goes up earlier has a higher priority.</p>
<p>To enable the system to preferentially select RSVP-TE or SR-MPLS TE tunnels for VPN service transmission, specify the sequence of the <strong><span>te</span></strong> or <strong><span>sr-te</span></strong> parameter in the <a href="cmdqueryname=tunnel+select-seq"><b><span class="cmdname">tunnel select-seq</span></b></a> command.</p>
<div class="p">If <strong><span>unmix</span></strong> is configured, only one type of tunnel can be selected. For example, in a scenario where the <strong>tunnel select-seq cr-lsp lsp load-balance-number 3 unmix</strong> command is configured for the tunnel policy:<ul><li><p>If three or more CR-LSPs are available on the network, the system randomly selects three of them for service transmission.</p>
</li><li><p>If less than three CR-LSPs are available on the network, the system selects only the available CR-LSPs for service transmission.</p>
</li></ul>
</div>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>Configure a tunnel binding policy.</span><ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Run the <a href="cmdqueryname=tunnel-policy"><b><span class="cmdname">tunnel-policy</span></b></a> <i><span class="varname">policy-name</span></i> command to create a tunnel policy and enter its view.</span></li><li><span>Run the <a href="cmdqueryname=tunnel+binding"><b><span class="cmdname">tunnel binding</span></b></a> <strong><span>destination</span></strong> <i><span class="varname">dest-ip-address</span></i> <strong><span>te</span></strong> { <span><em><i><span class="varname">tunnel-type</span></i></em> | <i><span class="varname">tunnel-type interface-number</span></i></span> } &amp;&lt;1-32&gt; [ <strong><span>ignore-destination-check</span></strong> ] [ <strong><span>down-switch</span></strong> | <strong><span>include-ldp</span></strong> ] command to configure the tunnel policy to bind a specified TE tunnel to a specified destination address.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_2007.html">Configuring a Tunnel Policy for the Backbone Network of a BGP/MPLS IP VPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_2009.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>