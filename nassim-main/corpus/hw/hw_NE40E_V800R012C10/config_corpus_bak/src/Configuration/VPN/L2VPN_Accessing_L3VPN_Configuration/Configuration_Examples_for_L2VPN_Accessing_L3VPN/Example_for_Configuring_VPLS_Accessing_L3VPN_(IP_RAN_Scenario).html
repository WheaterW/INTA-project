
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring VPLS Accessing L3VPN (IP RAN Scenario)">
<meta name="abstract" content="The mixed VPN solution is a component of the IPTime MBB solution, which is developed by Huawei for constructing an IP MBH network.">
<meta name="description" content="The mixed VPN solution is a component of the IPTime MBB solution, which is developed by Huawei for constructing an IP MBH network.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5013.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_70001.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5017.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00556928,w00606909,l00455378,l2-l3">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="L2VPN Accessing L3VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="l00415692">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00415692">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370377">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring VPLS Accessing L3VPN (IP RAN Scenario)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172370377"></a><a name="EN-US_TASK_0172370377"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring VPLS Accessing L3VPN (IP RAN Scenario)</h1>
<div class="taskbody"><p>The mixed VPN solution is a component of the IPTime MBB solution, which is developed by Huawei for constructing an IP MBH network.</p>
<div class="context"><a name="EN-US_TASK_0172370377__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>The mixed VPN solution provides excellent FMC capabilities and adopts a simple and flexible networking scheme. The hierarchical network between CSGs and RSGs carries large-scale services.</p>
<p>CSGs are connected to form the access network, and ASGs and RSGs are connected to form the aggregation network. All these devices can be flexibly deployed to meet LTE service transport requirements, as shown in <a href="#EN-US_TASK_0172370377__fig_dc_vrp_l2-l3_cfg_501601">Figure 1</a>.</p>
<div class="fignone" id="EN-US_TASK_0172370377__fig_dc_vrp_l2-l3_cfg_501601"><a name="EN-US_TASK_0172370377__fig_dc_vrp_l2-l3_cfg_501601"></a><a name="fig_dc_vrp_l2-l3_cfg_501601"></a><span class="figcap"><b>Figure 1 </b>Configuring VPLS accessing L3VPN (IP RAN scenario)</span><br><span><img class="vsd" src="images/fig_dc_vrp_l2-l3_cfg_501601.png" width="NaN" height="NaN"></span></div>
<div class="p">The L2VPN accessing L3VPN solution allows Ethernet base stations to communicate with EPC devices. ASGs terminate the L2VPN and provide access to the L3VPN through a VE group. Master/slave PW redundancy is configured on CSGs to protect PWs. VRRP is configured between ASGs to determine the master/backup status of each ASG. VRRP is also configured between RSGs to determine the master/backup status of each RSG. VPN FRR is configured for the L3VPN to protect links, providing reliable connections for services.<div class="note" id="EN-US_TASK_0172370377__global-ve_02"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TASK_0172370377__p13122204117209">This example uses VE interfaces to implement L2VPN accessing L3VPN. Because VE interfaces are bound to only one board, services are interrupted when the board fails. To improve service reliability, create two global VE interfaces on each ASG: Global-VE1 (L2VE interface used to terminate L2VPN services) and Global-VE2 (L3VE interface used to access an L3VPN network). Other configurations do not need to be changed.</p>
</div></div>
</div>
<p>HVPLS (PWE3 accessing VPLS) or PWE3 can be used to deploy the L2VPN. In this example, traffic from Ethernet base stations are transmitted through HVPLS (PWE3 accessing VPLS)+L3VPN. <a href="#EN-US_TASK_0172370377__fig_dc_vrp_l2-l3_cfg_501602">Figure 2</a> shows a simplified single-ring network. Based on the implementation of the current version, the configurations on the CSGs and ASGs are mainly described here.</p>
<div class="fignone" id="EN-US_TASK_0172370377__fig_dc_vrp_l2-l3_cfg_501602"><a name="EN-US_TASK_0172370377__fig_dc_vrp_l2-l3_cfg_501602"></a><a name="fig_dc_vrp_l2-l3_cfg_501602"></a><span class="figcap"><b>Figure 2 </b>Configuring VPLS accessing L3VPN (IP RAN scenario, simplified networking)</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 and 2 in this example represent GE<span>0/1/0</span> and GE<span>0/1/3</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_l2-l3_cfg_501602.png" width="NaN" height="NaN"></span></div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Device interfaces and their IP addresses</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25.000000000000007%" id="mcps1.4.1.8.2.5.1.1" liSelected="liSelected"><p>Device</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="36.75000000000001%" id="mcps1.4.1.8.2.5.1.2" liSelected="liSelected"><p>Interface</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="19.000000000000004%" id="mcps1.4.1.8.2.5.1.3" liSelected="liSelected"><p>Peer Device</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="19.250000000000004%" id="mcps1.4.1.8.2.5.1.4" liSelected="liSelected"><p>IP Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="3" char="." valign="top" width="25.000000000000007%" headers="mcps1.4.1.8.2.5.1.1 "><p>CSG</p>
</td>
<td class="cellrowborder" char="." valign="top" width="36.75000000000001%" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="19.000000000000004%" headers="mcps1.4.1.8.2.5.1.3 "><p>ASG1</p>
</td>
<td class="cellrowborder" char="." valign="top" width="19.250000000000004%" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>ASG2</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.4.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/3</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>eNodeB</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" char="." valign="top" width="25.000000000000007%" headers="mcps1.4.1.8.2.5.1.1 "><p>ASG1</p>
</td>
<td class="cellrowborder" char="." valign="top" width="36.75000000000001%" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="19.000000000000004%" headers="mcps1.4.1.8.2.5.1.3 "><p>ASG2</p>
</td>
<td class="cellrowborder" char="." valign="top" width="19.250000000000004%" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.2.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>CSG</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/3</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>RSG1</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.3.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/4</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>RSG2</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.8.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" char="." valign="top" width="25.000000000000007%" headers="mcps1.4.1.8.2.5.1.1 "><p>ASG2</p>
</td>
<td class="cellrowborder" char="." valign="top" width="36.75000000000001%" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="19.000000000000004%" headers="mcps1.4.1.8.2.5.1.3 "><p>ASG1</p>
</td>
<td class="cellrowborder" char="." valign="top" width="19.250000000000004%" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.2.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>CSG</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.4.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/3</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>RSG2</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.6.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/4</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>RSG1</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.7.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" char="." valign="top" width="25.000000000000007%" headers="mcps1.4.1.8.2.5.1.1 "><p>RSG1</p>
</td>
<td class="cellrowborder" char="." valign="top" width="36.75000000000001%" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="19.000000000000004%" headers="mcps1.4.1.8.2.5.1.3 "><p>RSG2</p>
</td>
<td class="cellrowborder" char="." valign="top" width="19.250000000000004%" headers="mcps1.4.1.8.2.5.1.4 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>ASG1</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.3.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>ASG2</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.7.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/3</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>EPC</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="4" char="." valign="top" width="25.000000000000007%" headers="mcps1.4.1.8.2.5.1.1 "><p>RSG2</p>
</td>
<td class="cellrowborder" char="." valign="top" width="36.75000000000001%" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/0</span></p>
</td>
<td class="cellrowborder" char="." valign="top" width="19.000000000000004%" headers="mcps1.4.1.8.2.5.1.3 "><p>RSG1</p>
</td>
<td class="cellrowborder" char="." valign="top" width="19.250000000000004%" headers="mcps1.4.1.8.2.5.1.4 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>ASG2</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.6.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>ASG1</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>172.16.8.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.2 "><p>GE<span>0/1/3</span></p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.3 "><p>EPC</p>
</td>
<td class="cellrowborder" char="." valign="top" headers="mcps1.4.1.8.2.5.1.4 "><p>-</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172370377__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure IP addresses and routes.</p>
</li><li><p>Configure MPLS and public network tunnels.</p>
<ul><li>Configure TE tunnels between CSGs and ASGs.</li><li>Configure LSPs between ASGs and RSGs.</li></ul>
</li><li><p>Configure master/slave PW redundancy</p>
<ul><li>Configure HVPLS (PWE3 accessing VPLS).</li><li>Configure an mPW and a Spoke PW, and then associate the Spoke PW with the mPW.</li><li>Configure BFD to detect the mPW.</li></ul>
</li><li><p>Configure an L3VPN.</p>
<ul><li>Configure VPN instances on ASGs and RSGs.</li><li>Configure a VE group on each ASG, and bind the L3VE sub-interface in the group to the VPN instance on each ASG.</li><li>Establish MP-IBGP peer relationships between ASGs and RSGs.</li><li>Import direct routes into VPN instances on ASGs and RSGs.</li><li>Configure VPN FRR.</li></ul>
</li><li><p>Configure VRRP.</p>
<ul><li>Configure service VRRP and mVRRP on ASGs to determine a gateway for base stations.</li><li>Configure service VRRP on RSGs to determine their master/backup status.</li></ul>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172370377__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Interface numbers, interface IP addresses, and OSPF process IDs</p>
</li><li><p>LSR IDs</p>
</li><li><p>L2VCs' destination addresses, VC IDs, and VC types</p>
</li><li><p>VSI name and VSI ID</p>
</li><li><p>Names, local discriminators, and remote discriminators of BFD sessions</p>
</li><li><p>VE group number</p>
</li><li><p>Numbers and priorities of VRRP groups</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172370377__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure interface IP addresses and a routing protocol.</span><ol type="a"><li class="substepexpand"><span>Configure interface IP addresses. For configuration details, see the configuration files.</span></li><li class="substepexpand"><span>Configure a routing protocol on the CSG, ASG1, ASG2, RSG1, and RSG2 to make them routable. In this example, OSPF is used.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>One access ring is used in this example. If multiple access rings are available, each access ring belongs to a different area. If IS-IS is used, each access ring belongs to a different IS-IS process, and a different NET is deployed for each access ring. If the planned network is small, the entire network can be planned as a Level-2 area.</p>
</div></div>
</p></li></ol>
<p><p>After the configuration is complete, run the <a href="cmdqueryname=display+ip+routing-table"><b><span class="cmdname">display ip routing-table</span></b></a> command on the CSG, ASGs, and RSGs. You can view the routes learned from each other. Note that when configuring OSPF, you need to advertise 32-bit loopback interface addresses (LSR IDs) of the CSG, ASGs, and RSGs.</p>
<p>For configuration details, see the configuration files.</p>
</p></li><li><span>Configure basic MPLS functions and public network tunnels.</span><p><ul><li>Configure explicit path-based TE tunnels between the CSG and ASG1 and between the CSG and ASG2.</li><li>Configure LSPs between ASGs and between ASGs and RSGs.</li><li>To improve reliability, enable RSVP GR, LDP GR, and OSPF GR.</li></ul>
<p>For configuration details, see the configuration files.</p>
</p></li><li><span>Configure PW redundancy.</span><ol type="a"><li class="substepexpand"><span>Configure MPLS LDP remote sessions between the CSG and ASGs.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>In this configuration example, TE tunnels are configured between the CSG and ASGs, and MPLS LDP is not configured. PWE3, however, uses extended LDP signaling to distribute VPN labels. Therefore, MPLS LDP remote sessions need to be configured between the CSG and ASGs. Note that no LDP remote session needs to be configured between ASGs, because an LDP LSP has been configured to directly connect ASGs.</p>
</div></div>
<p># Configure the CSG.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CSG] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-mpls-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG] <strong>mpls ldp remote-peer 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-mpls-ldp-remote-2.2.2.2] <strong>remote-ip 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-mpls-ldp-remote-2.2.2.2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG] <strong>mpls ldp remote-peer 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-mpls-ldp-remote-3.3.3.3] <strong>remote-ip 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-mpls-ldp-remote-3.3.3.3] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG] <strong>commit</strong></pre>
<p># Configure the ASG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-mpls-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>mpls ldp remote-peer 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-mpls-ldp-remote-1.1.1.1] <strong>remote-ip 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-mpls-ldp-remote-1.1.1.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>commit</strong></pre>
<p># Configure ASG2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG2] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-mpls-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2] <strong>mpls ldp remote-peer 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-mpls-ldp-remote-1.1.1.1] <strong>remote-ip 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-mpls-ldp-remote-1.1.1.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure HVPLS.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>Configure master/slave PW redundancy on the CSG and VPLS on ASGs to form an HVPLS network where the CSG is dual-homed to ASGs.</li><li>Configure a Spoke PW between ASG1 and ASG2 so that ACs and PWs are not affected by each other's faults. This allows service traffic to rapidly recover.</li></ul>
</div></div>
<p># Configure the CSG.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CSG] <strong>interface gigabitethernet <span>0/1/3</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-GigabitEthernet<span>0/1/3</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-GigabitEthernet<span>0/1/3</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG] <strong>interface gigabitethernet <span>0/1/3</span>.10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-GigabitEthernet<span>0/1/3</span>.10] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-GigabitEthernet<span>0/1/3</span>.10] <strong>mpls l2vc 2.2.2.2 100 tunnel-policy policy1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-GigabitEthernet<span>0/1/3</span>.10] <strong>mpls l2vc 3.3.3.3 200 tunnel-policy policy1 secondary</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-GigabitEthernet<span>0/1/3</span>.10] <strong>mpls l2vpn redundancy master</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-GigabitEthernet<span>0/1/3</span>.10] <strong>mpls l2vpn mac-withdraw disable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-GigabitEthernet<span>0/1/3</span>.10] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG] <strong>commit</strong></pre>
<p># Configure ASG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1] <strong>vsi 1 static</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vsi-1] <strong>pwsignal ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vsi-1-ldp] <strong>vsi-id 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vsi-1-ldp] <strong>peer 1.1.1.1 tnl-policy policy1 ignore-standby-state</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vsi-1-ldp] <strong>peer 3.3.3.3 negotiation-vc-id 8000 upe</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vsi-1-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vsi-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>commit</strong></pre>
<p># Configure ASG2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG2] <strong>vsi 1 static</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-vsi-1] <strong>pwsignal ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-vsi-1-ldp] <strong>vsi-id 200</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-vsi-1-ldp] <strong>peer 1.1.1.1 tnl-policy policy1 ignore-standby-state</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-vsi-1-ldp] <strong>peer 2.2.2.2 negotiation-vc-id 8000 upe</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-vsi-1-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-vsi-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure a VE group on ASGs, and then bind the VSI to L2VE sub-interfaces.</span><p><p># Configure ASG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1] <strong>interface virtual-ethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/0</span>] <strong>ve-group 10 l2-terminate</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>interface virtual-ethernet <span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/0</span>.1] <strong>l2 binding vsi 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>commit</strong></pre>
<p># Configure ASG2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG2] <strong>interface virtual-ethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-Virtual-Ethernet<span>0/1/0</span>] <strong>ve-group 10 l2-terminate</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-Virtual-Ethernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2] <strong>interface virtual-ethernet <span>0/1/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-Virtual-Ethernet<span>0/1/0</span>.1] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-Virtual-Ethernet<span>0/1/0</span>.1] <strong>l2 binding vsi 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-Virtual-Ethernet<span>0/1/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2] <strong>commit</strong></pre>
<p># Run the <strong>display mpls l2vc brief</strong> command on the CSG to check whether the VC status is up.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CSG] <strong>display mpls l2vc brief</strong></pre>
<pre class="screen"> Total ldp vc : 2     2 up       0 down

 *Client Interface     : GigabitEthernet<span>0/1/3</span>.10
  Administrator PW     : no
  AC status            : up
  VC State             : <strong>up</strong>
  Label state          : 0
  Token state          : 0
  VC ID                : 100
  VC Type              : VLAN
  session state        : up
  Destination          : 2.2.2.2
  link state           : up

 *Client Interface     : GigabitEthernet<span>0/1/3</span>.10
  Administrator PW     : no
  AC status            : up
  VC State             : <strong>up</strong>
  Label state          : 0
  Token state          : 0
  VC ID                : 200
  VC Type              : VLAN
  session state        : up
  Destination          : 3.3.3.3
  link state           : up       </pre>
<p># After completing the configurations, run the <strong>display vsi name 1 verbose</strong> command on ASGs. The command output shows that the VSI named <strong>1</strong> is up and the corresponding PW is also up.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1] <strong>display vsi name 1 verbose</strong></pre>
<pre class="screen"> ***VSI Name               : 1
    Work Mode              : normal
    Administrator VSI      : no
    Isolate Spoken         : disable
    VSI Index              : 0
    PW Signaling           : ldp
    Member Discovery Style : static
<span>    Bridge-domain Mode     : disable</span>
    PW MAC Learn Style     : unqualify
    Encapsulation Type     : vlan
    MTU                    : 1500
    Diffserv Mode          : uniform
    Service Class          : --
    Color                  : --
    DomainId               : 255
    Domain Name            :
    Ignore AcState         : disable
    P2P VSI                : disable
    Create Time            : 0 days, 0 hours, 3 minutes, 58 seconds
    VSI State              : <strong>up</strong>
<span>    Resource Status        : Valid</span>

    VSI ID                 : 100
   *Peer Router ID         : 1.1.1.1
    primary or secondary   : primary
    ignore-standby-state   : yes
    VC Label               : 1027
    Peer Type              : dynamic
    Session                : up
    Tunnel ID              : 0x800044
    Broadcast Tunnel ID    : 0x800044
    Broad BackupTunnel ID  : 0x0
    Tunnel Policy Name     : policy1
    CKey                   : 32
    NKey                   : 31
    StpEnable              : 0
    PwIndex                : 0
<span>    Control Word           : disable</span>
   *Peer Router ID         : 3.3.3.3
    Negotiation-vc-id      : 8000
    primary or secondary   : primary
    ignore-standby-state   : no
    VC Label               : 1028
    Peer Type              : dynamic
    Session                : up
    Tunnel ID              : 0x800047
    Broadcast Tunnel ID    : 0x800047
    Broad BackupTunnel ID  : 0x0
    CKey                   : 34
    NKey                   : 33
    StpEnable              : 0
    PwIndex                : 0
<span>    Control Word           : disable</span>

    Interface Name         : Virtual-Ethernet<span>0/1/0</span>.1
    State                  : up
    Last Up Time           : 2010/09/14 19:38:19
    Total Up Time          : 0 days, 0 hours, 4 minutes, 0 seconds

   **PW Information:

   *Peer Ip Address        : 3.3.3.3
    PW State               : up
    Local VC Label         : 1028
    Remote VC Label        : 1028
<span>    Remote Control Word    : disable</span>
    PW Type                : MEHVPLS
    Tunnel ID              : 0x800047
    Broadcast Tunnel ID    : 0x800047
    Broad BackupTunnel ID  : 0x0
    Ckey                   : 0x22
    Nkey                   : 0x21
    Main PW Token          : 0x800047
    Slave PW Token         : 0x0
    Tnl Type               : LSP
    OutInterface           : GigabitEthernet<span>0/1/0</span>
    Backup OutInterface    :
    Stp Enable             : 0
    PW Last Up Time        : 2010/09/14 19:38:21
    PW Total Up Time       : 0 days, 0 hours, 3 minutes, 58 seconds
   *Peer Ip Address        : 1.1.1.1
    PW State               : up
    Local VC Label         : 1027
    Remote VC Label        : 1024
<span>    Remote Control Word    : disable</span>
    PW Type                : label
    Tunnel ID              : 0x800044
    Broadcast Tunnel ID    : 0x800044
    Broad BackupTunnel ID  : 0x0
    Ckey                   : 0x20
    Nkey                   : 0x1f
    Main PW Token          : 0x45
    Slave PW Token         : 0x46
    Tnl Type               : CR-LSP
    OutInterface           : Tunnel11
    Backup OutInterface    :
    Stp Enable             : 0
    PW Last Up Time        : 2010/09/14 19:38:21
    PW Total Up Time       : 0 days, 0 hours, 4 minutes, 0 seconds  </pre>
</p></li></ol>
</li><li><span>Configure an L3VPN.</span><ol type="a"><li class="substepexpand"><span>Configure a VPN instance on each ASG and RSG, and bind interfaces to VPN instances. </span><p><p># Configure ASG1. The configuration of ASG2 is similar to that of ASG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1] <strong>ip vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vpn-instance-vpna] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 1:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vpn-instance-vpna-af-ipv4] <strong>vpn-target 1:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vpn-instance-vpna-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-vpn-instance-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>interface virtual-ethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/1</span>] <strong>ve-group 10 l3-access</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>interface virtual-ethernet <span>0/1/1</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/1</span>.1] <strong>vlan-type dot1q 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/1</span>.1] <strong>ip binding vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/1</span>.1] <strong>ip address 10.0.0.2 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/1</span>.1] <strong>direct-route track pw-state degrade-cost 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-Virtual-Ethernet<span>0/1/1</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>commit</strong></pre>
<p># Configure RSG1. The configuration of RSG2 is similar to that of RSG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>RSG1] <strong>ip vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vpn-instance-vpna] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 1:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vpn-instance-vpna-af-ipv4] <strong>vpn-target 1:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vpn-instance-vpna-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vpn-instance-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1] <strong>interface gigabitethernet <span>0/1/3</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-GigabitEthernet<span>0/1/3</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-GigabitEthernet<span>0/1/3</span>] <strong>port link-type trunk</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-GigabitEthernet<span>0/1/3</span>] <strong>port trunk allow-pass vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-GigabitEthernet<span>0/1/3</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1] <strong>interface gigabitethernet <span>0/1/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-GigabitEthernet<span>0/1/0</span>] <strong>portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-GigabitEthernet<span>0/1/0</span>] <strong>port link-type trunk</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-GigabitEthernet<span>0/1/0</span>] <strong>port trunk allow-pass vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-GigabitEthernet<span>0/1/0</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1] <strong>vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vlan10] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1] <strong>interface vlanif 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-Vlanif10] <strong>ip binding vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-Vlanif10] <strong>ip address 10.0.1.1 24</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-Vlanif10] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Establish MP-IBGP peer relationships between ASGs and RSGs.</span><p><p># Configure ASG2. The configuration of ASG1 is similar to that of ASG2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG2] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>graceful-restart</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>peer 2.2.2.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>peer 2.2.2.2 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>peer 4.4.4.4 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>peer 4.4.4.4 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>peer 4.4.4.4 tracking delay 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>peer 5.5.5.5 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>peer 5.5.5.5 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>peer 5.5.5.5 tracking delay 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>ipv4-family vpnv4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp-af-vpnv4] <strong>peer 2.2.2.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp-af-vpnv4] <strong>peer 4.4.4.4 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp-af-vpnv4] <strong>peer 5.5.5.5 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp-af-vpnv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2] <strong>commit</strong></pre>
<p># Configure RSG1. The configuration of RSG2 is similar to that of RSG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>RSG1] <strong>bgp 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>graceful-restart</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>peer 2.2.2.2 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>peer 2.2.2.2 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>peer 2.2.2.2 tracking delay 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>peer 3.3.3.3 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>peer 3.3.3.3 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>peer 3.3.3.3 tracking delay 30</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>peer 5.5.5.5 as-number 100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>peer 5.5.5.5 connect-interface loopback 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>ipv4-family vpnv4</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp-af-vpnv4] <strong>peer 2.2.2.2 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp-af-vpnv4] <strong>peer 3.3.3.3 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp-af-vpnv4] <strong>peer 5.5.5.5 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp-af-vpnv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Import direct routes into VPN instances on ASGs and RSGs.</span><p><p># Configure ASG1. The configuration of ASG2 is similar to that of ASG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG2-bgp] <strong>ipv4-family vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp-vpna] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2] <strong>commit</strong></pre>
<p># Configure RSG1. The configuration of RSG2 is similar to that of RSG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>RSG1-bgp] <strong>ipv4-family vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp-vpna] <strong>import-route direct</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-bgp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure VPN FRR.</span><p><p># Configure RSG1. The configurations of the other RSG and each ASG are similar to that of RSG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>RSG1] <strong>ip vpn-instance vpna</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vpn-instance-vpna] <strong>ipv4-family</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vpn-instance-vpna-af-ipv4] <strong>route-distinguisher 1:1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vpn-instance-vpna-af-ipv4] <strong>vpn frr</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vpn-instance-vpna-af-ipv4] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1-vpn-instance-vpna] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>RSG1] <strong>commit</strong></pre>
</p></li></ol>
</li><li><span>Configure BFD to detect public network faults.</span><ol type="a"><li class="substepexpand"><span>Configure BFD on the CSG to monitor the primary PW.</span><p><p># Configure the CSG.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CSG] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG] <strong>bfd master bind pw interface gigabitethernet <span>0/1/3</span>.10 remote-peer 2.2.2.2 pw-ttl auto-calculate</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-bfd-lsp-session-master] <strong>discriminator local 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-bfd-lsp-session-master] <strong>discriminator remote 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-bfd-lsp-session-master] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG-bfd-lsp-session-master] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG] <strong>commit</strong></pre>
<p># Configure ASG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1] <strong>bfd master bind pw vsi 1 peer 1.1.1.1 remote-peer 1.1.1.1 pw-ttl auto-calculate</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-bfd-lsp-session-master] <strong>discriminator local 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-bfd-lsp-session-master] <strong>discriminator remote 2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-bfd-lsp-session-master] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-bfd-lsp-session-master] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>commit</strong></pre>
</p></li><li class="substepexpand"><span>Configure BFD on ASGs to monitor the VSI PW.</span><p><p># Configure ASG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG1] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>bfd spoke bind pw vsi 1 peer 3.3.3.3 vc-id 8000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-bfd-lsp-session-spoke] <strong>discriminator local 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-bfd-lsp-session-spoke] <strong>discriminator remote 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-bfd-lsp-session-spoke] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1-bfd-lsp-session-spoke] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG1] <strong>commit</strong></pre>
<p># Configure ASG2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG2] <strong>bfd</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bfd] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2] <strong>bfd spoke bind pw vsi 1 peer 2.2.2.2 vc-id 8000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bfd-lsp-session-spoke] <strong>discriminator local 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bfd-lsp-session-spoke] <strong>discriminator remote 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bfd-lsp-session-spoke] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2-bfd-lsp-session-spoke] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG2] <strong>commit</strong></pre>
</p></li></ol>
</li><li><span>Configure VRRP.</span><ol type="a"><li class="substepexpand"><span>Configure VRRP on ASG1 and ASG2 to determine a gateway for base stations.</span><p><p>For configuration details, see the configuration files and "VRRP Configuration" located under <em><span class="keyword">NE40E</span> Configuration Guide &gt; Network Reliability</em>.</p>
</p></li><li class="substepexpand"><span>Configure VRRP to determine the master/backup status of RSGs.</span><p><p>For configuration details, see the configuration files and "VRRP Configuration" located under <em><span class="keyword">NE40E</span> Configuration Guide &gt; Network Reliability</em>.</p>
</p></li></ol>
</li></ol></div>
<div class="example"><a name="EN-US_TASK_0172370377__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>CSG configuration file</p>
<pre class="screen">#
 sysname CSG
#
 bfd
#
 mpls lsr-id 1.1.1.1
 mpls
  mpls te
  mpls rsvp-te
  mpls rsvp-te hello
  mpls te cspf
#
 mpls l2vpn
#
explicit-path to_asg1
 next hop 172.16.1.2
 next hop 2.2.2.2
#
explicit-path to_asg2
 next hop 172.16.4.2
 next hop 3.3.3.3
#
mpls ldp
 graceful-restart
#
 mpls ldp remote-peer 2.2.2.2
 remote-ip 2.2.2.2
#
mpls ldp remote-peer 3.3.3.3
 remote-ip 3.3.3.3
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 172.16.1.1 255.255.255.0
 mpls
 mpls te
 mpls rsvp-te
 mpls rsvp-te hello
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 172.16.4.1 255.255.255.0
 mpls
 mpls te
 mpls rsvp-te
 mpls rsvp-te hello
#
interface GigabitEthernet<span>0/1/3</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/3</span>.10
 vlan-type dot1q 10
 mpls l2vc 2.2.2.2 100 tunnel-policy policy1
 mpls l2vc 3.3.3.3 200 tunnel-policy policy1 secondary
 mpls l2vpn redundancy master
 mpls l2vpn mac-withdraw disable
#
interface LoopBack0
 ip address 1.1.1.1 255.255.255.255
#
interface Tunnel11
 ip address unnumbered interface LoopBack0
 tunnel-protocol mpls te
 destination 2.2.2.2
 mpls te tunnel-id 100
 mpls te record-route label
 mpls te path explicit-path to_asg1
 mpls te reserved-for-binding
#
interface Tunnel12
 ip address unnumbered interface LoopBack0
 tunnel-protocol mpls te
 destination 3.3.3.3
 mpls te tunnel-id 200
 mpls te record-route label
 mpls te path explicit-path to_asg2
 mpls te reserved-for-binding
#
ospf 100
 opaque-capability enable
 graceful-restart
 area 0.0.0.0
  network 1.1.1.1 0.0.0.0
  network 172.16.1.0 0.0.0.255
  network 172.16.4.0 0.0.0.255
  mpls-te enable
#
tunnel-policy policy1
 tunnel binding destination 2.2.2.2 te Tunnel11
 tunnel binding destination 3.3.3.3 te Tunnel12
#
bfd master bind pw interface GigabitEthernet<span>0/1/3</span>.10 remote-peer 2.2.2.2 pw-ttl auto-calculate
 discriminator local 2
 discriminator remote 2
 commit
#
return </pre>
</li><li><p>ASG1 configuration file</p>
<pre class="screen">#
 sysname ASG1
#
ip vpn-instance vpna
 ipv4-family
  route-distinguisher 1:1
  apply-label per-instance
  vpn frr
  vpn-target 1:1 export-extcommunity
  vpn-target 1:1 import-extcommunity
#
 bfd
#
 mpls lsr-id 2.2.2.2
 mpls
  mpls te
  mpls rsvp-te
  mpls rsvp-te hello
  mpls te cspf
#
 mpls l2vpn
#
vsi 1 static
 pwsignal ldp
  vsi-id 100
  peer 1.1.1.1 tnl-policy policy1 ignore-standby-state
  peer 3.3.3.3 negotiation-vc-id 8000 upe
#
 explicit-path to_csg
  next hop 172.16.1.1
  next hop 1.1.1.1
#
mpls ldp
 graceful-restart
#
 mpls ldp remote-peer 1.1.1.1
 remote-ip 1.1.1.1
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 172.16.2.2 255.255.255.0
 vrrp vrid 20 virtual-ip 172.16.2.3
 admin-vrrp vrid 20 ignore-if-down
 vrrp vrid 20 priority 150
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 172.16.1.2 255.255.255.0
 mpls
 mpls te
 mpls rsvp-te
 mpls rsvp-te hello
#
interface GigabitEthernet<span>0/1/3</span>
 undo shutdown
 ip address 172.16.3.1 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/4</span>
 undo shutdown
 ip address 172.16.8.1 255.255.255.0
 mpls
 mpls ldp
#
interface Virtual-Ethernet<span>0/1/0</span>
 ve-group 10 l2-terminate
#
interface Virtual-Ethernet<span>0/1/0</span>.1
 vlan-type dot1q 10
 l2 binding vsi 1
#
interface Virtual-Ethernet<span>0/1/1</span>
 ve-group 10 l3-access
#
interface Virtual-Ethernet<span>0/1/1</span>.1
 vlan-type dot1q 10
 ip binding vpn-instance vpna
 ip address 10.0.0.2 255.255.255.0
 direct-route track pw-state degrade-cost 30
 vrrp vrid 10 virtual-ip 10.0.0.3
 vrrp vrid 10 track admin-vrrp interface GigabitEthernet<span>0/1/0</span> vrid 20
#
interface LoopBack0
 ip address 2.2.2.2 255.255.255.255
#
interface Tunnel11
 ip address unnumbered interface LoopBack0
 tunnel-protocol mpls te
 destination 1.1.1.1
 mpls te tunnel-id 100
 mpls te record-route label
 mpls te signal-protocol rsvp-te
 mpls te path explicit-path to_csg
 mpls te backup hot-standby wtr 15
 mpls te reserved-for-binding
#
bgp 100
 graceful-restart
 peer 3.3.3.3 as-number 100
 peer 3.3.3.3 connect-interface LoopBack0
 peer 4.4.4.4 as-number 100
 peer 4.4.4.4 connect-interface LoopBack0
 peer 5.5.5.5 as-number 100
 peer 5.5.5.5 connect-interface LoopBack0
 #
 ipv4-family unicast
  undo synchronization
  peer 3.3.3.3 enable
  peer 4.4.4.4 enable
  peer 5.5.5.5 enable
 #
 ipv4-family vpnv4
  policy vpn-target
  peer 3.3.3.3 enable
  peer 4.4.4.4 enable
  peer 5.5.5.5 enable
 #
 ipv4-family vpn-instance vpna
  import-route direct
#
ospf 100
 opaque-capability enable
 graceful-restart
 area 0.0.0.0
  network 2.2.2.2 0.0.0.0
  network 172.16.1.0 0.0.0.255
  network 172.16.3.0 0.0.0.255
  network 172.16.2.0 0.0.0.255
  network 172.16.8.0 0.0.0.255
  mpls-te enable
#
tunnel-policy policy1
 tunnel binding destination 1.1.1.1 te Tunnel11
#
bfd master bind pw vsi 1 peer 1.1.1.1 remote-peer 1.1.1.1 pw-ttl auto-calculate
 discriminator local 2
 discriminator remote 2
 commit
#
bfd spoke bind pw vsi 1 peer 3.3.3.3 vc-id 8000
 discriminator local 5
 discriminator remote 5
 commit
#
return </pre>
</li><li><p>ASG2 configuration file</p>
<pre class="screen">#
 sysname ASG2
#
ip vpn-instance vpna
 ipv4-family
  route-distinguisher 1:1
  apply-label per-instance
  vpn frr
  vpn-target 1:1 export-extcommunity
  vpn-target 1:1 import-extcommunity
#
 bfd
#
 mpls lsr-id 3.3.3.3
 mpls
  mpls te
  mpls rsvp-te
  mpls rsvp-te hello
  mpls te cspf
#
 mpls l2vpn
#
vsi 1 static
 pwsignal ldp
  vsi-id 200
  peer 1.1.1.1 tnl-policy policy1 ignore-standby-state
  peer 2.2.2.2 negotiation-vc-id 8000 upe
#
 explicit-path to_csg
  next hop 172.16.4.1
  next hop 1.1.1.1
#
mpls ldp
 graceful-restart
#
 mpls ldp remote-peer 1.1.1.1
 remote-ip 1.1.1.1
#
interface GigabitEthernet<span>0/1/0</span>
 undo shutdown
 ip address 172.16.2.1 255.255.255.0
 vrrp vrid 20 virtual-ip 172.16.2.3
 admin-vrrp vrid 20 ignore-if-down
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 172.16.4.2 255.255.255.0
 mpls
 mpls te
 mpls rsvp-te
 mpls rsvp-te hello
#
interface GigabitEthernet<span>0/1/3</span>
 undo shutdown
 ip address 172.16.6.1 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/4</span>
 undo shutdown
 ip address 172.16.7.1 255.255.255.0
 mpls
 mpls ldp
#
interface Virtual-Ethernet<span>0/1/0</span>
 ve-group 10 l2-terminate
#
interface Virtual-Ethernet<span>0/1/0</span>.1
 vlan-type dot1q 10
 l2 binding vsi 1
#
interface Virtual-Ethernet<span>0/1/1</span>
 ve-group 10 l3-access
#
interface Virtual-Ethernet<span>0/1/1</span>.1
 vlan-type dot1q 10
 ip binding vpn-instance vpna
 ip address 10.0.0.4 255.255.255.0
 vrrp vrid 10 virtual-ip 10.0.0.3
 vrrp vrid 10 track admin-vrrp interface GigabitEthernet<span>0/1/0</span> vrid 20
#
interface LoopBack0
 ip address 3.3.3.3 255.255.255.255
#
interface Tunnel12
 ip address unnumbered interface LoopBack0
 tunnel-protocol mpls te
 destination 1.1.1.1
 mpls te tunnel-id 200
 mpls te record-route label
 mpls te signal-protocol rsvp-te
 mpls te path explicit-path to_csg
 mpls te backup hot-standby wtr 15
 mpls te reserved-for-binding
#
bgp 100
 graceful-restart
 peer 2.2.2.2 as-number 100
 peer 2.2.2.2 connect-interface LoopBack0
 peer 4.4.4.4 as-number 100
 peer 4.4.4.4 connect-interface LoopBack0
 peer 4.4.4.4 tracking delay 30
 peer 5.5.5.5 as-number 100
 peer 5.5.5.5 connect-interface LoopBack0
 peer 5.5.5.5 tracking delay 30
 #
 ipv4-family unicast
  undo synchronization
  peer 2.2.2.2 enable
  peer 4.4.4.4 enable
  peer 5.5.5.5 enable
 #
 ipv4-family vpnv4
  policy vpn-target
  peer 2.2.2.2 enable
  peer 4.4.4.4 enable
  peer 5.5.5.5 enable
 #
 ipv4-family vpn-instance vpna
  import-route direct
#
ospf 100
 opaque-capability enable
 graceful-restart
 area 0.0.0.0
  network 3.3.3.3 0.0.0.0
  network 172.16.2.0 0.0.0.255
  network 172.16.7.0 0.0.0.255
  network 172.16.4.0 0.0.0.255
  network 172.16.6.0 0.0.0.255
  mpls-te enable
#
tunnel-policy policy1
 tunnel binding destination 1.1.1.1 te Tunnel12
#
bfd spoke bind pw vsi 1 peer 2.2.2.2 vc-id 8000
 discriminator local 5
 discriminator remote 5
 commit
#
return  </pre>
</li><li><p>RSG1 configuration file </p>
<pre class="screen">#
 sysname RSG1
#
 vlan batch 10
#
ip vpn-instance vpna
 ipv4-family
  route-distinguisher 1:1
  apply-label per-instance
  vpn frr
  vpn-target 1:1 export-extcommunity
  vpn-target 1:1 import-extcommunity
#
 mpls lsr-id 4.4.4.4
 mpls
#
 mpls l2vpn
#
mpls ldp
 graceful-restart
#
interface Vlanif10
 ip binding vpn-instance vpna
 ip address 10.0.1.1 255.255.255.0
 vrrp vrid 1 virtual-ip 10.0.1.3
 vrrp vrid 1 priority 150
#
interface GigabitEthernet<span>0/1/0</span>
 portswitch
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 10
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 172.16.3.2 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 172.16.7.2 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/3</span>
 portswitch
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 10
#
interface LoopBack0
 ip address 4.4.4.4 255.255.255.255
#
bgp 100
 graceful-restart
 peer 2.2.2.2 as-number 100
 peer 2.2.2.2 connect-interface LoopBack0
 peer 2.2.2.2 tracking delay 30
 peer 3.3.3.3 as-number 100
 peer 3.3.3.3 connect-interface LoopBack0
 peer 3.3.3.3 tracking delay 30
 peer 5.5.5.5 as-number 100
 peer 5.5.5.5 connect-interface LoopBack0
 #
 ipv4-family unicast
  undo synchronization
  peer 2.2.2.2 enable
  peer 3.3.3.3 enable
  peer 5.5.5.5 enable
 #
 ipv4-family vpnv4
  policy vpn-target
  peer 2.2.2.2 enable
  peer 3.3.3.3 enable
  peer 5.5.5.5 enable
 #
 ipv4-family vpn-instance vpna
  import-route direct
#
ospf 100
 opaque-capability enable
 graceful-restart
 area 0.0.0.0
  network 4.4.4.4 0.0.0.0
  network 172.16.3.0 0.0.0.255
  network 172.16.7.0 0.0.0.255
  mpls-te enable
#
return </pre>
</li><li><p>RSG2 configuration file </p>
<pre class="screen">#
 sysname RSG2
#
 vlan batch 10
#
ip vpn-instance vpna
 ipv4-family
  route-distinguisher 1:1
  apply-label per-instance
  vpn frr
  vpn-target 1:1 export-extcommunity
  vpn-target 1:1 import-extcommunity
#
 mpls lsr-id 5.5.5.5
 mpls
#
 mpls l2vpn
#
mpls ldp
 graceful-restart
#
interface Vlanif10
 ip binding vpn-instance vpna
 ip address 10.0.1.2 255.255.255.0
 vrrp vrid 1 virtual-ip 10.0.1.3
#
interface GigabitEthernet<span>0/1/0</span>
 portswitch
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 10
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 172.16.6.2 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 172.16.8.2 255.255.255.0
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/3</span>
 portswitch
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 10
#
interface LoopBack0
 ip address 5.5.5.5 255.255.255.255
#
bgp 100
 graceful-restart
 peer 2.2.2.2 as-number 100
 peer 2.2.2.2 connect-interface LoopBack0
 peer 2.2.2.2 tracking delay 30
 peer 3.3.3.3 as-number 100
 peer 3.3.3.3 connect-interface LoopBack0
 peer 3.3.3.3 tracking delay 30
 peer 4.4.4.4 as-number 100
 peer 4.4.4.4 connect-interface LoopBack0
 #
 ipv4-family unicast
  undo synchronization
  peer 2.2.2.2 enable
  peer 3.3.3.3 enable
  peer 4.4.4.4 enable
 #
 ipv4-family vpnv4
  policy vpn-target
  peer 2.2.2.2 enable
  peer 3.3.3.3 enable
  peer 4.4.4.4 enable
 #
 ipv4-family vpn-instance vpna
  import-route direct
#
ospf 100
 opaque-capability enable
 graceful-restart
 area 0.0.0.0
  network 5.5.5.5 0.0.0.0
  network 172.16.8.0 0.0.0.255
  network 172.16.6.0 0.0.0.255
  mpls-te enable
#
return  </pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5013.html">Configuration Examples for L2VPN Accessing L3VPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_70001.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_l2-l3_cfg_5017.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>