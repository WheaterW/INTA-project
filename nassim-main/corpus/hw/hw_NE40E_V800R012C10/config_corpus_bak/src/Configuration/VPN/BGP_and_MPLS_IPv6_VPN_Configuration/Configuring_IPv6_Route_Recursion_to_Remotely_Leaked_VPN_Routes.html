
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring IPv6 Route Recursion to Remotely Leaked VPN Routes">
<meta name="abstract" content="After IPv6 route recursion to remotely leaked VPN routes is enabled, the labels and Tunnel IDs of the remotely leaked VPN routes can be inherited, which ensures correct traffic forwarding.">
<meta name="description" content="After IPv6 route recursion to remotely leaked VPN routes is enabled, the labels and Tunnel IDs of the remotely leaked VPN routes can be inherited, which ensures correct traffic forwarding.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2074.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2032.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00847023">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369687">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring IPv6 Route Recursion to Remotely Leaked VPN Routes</title>
</head>
<body><a name="EN-US_TASK_0172369687"></a><a name="EN-US_TASK_0172369687"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring IPv6 Route Recursion to Remotely Leaked VPN Routes</h1>
<div class="taskbody"><p>After IPv6 route recursion to remotely leaked VPN routes is enabled, the labels and Tunnel IDs of the remotely leaked VPN routes can be inherited, which ensures correct traffic forwarding.</p>
<div class="context"><a name="EN-US_TASK_0172369687__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>A route needs recursion if its next hop is unreachable. To allow IPv6 routes to recurse to remotely leaked VPN routes, run the <a href="cmdqueryname=ipv6+route+recursive-lookup+inherit-label-route+enable"><b><span class="cmdname">ipv6 route recursive-lookup inherit-label-route enable</span></b></a> command. After the command is run, IPv6 routes inherit the labels and tunnel IDs of the remotely leaked VPN routes, which ensures correct traffic forwarding. This command mainly applies to BGP/MPLS IPv6 VPN scenarios.</p>
<p>In <a href="#EN-US_TASK_0172369687__fig_dc_vrp_cfg_00731901">Figure 1</a>, PE1 and PE2 are IBGP peers, and CE1 and PE1 are IGP neighbors. PE2 learns the IP address of CE1's loopback interface, and an EBGP peer relationship is established between CE1 and PE2 using loopback interface IP addresses. By default, the BGP routes that PE2 learns from CE1 through the EBGP peer connection cannot recurse to remotely leaked VPN routes. As a result, traffic fails to be forwarded. To address this problem, run the <a href="cmdqueryname=ipv6+route+recursive-lookup+inherit-label-route+enable"><b><span class="cmdname">ipv6 route recursive-lookup inherit-label-route enable</span></b></a> command to allow the BGP4+ routes to recurse to remotely leaked VPN routes. After the BGP4+ routes inherit the labels and tunnel IDs of the remotely leaked VPN routes, traffic can be correctly forwarded.</p>
<div class="fignone" id="EN-US_TASK_0172369687__fig_dc_vrp_cfg_00731901"><a name="EN-US_TASK_0172369687__fig_dc_vrp_cfg_00731901"></a><a name="fig_dc_vrp_cfg_00731901"></a><span class="figcap"><b>Figure 1 </b>Basic BGP/MPLS IPv6 VPN networking</span><br><span><img class="vsd" src="images/fig_ip_route_recursive-lookup_inherit-label-route_enable.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172369687__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring IPv6 route recursion to remotely leaked VPN routes, <a href="dc_vrp_mpls-l3vpn-v6_cfg_2000.html">configure basic BGP/MPLS IPv6 VPN</a>.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172369687__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=ipv6+route+recursive-lookup+inherit-label-route+enable"><b><span class="cmdname">ipv6 route recursive-lookup inherit-label-route enable</span></b></a></span></span><p><p>Recursion of all IPv6 routes to remotely leaked VPN routes is enabled.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0172369687__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>Run the <a href="cmdqueryname=display+current-configuration"><b><span class="cmdname">display current-configuration</span></b></a> command in the system view to check whether IPv6 route recursion to remotely leaked VPN routes is enabled.</p>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2000.html">BGP/MPLS IPv6 VPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2074.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2032.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>