
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring MPLS GR Helper on the Backbone Network">
<meta name="abstract" content="In the process of master/slave control board switchover or the system upgrade, you can configure MPLS GR Helper to ensure normal MPLS traffic forwarding. If LDP LSPs are configured on the backbone network, you can configure MPLS LDP GR Helper; if RSVP-TE tunnels are configured on the backbone network, you can configure MPLS RSVP GR Helper; if other types of tunnels are configured on the backbone network, you do not need to perform the operation.">
<meta name="description" content="In the process of master/slave control board switchover or the system upgrade, you can configure MPLS GR Helper to ensure normal MPLS traffic forwarding. If LDP LSPs are configured on the backbone network, you can configure MPLS LDP GR Helper; if RSVP-TE tunnels are configured on the backbone network, you can configure MPLS RSVP GR Helper; if other types of tunnels are configured on the backbone network, you do not need to perform the operation.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2074.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2075.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2077.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IPv6 VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00425560">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369683">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring MPLS GR Helper on the Backbone Network</title>
</head>
<body><a name="EN-US_TASK_0172369683"></a><a name="EN-US_TASK_0172369683"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring MPLS GR Helper on the Backbone Network</h1>
<div class="taskbody"><p>In the process of master/slave control board switchover or the system upgrade, you can configure MPLS GR Helper to ensure normal MPLS traffic forwarding. If LDP LSPs are configured on the backbone network, you can configure MPLS LDP GR Helper; if RSVP-TE tunnels are configured on the backbone network, you can configure MPLS RSVP GR Helper; if other types of tunnels are configured on the backbone network, you do not need to perform the operation.</p>
<div class="context"><a name="EN-US_TASK_0172369683__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><div class="p">You can configure different MPLS GR Helper functions on a backbone network for different tunnel types.<ul><li><p>If LDP LSPs are used, configure the MPLS LDP GR Helper function on the backbone network.</p>
</li><li><p>If RSVP-TE tunnels are used, configure the MPLS RSVP GR Helper function on the backbone network.</p>
</li></ul>
</div>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172369683__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure MPLS LDP GR.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+ldp"><b><span class="cmdname">mpls ldp</span></b></a></span></span><p><p>LDP is enabled on the local LSR and the MPLS LDP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=graceful-restart"><b><span class="cmdname">graceful-restart</span></b></a></span></span><p><p>LDP GR is enabled.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li><p>Enabling or disabling LDP GR can lead to reestablishment of an LDP session.</p>
</li><li><p>During the LDP GR, the <a href="cmdqueryname=undo+mpls+ldp"><b><span class="cmdname">undo mpls ldp</span></b></a> command and the <a href="cmdqueryname=reset+mpls+ldp"><b><span class="cmdname">reset mpls ldp</span></b></a> command cannot be run.</p>
</li></ul>
</div></div>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=graceful-restart+timer+reconnect"><b><span class="cmdname">graceful-restart timer reconnect</span></b></a> <i><span class="varname">time</span></i></span><p><p>The value of a Reconnect timer is set.</p>
</p><p><div class="p">After a GR Restarter performs an active/standby switchover, a GR helper detects that an LDP session established between the GR Helper and Restarter fails and then starts a Reconnect timer and waits for the reestablishment of the LDP session.<ul><li><p>If the Reconnect timer expires before the LDP session between the GR Helper and Restarter is established, the GR Helper immediately deletes MPLS forwarding entries associated with the GR Restarter and exits from the GR Helper process.</p>
</li><li><p>If the LDP session between the GR Helper and Restarter is established before the Reconnect timer expires, the GR Helper deletes the timer and starts a Recovery timer.</p>
</li></ul>
</div>
<p>When the GR Restarter and Helper negotiate the time to reestablish the LDP session, the value of the Reconnect timer that takes effect on the local end is the smaller value between the Neighbor-liveness timer value on the GR Helper and the Reconnect timer value on the GR Restarter.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=graceful-restart+timer+recovery"><b><span class="cmdname">graceful-restart timer recovery</span></b></a> <i><span class="varname">time</span></i></span></span><p><p>The value of a Recovery timer is set.</p>
</p><p><div class="p">A GR Helper starts a Recovery timer after an LDP session is reestablished and waits for LSP recovery.<ul><li><p>If the Recovery timer expires before LSPs are reestablished, the GR Helper considers that the GR process is completed on the GR Restarter and deletes the unrecovered LSPs.</p>
</li><li><p>If all LSPs recover before the Recovery timer expires, the GR Helper considers that the GR process is completed on the GR Restarter only after the Recovery timer expires.</p>
</li></ul>
</div>
<p>On a network with a large number of routes is faulty, run the <a href="cmdqueryname=graceful-restart+timer+recovery"><b><span class="cmdname">graceful-restart timer recovery</span></b></a> command to increase the value of the Recovery timer to ensure that all LSPs recover before the timer expires.</p>
<p>LDP GR devices negotiate the LSP Recovery timer values. The value that takes effect on the local end is the smaller one between the locally configured value and the value sent by the peer.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=graceful-restart+timer+neighbor-liveness"><b><span class="cmdname">graceful-restart timer neighbor-liveness</span></b></a> <i><span class="varname">time</span></i></span></span><p><p>The value of a Neighbor-liveness timer is set.</p>
</p><p><p>LDP GR-enabled devices negotiate the LDP reconnection time and uses the smaller value between the Neighbor-liveness time configured on a Helper and the Reconnect time configured on the Restarter. On a network with a few LSPs, the <a href="cmdqueryname=graceful-restart+timer+neighbor-liveness"><b><span class="cmdname">graceful-restart timer neighbor-liveness</span></b></a> command can be run to set a small value for the Neighbor-liveness timer to shorten the GR period.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configurations are committed.</p>
</p></li></ol>
</li><li><span>Configure RSVP GR.</span><ol><li class="substepexpand"><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls"><b><span class="cmdname">mpls</span></b></a></span></span><p><p>The MPLS view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+rsvp-te"><b><span class="cmdname">mpls rsvp-te</span></b></a></span></span><p><p>RSVP-TE is enabled.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+rsvp-te+hello"><b><span class="cmdname">mpls rsvp-te hello</span></b></a></span></span><p><p>The RSVP Hello extension is enabled globally.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+rsvp-te+hello+support-peer-gr"><b><span class="cmdname">mpls rsvp-te hello support-peer-gr</span></b></a></span></span><p><p>The RSVP GR support function is enabled.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <span><a href="cmdqueryname=mpls+rsvp-te+hello+nodeid-session"><b><span class="cmdname">mpls rsvp-te hello nodeid-session</span></b></a> <i><span class="varname">ip-address</span></i></span></span><p><p>A Hello session is set up between two RSVP neighboring nodes.</p>
<p><i><span class="varname">ip-address</span></i> specifies the LSR ID of an RSVP neighboring node.</p>
<p>On a TE FRR network, to ensure the protection of the primary tunnel when FRR and RSVP-TE GR simultaneously occur, run the <strong>mpls rsvp-te hello nodeid-session</strong> command to establish a Hello session between a Point of Local Repair (PLR) node and a Merge Point (MP).</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span></span><p><p>Return to the system view.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number</span></i></span></span><p><p>The view of an MPLS TE interface is displayed.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=mpls+rsvp-te+hello"><b><span class="cmdname">mpls rsvp-te hello</span></b></a></span></span><p><p>The RSVP Hello extension is enabled on an interface. This function needs to be configured on each involved interface after being enabled globally.</p>
</p></li><li class="substepexpand"><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2074.html">Configuring VPN GR Helper (IPv6)
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2075.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v6_cfg_2077.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>