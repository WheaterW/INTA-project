
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Checking Network Connectivity and Reachability">
<meta name="abstract" content="This section describes how to use the ping command to check the network connectivity between the source and destination, and how to use the tracert command to check the devices through which data packets are sent from the source to the destination.">
<meta name="description" content="This section describes how to use the ping command to check the network connectivity between the source and destination, and how to use the tracert command to check the devices through which data packets are sent from the source to the destination.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0094.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0096.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0098.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,l3vpnvrp,w00556928,l00468467,w00606909,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="BGP/MPLS IP VPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="h00847023">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="h00847023">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172369446">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Checking Network Connectivity and Reachability</title>
</head>
<body><a name="EN-US_TASK_0172369446"></a><a name="EN-US_TASK_0172369446"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Checking Network Connectivity and Reachability</h1>
<div class="taskbody"><p>This section describes how to use the <strong>ping</strong> command to check the network connectivity between the source and destination, and how to use the <strong>tracert</strong> command to check the devices through which data packets are sent from the source to the destination.</p>
<div class="steps-unordered"><a name="EN-US_TASK_0172369446__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Run the <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> command to check whether the network between the source and destination is properly connected.<span> You can run a different command to display detailed or brief information.</span></span><p><ul><li><p><span>Detailed information:</span> <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> [ <strong><span>ip</span></strong> ] { [ <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | { [ <strong><span>-i</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>-nexthop</span></strong> <i><span class="varname">nexthop-address</span></i> ] <sup>*</sup><span> | <strong><span>-si</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> }</span> } | { <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-range</span></strong> [ [ <strong><span>min</span></strong> <i><span class="varname">min-value</span></i> | <strong><span>max</span></strong> <i><span class="varname">max-value</span></i> | <strong><span>step</span></strong> <i><span class="varname">step-value</span></i> ] <sup>*</sup> ] } | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-m</span></strong> <i><span class="varname">time</span></i> | <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-p</span></strong> <i><span class="varname">pattern</span></i> | { <strong><span>-tos</span></strong> <i><span class="varname">tos-value</span></i> |<span> <strong><span>-dscp</span></strong> <i><span class="varname">dscp-value</span></i></span> } | { <strong><span>-f</span></strong><span> | <strong><span>ignore-mtu</span></strong></span> } | <strong><span>-q</span></strong> | <strong><span>-r</span></strong> | <strong><span>-vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>-v</span></strong> | <strong><span>-system-time</span></strong> | <strong><span>-ri</span></strong><span> | <strong><span>-8021p</span></strong> <i><span class="varname">8021p-value</span></i></span>| | <strong><span>-name</span></strong> | <strong><span>-detail</span></strong> ] <sup>*</sup> <i><span class="varname">host</span></i> [ <strong><span>ip-forwarding</span></strong> ] }<span> [ <strong><span>bypass</span></strong> <strong><span>-si</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } ]</span></p>
</li><li><span>Brief information: </span><a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> [ <strong><span>ip</span></strong> ] { [ <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | { [ <strong><span>-i</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } | <strong><span>-nexthop</span></strong> <i><span class="varname">nexthop-address</span></i> ] <sup>*</sup><span> | <strong><span>-si</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> }</span> } | { <strong><span>-s</span></strong> <i><span class="varname">packetsize</span></i> | <strong><span>-range</span></strong> [ [ <strong><span>min</span></strong> <i><span class="varname">min-value</span></i> | <strong><span>max</span></strong> <i><span class="varname">max-value</span></i> | <strong><span>step</span></strong> <i><span class="varname">step-value</span></i> ] <sup>*</sup> ] } | <strong><span>-t</span></strong> <i><span class="varname">timeout</span></i> | <strong><span>-m</span></strong> <i><span class="varname">time</span></i> | <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-p</span></strong> <i><span class="varname">pattern</span></i> | { <strong><span>-tos</span></strong> <i><span class="varname">tos-value</span></i> |<span> <strong><span>-dscp</span></strong> <i><span class="varname">dscp-value</span></i></span> } | { <strong><span>-f</span></strong><span> | <strong><span>ignore-mtu</span></strong></span> } | <strong><span>-vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>-ri</span></strong><span> | <strong><span>-8021p</span></strong> <i><span class="varname">8021p-value</span></i></span>| | <strong><span>-name</span></strong> | <strong><span>-brief</span></strong> ] <sup>*</sup> <i><span class="varname">host</span></i> [ <strong><span>ip-forwarding</span></strong> ] }<span> [ <strong><span>bypass</span></strong> <strong><span>-si</span></strong> { <i><span class="varname">interface-name</span></i> | <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> } ]</span></li></ul>
</p></li><li><span>To check the gateway that a packet passes when being transmitted from the source to the destination, run the <a href="cmdqueryname=tracert"><b><span class="cmdname">tracert</span></b></a> [ <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i> | <strong><span>-f</span></strong> <i><span class="varname">first-TTL</span></i> | <strong><span>-m</span></strong> <i><span class="varname">max-TTL</span></i> | <strong><span>-p</span></strong> <i><span class="varname">port</span></i> | <strong><span>-q</span></strong> <i><span class="varname">nqueries</span></i> | <strong><span>-vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> | <strong><span>-w</span></strong> <i><span class="varname">timeout</span></i> ]* <i><span class="varname">host</span></i> command.</span></li><li><span>To check the connectivity of the L3VPN LSP, run the <a href="cmdqueryname=ping+lsp"><b><span class="cmdname">ping lsp</span></b></a> [ <strong><span>-a</span></strong> <i><span class="varname">source-ip</span></i> | <strong><span>-c</span></strong> <i><span class="varname">count</span></i> | <strong><span>-exp</span></strong> <i><span class="varname">exp-value</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-m</span></strong> <i><span class="varname">interval</span></i> | <strong><span>-r</span></strong> <i><span class="varname">reply-mode</span></i> | <strong><span>-s</span></strong> <i><span class="varname">packet-size</span></i> | <strong><span>-t</span></strong> <i><span class="varname">time-out</span></i> | <strong><span>-v</span></strong> ] <sup>*</sup> <strong><span>ip</span></strong> <i><span class="varname">destination-iphost</span></i> <i><span class="varname">mask-length</span></i> [ <i><span class="varname">ip-address</span></i> ] <span>[ <strong><span>nexthop</span></strong> <i><span class="varname">nexthop-address</span></i> ]</span> command.</span></li><li><span>To check the gateways that the packet passes through from the source host to the destination on the LSP, run the <a href="cmdqueryname=tracert+lsp"><b><span class="cmdname">tracert lsp</span></b></a> [ <strong><span>-a</span></strong> <i><span class="varname">source-ip</span></i> | <strong><span>-exp</span></strong> <i><span class="varname">exp-value</span></i> | <strong><span>-h</span></strong> <i><span class="varname">ttl-value</span></i> | <strong><span>-r</span></strong> <i><span class="varname">reply-mode</span></i> | <strong><span>-t</span></strong> <i><span class="varname">time-out</span></i> ] <sup>*</sup> <strong><span>ip</span></strong> <i><span class="varname">destination-iphost</span></i> <i><span class="varname">mask-length</span></i> [ <i><span class="varname">ip-address</span></i> ] <span><strong><span>detail</span></strong></span> command.</span></li></ul></div>
<div class="example"><a name="EN-US_TASK_0172369446__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Example</h4><div class="p">After completing VPN configurations, you can:<ul><li>Run the <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> command on a local CE. The command output shows whether the local and remote CEs in the same VPN can communicate with each other. If the ping fails, you can run the <a href="cmdqueryname=tracert"><b><span class="cmdname">tracert</span></b></a> command to locate the faulty node.</li><li>Alternatively, run the <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> command with the -<strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> parameter on the PE. The command output shows whether the PE and CE in the same VPN as the PE can communicate with each other. If the ping fails, you can run the <a href="cmdqueryname=tracert"><b><span class="cmdname">tracert</span></b></a> command with the <strong><span>vpn-instance</span></strong> <i><span class="varname">vpn-instance-name</span></i> parameter to locate the faulty node.</li></ul>
</div>
<p>If multiple interfaces on the PE are bound to the same VPN, you need to specify the source IP address, that is, the <strong><span>-a</span></strong> <i><span class="varname">source-ip-address</span></i>, when you <a href="cmdqueryname=ping"><b><span class="cmdname">ping</span></b></a> or <a href="cmdqueryname=tracert"><b><span class="cmdname">tracert</span></b></a> the remote CE that accesses the peer PE. If no source IP address is specified, the PE selects the lowest IP address from the IP addresses of the interfaces on the PE bound to this VPN as the source address of the Internet Control Message Protocol (ICMP) messages. If the CE has no route to the selected IPv4 route, the CE discards the returned ICMP message.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0094.html">Maintaining BGP/MPLS IP VPN
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0096.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_mpls-l3vpn-v4_cfg_0098.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>