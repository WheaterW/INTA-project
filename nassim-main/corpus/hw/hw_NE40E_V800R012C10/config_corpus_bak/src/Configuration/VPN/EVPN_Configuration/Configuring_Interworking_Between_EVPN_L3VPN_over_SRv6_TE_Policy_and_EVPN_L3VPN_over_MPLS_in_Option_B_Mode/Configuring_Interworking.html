
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Interworking">
<meta name="abstract" content="After enabling interworking between EVPN L3VPN over SRv6 and EVPN L3VPN over MPLS in Option B mode in the EVPN address family, configure SID application on a per-route or per-next-hop basis so that different types of tunnels can communicate with each other.">
<meta name="description" content="After enabling interworking between EVPN L3VPN over SRv6 and EVPN L3VPN over MPLS in Option B mode in the EVPN address family, configure SID application on a per-route or per-next-hop basis so that different types of tunnels can communicate with each other.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0211.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0213.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001227409754">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Interworking</title>
</head>
<body><a name="EN-US_TASK_0000001227409754"></a><a name="EN-US_TASK_0000001227409754"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Interworking</h1>
<div class="taskbody"><p>After enabling interworking between EVPN L3VPN over SRv6 and EVPN L3VPN over MPLS in Option B mode in the EVPN address family, configure SID application on a per-route or per-next-hop basis so that different types of tunnels can communicate with each other.</p>
<div class="steps"><a name="EN-US_TASK_0000001227409754__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view of the ASBR is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=bgp"><b><span class="cmdname">bgp</span></b></a> <i><span class="varname">as-number</span></i></span><p><p>The BGP view is displayed.</p>
</p></li><li><span>(Optional) Run <span><a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname">segment-routing ipv6 locator</span></b></a> <i><span class="varname">locator-name</span></i></span> <a href="cmdqueryname=end-dt46"><b><span class="cmdname">end-dt46</span></b></a></span><p><p>The device is enabled to add the SID attribute to EVPN routes to be sent.</p>
</p></li><li><span>Run <a href="cmdqueryname=l2vpn-family+evpn"><b><span class="cmdname">l2vpn-family evpn</span></b></a></span><p><p>The EVPN address family is enabled, and its view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=undo+policy+vpn-target"><b><span class="cmdname">undo policy vpn-target</span></b></a></span><p><p>VPN target-based VPN route filtering is canceled. Then all VPN routes can be received.</p>
</p></li><li><span>Run <a href="cmdqueryname=interworking+srv6-mpls+evpn+ip-prefix"><b><span class="cmdname">interworking srv6-mpls evpn ip-prefix</span></b></a></span><p><p>Interworking between EVPN L3VPN over SRv6 and EVPN L3VPN over MPLS in Option B mode is configured.</p>
</p></li><li><span>Run <a href="cmdqueryname=segment-routing+ipv6+locator"><b><span class="cmdname">segment-routing ipv6 locator</span></b></a> <i><span class="varname">locator-name</span></i></span><p><p>The device is enabled to add the SID attribute to EVPN routes to be sent.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=apply-label+per-nexthop"><b><span class="cmdname">apply-label per-nexthop</span></b></a></span><p><p>The device is configured to allocate labels on a per-next-hop basis to routes received from SRv6 peers in the EVPN address family.</p>
</p></li><li><span>Run <a href="cmdqueryname=segment-routing+ipv6+apply-sid"><b><span class="cmdname">segment-routing ipv6 apply-sid</span></b></a> <strong><span>{ per-route | per-nexthop }</span></strong> <strong>evpn </strong><strong>mpls </strong><strong>ip-prefix</strong></span><p><p>The device is configured to apply for SIDs in one-SID-per-route or one-SID-per-next-hop mode for routes received from MPLS peers in the EVPN address family.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=peer+next-hop-local"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i><strong><span> next-hop-local</span></strong></span><p><p>The device is configured to set its IP address as the next hop of routes to be advertised to the specified IBGP peer. If IBGP peers are configured on the network, you need to run this command.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv4-address</span></i><strong><span> reflect-client</span></strong></span><p><p>The device is configured as an RR, and its peer as an RR client. If IBGP peers are configured on the network, you need to run this command.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=peer+next-hop-local"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i><strong><span> next-hop-local</span></strong></span><p><p>The device is configured to set its IP address as the next hop of routes to be advertised to the specified IBGP peer. If IBGP peers are configured on the network, you need to run this command.</p>
</p></li><li><span>(Optional) Run <a href="cmdqueryname=peer+reflect-client"><b><span class="cmdname">peer</span></b></a> <i><span class="varname">ipv6-address</span></i><strong><span> reflect-client</span></strong></span><p><p>The device is configured as an RR, and its peer as an RR client. If IBGP peers are configured on the network, you need to run this command.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the BGP-EVPN address family view.</p>
</p></li><li><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the BGP address family view.</p>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0211.html">Configuring Interworking Between EVPN L3VPN over SRv6 TE Policy and EVPN L3VPN over MPLS in Option B Mode
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0213.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>