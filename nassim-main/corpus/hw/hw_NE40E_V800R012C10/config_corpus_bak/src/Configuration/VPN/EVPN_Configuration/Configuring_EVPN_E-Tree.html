
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring EVPN E-Tree">
<meta name="abstract" content="This section describes how to configure EVPN E-Tree to isolate traffic between different interfaces in the same broadcast domain.">
<meta name="description" content="This section describes how to configure EVPN E-Tree to isolate traffic between different interfaces in the same broadcast domain.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0224.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0038.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="p00915595,w00800033,w00556928,l00468467,w00606909,evpnvrp,l00455378">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">

<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="featurename" content="EVPN">
<meta name="featuretype" content="VPN">
<meta name="OWNER" content="p00915595">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00878323">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172370514">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring EVPN E-Tree</title>
</head>
<body><a name="EN-US_TASK_0172370514"></a><a name="EN-US_TASK_0172370514"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring EVPN E-Tree</h1>
<div class="taskbody"><p>This section describes how to configure EVPN E-Tree to isolate traffic between different interfaces in the same broadcast domain.</p>
<div class="context"><a name="EN-US_TASK_0172370514__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Usage Scenario</h4><p>As the number of services carried on an EVPN increases, the number of user MAC addresses managed by the EVPN is also increasing. The user MAC addresses are flooded on the network through EVPN routes. As a result, all interfaces in the same broadcast domain can communicate with each other at Layer 2. And broadcast, unknown unicast, and multicast (BUM) and unicast traffic cannot be isolated for users who do not need to communicate with each other. To isolate interfaces that do not need to communicate with each other in the same broadcast domain, you can deploy the EVPN E-Tree function on the network.</p>
<div class="p">EVPN E-Tree implements the E-Tree model defined by the Metro Ethernet Forum (MEF) by setting the root or leaf attribute for AC interfaces. An AC interface with the leaf attribute is a leaf AC interface, and an AC interface with the root attribute is a root AC interface.<ul><li><p>A leaf AC interface and a root AC interface can send traffic to each other. However, flows between leaf AC interfaces are isolated from each other.</p>
</li><li><p>A root AC interface can communicate with the other root AC interfaces as well as leaf AC interfaces.</p>
</li></ul>
</div>
<p>EVPN E-Tree supports different types of tunnels, including MPLS LDP, MPLS TE, SRv6 BE, and SRv6 TE Policy.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172370514__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Pre-configuration Tasks</h4><p>Before configuring EVPN E-Tree, complete the following tasks:</p>
<ul><li><p>Configure <a href="dc_vrp_evpn_cfg_0065.html">BD EVPN functions</a> or <a href="dc_vrp_evpn_cfg_0003.html">basic EVPN functions</a> on the network.</p>
</li><li>Configure MPLS (LDP or TE) tunnels, <a href="dc_vrp_srv6_cfg_all_0023_copy.html">EVPN VPLS over IS-IS SRv6 BE</a>, or <a href="dc_vrp_cfg_evpn-vpls_over_srv6-te_policy_copy.html">EVPN VPLS over SRv6 TE Policy</a> on the backbone network.</li></ul>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172370514__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure EVPN E-Tree for a BD EVPN.</span><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <em>vpn-instance-name</em> <strong><span>bd-mode</span></strong> command to enter the view of a BD EVPN instance.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=etree+enable"><b><span class="cmdname">etree enable</span></b></a> command to enable EVPN E-Tree.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type interface-number.subnum</span></i> <strong><span>mode l2</span></strong> command to enter the view of the Layer 2 sub-interface that the BD is associated with.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=bridge-domain"><b><span class="cmdname">bridge-domain</span></b></a> <i><span class="varname">bd-id</span></i> command to add the Layer 2 sub-interface to the BD.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=evpn+e-tree-leaf"><b><span class="cmdname">evpn e-tree-leaf</span></b></a> command to configure the leaf attribute for the interface.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li class="substepexpand"><span>(Optional) In an SRv6 scenario, configure the tunnel ID carried in the inclusive multicast route to be sent to an IPv6 neighbor.</span><p><ol type="a"><li>Run the <a href="cmdqueryname=evpn"><b><span class="cmdname">evpn</span></b></a> command to enter the global EVPN configuration view.</li><li>Run the <a href="cmdqueryname=evpn+tunnel-id"><b><span class="cmdname">evpn tunnel-id</span></b></a> <i><span class="varname">tunnel-id-value</span></i> command to configure the tunnel ID carried in the inclusive multicast route to be sent to an IPv6 neighbor.<p><i><span class="varname">tunnel-id-value</span></i> is in the IPv6 address format. You are advised to set this parameter to a reachable IPv6 address.</p>
</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</li></ol>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li><li><span>Configure EVPN E-Tree for a basic EVPN.</span><p></p><ol><li class="substepexpand"><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=evpn+vpn-instance"><b><span class="cmdname">evpn vpn-instance</span></b></a> <em>vpn-instance-name</em> command to enter the view of an EVPN instance.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=etree+enable"><b><span class="cmdname">etree enable</span></b></a> command to enable EVPN E-Tree.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the view of the interface to be bound to the basic EVPN instance.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=evpn+binding+vpn-instance"><b><span class="cmdname">evpn binding vpn-instance</span></b></a> <i><span class="varname">vpn-instance-name</span></i> command to bind the interface to the EVPN instance.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=evpn+e-tree-leaf"><b><span class="cmdname">evpn e-tree-leaf</span></b></a> command to configure the leaf attribute for the interface.</span></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</span></li><li class="substepexpand"><span>(Optional) In an SRv6 scenario, configure the tunnel ID carried in the inclusive multicast route to be sent to an IPv6 neighbor.</span><p><ol type="a"><li>Run the <a href="cmdqueryname=evpn"><b><span class="cmdname">evpn</span></b></a> command to enter the global EVPN configuration view.</li><li>Run the <a href="cmdqueryname=evpn+tunnel-id"><b><span class="cmdname">evpn tunnel-id</span></b></a> <i><span class="varname">tunnel-id-value</span></i> command to configure the tunnel ID carried in the inclusive multicast route to be sent to an IPv6 neighbor.<p><i><span class="varname">tunnel-id-value</span></i> is in the IPv6 address format. You are advised to set this parameter to a reachable IPv6 address.</p>
</li><li>Run the <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a> command to return to the system view.</li></ol>
</p></li><li class="substepexpand"><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol>
</li></ul></div>
<div class="postreq"><a name="EN-US_TASK_0172370514__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Verifying the Configuration</h4><ul><li>Run the <a href="cmdqueryname=display+bgp+evpn+all+routing-table"><b><span class="cmdname">display bgp evpn all routing-table</span></b></a> [ { <strong><span>ad-route</span></strong> | <strong><span>mac-route</span></strong> } <i><span class="varname">prefix</span></i> ] command to check the leaf attribute carried in routes.</li><li>Run the <a href="cmdqueryname=display+traffic-statistics+discard+evpn+etree"><b><span class="cmdname">display traffic-statistics discard evpn etree</span></b></a> [ <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> ] command to check statistics about lost packets between leaf nodes in an EVPN E-Tree scenario.</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0000.html">EVPN Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0224.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0038.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>