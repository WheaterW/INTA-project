
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring the Function to Save or Restore DHCPv6 Data">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcpv6_server_cfg_0030.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcpv6_server_cfg_0039.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcpv6_server_cfg_0047.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,z00485179,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="DHCP v6">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="DHCP v6">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="DHCP v6">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="DHCP v6">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="z00485179,x00504385">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x00504385">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0000001289351376">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring the Function to Save or Restore DHCPv6 Data</title>
</head>
<body><a name="EN-US_TASK_0000001289351376"></a><a name="EN-US_TASK_0000001289351376"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring the Function to Save or Restore DHCPv6 Data</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0000001289351376__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>When the device functions as a DHCPv6 server, you can enable the device to save or restore DHCPv6 data. This avoids data loss caused by device faults. After the function to save DHCPv6 data is enabled, the device saves DHCPv6 data at a specified interval in the <strong>lease.txt</strong> and <strong>conflict.txt</strong> files under the <strong>dhcpv6</strong> folder in the CF card. The data includes the last data saving time, names of IPv6 address pools, client DUIDs, IAIDs, IPv6 addresses and prefixes bound to client DUIDs and IAIDs, conflicting addresses, and conflict detection time. You can restore DHCPv6 data from the <a href="cmdqueryname=lease.txt"><b><span class="cmdname">lease.txt</span></b></a> and <a href="cmdqueryname=conflict.txt"><b><span class="cmdname">conflict.txt</span></b></a> files after the system restarts from a failure.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0000001289351376__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <a href="cmdqueryname=dhcpv6+server+database"><b><span class="cmdname">dhcpv6 server database</span></b></a> { <strong><span>enable</span></strong> | <strong><span>recover</span></strong> | <strong><span>write-delay</span></strong> <i><span class="varname">interval</span></i> }</span><p><p>The function to save or restore DHCPv6 data is enabled.</p>
</p><p><div class="p">You can specify <strong><span>write-delay</span></strong> to modify the interval at which DHCPv6 data is saved. <div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>An encrypted file integrity check code is added to the <strong>lease.txt</strong> and <strong>conflict.txt</strong> files to prevent tampering. After the device restarts, the system decrypts this code and uses it to verify the file integrity before restoring the address lease and conflict information from the <strong>lease.txt</strong> and <strong>conflict.txt</strong> files. If the verification is successful, the data is restored; otherwise, it is discarded and a log is recorded.</p>
<ul><li>If you manually modify the content of a file, run the <a href="cmdqueryname=dhcpv6+server+database+authentication-mode+no-check"><b><span class="cmdname">dhcpv6 server database authentication-mode no-check</span></b></a> command to set the file integrity authentication mode to no-check before the restart.</li><li>The root keys for decrypting and encrypting the file integrity check code must be the same. Otherwise, the decryption fails. The root key on each device is unique to that device. If you use a backup file generated on another device to restore data, run the <a href="cmdqueryname=dhcpv6+server+database+authentication-mode+no-check"><b><span class="cmdname">dhcpv6 server database authentication-mode no-check</span></b></a> command to set the file integrity authentication mode to no-check before the restart.</li></ul>
</div></div>
</div>
</p></li><li><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcpv6_server_cfg_0030.html">Configuring the DHCPv6 Server
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcpv6_server_cfg_0039.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_dhcpv6_server_cfg_0047.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>