
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Routed Proxy ND">
<meta name="abstract" content="This section provides an example for configuring routed proxy ND in a scenario where hosts are on the same network segment but different physical networks and the gateways connected to the hosts have different addresses.">
<meta name="description" content="This section provides an example for configuring routed proxy ND in a scenario where hosts are on the same network segment but different physical networks and the gateways connected to the hosts have different addresses.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipv6_cfg_0036.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0011.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="y00852169,x00504385">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="y00852169">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x00504385">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365191">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Routed Proxy ND</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365191"></a><a name="EN-US_TASK_0172365191"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Routed Proxy ND</h1>
<div class="taskbody"><p>This section provides an example for configuring routed proxy ND in a scenario where hosts are on the same network segment but different physical networks and the gateways connected to the hosts have different addresses.</p>
<div class="context"><a name="EN-US_TASK_0172365191__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>If hosts that need to communicate are on the same network segment but different physical networks and the gateway connected to the hosts are configured with different IP addresses, enable routed proxy ND on the interfaces connecting the <span class="keyword" id="EN-US_TASK_0172365191__en-us_concept_0161511699_keyword969374633214254">Router</span> and hosts.</p>
<div class="p">In <a href="#EN-US_TASK_0172365191__fig_dc_vrp_nd_feature_002903">Figure 1</a>, DeviceA and DeviceB are connected to different networks. Interface1 and Interface2, belonging to DeviceA and DeviceB, respectively, have different IPv6 addresses. HostA and HostB are used as an example. To communicate with HostB, HostA must first send an NS message to request HostB's MAC address because the destination IPv6 address is on the same network segment as the local IPv6 address. However, as HostA and HostB are located on different physical networks, HostB cannot receive the NS message and therefore does not respond. To solve this problem, enable routed proxy ND on DeviceA's Interface1 and DeviceB's Interface2.<div class="fignone" id="EN-US_TASK_0172365191__fig_dc_vrp_nd_feature_002903"><a name="EN-US_TASK_0172365191__fig_dc_vrp_nd_feature_002903"></a><a name="fig_dc_vrp_nd_feature_002903"></a><span class="figcap"><b>Figure 1 </b>Routed proxy ND</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 and 2 in this example represent GE<span>0/1/1</span> and GE<span>0/1/2</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_nd_feature_003710.png"></span><br></div>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365191__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Configure IPv6 addresses for interfaces.</p>
</li><li><p>Configure an IGP to implement route reachability.</p>
</li><li><p>Enable routed proxy ND on interfaces.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365191__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IPv6 addresses of interfaces</p>
</li><li><p>IPv6 addresses of hosts</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365191__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure IPv6 addresses for interfaces.</span><p><p># Configure DeviceA.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceA</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 address 2001:db8:300:400::2 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/2</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/2</span>] <strong>ipv6 address 2001:db8:300:600::1 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname DeviceB</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 address 2001:db8:300:600::2 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/2</span>] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/2</span>] <strong>ipv6 address 2001:db8:300:500::2 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB] <strong>commit</strong></pre>
</p></li><li><span>Configure an IGP to implement route reachability. OSPFv3 is used as an IGP in this example.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>ospfv3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-ospfv3-1] <strong>router-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-ospfv3-1] <strong>area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-ospfv3-1-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/1</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/2</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>ospfv3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-ospfv3-1] <strong>router-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-ospfv3-1] <strong>area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-ospfv3-1-area-0.0.0.0] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-ospfv3-1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/1</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/2</span>] <strong>ospfv3 1 area 0</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB] <strong>commit</strong></pre>
</p></li><li><span>Enable routed proxy ND on interfaces.</span><p><p># Configure DeviceA.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceA-GigabitEthernet<span>0/1/1</span>] <strong>ipv6 nd proxy route enable </strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceA] <strong>commit</strong></pre>
<p># Configure DeviceB.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>DeviceB-GigabitEthernet<span>0/1/2</span>] <strong>ipv6 nd proxy route enable </strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>DeviceB] <strong>commit</strong></pre>
</p></li><li><span>Configure the IPv6 addresses of hosts.</span><p><p># Configure the IPv6 address of HostA as 2001:db8:300:400::1/48.</p>
<p># Configure the IPv6 address of HostB as 2001:db8:300:500::1/48.</p>
</p></li><li><span>Verify the configuration.</span><p><p>After the configuration is complete, HostA and HostB can ping each other.</p>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172365191__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>DeviceA configuration file</p>
<pre class="screen">#
sysname DeviceA
#
ospfv3 1
 router-id 1.1.1.1
 area 0.0.0.0
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:300:400::2/64
 ospfv3 1 area 0.0.0.0
 ipv6 nd proxy route enable
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:300:600::1/64
 ospfv3 1 area 0.0.0.0
#
return
</pre>
</li><li><p>DeviceB configuration file</p>
<pre class="screen">#
sysname DeviceB
#
ospfv3 1
 router-id 2.2.2.2
 area 0.0.0.0
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:300:600::2/64
 ospfv3 1 area 0.0.0.0
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:300:500::2/64
 ospfv3 1 area 0.0.0.0
 ipv6 nd proxy route enable
#
return
</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0009.html">Configuration Examples for ND
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipv6_cfg_0036.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0011.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>