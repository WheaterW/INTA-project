
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring an Advanced ACL to Defend Against Attacks">
<meta name="abstract" content="This section provides an example for configuring an advanced ACL to defend against attacks.">
<meta name="description" content="This section provides an example for configuring an advanced ACL to defend against attacks.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0074.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0075.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0104.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,aclvrp,z00485179,w00556928,w00606909">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ACL">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="z00485179,z00648985">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172364651">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring an Advanced ACL to Defend Against Attacks</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172364651"></a><a name="EN-US_TASK_0172364651"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring an Advanced ACL to Defend Against Attacks</h1>
<div class="taskbody"><p>This section provides an example for configuring an advanced ACL to defend against attacks.</p>
<div class="context"><a name="EN-US_TASK_0172364651__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>As shown in <a href="#EN-US_TASK_0172364651__fig_dc_vrp_acl4_cfg_007601">Figure 1</a>, <span class="keyword">Device</span>A, <span class="keyword">Device</span>B, and <span class="keyword">Device</span>C are access devices whereas <span class="keyword">Device</span>D, <span class="keyword">Device</span>E, and <span class="keyword">Device</span>F are core devices. The access devices connect to the core devices through 10 Gbit/s interfaces. Voice and 3G services run on the network. To control user access and ensure network and device security, security policies need to be configured on the access routers to prevent ICMP packet attacks. To achieve this purpose, configure an advanced ACL on <span class="keyword">Device</span>A.</p>
<p>If the attacker (PC) attacks the network shown in <a href="#EN-US_TASK_0172364651__fig_dc_vrp_acl4_cfg_007601">Figure 1</a>, <span class="keyword">Device</span>A can use the configured advanced ACL to prevent the ICMP packet attacks. </p>
<div class="fignone" id="EN-US_TASK_0172364651__fig_dc_vrp_acl4_cfg_007601"><a name="EN-US_TASK_0172364651__fig_dc_vrp_acl4_cfg_007601"></a><a name="fig_dc_vrp_acl4_cfg_007601"></a><span class="figcap"><b>Figure 1 </b>Configuring an advanced ACL to defend against attacks</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 and 2 in this example represent GE <span>0/1/0</span> and GE <span>0/2/0</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="figure/en-us_image_0000001576583941.png"></span></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172364651__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Set passwords for users that log in to a device using the NMS and CLI to improve login security.</p>
</li><li><p>Record all information about unsuccessful logins in a log file and output log information to the console interface for network administrators to check the login information.</p>
</li><li><p>Configure an advanced ACL on <span class="keyword">Device</span>A and apply the advanced ACL to QoS services to defend against ICMP packet attacks.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172364651__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>IP address of each interface</p>
</li><li><p>Password for users that log in to a device using the NMS and CLI</p>
</li><li><p>Number of the advanced ACL</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172364651__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign an IP address to each interface. For configuration details, see <a href="#EN-US_TASK_0172364651__example920376786214033">Configuration Files</a> in this section.</span></li><li><span>Set a password for users that log in to a device using the NMS and CLI. </span><p><pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname <span class="keyword">Device</span>A</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>user-interface console 0</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-con0] <strong>shell</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-con0]<strong> authentication-mode password</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-con0] <strong>set authentication password cipher YsHsjx_202206</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-con0] <strong>idle-timeout 30 0</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-con0] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ui-con0] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>user-interface maximum-vty 15</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>user-interface vty 5 14</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty5-14] <strong>shell</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty5-14] <strong>authentication-mode password</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty5-14] <strong>set authentication password cipher YsHsjx_202206</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty5-14] <strong>idle-timeout 30 0</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A-ui-vty5-14] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-ui-vty5-14] <strong>quit</strong></pre>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The configurations of the other access <span class="keyword">Router</span>s are similar to the configuration of <span class="keyword">Device</span>A.</p>
</div></div>
</p></li><li><span>Record all information about unsuccessful logins in a log file and output log information to the console interface.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>info-center enable</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>info-center source default channel 9 log level warning</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>info-center logfile channel channel9</strong>
[<span class="keyword">*</span><span class="keyword">Device</span>A] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>quit</strong>
&lt;<span class="keyword">Device</span>A&gt; <strong>terminal logging</strong></pre>
</p></li><li><span>Configure an advanced ACL on <span class="keyword">Device</span>A and apply the advanced ACL to QoS services to defend against ICMP packet attacks.</span><p><pre class="screen">&lt;<span class="keyword">Device</span>A&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>acl number 3001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl4-advance-3001] <strong>description anti-virus</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl4-advance-3001] <strong>rule 5 deny icmp</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-acl4-advance-3001] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-acl4-advance-3001] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic classifier anti-virus</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-anti-virus] <strong>if-match acl 3001</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-classifier-anti-virus] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-classifier-anti-virus] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic behavior anti-virus</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-behavior-anti-virus] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-behavior-anti-virus] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>traffic policy anti-virus</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-trafficpolicy-anti-virus] <strong>classifier anti-virus behavior anti-virus</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-trafficpolicy-anti-virus] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-trafficpolicy-anti-virus] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A] <strong>interface gigabitethernet <span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>traffic-policy anti-virus inbound</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>traffic-policy anti-virus outbound</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">Device</span>A-GigabitEthernet<span>0/2/0</span>] <strong>commit</strong></pre>
</p></li><li><span>Verify the configuration. </span><p><p># Ping <span class="keyword">Device</span>A from the PC. The command output shows that the ping operation fails.</p>
<pre class="screen">c:\&gt;ping 172.16.1.1

Pinging 172.16.1.1 with 32 bytes of data:
Request timed out.
Request timed out.
Request timed out.
Request timed out.

Ping statistics for 172.16.1.1:
    Packets: Sent = 4, Received = 0, Lost = 4 &lt;100% loss&gt;,</pre>
<p># Delete the advanced ACL on <span class="keyword">Device</span>A. Then the command output shows that ping operation is successful.</p>
<pre class="screen">c:\&gt;ping 172.16.1.1

Pinging 172.16.1.1 with 32 bytes of data:
Reply from 172.16.1.1: bytes=32 time&lt;1ms TTL=128
Reply from 172.16.1.1: bytes=32 time&lt;1ms TTL=128
Reply from 172.16.1.1: bytes=32 time&lt;1ms TTL=128
Reply from 172.16.1.1: bytes=32 time&lt;1ms TTL=128

Ping statistics for 172.16.1.1:
    Packets: Sent = 4, Received = 4, Lost = 0 &lt;0% loss&gt;,
Approximate round trip times in mill-seconds:
    Minimum = 0ms, Maximum = 0 ms, Average = 0ms</pre>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172364651__example920376786214033"><a name="EN-US_TASK_0172364651__example920376786214033"></a><a name="example920376786214033"></a><a name="EN-US_TASK_0172364651__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Only the configuration file of <span class="keyword">Device</span>A is provided.</p>
</div></div>
<ul><li><p><span class="keyword">Device</span>A configuration file</p>
<pre class="screen">#
 sysname <span class="keyword">Device</span>A
#
info-center enable
 info-center source default channel 9 log level warning
<strong> </strong>info-center logfile channel channel9
#
acl number 3001
 description anti-virus
 rule 5 deny icmp
#
traffic classifier anti-virus
 if-match acl 3001
#
traffic behavior anti-virus
#
traffic policy anti-virus
 classifier anti-virus behavior anti-virus
#
interface GigabitEthernet<span>0/2/0</span>
 undo shutdown
 traffic-policy anti-virus inbound
 traffic-policy anti-virus outbound
#
user-interface maximum-vty 15
user-interface console 0
shell
 authentication-mode password
 set authentication password cipher $1c$$
 idle-timeout 30 0
user-interface vty 0 4
user-interface vty 5 14
shell
 set authentication password cipher $1c$`g=H/qo%;7$b6Za%2'[D!0blsOXF=.3QCNC-f)co,[aeE.`e`-&lt;$
 idle-timeout 30 0
user-interface vty 16 20
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0074.html">Configuration Examples for ACLs
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0075.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_acl4_cfg_0104.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>