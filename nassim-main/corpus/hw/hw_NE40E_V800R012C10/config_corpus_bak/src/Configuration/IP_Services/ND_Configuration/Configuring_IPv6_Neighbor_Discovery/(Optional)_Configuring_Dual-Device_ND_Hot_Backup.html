
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="(Optional) Configuring Dual-Device ND Hot Backup">
<meta name="abstract" content="Dual-device ND hot backup can be enabled to achieve backup of ND entries between devices. This allows fast service switching in case of a network node or link failure, enhancing service reliability.">
<meta name="description" content="Dual-device ND hot backup can be enabled to achieve backup of ND entries between devices. This allows fast service switching in case of a network node or link failure, enhancing service reliability.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipv6_cfg_0008.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0044.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0039.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="y00852169,x00504385">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="y00852169">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x00504385">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365154">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>(Optional) Configuring Dual-Device ND Hot Backup</title>
</head>
<body><a name="EN-US_TASK_0172365154"></a><a name="EN-US_TASK_0172365154"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">(Optional) Configuring Dual-Device ND Hot Backup</h1>
<div class="taskbody"><p>Dual-device ND hot backup can be enabled to achieve backup of ND entries between devices. This allows fast service switching in case of a network node or link failure, enhancing service reliability.</p>
<div class="prereq" style="margin-left:0"><a name="EN-US_TASK_0172365154__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Prerequisites</h4>
<div class="p"><p>Before configuring manually triggered dual-device ND hot backup, ensure that the same ND configuration has been performed on both the master and backup devices. Otherwise, downstream traffic may be interrupted after a master/backup switchover.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365154__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Context</h4><p>On the network shown in <a href="#EN-US_TASK_0172365154__fig_dc_vrp_dhcp_server_cfg_002003">Figure 1</a>, users access DeviceA and DeviceB over the switch. A VRRP6 group is configured between DeviceA and DeviceB to establish the master/backup relationship, with DeviceA as the master device and DeviceB as the backup device.</p>
<p>In normal circumstances, DeviceA forwards both upstream and downstream traffic. If DeviceA or the link between DeviceA and the switch fails, a master/backup VRRP6 switchover is triggered and DeviceB becomes the master device. Then, DeviceB needs to advertise network segment routes to devices on the network side so that downstream traffic is directed from the network side to DeviceB. If DeviceB has not learned ND entries from user-side devices, the downstream traffic is interrupted. DeviceB can properly forward downstream traffic only after it learns ND entries from user-side devices.</p>
<p>If ND entries are not synchronized from DeviceA to DeviceB and a master/backup switchover occurs, downstream traffic may be interrupted because DeviceB does not learn ND entries from users-side devices in time. To address this problem, deploy dual-device ND hot backup on DeviceA and DeviceB.</p>
<div class="fignone" id="EN-US_TASK_0172365154__fig_dc_vrp_dhcp_server_cfg_002003"><a name="EN-US_TASK_0172365154__fig_dc_vrp_dhcp_server_cfg_002003"></a><a name="fig_dc_vrp_dhcp_server_cfg_002003"></a><span class="figcap"><b>Figure 1 </b>Networking of dual-device ND hot backup</span><br><span><img class="vsd" src="images/fig_dc_vrp_nd_feature_000702.png"></span><br></div>
<p>Perform the following steps on the devices that back up ND entries from each other:</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Dual-device ND hot backup applies in both VRRP6 and E-Trunk scenarios. This section describes the implementation of dual-device ND hot backup in VRRP6 scenarios. For details about the configuration in E-Trunk scenarios, see <em>Configuration Guide &gt; Network Reliability &gt; Dual-Device Backup Configuration &gt; Configuring Dual-Device IGMP Snooping Hot Backup in a Master/Backup E-Trunk Scenario</em>.</p>
</div></div>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365154__1.4.3"></a><a name="1.4.3"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Configure basic VRRP6 group functions.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [.<i><span class="varname">subinterface-number</span></i> ]</span><p><p>The interface view for a VRRP6 group is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6+enable"><b><span class="cmdname">ipv6 enable</span></b></a></span><p><p>IPv6 is enabled on the interface.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=ipv6+address"><b><span class="cmdname">ipv6 address </span></b></a>{ <i><span class="varname">ipv6-address</span></i> <i><span class="varname">prefix-length</span></i> | <i><span class="varname">ipv6-address/prefix-length</span></i> } [ <strong><span>tag</span></strong> <i><span class="varname">tag-value</span></i> ] or <a href="cmdqueryname=ipv6+address"><b><span class="cmdname">ipv6 address </span></b></a>{ <i><span class="varname">ipv6-address</span></i><i><span class="varname"> prefix-length</span></i> | <i><span class="varname">ipv6-address/prefix-length</span></i> } <strong><span>eui-64</span></strong> [ <strong><span>tag</span></strong> <i><span class="varname">tag-value</span></i> ]</span><p><p>A global unicast address is configured for the interface.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>virtual-ip</span></strong> <i><span class="varname">virtual-address</span></i></span><p><p>A VRRP6 group is created and assigned a virtual IPv6 address.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>preempt-mode</span></strong> <strong><span>timer</span></strong> <strong><span>delay</span></strong> <i><span class="varname">delay-time</span></i></span><p><p>A preemption delay is set for devices in the VRRP6 group.</p>
</p><p><p>You are advised to set the preemption delay to 0 on a backup device to allow it to preempt the master role immediately after the master device fails or set the preemption delay to a non-0 value on the master device so that it can preempt the master role after a specified delay if a master/backup VRRP6 switchover is performed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>priority</span></strong> <i><span class="varname">priority-value</span></i></span><p><p>A priority is configured for the VRRP6 group.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> <strong><span>timer</span></strong> <strong><span>advertise</span></strong> <i><span class="varname">advertise-interval</span></i></span><p><p>An interval for sending VRRP6 Advertisement packets is set.</p>
</p><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>The interval for sending VRRP6 Advertisement packets cannot be less than the time required for a master/backup switchover. Otherwise, VRRP6 intermittently goes Down. You are advised to set the interval for sending VRRP6 Advertisement packets to more than 1 second.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the interface view.</p>
</p></li></ol>
</li><li><span>Configure an RBS.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-service"><b><span class="cmdname">remote-backup-service</span></b></a> <i><span class="varname">remote-backup-service-name</span></i></span><p><p>An RBS is created, and the RBS view is displayed.</p>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=batch-backup"><b><span class="cmdname">batch-backup</span></b></a> <strong><span>service-type</span></strong> <strong><span>nd</span></strong> <strong><span>now</span></strong></span><p><p>The user service configured for the RBS is backed up instantly.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the RBS view.</p>
</p></li></ol>
</li><li><span>Configure an RBP.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>An RBP is created, and the RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=peer-backup"><b><span class="cmdname">peer-backup</span></b></a> <strong><span>hot</span></strong></span><p><p>A backup mode is configured for user information backup between devices.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=vrrp6-id"><b><span class="cmdname">vrrp6-id</span></b></a> <i><span class="varname">vrid</span></i> <strong><span>interface</span></strong> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i></span><p><p>The RBP is bound to the VRRP6 group.</p>
</p><p><p><i><span class="varname">vrid</span></i> specifies the ID of a VRRP6 group. The ID must be the same as the VRRP6 group's ID that was configured using the <a href="cmdqueryname=vrrp6+vrid"><b><span class="cmdname">vrrp6 vrid</span></b></a> <i><span class="varname">virtual-router-id</span></i> [ <strong><span>virtual-ip</span></strong> <i><span class="varname">virtual-address</span></i> ] command in the corresponding interface view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=backup-id"><b><span class="cmdname">backup-id</span></b></a> <i><span class="varname">backup-id</span></i> <a href="cmdqueryname=remote-backup-service"><b><span class="cmdname">remote-backup-service</span></b></a> <i><span class="varname">service-name</span></i></span><p><p>A backup ID is configured for the RBP, and the RBP is associated with a specified RBS.</p>
</p><p><p><i><span class="varname">backup-id</span></i> specifies a backup ID for an RBP. You can use a backup ID and an RBS to determine an RBP. The backup IDs configured for the same RBP must be the same on the master and backup devices and can no longer be configured for other RBPs.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the RBP view.</p>
</p></li></ol>
</li><li><span>Enable the remote backup function for ND.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>An RBP is created, and the RBP view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=service-type+nd"><b><span class="cmdname">service-type nd</span></b></a></span><p><p>The remote backup function for ND is enabled.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=quit"><b><span class="cmdname">quit</span></b></a></span><p><p>Exit the RBP view.</p>
</p></li></ol>
</li><li><span>Bind the RBP to an interface.</span><ol type="a"><li class="substepexpand"><span>Run <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> [.<i><span class="varname">subinterface-number</span></i> ]</span><p><p>The interface view for the VRRP6 group is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> <i><span class="varname">profile-name</span></i></span><p><p>The RBP is bound to the interface.</p>
</p><p><p>The name of the RBP to be bound to an interface must be the same as the name of the RBP created using the <a href="cmdqueryname=remote-backup-profile"><b><span class="cmdname">remote-backup-profile</span></b></a> command in the system view.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_ipv6_cfg_0008.html">Configuring IPv6 ND
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0044.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0039.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>