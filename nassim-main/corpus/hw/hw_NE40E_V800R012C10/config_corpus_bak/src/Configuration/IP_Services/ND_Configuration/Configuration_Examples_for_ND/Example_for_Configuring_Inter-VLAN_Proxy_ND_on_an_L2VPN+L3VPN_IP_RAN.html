
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Inter-VLAN Proxy ND on an L2VPN+L3VPN IP RAN">
<meta name="abstract" content="This section provides an example for configuring inter-VLAN proxy ND on an L2VPN+L3VPN IP RAN.">
<meta name="description" content="This section provides an example for configuring inter-VLAN proxy ND on an L2VPN+L3VPN IP RAN.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0009.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0014.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0057.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="y00852169,x00504385">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="ND">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="y00852169">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="x00504385">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365204">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Example for Configuring Inter-VLAN Proxy ND on an L2VPN+L3VPN IP RAN</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172365204"></a><a name="EN-US_TASK_0172365204"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Inter-VLAN Proxy ND on an L2VPN+L3VPN IP RAN</h1>
<div class="taskbody"><p>This section provides an example for configuring inter-VLAN proxy ND on an L2VPN+L3VPN IP RAN.</p>
<div class="context"><a name="EN-US_TASK_0172365204__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>If hosts are on the same network segment and physical network but belong to different VLANs, inter-VLAN proxy ND must be enabled on the associated VLAN interfaces to enable Layer 3 interworking between the hosts.</p>
<div class="p">On the L2VPN+L3VPN IP RAN shown in <a href="#EN-US_TASK_0172365204__fig_dc_vrp_nd_feature_002903">Figure 1</a>, the CSGs are connected to the ASG through L2VE sub-interfaces, and the ASG terminates L2VPN packets and is connected to the BGP/MPLS IPv6 VPN through an L3VE sub-interface. CSG1 and CSG2 belong to VLAN 1000 and VLAN 1100, respectively. HostA and HostB connected to the CSGs are on the same network segment but in different VLANs. Therefore, HostA and HostB cannot ping each other. To address this problem, enable inter-VLAN proxy ND on the L3VE sub-interface of the ASG.<div class="fignone" id="EN-US_TASK_0172365204__fig_dc_vrp_nd_feature_002903"><a name="EN-US_TASK_0172365204__fig_dc_vrp_nd_feature_002903"></a><a name="fig_dc_vrp_nd_feature_002903"></a><span class="figcap"><b>Figure 1 </b>Networking of inter-VLAN proxy ND on an L2VPN+L3VPN IP RAN</span><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Interfaces 1 and 2 in this example represent GE<span>0/1/1</span> and GE<span>0/1/2</span>, respectively.</p>
</div></div>
<br><span><img class="vsd" src="images/fig_dc_vrp_nd_feature_003716.png"></span></div>
</div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="33.223322332233224%" id="mcps1.4.1.4.1.4.1.1" liSelected="liSelected"><p>Device Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.223322332233224%" id="mcps1.4.1.4.1.4.1.2" liSelected="liSelected"><p>Interface Name</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="33.55335533553355%" id="mcps1.4.1.4.1.4.1.3" liSelected="liSelected"><p>Interface Address</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" rowspan="3" valign="top" width="33.223322332233224%" headers="mcps1.4.1.4.1.4.1.1 "><p>CSG1</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.4.1.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.2.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>Loopback0</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>3.3.3.3/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="33.223322332233224%" headers="mcps1.4.1.4.1.4.1.1 "><p>CSG2</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.4.1.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.4.1.4.1.4.1.3 "><p>-</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.1.2/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>Loopback0</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>2.2.2.2/32</p>
</td>
</tr>
<tr><td class="cellrowborder" rowspan="3" valign="top" width="33.223322332233224%" headers="mcps1.4.1.4.1.4.1.1 "><p>ASG</p>
</td>
<td class="cellrowborder" valign="top" width="33.223322332233224%" headers="mcps1.4.1.4.1.4.1.2 "><p>GE<span>0/1/1</span></p>
</td>
<td class="cellrowborder" valign="top" width="33.55335533553355%" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.2.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>GE<span>0/1/2</span></p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>192.168.1.1/24</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.2 "><p>Loopback0</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.4.1.4.1.3 "><p>1.1.1.1/32</p>
</td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365204__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>The configuration roadmap is as follows:</p>
<ol><li><p>Assign IP addresses to interfaces.</p>
</li><li><p>On the ASG, create an L2VE interface for VPWS termination and an L3VE interface for L3VPN access and bind the two VE interfaces to a VE-group.</p>
</li><li><div class="p">Configure VPWS in LDP mode. Details are as follows:<ol type="a"><li>Configure a routing protocol to ensure that devices can communicate.</li><li>Configure basic MPLS functions and LDP.</li><li>Enable MPLS L2VPN and create VCs.</li></ol>
</div>
</li><li><p>Configure a dot1q VLAN tag termination sub-interface on the ASG and enable inter-VLAN proxy ND.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172365204__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li><p>Interface addresses</p>
</li><li><p>IS-IS process ID</p>
</li><li><p>LSR ID</p>
</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365204__1.4.4"></a><a name="1.4.4"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Assign IP addresses to interfaces.</span><p><p>Assign IP addresses to all physical interfaces and loopback interfaces according to <a href="#EN-US_TASK_0172365204__fig_dc_vrp_nd_feature_002903">Figure 1</a>. For configuration details, see <a href="#EN-US_TASK_0172365204__file1">Configuration Files</a> in this section.</p>
</p></li><li><span>Create VE <span>0/2/0</span> and VE <span>0/2/1</span> on the ASG and bind the VE interfaces to the same VE-group.</span><p><p># Create VE <span>0/2/0</span> for MPLS L2VPN termination.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG] <strong>interface virtual-ethernet<span>0/2/0</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/0</span>] <strong>ve-group 1 l2-terminate</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/0</span>] <strong>quit</strong></pre>
<p># Create VE <span>0/2/1</span> for MPLS L3VPN access.</p>
<pre class="screen">[<span class="keyword">*</span>ASG] <strong>interface virtual-ethernet<span>0/2/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/1</span>] <strong>ve-group 1 <span><strong>l3-access</strong></span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG]<strong> commit</strong></pre>
<p># After completing the configurations, run the <a href="cmdqueryname=display+virtual-ethernet+ve-group"><b><span class="cmdname">display virtual-ethernet ve-group</span></b></a> command on the ASG to view the binding relationship between the VE interfaces and VE-group.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG]<strong> display virtual-ethernet ve-group</strong></pre>
<pre class="screen"> Ve-groupID    TerminateVE                   AccessVE
 1             Virtual-Ethernet<span>0/2/0</span>         Virtual-Ethernet<span>0/2/1</span>
Total 1, 1 printed</pre>
</p></li><li><span>Configure an IGP to allow device communication. IS-IS is used in this example.</span><p><p>During IS-IS configuration, ensure that the routes destined for the 32-bit loopback addresses of the ASG and CSGs are advertised.</p>
<p>For configuration details, see <a href="#EN-US_TASK_0172365204__file1">Configuration Files</a> in this section.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>For security purposes, you are advised not to use weak security algorithms in the IS-IS feature. If you need to use such an algorithm, run the <strong>undo crypto weak-algorithm disable</strong> command to enable the weak security algorithm function first.</p>
</div></div>
</p></li><li><span>Configure basic MPLS functions and LDP.</span><p><p># Configure CSG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CSG1] <strong>mpls lsr-id 3.3.3.3</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-mpls-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-GigabitEthernet<span>0/1/1</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-GigabitEthernet<span>0/1/1</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-GigabitEthernet<span>0/1/1</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1] <strong>commit</strong></pre>
<p># Configure CSG2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CSG2] <strong>mpls lsr-id 2.2.2.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-mpls-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-GigabitEthernet<span>0/1/2</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-GigabitEthernet<span>0/1/2</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-GigabitEthernet<span>0/1/2</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2] <strong>commit</strong></pre>
<p># Configure the ASG.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG] <strong>mpls lsr-id 1.1.1.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-mpls] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-mpls-ldp] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG] <strong>interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-GigabitEthernet<span>0/1/1</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-GigabitEthernet<span>0/1/1</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-GigabitEthernet<span>0/1/1</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG] <strong>interface gigabitethernet <span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-GigabitEthernet<span>0/1/2</span>] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-GigabitEthernet<span>0/1/2</span>] <strong>mpls</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-GigabitEthernet<span>0/1/2</span>] <strong>mpls ldp</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-GigabitEthernet<span>0/1/2</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG] <strong>commit</strong></pre>
</p></li><li><span>Enable MPLS L2VPN and create VCs.</span><p><p># Configure CSG1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CSG1] <strong>mpls l2vpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-l2vpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1] <strong>interface gigabitethernet <span>0/1/2</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-GigabitEthernet<span>0/1/2</span>.1] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-GigabitEthernet<span>0/1/2</span>.1] <strong>vlan-type dot1q 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-GigabitEthernet<span>0/1/2</span>.1] <strong>mpls l2vc 1.1.1.1 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1-GigabitEthernet<span>0/1/2</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG1] <strong>commit</strong></pre>
<p># Configure CSG2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CSG2] <strong>mpls l2vpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-l2vpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2] <strong>interface gigabitethernet <span>0/1/1</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-GigabitEthernet<span>0/1/1</span>.1] <strong>undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-GigabitEthernet<span>0/1/1</span>.1] <strong>vlan-type dot1q 1100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-GigabitEthernet<span>0/1/1</span>.1] <strong>mpls l2vc 1.1.1.1 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2-GigabitEthernet<span>0/1/1</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CSG2] <strong>commit</strong></pre>
<p># Configure the ASG.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG] <strong>mpls l2vpn</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-l2vpn] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG] <strong>interface virtual-ethernet<span>0/2/0</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/0</span>.1] <strong>vlan-type dot1q 1000</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/0</span>.1] <strong>mpls l2vc 3.3.3.3 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/0</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG] <strong>interface virtual-ethernet<span>0/2/0</span>.2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/0</span>.2] <strong>vlan-type dot1q 1100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/0</span>.2] <strong>mpls l2vc 2.2.2.2 1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/0</span>.2] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG]<strong> commit</strong></pre>
</p></li><li><span>Configure a dot1q VLAN tag termination sub-interface on the ASG and enable inter-VLAN proxy ND.</span><p><pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>ASG] <strong>interface virtual-ethernet<span>0/2/1</span>.1</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/1</span>.1] <strong>ipv6 enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/1</span>.1] <strong>ipv6 address 2001:db8:300:400::3 64</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/1</span>.1] <strong>encapsulation dot1q-termination</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/1</span>.1] <strong>dot1q termination vid 1000 to 1100</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/1</span>.1] <strong>ipv6 nd ns multicast-enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/1</span>.1] <strong>ipv6 nd proxy inter-access-vlan enable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG-Virtual-Ethernet<span>0/2/1</span>.1] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>ASG]<strong> commit</strong></pre>
</p></li><li><span>Configure the IPv6 addresses of hosts.</span><p><p># Configure the IPv6 address of HostA as 2001:db8:300:400::1/64.</p>
<p># Configure the IPv6 address of HostB as 2001:db8:300:400::2/64.</p>
</p></li><li><span>Verifying the configuration.</span><p><p>After the configurations are complete, HostA and HostB can ping each other.</p>
</p></li></ol></div>
<div class="example" id="EN-US_TASK_0172365204__file1"><a name="EN-US_TASK_0172365204__file1"></a><a name="file1"></a><a name="EN-US_TASK_0172365204__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>CSG1 configuration file</p>
<pre class="screen">#
sysname CSG1
#
mpls lsr-id 3.3.3.3
#
mpls
#
mpls l2vpn
#
mpls ldp
#
isis 1
 is-level level-1
 network-entity 10.0000.0000.0000.00
 traffic-eng level-2
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 192.168.2.2 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/2</span>.1
 vlan-type dot1q 1000
 mpls l2vc 1.1.1.1 1
#
interface LoopBack0
 ip address 3.3.3.3 255.255.255.255
 isis enable 1
#
return
</pre>
</li><li><p>CSG2 configuration file</p>
<pre class="screen">#
sysname CSG2
#
mpls lsr-id 2.2.2.2
#
mpls
#
mpls l2vpn
#
mpls ldp
#
isis 1
 is-level level-1
 network-entity 10.0000.0000.0001.00
 traffic-eng level-2
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/1</span>.1
 vlan-type dot1q 1100
 mpls l2vc 1.1.1.1 1
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 192.168.1.2 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface LoopBack0
 ip address 2.2.2.2 255.255.255.255
 isis enable 1
#
return
</pre>
</li><li><p>ASG configuration file</p>
<pre class="screen">#
sysname ASG
#
mpls lsr-id 1.1.1.1
#
mpls
#
mpls l2vpn
#
mpls ldp
#
isis 1
 is-level level-1
 network-entity 10.0000.0000.0002.00
 traffic-eng level-2
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
 ip address 192.168.2.1 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface GigabitEthernet<span>0/1/2</span>
 undo shutdown
 ip address 192.168.1.1 255.255.255.0
 isis enable 1
 mpls
 mpls ldp
#
interface LoopBack0
 ip address 1.1.1.1 255.255.255.255
 isis enable 1
#
interface Virtual-Ethernet<span>0/2/0</span>
 ve-group 1 l2-terminate
#
interface Virtual-Ethernet<span>0/2/0</span>.1
 vlan-type dot1q 1000
 mpls l2vc 3.3.3.3 1
#
interface Virtual-Ethernet<span>0/2/0</span>.2
 vlan-type dot1q 1100
 mpls l2vc 2.2.2.2 1
#
interface Virtual-Ethernet<span>0/2/1</span> 
 ve-group 1 l3-access
#
interface Virtual-Ethernet<span>0/2/1</span>.1
 ipv6 enable
 ipv6 address 2001:db8:300:400::3/64
 encapsulation dot1q-termination
 dot1q termination vid 1000 to 1100
 ipv6 nd ns multicast-enable
 ipv6 nd proxy inter-access-vlan enable
#
return
</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0009.html">Configuration Examples for ND
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_nd_cfg_0014.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/vrp/dc_vrp_evpn_cfg_0057.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>