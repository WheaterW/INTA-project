
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Configuring a Load Balancing Mode">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_loadba_cfg_2000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/spec/Load_Balancing_limitation.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/load-balance_feature_023.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,56630517l00801610,z00485179,w00556928,w00606909,">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Load Balance">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Load Balance">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="Load Balance">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="z00485179,z00648985">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0172365000">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Configuring a Load Balancing Mode</title>
</head>
<body><a name="EN-US_CONCEPT_0172365000"></a><a name="EN-US_CONCEPT_0172365000"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring a Load Balancing Mode</h1>
<div><p></p>
<div class="section"><h4 class="sectiontitle">Configuring Per-packet Load Balancing</h4><p>By default, the Huawei <span class="keyword">NE40E</span>'s control and forwarding planes both work in per-flow load balancing mode. You can configure the commands shown in <a href="#EN-US_CONCEPT_0172365000__table1934134692514">Table 1</a> to change the mode to per-packet.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0172365000__table1934134692514"></a><a name="table1934134692514"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0172365000__table1934134692514" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Configuring per-packet load balancing</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.4.1.3.2.5.1.1" liSelected="liSelected"><p>View</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.4.1.3.2.5.1.2" liSelected="liSelected"><p>Command Format</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.4.1.3.2.5.1.3" liSelected="liSelected"><p>Influence Scope</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="25%" id="mcps1.4.1.3.2.5.1.4" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.4.1.3.2.5.1.1 "><p>System view</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.4.1.3.2.5.1.2 "><p><a href="cmdqueryname=load-balance"><b><span class="cmdname">load-balance</span></b></a> <strong>packet</strong><span> { <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> | <strong><span>all</span></strong> }</span></p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.4.1.3.2.5.1.3 "><ul><li><p>Forwarding plane. This command takes effect only for MPLS packets on P nodes.</p>
</li><li><p>Control plane. This command takes effect for both IP and MPLS packets delivered by the CPU.</p>
</li></ul>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.4.1.3.2.5.1.4 "><p>The load balancing mode is changed to per-packet.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="25%" headers="mcps1.4.1.3.2.5.1.1 "><p>Interface view</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.4.1.3.2.5.1.2 "><p><a href="cmdqueryname=mpls+l2vpn+load-balance+packet"><b><span class="cmdname">mpls l2vpn load-balance packet</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.4.1.3.2.5.1.3 "><p>LDP<span> and SVC</span> VLL traffic received by the interface</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.4.1.3.2.5.1.4 "><p>Before this command is run, configure an LDP<span> or SVC</span> VLL on the interface and configure a tunnel policy for the L2VPN.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Configuring Per-flow Load Balancing</h4><p>By default, the Huawei <span class="keyword">NE40E</span>'s control and forwarding planes both work in per-flow load balancing mode. You can configure the commands shown in <a href="#EN-US_CONCEPT_0172365000__tab_05002">Table 2</a> to change the mode to per-flow if the mode has been changed to per-packet.</p>

<div class="tableBorder"><a name="EN-US_CONCEPT_0172365000__tab_05002"></a><a name="tab_05002"></a><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0172365000__tab_05002" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Configuring per-flow load balancing</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="14.441444144414442%" id="mcps1.4.2.3.2.5.1.1" liSelected="liSelected"><p>View</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="36.22362236223623%" id="mcps1.4.2.3.2.5.1.2" liSelected="liSelected"><p>Command Format</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="14.221422142214221%" id="mcps1.4.2.3.2.5.1.3" liSelected="liSelected"><p>Influence Scope</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="35.11351135113511%" id="mcps1.4.2.3.2.5.1.4" liSelected="liSelected"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="14.441444144414442%" headers="mcps1.4.2.3.2.5.1.1 "><p>System view</p>
</td>
<td class="cellrowborder" valign="top" width="36.22362236223623%" headers="mcps1.4.2.3.2.5.1.2 "><p><a href="cmdqueryname=load-balance"><b><span class="cmdname">load-balance</span></b></a> <strong>flow</strong><span> { <strong><span>slot</span></strong> <i><span class="varname">slot-id</span></i> | <strong><span>all</span></strong> }</span></p>
</td>
<td class="cellrowborder" valign="top" width="14.221422142214221%" headers="mcps1.4.2.3.2.5.1.3 "><ul><li>Forwarding plane. This command takes effect only for MPLS packets on P nodes.</li><li>Control plane. This command takes effect for both IP and MPLS packets delivered by the CPU.</li></ul>
</td>
<td class="cellrowborder" valign="top" width="35.11351135113511%" headers="mcps1.4.2.3.2.5.1.4 "><p>The load balancing mode is changed to per-flow.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="14.441444144414442%" headers="mcps1.4.2.3.2.5.1.1 "><p>Interface view</p>
</td>
<td class="cellrowborder" valign="top" width="36.22362236223623%" headers="mcps1.4.2.3.2.5.1.2 "><p><a href="cmdqueryname=undo+mpls+l2vpn+load-balance+packet"><b><span class="cmdname">undo mpls l2vpn load-balance packet</span></b></a></p>
</td>
<td class="cellrowborder" valign="top" width="14.221422142214221%" headers="mcps1.4.2.3.2.5.1.3 "><p>LDP<span> and SVC</span> VLL traffic received by the interface</p>
</td>
<td class="cellrowborder" valign="top" width="35.11351135113511%" headers="mcps1.4.2.3.2.5.1.4 "><p>Before this command is run, configure an LDP<span> or SVC</span> VLL on the interface and configure a tunnel policy for the L2VPN.</p>
</td>
</tr>
<tr><td class="cellrowborder" valign="top" width="14.441444144414442%" headers="mcps1.4.2.3.2.5.1.1 "><p>Layer 3 Eth-Trunk interface view</p>
</td>
<td class="cellrowborder" valign="top" width="36.22362236223623%" headers="mcps1.4.2.3.2.5.1.2 "><p><a href="cmdqueryname=load-balance"><b><span class="cmdname">load-balance</span></b></a> <strong>src-dst-ip</strong> or <strong>undo load-balance</strong></p>
</td>
<td class="cellrowborder" valign="top" width="14.221422142214221%" headers="mcps1.4.2.3.2.5.1.3 "><p>Traffic sent by the interface on which the command is run</p>
</td>
<td class="cellrowborder" valign="top" width="35.11351135113511%" headers="mcps1.4.2.3.2.5.1.4 "><p>By default, Layer 3 Eth-Trunk interfaces perform per-flow load balancing based on IP addresses.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Configuring Load Balancing on a BAS Interface</h4>
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" frame="border" border="1" rules="all"><caption><b>Table 3 </b>Configuring load balancing on a BAS interface</caption><thead align="left"><tr><th align="left" class="cellrowborder" valign="top" width="28.290000000000003%" id="mcps1.4.3.2.2.4.1.1" liSelected="liSelected"><p>View</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="50.000000000000014%" id="mcps1.4.3.2.2.4.1.2" liSelected="liSelected"><p>Command Format</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="21.71%" id="mcps1.4.3.2.2.4.1.3" liSelected="liSelected"><p>Influence Scope</p>
</th>
</tr>
</thead>
<tbody><tr><td class="cellrowborder" valign="top" width="28.290000000000003%" headers="mcps1.4.3.2.2.4.1.1 "><p>Eth-Trunk interface view</p>
</td>
<td class="cellrowborder" valign="top" width="50.000000000000014%" headers="mcps1.4.3.2.2.4.1.2 "><p><a href="cmdqueryname=bas-load-balance"><b><span class="cmdname">bas-load-balance</span></b></a> { <strong>flow-mode</strong> | <strong>user-mode</strong> | <strong>real-flow-mode</strong> }</p>
</td>
<td class="cellrowborder" valign="top" width="21.71%" headers="mcps1.4.3.2.2.4.1.3 "><p>BAS user online traffic</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section"><h4 class="sectiontitle">Follow-up Procedure</h4><p>Run the <a href="cmdqueryname=save"><b><span class="cmdname">save</span></b></a> command to save the current configuration to the configuration file when a set of configuration is finished and the expected functions have been achieved.</p>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_loadba_cfg_2000.html">Load Balancing Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/spec/Load_Balancing_limitation.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/load-balance_feature_023.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>