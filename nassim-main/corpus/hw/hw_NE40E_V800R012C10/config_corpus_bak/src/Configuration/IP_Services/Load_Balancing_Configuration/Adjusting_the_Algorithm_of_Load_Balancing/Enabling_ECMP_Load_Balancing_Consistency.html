
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Enabling ECMP Load Balancing Consistency">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/load-balance_feature_023.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_loadba_cfg_6002.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_loadba_cfg_6004.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00800033,56630517l00801610,z00485179,w00556928,w00606909,">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Load Balance">
<meta name="featuretype" content="IP Services">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Load Balance">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="Load Balance">
<meta name="featuretype" content="IP Services">
<meta name="featurename" content="Load Balance">
<meta name="featuretype" content="IP Services">
<meta name="OWNER" content="z00485179,z00648985">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="z00485179">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172365017">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Enabling ECMP Load Balancing Consistency</title>
</head>
<body><a name="EN-US_TASK_0172365017"></a><a name="EN-US_TASK_0172365017"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Enabling ECMP Load Balancing Consistency</h1>
<div class="taskbody"><div class="context"><a name="EN-US_TASK_0172365017__1.3.1"></a><a name="1.3.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>Equal-Cost Multi-Path routing (ECMP) implements load balancing and link backup. ECMP applies to the network where multiple links to the same destination are available. In the traditional routing technology, packets are forwarded to the destination through one link only; the other links are in backup or inactive state; switching between these links requires a certain period when dynamic routes are used. Different from the traditional routing technology, ECMP can use multiple links to increase transmission bandwidth and transmit data on a faulty link without any delay or packet loss.</p>
<p>When one link of equal-cost multiple paths fails, all traffic needs to be load balanced again based on hash calculation. ECMP load balancing consistency ensures that hash calculation is performed only for traffic on this faulty link, without affecting traffic on other normal links. This function ensures normal operation of services, in which sessions need to be maintained, on normal links.</p>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172365017__1.3.2"></a><a name="1.3.2"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run <span><a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span></span><p><p>The system view is displayed.</p>
</p></li><li><span>Run <span><a href="cmdqueryname=load-balance+ecmp+stateful+enable"><b><span class="cmdname">load-balance ecmp stateful enable</span></b></a> [ <strong><span>min-number</span></strong> <i><span class="varname">min-number-value</span></i> <strong><span>max-number</span></strong> <i><span class="varname">max-number-value</span></i> <strong><span>accuracy</span></strong> <i><span class="varname">accuracy-value</span></i> ]</span></span><p><p>The ECMP load balancing consistency function is enabled and the ECMP load balancing consistency parameters are set.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>When configuring this function, pay attention to the following points:</p>
<ul><li><p>To use this function, ensure that different destination addresses are reachable through the same or completely different equal-cost multiple paths.</p>
</li><li><p>After enabling this function, do not change the configured load balancing hash algorithm, hash algorithm offset, and load balancing mode. Otherwise, this function may be unable to take effect.</p>
</li><li>This function may be unable to take effect when outbound ports of equal-cost links are intermittently disconnected.</li><li>The ECMP load balancing consistency function takes effect only for common IPv4 traffic, but not for tunneled IPv4 traffic.</li><li>The ECMP load balancing consistency function does not take effect for IPv6 traffic.</li></ul>
</div></div>
</p></li><li><span>Run <span><a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span></span><p><p>The configuration is committed.</p>
</p></li></ol></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/load-balance_feature_023.html">Adjusting the Algorithm of Load Balancing
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_loadba_cfg_6002.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_loadba_cfg_6004.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>