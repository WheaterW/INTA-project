
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Defining a Traffic Behavior and Configuring Actions">
<meta name="abstract" content="This section describes the traffic behaviors supported by a device and how to configure actions for a traffic behavior.">
<meta name="description" content="This section describes the traffic behaviors supported by a device and how to configure actions for a traffic behavior.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0126.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0127.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0129.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="OWNER" content="l00425560">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="m00915594">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172371272">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Defining a Traffic Behavior and Configuring Actions</title>
</head>
<body><a name="EN-US_TASK_0172371272"></a><a name="EN-US_TASK_0172371272"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Defining a Traffic Behavior and Configuring Actions</h1>
<div class="taskbody"><p>This section describes the traffic behaviors supported by a device and how to configure actions for a traffic behavior.</p>
<div class="context"><a name="EN-US_TASK_0172371272__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Context</h4>
<div class="p"><p>A device supports various types of actions for a traffic behavior. You can configure one or more types of actions as required.</p>
</div></div>
<div class="steps-unordered"><a name="EN-US_TASK_0172371272__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Procedure</h4>
<ul><li><span>Configure traffic scheduling.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=traffic+behavior"><b><span class="cmdname">traffic behavior</span></b></a> <i><span class="varname">behavior-name</span></i></span><p><p>A traffic behavior is configured and its view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=car"><b><span class="cmdname">car</span></b></a> { <strong><span>cir</span></strong> <i><span class="varname">cir-value</span></i> [ <strong><span>pir</span></strong> <i><span class="varname">pir-value</span></i> ] } [ <strong><span>cbs</span></strong> <i><span class="varname">cbs-value</span></i> <span>[ </span><strong><span>pbs</span></strong> <i><span class="varname">pbs-value</span></i> ]<span> ]</span><span> [ <strong><span>adjust</span></strong> <i><span class="varname">adjust-value</span></i> ]</span> [ <strong><span>green</span></strong> { <strong><span>discard</span></strong> | <strong><span>pass</span></strong> [ <span><strong><span>remark dscp</span></strong> <i><span class="varname">dscp</span></i> | </span><strong><span>service-class</span></strong> <i><span class="varname">class</span></i> <strong><span>color</span></strong> <i><span class="varname">color</span></i> ] } | <strong><span>yellow</span></strong> { <strong><span>discard</span></strong> | <strong><span>pass</span></strong> [ <span><strong><span>remark dscp</span></strong> <i><span class="varname">dscp</span></i> | </span><strong><span>service-class</span></strong> <i><span class="varname">class</span></i> <strong><span>color</span></strong> <i><span class="varname">color</span></i> ] } | <strong><span>red</span></strong> { <strong><span>discard</span></strong> | <strong><span>pass</span></strong> [ <span><strong><span>remark dscp</span></strong> <i><span class="varname">dscp</span></i> | </span><strong><span>service-class</span></strong> <i><span class="varname">class</span></i> <strong><span>color</span></strong> <i><span class="varname">color</span></i> ] } ] <sup>*</sup> <span>[ <strong><span>summary</span></strong> ]</span> [ <strong><span>color-aware</span></strong> ] <span>[ <strong><span>limit-type pps</span></strong> ]</span></span><p><p>A traffic policing action is configured.</p>
</p><p><p>If this command is run more than once, the last configuration overrides the previous one.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>If the CoS of a packet is re-marked as EF, BE, CS6, or CS7, the packet can be re-marked only green.</p>
</div></div>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure forcible traffic classification.</span><ol id="EN-US_TASK_0172371272__en-us_task_0172371248_substeps465199205214057"><li class="substepexpand" id="EN-US_TASK_0172371272__en-us_task_0172371248_substep1966525415214057"><span id="EN-US_TASK_0172371272__en-us_task_0172371248_cmd1619322575214057">Run <a href="cmdqueryname=service-class"><b><span class="cmdname" id="EN-US_TASK_0172371272__en-us_task_0172371248_cmdname1730434652214057">service-class</span></b></a> <i><span class="varname" id="EN-US_TASK_0172371272__en-us_task_0172371248_varname1636189692214057">service-class</span></i> <strong><span id="EN-US_TASK_0172371272__en-us_task_0172371248_cmdparmname850086083214057">color</span></strong> <i><span class="varname" id="EN-US_TASK_0172371272__en-us_task_0172371248_varname1371659563214057">color</span></i></span><p><p id="EN-US_TASK_0172371272__en-us_task_0172371248_p3529810151218">Packets with a certain CoS are colored.</p>
</p></li><li class="substepexpand" id="EN-US_TASK_0172371272__en-us_task_0172371248_substep106286018214057"><span id="EN-US_TASK_0172371272__en-us_task_0172371248_cmd15302816425">(Optional) Run <a href="cmdqueryname=service-class"><b><span class="cmdname" id="EN-US_TASK_0172371272__en-us_task_0172371248_cmdname1880588154214057">service-class</span></b></a> <i><span class="varname" id="EN-US_TASK_0172371272__en-us_task_0172371248_varname41516796214057">service-class</span></i> <strong><span id="EN-US_TASK_0172371272__en-us_task_0172371248_cmdparmname38838244214057">color</span></strong> <i><span class="varname" id="EN-US_TASK_0172371272__en-us_task_0172371248_varname1870693011214057">color</span></i> <strong><span id="EN-US_TASK_0172371272__en-us_task_0172371248_cmdparmname654234838214057">track</span></strong> { <strong><span id="EN-US_TASK_0172371272__en-us_task_0172371248_cmdparmname1198736899214057">master</span></strong> | <strong><span id="EN-US_TASK_0172371272__en-us_task_0172371248_cmdparmname1709332567214057">slave</span></strong> } <strong><span id="EN-US_TASK_0172371272__en-us_task_0172371248_cmdparmname56904496214057">bfd-session</span></strong> <strong><span id="EN-US_TASK_0172371272__en-us_task_0172371248_cmdparmname73929228214057">session-name</span></strong> <i><span class="varname" id="EN-US_TASK_0172371272__en-us_task_0172371248_varname306166898214057">bfd-session-name</span></i></span><p><p id="EN-US_TASK_0172371272__en-us_task_0172371248_p23232124216">The CoS and color of packets matching the traffic policy are marked based on the status of a specified BFD session.</p>
</p><p></p></li><li class="substepexpand" id="EN-US_TASK_0172371272__en-us_task_0172371248_substep933110416214057"><span id="EN-US_TASK_0172371272__en-us_task_0172371248_cmd1861171318214057">Run <a href="cmdqueryname=commit"><b><span class="cmdname" id="EN-US_TASK_0172371272__en-us_task_0172371248_cmdname1184819451758">commit</span></b></a></span><p><p id="EN-US_TASK_0172371272__en-us_task_0172371248_p554164481211">The configuration is committed.</p>
</p></li></ol>
</li><li><span>Set a packet priority.</span><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=traffic+behavior"><b><span class="cmdname">traffic behavior</span></b></a> <i><span class="varname">behavior-name</span></i></span><p><p>A traffic behavior is configured and its view is displayed.</p>
</p></li><li class="substepexpand"><span>Perform the following configurations as required.</span><p><ul><li>To re-mark the DSCP value of VXLAN packets, run the <a href="cmdqueryname=remark"><b><span class="cmdname">remark</span></b></a> <strong><span>dscp</span></strong> <i><span class="varname">dscp-value</span></i> command.</li></ul>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li><li><span>Configure a cascaded traffic policy.</span><p><p>ACL rules are generally used for redirection in a traffic behavior. However, the specifications of ACL rules are limited. When ACL rules defined for MF classification do not meet the live network requirements, you can redirect the traffic behavior to a configured traffic policy to implement cascaded MF classification.</p>
</p><p></p><ol><li class="substepexpand"><span>Run <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a></span><p><p>The system view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=traffic+behavior"><b><span class="cmdname">traffic behavior</span></b></a> <i><span class="varname">behavior-name</span></i></span><p><p>A traffic behavior is configured and its view is displayed.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=traffic-policy"><b><span class="cmdname">traffic-policy</span></b></a> <i><span class="varname">policy-name</span></i></span><p><p>A cascaded traffic policy is configured.</p>
</p><p><div class="p"><ul><li>Configuring a cascaded traffic policy will cause device forwarding performance to deteriorate.</li><li>When the traffic on an interface matches a cascaded traffic policy:<ul><li>The behaviors of the cascaded traffic policy are performed.</li><li>If the traffic behaviors in the two traffic policies are different, they can be individually performed.</li><li>If the traffic behaviors in the two traffic policies are the same, the behaviors of the cascaded traffic policy are performed.</li></ul>
</li><li><p>The parameters specified for a traffic policy to be applied to an interface, such as <strong>inbound</strong>, <strong>outbound</strong>, <strong>link-layer</strong>, <span><strong>all-layer</strong>, </span>and <strong>mpls-layer</strong>, are inherited by a cascaded traffic policy.</p>
</li><li><p>When the traffic behaviors for two-level ACLs are <strong>service-class</strong>, level-1 <strong>service-class</strong> preferentially takes effect. However, if level-1 <strong>service-class</strong> carries <strong>no-remark</strong>, level-2 <strong>service-class</strong> preferentially takes effect.</p>
</li></ul>
</div>
</p></li><li class="substepexpand"><span>(Optional) Run <a href="cmdqueryname=hierarchical-car+enable"><b><span class="cmdname">hierarchical-car enable</span></b></a></span><p><p>Hierarchical CAR is enabled in the cascaded traffic policy.</p>
</p><p><p>When a traffic policy is configured in a traffic behavior, CAR can also be configured in the traffic policy to implement hierarchical CAR.</p>
</p></li><li class="substepexpand"><span>Run <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a></span><p><p>The configuration is committed.</p>
</p></li></ol>
</li></ul></div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0126.html">Configuring MF Classification-based Traffic Policies for VXLAN Packets
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0127.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0129.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>