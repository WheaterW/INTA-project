
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Example for Configuring Priority Mappings for VLAN Packets Based on BA Classification on EVC Sub-interfaces">
<meta name="abstract" content="This section provides an example for configuring priority mappings for VLAN packets based on BA classification on EVC sub-interfaces.">
<meta name="description" content="This section provides an example for configuring priority mappings for VLAN packets based on BA classification on EVC sub-interfaces.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0068.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0072.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="Class-based QoS">
<meta name="featuretype" content="QOS">
<meta name="OWNER" content="m00390128">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="m00915594">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0172371321">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Example for Configuring Priority Mappings for VLAN Packets Based on BA Classification on EVC Sub-interfaces</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_TASK_0172371321"></a><a name="EN-US_TASK_0172371321"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Example for Configuring Priority Mappings for VLAN Packets Based on BA Classification on EVC Sub-interfaces</h1>
<div class="taskbody"><p>This section provides an example for configuring priority mappings for VLAN packets based on BA classification on EVC sub-interfaces.</p>
<div class="context"><a name="EN-US_TASK_0172371321__1.4.1"></a><a name="1.4.1"></a>
<div class="p"><h4 class="sectiontitle">Networking Requirements</h4><p>Different communities require the same services, such as Internet access, IPTV, and VoIP services. To facilitate management, network administrators of different communities add services to the same VLAN. They also configure BA classification on PE1 and PE2 (<span class="keyword">Router</span>s) to provide differentiated services.</p>
<p>As shown in <a href="#EN-US_TASK_0172371321__fig_dc_ne_qos_cfg_007101">Figure 1</a>, communities 1 and 2 have the same services, which belong to the same VLAN. Communities 1 and 2 need to communicate with each other at low costs. In addition, priority mappings need to be configured for DiffServ domains on PE1 and PE2. The outer 802.1p and DSCP values of downstream traffic on the EVC sub-interface GE <span>0/1/1</span>.1 of PE1 and the outer 802.1p and EXP values of downstream traffic on the EVC sub-interface GE <span>0/1/1</span>.1 of PE2 need to remain unchanged.</p>
<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>interface1, interface2, and Subinterface1.1 in this example represent GE <span>0/1/1</span>, GE <span>0/1/2</span>, and GE <span>0/1/1</span>.1, respectively.</p>
</div></div>
<div class="fignone" id="EN-US_TASK_0172371321__fig_dc_ne_qos_cfg_007101"><a name="EN-US_TASK_0172371321__fig_dc_ne_qos_cfg_007101"></a><a name="fig_dc_ne_qos_cfg_007101"></a><span class="figcap"><b>Figure 1 </b>Networking diagram for configuring EVC QoS</span><br><span><img class="vsd" src="images/fig_dc_ne_qos_feature_new_05701.png"></span><br></div>
</div></div>
<div class="context"><a name="EN-US_TASK_0172371321__1.4.2"></a><a name="1.4.2"></a>
<div class="p"><h4 class="sectiontitle">Configuration Notes</h4><p>Services in all VLANs are on the same network segment.</p>
</div></div>
<div class="context"><a name="EN-US_TASK_0172371321__1.4.3"></a><a name="1.4.3"></a>
<div class="p"><h4 class="sectiontitle">Configuration Roadmap</h4><p>Establish an EVC model.</p>
<ol><li><p>Add interfaces of devices in communities 1 and 2 to VLAN 10.</p>
</li><li><p>Configure an EVC model on each PE:</p>
<ul><li>Configure a BD to forward services.</li><li>Create Layer 2 sub-interfaces, add them to the BD, and configure traffic encapsulation on the downstream interface to ensure that communities 1 and 2 can communicate with each other.</li></ul>
</li></ol>
<p>Enable BA classification.</p>
<ol><li><p>Configure mappings between the 802.1p priority, service class, and color on the EVC sub-interface GE <span>0/1/1</span>.1 of PE1.</p>
</li><li><p>Configure mappings between the 802.1p priority, service class, and color on the EVC sub-interface GE <span>0/1/1</span>.1 of PE2.</p>
</li></ol>
</div></div>
<div class="context"><a name="EN-US_TASK_0172371321__1.4.4"></a><a name="1.4.4"></a>
<div class="p"><h4 class="sectiontitle">Data Preparation</h4><p>To complete the configuration, you need the following data:</p>
<ul><li>Numbers of interfaces connecting devices to the user side</li><li>Numbers of interfaces interconnecting devices</li><li>IDs of VLANs to which services belong</li><li>BD IDs</li><li>802.1p priorities, service classes, and colors to be mapped</li></ul>
</div></div>
<div class="steps"><a name="EN-US_TASK_0172371321__1.4.5"></a><a name="1.4.5"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Add downstream interfaces of the CEs to a specific VLAN.</span><p><p># Configure CE1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE1]<strong> vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-vlan10]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1]<strong> interface gigabitethernet </strong><strong><span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>]<strong> portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>]<strong> port link-type access</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>]<strong> port default vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1]<strong> interface gigabitethernet </strong><strong><span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/2</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/2</span>]<strong> portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/2</span>] <strong>port link-type trunk</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/2</span>]<strong> port trunk allow-pass vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1-GigabitEthernet<span>0/1/2</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE1]<strong> commit</strong></pre>
<p># Configure CE2.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname CE2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>CE2]<strong> vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2]<strong> interface gigabitethernet </strong><strong><span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>]<strong> portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>]<strong> port link-type access</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>]<strong> port default vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2]<strong> interface gigabitethernet </strong><strong><span>0/1/2</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/2</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/2</span>]<strong> portswitch</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/2</span>]<strong> port link-type trunk</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/2</span>]<strong> port trunk allow-pass vlan 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2-GigabitEthernet<span>0/1/2</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>CE2]<strong> commit</strong></pre>
</p></li><li><span>Establish an EVC model.</span><p><ol type="a"><li><p>Create BDs on the PEs.</p>
<p># Configure PE1.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname PE1</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1]<strong> bridge-domain 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-bd10]<strong> quit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>sysname PE2</strong></pre>
<pre class="screen">[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2]<strong> bridge-domain 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-bd10]<strong> quit</strong></pre>
</li><li><p>Create Layer 2 sub-interfaces, add them to the BD, and configure traffic encapsulation and traffic behaviors.</p>
<p># Configure PE1.</p>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> interface gigabitethernet <span>0/1/1</span>.1 mode l2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>.1]<strong> encapsulation dot1q vid 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>.1]<strong> bridge-domain 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>.1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/1/1</span>.1]<strong> quit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2]<strong> interface gigabitethernet <span>0/1/1</span></strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>]<strong> undo shutdown</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>]<strong> quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> interface gigabitethernet <span>0/1/1</span>.1 mode l2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>.1]<strong> encapsulation dot1q vid 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>.1]<strong> bridge-domain 10</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>.1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-GigabitEthernet<span>0/1/1</span>.1]<strong> quit</strong></pre>
</li></ol>
</p></li><li><span>Enable BA classification on the EVC sub-interfaces.</span><p><p># Configure PE1.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>diffserv domain gina</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-dsdomain-gina] <strong>8021p-outbound cs6 red map 5</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-dsdomain-gina] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1]<strong> interface gigabitethernet <span>0/1/1</span>.1 mode l2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>.1]<strong> trust upstream gina</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>.1]<strong> qos phb outer-8021p disable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>.1]<strong> qos phb dscp disable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE1-GigabitEthernet<span>0/1/1</span>.1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1-GigabitEthernet<span>0/1/1</span>.1] <strong>quit</strong></pre>
<p># Configure PE2.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2] <strong>diffserv domain gina</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-dsdomain-gina] <strong>8021p-inbound 2 phb af1 green</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-dsdomain-gina] <strong>quit</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2]<strong> interface gigabitethernet <span>0/1/1</span>.1 mode l2</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>.1]<strong> trust upstream gina</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>.1]<strong> qos phb outer-8021p disable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>PE2-GigabitEthernet<span>0/1/1</span>.1]<strong> qos phb mpls-exp disable</strong></pre>
<pre class="screen">[<span class="keyword">*</span>P-GigabitEthernet<span>0/1/1</span>.1]<strong> commit</strong></pre>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE2-GigabitEthernet<span>0/1/1</span>] <strong>quit</strong></pre>
</p></li><li><span>Verify the configuration.</span><p><p>After completing the configuration, run the <a href="cmdqueryname=display+bridge-domain"><b><span class="cmdname">display bridge-domain</span></b></a> command to check BD information, including the BD to which a Layer 2 sub-interface belongs and the BD status. PE1 is used as an example.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>display bridge-domain</strong></pre>
<pre class="screen">The total number of bridge-domains is : 1
--------------------------------------------------------------------------------
MAC_LRN: MAC learning;         STAT: Statistics;         SPLIT: Split-horizon;
BC: Broadcast;                 MC: Unknown multicast;    UC: Unknown unicast;
*down: Administratively down;  FWD: Forward;             DSD: Discard;
--------------------------------------------------------------------------------

BDID  State MAC-LRN STAT    BC  MC  UC  SPLIT   Description
--------------------------------------------------------------------------------
10    up    enable  disable FWD FWD FWD disable</pre>
<p>After completing the configuration, run the <a href="cmdqueryname=display+diffserv+domain"><b><span class="cmdname">display diffserv domain</span></b></a> [ <i><span class="varname">ds-domain-name</span></i> ] [ <strong><span>8021p</span></strong> | <strong><span>dscp</span></strong> | <strong><span>exp</span></strong> ] [ <strong><span>inbound </span></strong>| <strong><span>outbound</span></strong> ] command to check the DiffServ domain configuration. PE1 is used as an example.</p>
<pre class="screen">[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span>PE1] <strong>display diffserv domain gina</strong></pre>
<pre class="screen">Diffserv domain name:gina                                                       
8021p-inbound 0 phb be green                                                    
8021p-inbound 1 phb af1 green                                                   
8021p-inbound 2 phb af2 green                                                   
8021p-inbound 3 phb af3 green                                                   
8021p-inbound 4 phb af4 green                                                   
8021p-inbound 5 phb ef green                                                    
8021p-inbound 6 phb cs6 green                                                   
8021p-inbound 7 phb cs7 green                                                   
8021p-outbound be green map 0                                                   
8021p-outbound be yellow map 0                                                  
8021p-outbound be red map 0                                                     
8021p-outbound af1 green map 1                                                  
8021p-outbound af1 yellow map 1                                                 
8021p-outbound af1 red map 1                                                    
8021p-outbound af2 green map 2                                                  
8021p-outbound af2 yellow map 2                                                 
8021p-outbound af2 red map 2                                                    
8021p-outbound af3 green map 3                                                  
8021p-outbound af3 yellow map 3                                                 
8021p-outbound af3 red map 3                                                    
8021p-outbound af4 green map 4                                                  
8021p-outbound af4 yellow map 4                                                 
8021p-outbound af4 red map 4                                                    
8021p-outbound ef green map 5                                                   
8021p-outbound ef yellow map 5                                                  
8021p-outbound ef red map 5                                                     
8021p-outbound cs6 green map 6                                                  
8021p-outbound cs6 yellow map 6                                                 
8021p-outbound cs6 red map 5                                                    
8021p-outbound cs7 green map 7                                                  
8021p-outbound cs7 yellow map 7                                                 
8021p-outbound cs7 red map 7                                                    
ip-dscp-inbound 0 phb be green                                                  
ip-dscp-inbound 1 phb be green                                                  
ip-dscp-inbound 2 phb be green                                                  
ip-dscp-inbound 3 phb be green                                                  
ip-dscp-inbound 4 phb be green                                                  
ip-dscp-inbound 5 phb be green                                                  
ip-dscp-inbound 6 phb be green                                                  
ip-dscp-inbound 7 phb be green                                                  
ip-dscp-inbound 8 phb af1 green                                                 
ip-dscp-inbound 9 phb be green                                                  
ip-dscp-inbound 10 phb af1 green                                                
ip-dscp-inbound 11 phb be green                                                 
ip-dscp-inbound 12 phb af1 yellow                                               
ip-dscp-inbound 13 phb be green                                                 
ip-dscp-inbound 14 phb af1 red                                                  
ip-dscp-inbound 15 phb be green                                                 
ip-dscp-inbound 16 phb af2 green                                                
ip-dscp-inbound 17 phb be green                                                 
ip-dscp-inbound 18 phb af2 green                                                
ip-dscp-inbound 19 phb be green                                                 
ip-dscp-inbound 20 phb af2 yellow                                               
ip-dscp-inbound 21 phb be green                                                 
ip-dscp-inbound 22 phb af2 red                                                  
ip-dscp-inbound 23 phb be green                                                 
ip-dscp-inbound 24 phb af3 green                                                
ip-dscp-inbound 25 phb be green                                                 
ip-dscp-inbound 26 phb af3 green                                                
ip-dscp-inbound 27 phb be green                                                 
ip-dscp-inbound 28 phb af3 yellow                                               
ip-dscp-inbound 29 phb be green                                                 
ip-dscp-inbound 30 phb af3 red                                                  
ip-dscp-inbound 31 phb be green                                                 
ip-dscp-inbound 32 phb af4 green                                                
ip-dscp-inbound 33 phb be green                                                 
ip-dscp-inbound 34 phb af4 green                                                
ip-dscp-inbound 35 phb be green                                                 
ip-dscp-inbound 36 phb af4 yellow                                               
ip-dscp-inbound 37 phb be green                                                 
ip-dscp-inbound 38 phb af4 red                                                  
ip-dscp-inbound 39 phb be green                                                 
ip-dscp-inbound 40 phb ef green                                                 
ip-dscp-inbound 41 phb be green                                                 
ip-dscp-inbound 42 phb be green                                                 
ip-dscp-inbound 43 phb be green                                                 
ip-dscp-inbound 44 phb be green                                                 
ip-dscp-inbound 45 phb be green                                                 
ip-dscp-inbound 46 phb ef green                                                 
ip-dscp-inbound 47 phb be green                                                 
ip-dscp-inbound 48 phb cs6 green                                                
ip-dscp-inbound 49 phb be green                                                 
ip-dscp-inbound 50 phb be green                                                 
ip-dscp-inbound 51 phb be green                                                 
ip-dscp-inbound 52 phb be green                                                 
ip-dscp-inbound 53 phb be green                                                 
ip-dscp-inbound 54 phb be green                                                 
ip-dscp-inbound 55 phb be green                                                 
ip-dscp-inbound 56 phb cs7 green                                                
ip-dscp-inbound 57 phb be green                                                 
ip-dscp-inbound 58 phb be green                                                 
ip-dscp-inbound 59 phb be green                                                 
ip-dscp-inbound 60 phb be green                                                 
ip-dscp-inbound 61 phb be green                                                 
ip-dscp-inbound 62 phb be green                                                 
ip-dscp-inbound 63 phb be green                                                 
ip-dscp-outbound be green map 0                                                 
ip-dscp-outbound be yellow map 0                                                
ip-dscp-outbound be red map 0                                                   
ip-dscp-outbound af1 green map 10                                               
ip-dscp-outbound af1 yellow map 12                                              
ip-dscp-outbound af1 red map 14                                                 
ip-dscp-outbound af2 green map 18                                               
ip-dscp-outbound af2 yellow map 20                                              
ip-dscp-outbound af2 red map 22                                                 
ip-dscp-outbound af3 green map 26                                               
ip-dscp-outbound af3 yellow map 28                                              
ip-dscp-outbound af3 red map 30                                                 
ip-dscp-outbound af4 green map 34                                               
ip-dscp-outbound af4 yellow map 36                                              
ip-dscp-outbound af4 red map 38                                                 
ip-dscp-outbound ef green map 46                                                
ip-dscp-outbound ef yellow map 46                                               
ip-dscp-outbound ef red map 46                                                  
ip-dscp-outbound cs6 green map 48                                               
ip-dscp-outbound cs6 yellow map 48                                              
ip-dscp-outbound cs6 red map 48                                                 
ip-dscp-outbound cs7 green map 56                                               
ip-dscp-outbound cs7 yellow map 56                                              
ip-dscp-outbound cs7 red map 56
user-priority 0 phb be green                                                    
user-priority 1 phb af1 green                                                   
user-priority 2 phb af2 green                                                   
user-priority 3 phb af3 green                                                   
user-priority 4 phb af4 green                                                   
user-priority 5 phb ef green                                                    
user-priority 6 phb cs6 green                                                   
user-priority 7 phb cs7 green 
mpls-exp-inbound 0 phb be green                                                 
mpls-exp-inbound 1 phb af1 green                                                
mpls-exp-inbound 2 phb af2 green                                                
mpls-exp-inbound 3 phb af3 green                                                
mpls-exp-inbound 4 phb af4 green                                                
mpls-exp-inbound 5 phb ef green                                                 
mpls-exp-inbound 6 phb cs6 green                                                
mpls-exp-inbound 7 phb cs7 green                                                
mpls-exp-outbound be green map 0                                                
mpls-exp-outbound be yellow map 0                                               
mpls-exp-outbound be red map 0                                                  
mpls-exp-outbound af1 green map 1                                               
mpls-exp-outbound af1 yellow map 1                                              
mpls-exp-outbound af1 red map 1                                                 
mpls-exp-outbound af2 green map 2                                               
mpls-exp-outbound af2 yellow map 2                                              
mpls-exp-outbound af2 red map 2                                                 
mpls-exp-outbound af3 green map 3                                               
mpls-exp-outbound af3 yellow map 3                                              
mpls-exp-outbound af3 red map 3                                                 
mpls-exp-outbound af4 green map 4                                               
mpls-exp-outbound af4 yellow map 4                                              
mpls-exp-outbound af4 red map 4                                                 
mpls-exp-outbound ef green map 5                                                
mpls-exp-outbound ef yellow map 5                                               
mpls-exp-outbound ef red map 5                                                  
mpls-exp-outbound cs6 green map 6                                               
mpls-exp-outbound cs6 yellow map 6                                              
mpls-exp-outbound cs6 red map 6                                                 
mpls-exp-outbound cs7 green map 7                                               
mpls-exp-outbound cs7 yellow map 7                                              
mpls-exp-outbound cs7 red map 7                                                 </pre>
</p></li></ol></div>
<div class="example"><a name="EN-US_TASK_0172371321__1.4.6"></a><a name="1.4.6"></a><h4 class="sectiontitle">Configuration Files</h4><ul><li><p>PE1 configuration file</p>
<pre class="screen">#
sysname PE1
#
diffserv domain gina
 8021p-outbound cs6 red map 5
#
bridge-domain 10
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/1</span>.1 mode l2
 encapsulation dot1q vid 10
 bridge-domain 10
 trust upstream gina
<span> qos phb outer-8021p disable  </span>
<span> qos phb dscp disable</span>
#
return</pre>
</li><li><p>PE2 configuration file</p>
<pre class="screen">#
sysname PE2
#
diffserv domain gina
 8021p-inbound 2 phb af1 green
#
bridge-domain 10
#
interface GigabitEthernet<span>0/1/1</span>
 undo shutdown
#
interface GigabitEthernet<span>0/1/1</span>.1 mode l2
 encapsulation dot1q vid 10
 bridge-domain 10
 trust upstream gina
<span> qos phb outer-8021p disable</span>
<span> qos phb mpls-exp disable</span>
#
return</pre>
</li><li><p>CE1 configuration file</p>
<pre class="screen">#
sysname CE1
#
vlan 10
#
interface GigabitEthernet<span>0/1/1</span>
 portswitch
 undo shutdown
 port link-type access
 port default vlan 10
 dcn
#
interface GigabitEthernet<span>0/1/2</span>
 portswitch
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 10
#
return
</pre>
</li><li><p>CE2 configuration file</p>
<pre class="screen">#
sysname CE2
#
vlan 10
#
interface GigabitEthernet<span>0/1/1</span>
 portswitch
 undo shutdown
 port link-type access
 port default vlan 10
 dcn
#
interface GigabitEthernet<span>0/1/2</span>
 portswitch
 undo shutdown
 port link-type trunk
 port trunk allow-pass vlan 10
#
return</pre>
</li></ul>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0068.html">Configuration Examples for Class-based QoS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0072.html"><span class="font-st">&lt; </span>Previous topic</a>
</div>
</div>
</body>
</html>