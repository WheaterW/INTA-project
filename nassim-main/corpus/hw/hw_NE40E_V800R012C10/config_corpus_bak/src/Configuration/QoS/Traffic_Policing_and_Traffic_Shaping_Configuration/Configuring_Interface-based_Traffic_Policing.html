
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="task">
<meta name="DC.Title" content="Configuring Interface-based Traffic Policing">
<meta name="abstract" content="Interface-based traffic policing implements unified interface-specific traffic control through CAR configuration.">
<meta name="description" content="Interface-based traffic policing implements unified interface-specific traffic control through CAR configuration.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0000.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/spec/Traffic_policing_limitation.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0003_2.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="Traffic Policing and Traffic Shaping">
<meta name="featuretype" content="QOS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="Traffic Policing and Traffic Shaping">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="Traffic Policing and Traffic Shaping">
<meta name="featuretype" content="QOS">
<meta name="OWNER" content="m00390128">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="m00915594">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TASK_0304220160">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<title>Configuring Interface-based Traffic Policing</title>
</head>
<body><a name="EN-US_TASK_0304220160"></a><a name="EN-US_TASK_0304220160"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Configuring Interface-based Traffic Policing</h1>
<div class="taskbody"><p>Interface-based traffic policing implements unified interface-specific traffic control through CAR configuration.</p>
<div class="steps"><a name="EN-US_TASK_0304220160__1.4.1"></a><a name="1.4.1"></a><h4 class="sectiontitle">Procedure</h4>
<ol><li><span>Run the <a href="cmdqueryname=system-view"><b><span class="cmdname">system-view</span></b></a> command to enter the system view.</span></li><li><span>Perform the following operations depending on the type of the interface on which traffic policing will be used:</span><p><ul><li>On a Layer 3 interface:<ol type="a"><li>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the Layer 3 interface view.</li></ol>
</li></ul>
</p><p><ul><li>On a Layer 2 interface:<ol type="a"><li>Run the <a href="cmdqueryname=interface"><b><span class="cmdname">interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> command to enter the Layer 3 interface view.</li><li>Run the <a href="cmdqueryname=portswitch"><b><span class="cmdname">portswitch</span></b></a> command to switch to the Layer 2 interface view.<p>Perform either of the following operations to add the Layer 2 interface to one or more VLANs:</p>
<ul><li>To add the Layer 2 interface to a specified VLAN, run the <a href="cmdqueryname=port+default+vlan"><b><span class="cmdname">port default vlan</span></b></a> <i><span class="varname">vlan-id</span></i> command.<div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p>Before running this command, ensure that the specified VLAN has been created.</p>
</div></div>
</li><li>To add the Layer 2 interface to a range of VLANs, run the <a href="cmdqueryname=port+trunk+allow-pass"><b><span class="cmdname">port trunk allow-pass</span></b></a> <strong><span>vlan</span></strong> { { <i><span class="varname">vlan-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">vlan-id2</span></i> ] } &amp; &lt;1-10&gt; | <strong><span>all</span></strong> } command.</li></ul>
</li></ol>
</li></ul>
</p></li><li><span>Run the <a href="cmdqueryname=qos+car"><b><span class="cmdname">qos car</span></b></a> { <strong><span>cir-percentage </span></strong><i><span class="varname">cir-percentage-value</span></i> [ <a href="cmdqueryname=pir-percentage"><b><span class="cmdname">pir-percentage</span></b></a> <i><span class="varname">pir-percentage-value</span></i> ] } [ <strong><span>cbs </span></strong><i><span class="varname">cbs-value </span></i>[ <strong><span>pbs </span></strong><i><span class="varname">pbs-value</span></i> ] ] [ <strong><span>green</span></strong> { <strong><span>discard</span></strong> | <strong><span>pass </span></strong>[ <strong><span>service-class</span></strong> <i><span class="varname">class</span></i> <strong><span>color </span></strong><i><span class="varname">color</span></i> ] } | <strong><span>yellow </span></strong>{ <strong><span>discard </span></strong>| <strong><span>pass </span></strong>[ <strong><span>service-class</span></strong> <i><span class="varname">class</span></i> <strong><span>color </span></strong><i><span class="varname">color</span></i> ] } | <strong><span>red </span></strong>{ <strong><span>discard </span></strong>| <strong><span>pass </span></strong>[ <strong><span>service-class</span></strong> <i><span class="varname">class</span></i> <strong><span>color </span></strong><i><span class="varname">color</span></i> ] } ] * { <strong><span>inbound </span></strong>| <strong><span>outbound </span></strong>} [ <strong><span>color-aware </span></strong>] or <a href="cmdqueryname=qos+car"><b><span class="cmdname">qos car</span></b></a> { <strong><span>cir </span></strong><i><span class="varname">cir-value</span></i> [ <strong><span>pir </span></strong><i><span class="varname">pir-value</span></i> ] } [ <strong><span>cbs </span></strong><i><span class="varname">cbs-value </span></i>[ <strong><span>pbs </span></strong><i><span class="varname">pbs-value</span></i> ] ] [ <strong><span>adjust </span></strong><i><span class="varname">adjust-value</span></i> ] [ <strong><span>green </span></strong>{ <strong><span>discard </span></strong>| <strong><span>pass </span></strong>[ <strong><span>service-class </span></strong><i><span class="varname">class</span></i> <strong><span>color </span></strong><i><span class="varname">color </span></i>] } | <strong><span>yellow </span></strong>{ <strong><span>discard </span></strong>| <strong><span>pass </span></strong>[ <strong><span>service-class </span></strong><i><span class="varname">class</span></i> <strong><span>color </span></strong><i><span class="varname">color </span></i>] } | <strong><span>red </span></strong>{ <strong><span>discard </span></strong>| <strong><span>pass </span></strong>[ <strong><span>service-class </span></strong><i><span class="varname">class</span></i> <strong><span>color </span></strong><i><span class="varname">color</span></i> ] } ] * { <strong><span>inbound </span></strong>| <strong><span>outbound </span></strong>} [ <strong><span>vlan </span></strong>{ <i><span class="varname">vlan-id1 </span></i>[ <strong><span>to </span></strong><i><span class="varname">vlan-id2</span></i> ] &amp;&lt;1-10&gt; } ] [ <strong><span>identifier </span></strong>{ <strong><span>none </span></strong>| <strong><span>vid </span></strong>| <strong><span>ce-vid</span></strong> | <strong><span>vid-ce-vid</span></strong> } ] [ <strong><span>color-aware </span></strong>] command to configure CAR on the interface.</span><p><div class="note"><img src="../../../../public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul><li>The <span><span>[ <strong><span>vlan</span></strong> { <i><span class="varname">vlan-id1</span></i> [ <strong><span>to</span></strong> <i><span class="varname">vlan-id2</span></i> ] &amp; &lt;1-10&gt; } ]</span></span> parameter is valid only for Layer 2 interfaces and is used to configure traffic policing for VLAN packets. If this command is run on a Layer 3 interface, you cannot specify a VLAN ID. If this command is run on a Layer 2 interface, you must specify a VLAN ID.</li><li>When an interface is configured with both interface-based CAR and MF classification-based CAR actions, the numbers of bytes and packets on which MF classification-based CAR actions are performed are not counted in the interface-based CAR statistics.</li><li>When both MF classification-based CAR and interface-based CAR are configured, MF classification-based CAR takes effect first, and then interface-based CAR. When both broadcast suppression and interface-based CAR are configured, interface-based CAR applies only to known unicast packets, and broadcast suppression applies to broadcast packets. When CAR is configured for both the packets sent to the CPU and the packets sent to an interface, the CAR statistics on the packets sent to the CPU take precedence over the CAR statistics on the packets sent to an interface.</li><li>Interface-based CAR cannot be configured on trunk member interfaces.</li><li><p>The <strong><span>cir</span></strong> and <strong><span>pir</span></strong> parameters are expressed in kbit/s, and the <strong><span>cbs</span></strong> and <strong><span>pbs</span></strong> parameters are expressed in bytes.</p>
</li><li>If the network traffic is simple, you can configure single-token-bucket traffic policing. In this case, specify the <strong><span>cir</span></strong> and <strong><span>cbs</span></strong> parameters.</li><li><p>If the network traffic is complex, you must configure dual-token-bucket traffic policing. In this case, specify the <strong><span>cir</span></strong>, <strong><span>pir</span></strong>, <strong><span>cbs</span></strong>, and <strong><span>pbs</span></strong> parameters.</p>
</li></ul>
</div></div>
</p></li><li><span>(Optional) Run the <a href="cmdqueryname=qos+qos-car+member-link-scheduler+distribute"><b><span class="cmdname">qos qos-car member-link-scheduler distribute</span></b></a> command to configure weight-based traffic distribution among trunk member interfaces when interface CAR is applied to the trunk interface.</span></li><li><span>Run the <a href="cmdqueryname=commit"><b><span class="cmdname">commit</span></b></a> command to commit the configuration.</span></li></ol></div>
<div class="postreq"><a name="EN-US_TASK_0304220160__1.4.2"></a><a name="1.4.2"></a><h4 class="sectiontitle">Verifying the Configuration</h4><p>After completing the configuration, perform the following operations to check the configurations:</p>
<ul><li><p>Run the <a href="cmdqueryname=display+interface"><b><span class="cmdname">display interface</span></b></a> [ <i><span class="varname">interface-type</span></i> [ <i><span class="varname">interface-number</span></i> ] ] command to check the traffic information about an interface.</p>
</li><li><p>Run the <a href="cmdqueryname=display+car+statistics+interface"><b><span class="cmdname">display car statistics interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> { <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> } command to check the CAR statistics about a Layer 3 interface in a specified direction.</p>
</li><li><p>Run the <a href="cmdqueryname=display+car+statistics+interface"><b><span class="cmdname">display car statistics interface</span></b></a> <i><span class="varname">interface-type</span></i> <i><span class="varname">interface-number</span></i> <strong><span>vlan</span></strong> <i><span class="varname">vlan-id</span></i> { <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> } command to check the CAR statistics about a Layer 2 interface in a specified direction.</p>
</li></ul>
</div></div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0000.html">Traffic Policing and Traffic Shaping Configuration
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/spec/Traffic_policing_limitation.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_0003_2.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>