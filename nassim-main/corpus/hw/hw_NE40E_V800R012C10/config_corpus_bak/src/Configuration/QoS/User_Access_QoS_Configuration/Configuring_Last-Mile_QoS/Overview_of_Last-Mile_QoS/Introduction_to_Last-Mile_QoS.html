
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="concept">
<meta name="DC.Title" content="Introduction to Last-Mile QoS">
<meta name="abstract" content="Last-mile QoS adjusts downstream traffic based on the link layer protocol running between a user and DSLAM.">
<meta name="description" content="Last-mile QoS adjusts downstream traffic based on the link layer protocol running between a user and DSLAM.">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_023803.html">
<meta name="DC.Relation" scheme="URI" content="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_023805.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R23C00">
<meta name="DC.Creator" content="w00606909,m00390128">
<meta name="DC.Publisher" content="20240229">
<meta name="featurename" content="User Access QoS">
<meta name="featuretype" content="QOS">
<meta name="DC.Audience.Job" content="Configuration">
<meta name="featurename" content="User Access QoS">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="User Access QoS">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="User Access QoS">
<meta name="featuretype" content="QOS">
<meta name="featurename" content="Last-Mile QoS">
<meta name="featuretype" content="QOS">
<meta name="OWNER" content="m00390128">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="l00425560">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CONCEPT_0268652987">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../../../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../../../../public_sys-resources/browseVersion.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/jquery.min.idp.js"></script>
<script type="text/javascript" src="../../../../public_sys-resources/RowOrColfreezeSupport.js"></script>

<script type="text/javascript">
setTimeout(function(){
	jQueryHW(document).ready(function(){
		jQueryHW("table[rowfreeze='yes']").rowfreeze();
		jQueryHW("table[colfreeze='yes']").colfreeze();
	});
},500);
</script>
<title>Introduction to Last-Mile QoS</title>
</head>
<body><a name="EN-US_CONCEPT_0268652987"></a><a name="EN-US_CONCEPT_0268652987"></a>

<div class="articleBoxWithoutHead">
<h1 class="topicTitle-h1">Introduction to Last-Mile QoS</h1>
<div><p>Last-mile QoS adjusts downstream traffic based on the link layer protocol running between a user and DSLAM.</p>
<div class="section"><h4 class="sectiontitle">Shaped Rate Adjustment: Last-Mile QoS</h4><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p1420847938214013">Last mile indicates the link between the user and the access switch (such as the Ethernet DSLAM), as shown in <a href="#EN-US_CONCEPT_0268652987__en-us_concept_0172356883_fig_qos_feature_03508">Figure 1</a>. Residential and enterprise users generally access the Ethernet DSLAM using <span>IPoE</span><span>, PPPoE</span> and the DSLAM is connected to the BRAS or SR, edge device on the backbone network, through a metropolitan area network (MAN).</p>
<div class="fignone" id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_fig_qos_feature_03508"><a name="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_fig_qos_feature_03508"></a><a name="en-us_concept_0172356883_fig_qos_feature_03508"></a><span class="figcap"><b>Figure 1 </b>Last mile</span><br><span><img class="vsd" id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_image2051387379214013" src="images/fig_feature_image_0021580504.png" width="NaN" height="NaN"></span></div>
<p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p984550545214013">In a broadband service access scenario, an Ethernet link connects a BRAS or SR and a DSLAM. The BRAS or SR encapsulates Ethernet packets, and traffic shaping is implemented based on the Ethernet packets.</p>
<p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p9553858214013">Even if the link connects the user and DSLAM is also an Ethernet link, the encapsulation cost of the packets sent between the user and DSLAM can possibly exceed that on the user side of the BRAS or SR. For example, the Ethernet packet encapsulated on the BRAS or SR does not carry a VLAN tag, but the packet sent between the user and DSLAM carries a single or double VLAN tags due to VLAN or QinQ encapsulation.</p>
<p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p750661271214013">To resolve this problem, last-mile QoS can be configured on the BRAS or SR. Last-mile QoS allows a device to calculate the length of headers to be added to packets based on the bandwidth purchased by users and the bandwidth of the downstream interface on the DSLAM for traffic shaping.</p>
<p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p498383498214013">Therefore, the BRAS or SR cannot automatically infer the sum length of the packets that has been encapsulated on the DSLAM and requires compensation bytes.</p>
<p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p2091593488214013">After compensation bytes are configured, if the DSLAM connects to the CPE through an Ethernet link, the BRAS or SR can automatically infer the sum length of the packet encapsulated on the DSLAM based on the length of the forwarded packet and the configured compensation bytes, and determine the shaped rate to be adjusted.</p>
<p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p227998605214013">The following tables provide common encapsulation-costs and compensation bytes.</p>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_table432562141214013" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Packet encapsulation-cost</caption><thead align="left"><tr id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_row2087712786214013"><th align="left" class="cellrowborder" colspan="2" valign="top" id="mcps1.4.1.10.2.4.1.1" liSelected="liSelected"><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry319217780214013p0">Encapsulation Type</p>
</th>
<th align="left" class="cellrowborder" valign="top" id="mcps1.4.1.10.2.4.1.2" liSelected="liSelected"><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry1089382449214013p0">Encapsulation-cost (Bytes)</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_row481040643214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.1.10.2.4.1.1 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry401979873214013p0">PPP header</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.10.2.4.1.2 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry975136972214013p0">2</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_row1828008676214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.1.10.2.4.1.1 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry2034864925214013p0">Eth header</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.10.2.4.1.2 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry596994276214013p0">14</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_row955510167214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.1.10.2.4.1.1 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry1965994212214013p0">VLAN header</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.10.2.4.1.2 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry2129939693214013p0">4</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_row393936707214013"><td class="cellrowborder" colspan="2" valign="top" headers="mcps1.4.1.10.2.4.1.1 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry230172782214013p0">QinQ header</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.10.2.4.1.2 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry222559073214013p0">8</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_row412769078214013"><td class="cellrowborder" rowspan="2" valign="top" width="12.33%" headers="mcps1.4.1.10.2.4.1.1 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry1146786465214013p0">AAL5 encapsulation</p>
</td>
<td class="cellrowborder" valign="top" width="44%" headers="mcps1.4.1.10.2.4.1.1 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry805796413214013p0">VC</p>
</td>
<td class="cellrowborder" valign="top" width="43.669999999999995%" headers="mcps1.4.1.10.2.4.1.2 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry576528623214013p0">AAL5 Header + AAL5 tail = 0 + 8 = 8</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_row2140170518214013"><td class="cellrowborder" valign="top" headers="mcps1.4.1.10.2.4.1.1 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry401438470214013p0">LLC Type1 (connection-less mode, such as <span>IPoE</span><span>, PPPoE</span>)</p>
</td>
<td class="cellrowborder" valign="top" headers="mcps1.4.1.10.2.4.1.2 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry593996449214013p0">AAL5 Header + AAL5 tail = 8 + 8 = 16</p>
</td>
</tr>
</tbody>
</table>
</div>

<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="" rowfreeze="yes" id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_table332462715214013" frame="border" border="1" rules="all"><caption><b>Table 2 </b>Common compensation bytes for last-mile QoS</caption><thead align="left"><tr id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_row1912160373214013"><th align="left" class="cellrowborder" valign="top" width="62.5%" id="mcps1.4.1.11.2.3.1.1" liSelected="liSelected"><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry84679015214013p0">Scenario</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="37.5%" id="mcps1.4.1.11.2.3.1.2" liSelected="liSelected"><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry885263737214013p0">Compensation Bytes</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_row1622996804214013"><td class="cellrowborder" valign="top" width="62.5%" headers="mcps1.4.1.11.2.3.1.1 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry1635497573214013p0"><br><span><img class="vsd" id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_image17027811214013" src="images/fig_feature_image_0021580475.png"></span><br></p>
</td>
<td class="cellrowborder" valign="top" width="37.5%" headers="mcps1.4.1.11.2.3.1.2 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p1324849515214013">= VLAN header - QinQ header</p>
<p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p1773062457214013">= - 4</p>
</td>
</tr>
<tr id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_row1742822843214013"><td class="cellrowborder" valign="top" width="62.5%" headers="mcps1.4.1.11.2.3.1.1 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_entry1919001440214013p0"><br><span><img class="vsd" id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_image1747791434214013" src="images/fig_feature_image_0021580337.png"></span><br></p>
</td>
<td class="cellrowborder" valign="top" width="37.5%" headers="mcps1.4.1.11.2.3.1.2 "><p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p1325618359214013">= 0 - QinQ header</p>
<p id="EN-US_CONCEPT_0268652987__en-us_concept_0172356883_p1857216209214013">= - 8</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_023803.html">Overview of Last-Mile QoS
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../../../software/nev8r10_vrpv8r16/user/ne/dc_ne_qos_cfg_023805.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>