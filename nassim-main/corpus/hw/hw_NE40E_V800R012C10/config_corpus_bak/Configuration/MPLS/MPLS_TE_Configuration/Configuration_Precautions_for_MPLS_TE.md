Configuration Precautions for MPLS TE
=====================================

Configuration_Precautions_for_MPLS_TE

#### Feature Requirements

**Table 1** Feature requirements
| Feature Requirements | Series | Models |
| --- | --- | --- |
| The outbound interface of a P2MP TE tunnel cannot be a channelized sub-interface interface.  The outbound interface of an mLDP tunnel cannot be a channelized sub-interface interface.  If the outbound interface of a P2MP TE or MPLD tunnel is a channelized sub-interface interface, the bandwidth is not limited by the bandwidth reserved for the channelized sub-interface. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The mpls te multi-protect fast-switch enable command is added to enable TE HSB+FRR fast switching upon dual-point failures.  1. After this command is enabled or disabled, packets may be lost for a short period of time.  2. This command applies to L3VPN over RSVP-TE, VLL over RSVP-TE and VPLS over RSVP-TE scenarios.  3. TE FRR must be deployed on the entire network, HSB must be deployed on the ingress node, BFD for TE LSP must be enabled, and the outbound interface on the P node must be configured to go Down after a delay. Otherwise, fast switching cannot be ensured if dual-point failures occur.  4. If both the primary and HSB LSPs fail, the system detects whether the directly connected interface on the primary LSP fails. If the indirectly connected interface fails, the system continues to use the primary LSP to forward traffic. If FRR is configured, the system uses the FRR protection tunnel to forward traffic. If FRR is not configured, the system discards traffic.  5. This command does not apply to LDP over RSVP-TE and BGP over RSVP-TE scenarios. In these scenarios, enabling this command cannot ensure fast TE LSP switchover in case of dual-point failures, but does not affect basic forwarding functions. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| After CAR and re-marking are configured for multi-field classification in a TE-group scenario, packets may be out of order. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a TE-group scenario, if TE tunnels and physical interfaces or LDP LSPs work in hybrid load balancing mode, unequal-cost load balancing cannot be performed based on the bandwidth or weight even if the internal tunnels of each priority are configured with the bandwidth or weight. The internal tunnels of each priority still perform equal-cost load balancing. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When a TE group and dynamic load balancing are both configured, dynamic load balancing (load-balance dynamic-adjust enable) does not take effect. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| VPN QoS is not supported in the scenario where VLL/VPLS is recursed to DS-TE.  VLL/VPLS services can be recursed to DS-TE tunnels and VPN QoS services can be forwarded only in common TE load balancing mode. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a scenario where a VPN is recursed to a DS-TE tunnel, association between TE faults and VPN FRR is not supported.  You are advised to configure VPN-based BFD to directly trigger VPN FRR fast switching. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If penultimate hop popping (PHP) is configured on a device, LSP APS does not take effect.  Do not configure PHP and LSP APS at the same time. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K |
| If OAM (TPOAM or MPLS OAM) is deleted before APS is deleted, APS incorrectly considers that OAM detects a link fault, affecting protection switching.  APS and TP-OAM or MPLS OAM are configured. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K |
| When the standard DS-TE mode is configured on a device, if the mpls te service-class default command is not run, services that are not associated with priorities select TE tunnels that are not configured with priorities. If such TE tunnels do not exist, services that are not associated with priorities select TE tunnels with the lowest priority. As a result, the TE tunnel bandwidth of the service with the lowest priority is preempted.  You are advised to run the mpls te service-class default command in standard DS-TE mode. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Both BA classification and interface-based CAR are configured. If QPPB is not configured, the TE group takes effect based on BA classification. If QPPB is configured, the TE group takes effect based on the interface CAR. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a TE group scenario, each priority supports a maximum of 16 tunnels for load balancing. If the number of tunnels of a priority on the control plane is greater than 16, 16 tunnels are randomly selected and delivered. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| PCEP is used only for interconnection with the controller. PCEP and NETCONF cannot be used to change stitching labels at the same time.  If both PCEP and NETCONF are used to change stitching labels due to misoperations, run the undo mpls te pce delegate command on the forwarder to undelegate the tunnel and then run the mpls te pce delegate command to delegate the tunnel again. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Entropy label feature: RSVP P2P LSPs and LDP P2P LSPs support entropy label negotiation, but other types of LSPs do not support. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a PCEP scenario with a Huawei controller deployed, the controller may deliver initiated LSP names that carry special characters, for example,? ,;, and %. These parameters cannot be executed on forwarders.  Do not use special characters as the name of an initiated LSP on the controller. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When tunnel splitting is configured, the split tunnel interface cannot be used as the outbound interface of a route, and the mpls te igp shortcut and mpls te reserved-for-binding commands cannot be used together. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When a neighbor supports GR and the local device functions as the GR Helper, you need to run the mpls rsvp-te hello command on the RSVP-TE-enabled interface after running the mpls rsvp-te hello support-peer-gr command in the MPLS view.  If RSVP-TE Hello is not configured on an RSVP-TE interface, the RSVP-TE GR capability does not take effect. When an active/standby switchover is performed on an RSVP-TE node, the RSVP adjacency between the node and its neighbor is torn down due to signaling protocol timeout. As a result, the CR-LSP is torn down, and services carried on the CR-LSP are interrupted. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If a TE tunnel traverses multiple IGP domains, an explicit path containing the IP addresses of inter-domains nodes must be configured for the tunnel, and CSPF must be enabled on the ingress and inter-domain nodes.  It is recommended that TE tunnels be planned in the same IGP domain. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In an LDP over TE scenario, after the mpls te igp advertise or mpls te igp shortcut command is run in the TE tunnel interface view to enable route advertisement, a remote LDP session must be configured for the destination of the tunnel.  If no remote LDP session is configured, LDP LSPs cannot be established, causing service interruptions. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If multiple IGP processes that have MPLS TE enabled are deployed on a device, CSPF cannot compute the optimal TE tunnel path among the multiple IGP processes, and the optimal path computed in a single process is not the expected one. As a result, the services carried on the TE tunnel may be congested or interrupted.  Primary solution: Configure an explicit path in the system view and use the explicit path in the TE tunnel.  Alternative solution: Run the mpls te cspf preferred-igp command in the MPLS view to enable CSPF to preferentially select a specified IGP process during path calculation. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Bypass-attribute and detour cannot be configured together. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Reverse LSPs and detour LSPs are mutually exclusive. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Labels and IP addresses cannot be both configured on an explicit path. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When an affinity attribute is configured for a tunnel, the same affinity attribute cannot be configured as both include and exclude attributes. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| hot-standby and ordinary cannot be configured at the same time.  The configuration of the latter overwrites that of the former. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When a GMPLS tunnel is bound to a GMPLS UNI and switch-type is EVPL, process-pst cannot be configured. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Fast-reroute and offload cannot be configured at the same time.  Fast-reroute and bypass-tunnel cannot be configured at the same time.  Fast-reroute and protected-interface cannot be configured at the same time.  Fast-reroute and FF style cannot be configured at the same time.  Fast-reroute and reverse LSPs cannot be configured at the same time.  Fast-reroute and reroute disable cannot be configured at the same time. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When BFD detects that the process-pst parameter is configured on a GMPLS UNI and the GMPLS tunnel is bound to the GMPLS UNI, switch-type cannot be set to EVPL. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| hot-standby and offload cannot be configured at the same time.  hot-standby and bypass-tunnel cannot be configured at the same time.  hot-standby and protected-interface cannot be configured at the same time.  hot-standby and the FF style cannot be configured at the same time.  hot-standby and reroute disable cannot be configured at the same time. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Best-effort and bypass tunnels cannot be configured at the same time.  Best-effort and protected-interface cannot be configured at the same time.  Best-effort and FF styles cannot be configured at the same time.  Best-effort and offload cannot be configured at the same time.  Best-effort and ordinary cannot be configured at the same time.  Best-effort and reroute disable cannot be configured at the same time. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The FF style and FRR are mutually exclusive.  The FF style and backup are mutually exclusive.  The FF style and automatic bandwidth adjustment are mutually exclusive.  The FF style and soft preemption are mutually exclusive. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Detour and offload cannot be configured at the same time.  The detour and bypass-tunnel commands cannot be configured at the same time.  detour and protected-interface cannot be configured at the same time.  The detour and FF styles cannot be configured at the same time.  detour and bypass-attribute cannot be configured at the same time.  A detour LSP and a reverse LSP cannot be configured at the same time.  detour and bypass-attribute cannot be configured at the same time.  The detour and reroute disable commands cannot be configured at the same time.  Detour and PCE delegation cannot be configured together. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The bypass-tunnel and fast-reroute commands cannot be configured at the same time.  The bypass-tunnel and detour commands cannot be configured at the same time.  The bypass tunnel and backup tunnels cannot be configured at the same time.  The bypass-tunnel and reroute disable commands cannot be used together. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| ordinary and off-load cannot be configured at the same time.  ordinary and best-effort paths cannot be configured at the same time.  ordinary and the FF style cannot be configured at the same time.  ordinary and reroute disable cannot be configured at the same time.  ordinary and reverse LSPs are mutually exclusive. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When the reverse LSP feature is used, the global label distribution mode must be set to non-null.  Otherwise, the reverse LSP feature does not take effect. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The soft-preemption and FF styles cannot be configured at the same time.  soft-preemption and reroute disable cannot be configured at the same time. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The working tunnel cannot be configured as a protection tunnel. The tunnel itself cannot be set as the protection tunnel. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Automatic bandwidth adjustment takes effect only after the mpls te timer auto-bandwidth command is run in the MPLS view. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Bit-error-triggered protection switching and protection group features are mutually exclusive. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| PCE delegation and detour cannot be configured at the same time.  PCE delegation and reroute disable cannot be configured together. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Bidirectional co-routed LSPs and dynamic reverse LSPs are mutually exclusive. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The reroute disable and PCE delegation functions cannot be configured at the same time.  Reroute disable and re-optimization cannot be configured at the same time.  Reroute disable and soft preemption cannot be configured at the same time.  The reroute disable and detour commands cannot be configured at the same time.  The reroute disable and ordinary commands cannot be configured at the same time.  The reroute disable command and the best-effort path command cannot be configured at the same time.  The reroute disable and frr commands cannot be configured at the same time.  The reroute disable and backup commands cannot be configured at the same time.  The reroute disable and bypass-tunnel commands cannot be configured at the same time.  The reroute disable and automatic bandwidth adjustment functions cannot be configured together. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The include-all and include-any attributes of an affinity cannot coexist. The latest configuration overrides the previous one. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Reverse LSPs and backup paths are mutually exclusive.  Reverse LSPs and FRR are mutually exclusive. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The bandwidth configured in the bypass attributes cannot be higher than the bandwidth of the primary tunnel, and the priority configured in the bypass attributes cannot be higher than the priority of the primary tunnel. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If bidirectional is enabled for a tunnel, the tunnel cannot be bound to a static bidirectional co-routed CR-LSP on the egress. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The FF style and PCE delegation are mutually exclusive. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Protected-interface and fast-reroute cannot be configured at the same time.  Protected-interface and detour cannot be configured at the same time.  Protected-interface and backup cannot be configured at the same time.  Protected-interface cannot be configured together with ordinary/best-effort. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If both static BFD for TE LSP and dynamic BFD for TE LSP are configured, static BFD for TE LSP takes effect. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| BFD and MPLS OAM cannot be configured on the same tunnel. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| A static or static CR tunnel cannot be bound to a reverse RSVP-TE LSP. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| A dynamic tunnel cannot be bound to a reverse LSP of a static protocol. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The configuration of disabling automatic bandwidth configuration for global physical interfaces is visible only when the router works in transport mode. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| P2MP TE tunnels cannot be established across IGP domains.  If a leaf node on a P2MP TE tunnel is not in the same IGP domain as the ingress, the S2L cannot be created. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If an LSP is established across IGP areas, the LSP cannot be re-optimized. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The SR-MPLS TE tunnel configured using a label explicit path does not respond to messages delivered by other label stacks or perform the make before break operation. The path is not re-optimized, which does not affect the original LSP and traffic. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Detour LSPs cannot be created across domains.  Do not use detour FRR in inter-domain scenarios. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| SR-MPLS TE tunnels must be used together with detection features. SR-MPLS TE tunnels do not have signaling protocols. Therefore, BFD for TE LSP must be deployed to detect the connectivity of the primary and backup LSPs so that HSB protection can be implemented between the primary and backup LSPs.  If no detection protocol is available, SR-MPLS TE LSPs cannot detect link faults and traffic cannot be switched, causing traffic loss. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The bandwidth of the primary tunnel must be less than or equal to that of the backup tunnel. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The reverse LSP of the working tunnel cannot be the same as that of the protection tunnel. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The name of a reverse static bidirectional co-routed LSP must be the same as that of the forward static bidirectional co-routed LSP. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Only transit nodes on static bidirectional co-routed LSPs support LSP loopback. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Only the IP address of a loopback interface can be used as the MPLS LSR ID.  If the LSR ID is not a loopback address, an IGP floods only the LSR ID but not the loopback address. In this case, path computation may succeed. However, after the TE tunnel is established, the application or protocol packets that depend on this address cannot be forwarded.  For example, in a VPN recursion scenario, the next hop of a VPN route is the BGP address (usually the loopback interface address) of the peer end, but this address is not the destination address of the TE tunnel. As a result, VPN services fail to be recursed to the tunnel. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Auto bypass tunnels cannot be established across domains because FRR cannot be bound in inter-domain scenarios.  Do not use auto FRR in inter-domain scenarios. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When graceful shutdown is performed on the device through which a TE tunnel passes, if TE tunnel path computation is not affected by the bandwidth and TE metric of the device, you are advised not to use the graceful shutdown function to upgrade or restart a board or device. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Currently, only IS-IS responds to graceful shutdown to flood TE attributes on an interface. Therefore, when OSPF routes are used on an interface, you are advised not to use graceful shutdown to upgrade or restart a board or device. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Automatic bandwidth adjustment can be performed only after CSPF is enabled globally.  If CSPF is not enabled, path pre-calculation cannot be performed and automatic bandwidth adjustment does not take effect. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The destination address of a tunnel must be the MPLS LSR ID of the destination router.  If the destination address of a tunnel is not an LSR ID, path computation may succeed. However, after a TE tunnel is established, applications or protocol packets that depend on the destination address cannot be forwarded.  For example, in a VPN recursion scenario, the next hop of a VPN route is the BGP address (usually the loopback interface address) of the peer end, but this address is not the destination address of the TE tunnel. As a result, VPN services fail to be recursed to the tunnel. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If the TPOAM lock function is enabled on an interface, the interface cannot be configured as the outbound or inbound interface of a static tunnel. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Re-optimization can be performed only after CSPF is enabled globally.  If CSPF is not enabled, path pre-calculation cannot be performed and re-optimization does not take effect. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When the version of the ingress does not support the rsvp graceful-shutdown command, interworking is not supported. This is because that after graceful shutdown is performed on a transit node, a PathErr message with a rerouting request is sent. When the ingress of the RSVP-TE tunnel does not support the rsvp graceful-shutdown command, the ingress cannot process PathErr messages and deletes the RSVP-TE LSP. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| An FRR switchover is incorrectly triggered due to BFD for RSVP detection. An FRR switchover is incorrectly triggered due to BFD for RSVP detection. Return BFD packets are transmitted through routes. The return path may differ from the GRE tunnel path. If the link over which BFD return packets are transmitted fails, traffic may be incorrectly switched to the TE protection path. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When configuring bandwidth for an RSVP-TE tunnel, ensure that the DS-TE mode and te-class-mapping configurations on each node along the tunnel path are the same.  If the DS-TE modes are inconsistent or the te-class-mapping configurations in the DS-TE mode are inconsistent, the tunnel with bandwidth may fail to be established. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When static BFD is configured to monitor SR-MPLS TE services, the service BFD status is Up only when both forward and reverse service forwarding are normal.  For static BFD for tunnel, services can be recursed to tunnels only when the BFD status is Up.  For static BFD for LSP, if BFD is not configured for an LSP or BFD is configured for an LSP and BFD is Up, services can be recursed to the tunnel.  For example, in the topology A-B, there are two links between A and B: link1 and link2.  The path of the SR-MPLS TE tunnel from A to B is recursed to link1, and the path of the SR-MPLS TE tunnel from B to A is recursed to link2.  If link1 goes Down, the SR-MPLS TE tunnel from A to B fails to forward traffic. The tunnel from B to A fails to forward traffic due to the reverse tunnel, and BFD for Tunnel goes Down. As a result, services cannot be recursed to the tunnel from B to A.  If link1 goes Down, the SR-MPLS TE tunnel from A to B fails to forward traffic. The tunnel from B to A fails to forward traffic due to the reverse tunnel, and the BFD session goes Down. As a result, services cannot be recursed to the tunnel from B to A. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The RSVP-TE entropy label is encapsulated into the MPLS label. The entropy label can be used to guide traffic forwarding only after the MPLS label is popped out. Forwarding along an RSVP-TE over GRE tunnel is performed based on IP packets. The RSVP entropy label does not take effect, and load balancing is performed based on the GRE tunnel specification. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| By default, the TE CR-LSP status is not affected when the BFD session status is Admin Down or the neighbor status is Admin Down.  When the system is restarted, the BFD session needs to be renegotiated. If the BFD session does not go Up, the TE CR-LSP goes Down. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| By default, the P2MP TE status is not affected when the BFD session status is Admin Down or the neighbor status is Admin Down.  When the system is restarted, the BFD session needs to be renegotiated. If the BFD session does not go Up, P2MP TE goes Down. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| To deploy both RSVP-TE and GRE tunnels, certain requirements must be met.  In a cyclic scenario, a GRE tunnel and an RSVP-TE tunnel have the same source and sink. An RSVP-TE tunnel is established through the GRE tunnel. After the route is advertised, the outbound interface of the GRE tunnel changes to the RSVP-TE tunnel interface. As a result, traffic fails to be forwarded, and RSVP-TE goes Down through protocol or BFD detection. If a loop is formed, an infinite loop occurs during forwarding. You need to prevent this problem during configuration.  If an RSVP-TE tunnel is deployed over a GRE tunnel which is deployed over another RSVP-TE tunnel and this RSVP-TE tunnel is then deployed over another GRE tunnel, the number of required encapsulations continuously increases, reducing forwarding efficiency. Therefore, you need to avoid this scenario during configuration. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In the topology A-B-C, there are two links between A and B: link1 and link2. There is a single link between B and C. A functions as the ingress of the P2MP tunnel, and B and C function as leaf nodes of the P2MP tunnel. An explicit path named link1 is configured on B, and no explicit path is configured on C.  If RSVP-TE is not enabled on link1, the P2MP path cannot be established. Because link1 is specified for leaf B, link1 cannot be excluded during P2MP path computation. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If hot-standby, ordinary, or best-effort is not configured for a tunnel, secondary or best-effort attributes (such as hop limit, affinity, or explicit path) are configured for the tunnel, and incremental or full synchronization is performed, the secondary or best-effort attributes cannot be synchronized.  The secondary or best-effort attribute takes effect only when the hot-standby, ordinary, or best-effort attribute is configured. Therefore, you only need to add the corresponding configuration. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| By default, when the BFD session status is Admin Down or the neighbor status is Admin Down, the TE tunnel status is not affected.  When the system is restarted, the BFD session needs to be renegotiated. If the BFD session does not go Up, the TE tunnel goes Down. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In a multi-VS scenario, when SR-MPLS TE tunnels are configured, stitching labels cannot be delivered by the controller, but can be allocated by forwarders. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| By default, when the BFD session status is Admin Down) or the neighbor status is Admin Down, the RSVP status is not affected.  When the system is restarted, the BFD session needs to be renegotiated. If the BFD session does not go Up, RSVP is set to Down. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |