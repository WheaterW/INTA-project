Configuration Precautions for VRRP
==================================

Configuration_Precautions_for_VRRP

#### Feature Requirements

**Table 1** Feature requirements
| Feature Requirements | Series | Models |
| --- | --- | --- |
| After the device is restarted, the VRRP priority is adjusted based on the BFD session state.  If the BFD session goes down or the negotiation times out, the VRRP group adjusts its priority based on the Down state of the BFD session.  If the BFD session state is Up or AdminDown, the VRRP group adjusts its priority based on the Up state of the BFD session. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Before deploying VRRP, you are advised to run the vrrp first-packet-delay 0 command to disable the first-packet delay function to prevent slow VRRP group creation. After VRRP is deployed, run the undo vrrp first-packet-delay command to restore the default delay (300s) for sending the first packet. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When a BFD session is associated with a session group, if the process-pst command is not run for the session added to the session group, the BFD session associated with the session group does not support fast association on the forwarding plane. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When the local BFD session is associated with a session group, the time when the remote BFD session goes down is either the time when the last session member in the session group goes down plus the time when the remote BFD session receives the neighbor down event or the maximum detection down time. If the last down session in the session group is a link-bundle session, the detection down time is either the time when the PST of the trunk interface tracked by the link-bundle session goes down plus the time when the remote BFD session receives the neighbor down event or the maximum detection down time. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| Link-bundle and static group sessions are associated with session groups. Because there is no detection entity on the forwarding plane, only associated switching on the control plane is supported. Fast switching on the forwarding plane cannot be implemented. The service switching time depends on the convergence time on the control plane of each service. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| There are the following restrictions on deploying VRRP and VRRPv6 on different flexible sub-interfaces of the same VLAN on the same physical or logical interface:  1. The VRRP master/backup status can be negotiated on flexible sub-interfaces (other sub-interfaces do not have priority 48) if the vlan-type dot1q vid dscp default command is run.  2. The master/backup VRRP status can be negotiated on flexible sub-interfaces (not on any other sub-interfaces) if the vlan-type dot1q vid dscp 48 command is run.  3. The master/backup VRRP status can be negotiated on flexible sub-interfaces (not on any other sub-interfaces) if the vlan-type dot1q vid 8021p 6 command is run.  4. If VRRP needs to be deployed on flexible sub-interfaces, you are advised to use the track admin-vrrp solution. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When multiple sub-VLANs are configured in a super-VLAN and VRRP instances are configured on the VLANIF interface of the super-VLAN, the number of VRRP instances may not reach the expected maximum. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |