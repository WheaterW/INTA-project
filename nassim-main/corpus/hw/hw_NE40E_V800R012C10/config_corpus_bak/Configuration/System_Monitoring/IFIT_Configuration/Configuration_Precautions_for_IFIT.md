Configuration Precautions for IFIT
==================================

Configuration_Precautions_for_IFIT

#### Feature Requirements

**Table 1** Feature requirements
| Feature Requirements | Series | Models |
| --- | --- | --- |
| IFIT does not support shortcut-or-EPE-based access to an SRv6 public network tunnel encapsulated in USD mode. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When the function to collect statistics about out-of-order packets is disabled for an iFIT instance, some packets are out of order. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| The limitations for IFIT to support SRv6 TE Policy quality measurement are as follows:  1. If the source address configured using the encapsulation source-address ipv6-address command in the SRv6 view changes, all tunnel-level IFIT instances are deleted and re-created, regardless of whether an MCP is configured.  2. If no source address is configured using the encapsulation source-address ipv6-address command in the SRv6 view or the configured address is unreachable, MCP-based path calculation fails.  3. IFIT MCP calculation is supported only when IFIT instances are generated on the ingress and egress of a tunnel. If IFIT instances are generated on other nodes, calculation is not supported.  4. If an SRv6 TE Policy is unidirectional, IFIT does not send the calculation result to the Policy.  5. Large-specification 2s measurement is supported only by the CPU of the main control board (higher than 1620), not by low-performance boards.  6. When the CPU usage exceeds the upper limit, SLA calculation is not performed. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When IFIT measurement is performed for an SRv6 TE Policy list, if the list stack contains up to the penultimate hop End.X SID for public network traffic (including BFD packets for the SRv6 TE Policy list), the SRH is removed because the SL value is 0. As a result, an IFIT egress instance is generated on the penultimate hop. MCP statistics calculation is not supported in this scenario. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In the scenario where the public network tunnel is an SRv6 tunnel and penultimate segment pop of the SRH (PSP) is configured, if packets carry the IFIT header, and IFIT is enabled on the device, PSP does not take effect and the USP action is performed by default. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| 1. IFIT does not allow MCP-based calculation to be performed for BFD packets in BFD For EVPN VPWS over SRv6 scenarios.  2. In MCP-based computation for U-BFD for SRv6 tunnel scenarios, the TE IPv6 router ID configured using the te ipv6-router-id command must be the same as the source address configured using the encapsulation source-address ipv6-address command. Otherwise, the MCP cannot compute the SLA result of BFD packets.  Typical configuration:  [~HUAWEI] display this  te ipv6-router-id 2001:DB8:1::1  [~HUAWEI-segment-routing-ipv6] display this  segment-routing ipv6  encapsulation source-address 2001:DB8:2::2  3. In the scenario where IFIT is used to monitor an SRv6 TE Policy list and the MCP is used for statistics collection, if the insert encapsulation mode is used for the SRv6 TE Policy and the source IPv6 address of the traffic is not the address of the ingress of the tunnel, MCP calculation is incorrect.  Typical configuration:  [~HUAWEI-segment-routing-ipv6-policy-policy1] display this  encapsulation-mode insert  [~HUAWEI-segment-routing-ipv6] display this  segment-routing ipv6  encapsulation source-address 2001:DB8:2::2  The source address of traffic is 2001:DB8:1::1.  4. In the scenario where U-BFD return packets are forwarded over a tunnel, if the egress timestamp and ingress timestamp are on the same device, the return delay of the instance is used as the two-way delay of the two-way instance, and the return delay divided by 2 is used as the one-way delay of the two-way instance. If no two-way instance exists, this processing is not performed.  5. In the scenario where U-BFD return packets are forwarded over a tunnel and no background traffic exists, the calculation depends on timeout. Due to the precision problem of the timer, the jitter in some periods may fail to be calculated in the 2-second measurement instance. The period is not notified to the Policy, which does not affect the switchover.  6. In the scenario where only U-BFD return packets are forwarded over a tunnel, the calculation starts only after no packet loss occurs for the first time.  7. When the egress has an interface board without IFIT Policy measurement capabilities, the MCP cannot calculate statistics. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In an IFIT for SRv6 TE Policy list scenario, if the egress does not support IFIT for SRv6 TE Policy list, the SBFD session that detects the SRv6 TE Policy list goes down after IFIT is enabled. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT can collect statistics on packets that are sent to the CPU of the local device and packets that are discarded. The egress-to-CPU instance supports collection of statistics on packets sent to the CPU of the local device. The normaldrop instance supports collection of statistics on packets discarded due to NULL0 routes, locator NULL0 routes, private blackhole routes, and ACL deny actions. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT measurement depends on timer sampling. The actual measurement time in a measurement period is different from the measurement period. Therefore, when IFIT measurement data is used to calculate the flow rate, the average rate of packets within a period is inaccurate. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT MCP does not support hop-by-hop measurement calculation in SRv6 TE Policy tunnel-level scenarios. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT does not support L2VPN BUM traffic statistics collection. If BUM traffic exists on the ingress PE, IFIT statistics collection is not performed and the IFIT header is not encapsulated. If BUM traffic exists on the egress PE, BUM packets are terminated in the upstream direction. If BUM traffic is discarded in the downstream direction, statistics about such traffic are not collected. If BUM traffic is discarded in the downstream direction of the egress PE, the packet loss of BUM traffic cannot be displayed. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT does not support end-to-end measurement in L2VPN Option B scenarios. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT is not support in scenarios where traditional VPLS interworks with EVPN E-LAN; E2E measurement is not supported in scenarios where traditional VLL interworks with EVPN E-LAN; IFIT is not supported in scenarios where EVPN VPWS interworks with EVPN VPLS. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In scenarios where a Layer 3 network is connected to a Layer 2 network through a VBDIF interface or a Layer 2 network is connected to a Layer 3 network through a VBDIF interface, if the packet forwarding mode of a VBDIF interface is set to half-line-rate forwarding using the forward-mode loopback command, IFIT measurement is not supported. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In IFIT measurement at the MAC address granularity, configured flows may overlap or include each other, and measurement flows can be measured by only one measurement instance. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In scenarios where APN-based IFIT measurement is configured, if the APN identifier of the flows to be measured cannot be added, IFIT measurement does not take effect. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If multiple IFIT flows based on APN instances or those based on APN instances and other granularities overlap, only one flow instance can be matched for measurement. Do not configure flow characteristics that have overlapping or inclusion relationships. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In an SRv6 HoVPN scenario, on the node connecting two tunnel segments, the IFIT header is inherited to the second segment by default, but the APN header is not inherited by default. As a result, the APN-based IFIT flow may not carry the APN header or carry a different APN header in the second segment. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When multiple APN templates exist, if the instances used by multiple flows are bound to different APN templates, incorrect matching may occur. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| Transit P nodes do not support the generation of NormalDrop IFIT instances (for example, ACL DENY is configured). When a policy is configured on a P node to discard IFIT packets, the generation rate of other IFIT instances is affected. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| The egressToCp, NormalDrop, and egressBum instances of IFIT do not support out-of-order packet or per-packet delay measurement. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| The port range cannot be configured for the 5-tuple of a static IFIT instance. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| For unicast IFIT instances with Header Type being 16, each SRv6 SID node (including the ingress and egress of SRv6 BE) must be able to identify the DOH and SRH in packets. Otherwise, traffic will be interrupted (for example, the version that does not support IFIT instance with Header Type being 16). To use the new IFIT feature of the IFIT instance with Header Type being 16, you need to upgrade SRv6 SID nodes on the E2E network. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If IFIT Option A mapping is configured on the outbound interface for single-device IFIT, a transitOutput statistical node instead of an egress statistical node is generated in the outbound direction, and IFIT headers are encapsulated into packets before they are sent out. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If traffic of a unicast IFIT instance with Header Type being 16 re-enters a tunnel through encapsulation in SRv6 Encap mode (including BSID, shortcut, and TILFA) on a device or board that does not allow IFIT instances with Header Type being 16, hop-by-hop IFIT header replication cannot be performed. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| Unicast IFIT instances with Header Type being 16 cannot be configured in inter-AS VPN Option A or MPLS scenarios. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| On a non-/N680/ board, when the ingress of the instance-ht16 unicast instance is in a VPN IPv4 fragmentation scenario, the outgoing mirrored packets cannot carry the IFIT header. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When the flows to which upstream traffic belongs overlap, the ingress matches the specified IFIT instance based on the priority. Specifically:  (The following description is based on the full IFIT capability set. For details, see the measurement scenarios supported by the device. In addition, a smaller sequence number indicates a higher priority. IFIT instances with the same priority are randomly selected.)  1. In IFIT for EVPN L3VPNv4/v6 scenarios, the following priorities are used:  a. Static 5-tuple or 2-tuple+DSCP  b. Static 5-tuple/2-tuple  c. Dummy instance (flows that do not require automatic flow learning, such as ICMP and BFD)  d. Dynamic 5-tuple/2-tuple  e. Whitelist-based flow learning  f. Flow learning on common interfaces  g. Pure APN ID  h. Static VPN+PeerIP/PeerLocator  2. In IFIT for EVPN VPLS scenarios, the following priorities are used:  a. Static MAC address  b. Static VPN+PeerIP/PeerLocator | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In BIERv6 scenarios, a device running an earlier version cannot parse the DOH carrying IFIT information. As a result, traffic is interrupted. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT multicast measurement supports only BIERv6 tunnels. In non-BIERv6 scenarios, if the ingress matches the multicast source and multicast group address of a static multicast instance, an ingress instance is generated, but the sent packets do not carry the IFIT header. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In a BIERv6 scenario, the egress instance generated by the egress does not carry outbound interface information. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In a BIERv6 header penultimate hop popping scenario, IFIT directly generates an egress instance at the penultimate hop. If the outbound interface has multiple main interfaces, multiple egress instances are generated. The egress instances carry outbound interface information. The outbound interfaces of the penultimate hop popping device cannot be different sub-interfaces of the same main interface. Otherwise, IFIT statistics are accumulated, causing extra packets. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In a scenario where a VXLAN tunnel interworks with an MPLS/SRv6 tunnel, if flow learning is bound to all interfaces of the current VPN and interfaces are not bound to IFIT instances, flow learning fails, and IFIT measurement does not take effect. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In a scenario where traffic leaves an SRv6/MPLS tunnel and enters a VXLAN tunnel, backward flow learning does not take effect when IFIT bidirectional flow measurement is performed. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When DIP is enabledfor EVPN VPWS/VPLS, enabling IFIT out-of-order measurement and per-packet delay measurement for an IFIT instance in the corresponding scenario may affect service DIP indicators. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT does not allow different IFIT headers to be encapsulated into the same packet twice. Therefore, after IFIT is configured in scenarios where different tunnels are deployed or interwork with each other, if IFIT is enabled for the current tunnel segment, the IFIT instance of the next tunnel segment does not take effect. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When IFIT is used to monitor BAS interfaces, ingress flow learning cannot be bound to all interfaces. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT does not take effect in the scenario where L2EVPN traffic is terminated and forwarded at Layer 3 through BDIF. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When the flow unidirectional evpn command is run to create a static IFIT for EVPN VPLS flow based on an IFIT HT16 instance, an error message is displayed during command delivery, and the function does not take effect. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In an HVPN or Option B scenario where end-to-end measurement is performed for an MPLS tunnel, the UPE functions as the ingress. When running the encapsulation nexthop ip-address command, you need to specify the IP address of the peer SPE as the next hop. When running the encapsulation nexthop ip-address command on the SPE, you need to specify the IP address of the peer NPE as the next hop. If the configuration is improper, no IFIT statistics are collected. During segment-based measurement, if IFIT is not enabled on the specified next-hop SPE, traffic is transparently transmitted out of the SPE. If the egress PE does not have the IFIT capability, traffic is interrupted. If the specified next-hop SPE or NPE does not support IFIT, traffic on the device is interrupted. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If a packet needs to be fragmented, IFIT measures only the first fragment. The number of packets is accurate but the number of bytes may be inaccurate. After intermediate and last fragements are lost, IFIT packet loss statistics are normal. However, packet loss occurs in the actual traffic statistics. The failure point cannot be demarcated based on the statistics. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT does not support broadcast and multicast traffic statistics. In multicast scenarios, multiple copies of traffic statistics are collected, causing extra packets or inaccurate statistics. There are restrictions on multicast and broadcast IP addresses, and IFIT traffic cannot be broadcast or replicated (for example, carried on a P2MP tunnel). Plan services properly. Otherwise, IFIT statistics will be inaccurate. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT cannot be used together with the flow label function. If they are used together, flow labels overwrite IFIT labels. As a result, the IFIT function of the monitored link does not take effect, and the ASG or egress cannot remove the IFIT header, causing traffic interruptions. Avoid this scenario during service planning. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When the configuration of an IFIT instance changes or the ingress restarts, the ingress re-allocates a flow ID. As a result, data in several periods may be inaccurate or no data is collected. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| Statistics collected during an active/standby switchover of IFIT interface boards are inaccurate. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In IFIT delay measurement, only one packet is colored in each period. When the traffic is light or a large number of packets are lost, there is a possibility that no packet is colored in the coloring period. As a result, no delay data is available in some IFIT periods. When the congestion duration is too long, IFIT statistics are inaccurate. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| Flow conflicts are not allowed on the IFIT ingress. If flow conflicts (including or overlapping) occur, IFIT measurement results may be inaccurate. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If the forwarding path changes (such as FRR and hard convergence) during IFIT statistics collection, the statistics collected in one or two periods after a switchover are inaccurate. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT supports only MPLS, SR-MPLS, and SRv6 tunnels, but does not support GRE or VXLAN tunnels. Plan services properly. Otherwise, no IFIT statistics are displayed. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT requires the deployment of the time synchronization protocol 1588v2, G.8275.1, or NTP. However, if non-high-precision NTP is deployed, delay measurement is not supported. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| Assume that PE1 and ASBR1 belong to AS 100, and PE2 and ASBR2 belong to AS 200. Inter-AS VPN IFIT needs to be performed between AS 100 and AS 200. The configuration of the static next hop IP address is described as follows:  1. In an inter-AS VPN Option A scenario, end-to-end measurement cannot be performed between PEs in different VPNs.  2. In an inter-AS VPN Option B scenario, PE1 functions as the ingress. When running the encapsulation nexthop ip-address command on PE1, you need to specify the IP address of ASBR1 as the next hop. When running the encapsulation nexthop ip-address command on ASBR1, you need to specify the IP address of ASBR2 as the next hop. When running the encapsulation nexthop ip-address command on ASBR2, you need to specify the IP address of PE2 as the next hop.  3. In an inter-AS VPN Option C scenario, PE1 functions as the ingress. When running the encapsulation nexthop ip-address command, specify the IP address of PE2 as the next hop.  If the configuration is improper, no IFIT statistics are collected. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If the public network tunnel is an MPLS tunnel, you need to run the encapsulation nexthop ip-address command to configure static capability negotiation to enable IFIT for the tunnel. Before the configuration, ensure that the egress PE is capable of removing the IFIT extension header. Otherwise, traffic forwarding is affected.  Properly plan services to prevent static IFIT from being enabled for tunnels that are not supported by the egress PE. Otherwise, the egress cannot identify packets, and traffic may be interrupted. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| On a board equipped with an egress TM chip, outbound interface traffic statistics are collected by the egress TM chip, and IFIT statistics are collected by the NP. When packet loss occurs on the egress TM chip, for example, traffic congestion occurs, IFIT statistics may indicate link packet loss on the controller. When the board equipped with an egress TM chip functions as the egress, if packet loss occurs on the egress TM chip, for example, traffic congestion occurs, IFIT cannot collect statistics about the packet loss on the egress TM chip. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When a non-VPN ingress node (for example, an ABR functioning as the downstream ingress on an HoVPN, an ABR on an H-VPN, or an ABR/ASBR in an Option B scenario) functions as the IFIT ingress, VPNs cannot be distinguished because there is no VPN information. If flows in different VPNs have the same characteristics (5-tuple information), the statistics are collected together. As a result, the statistics are inaccurate. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When a non-VPN ingress (such as an ABR in H-VPN scenarios or an ABR/ASBR in Option B scenarios) functions as the IFIT ingress, VPNs cannot be distinguished because no VPN information is available. If flows in different VPNs have the same flow characteristics (5-tuple), the statistics of the flows are collected together. As a result, the statistics are inaccurate. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In VPN+peer IP address/locator-based IFIT measurement for segmented VPN (HoVPN, H-VPN, or Option B), the peer IP address/locator address can only be the IP address/locator address of the SPE or ASBR , not that of the E2E egress. If multiple NPEs exist, the overall performance of all flows from the ingress to the NPEs is measured, but the flows are not differentiated. Properly plan services. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In VPN+peer IP address/locator-based IFIT measurement for segmented VPN (HoVPN, H-VPN, or Option B), an SPE or ASBR cannot function as the ingress of IFIT. Plan services properly. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT configurations on devices running different versions is not compatible with each other. If IFIT is required on devices running a later version, you are advised to disable IFIT, upgrade all devices that require IFIT, and then enable IFIT on these devices again. For details about the version and upgrade process, see "Precautions for IFIT Deployment During an Upgrade" in the upgrade guide of the corresponding device model. Plan services properly. IFIT on a device running a later version is not compatible with IFIT on a device running an earlier version. As a result, packets cannot be correctly parsed, causing inaccurate IFIT statistics and traffic interruptions. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In a scenario where the public network tunnel is an MPLS TE group, IFIT supports only 5-tuple or 5-tuple + DSCP measurement, and does not support VPN + peer measurement. In an EVPN VPLS scenario, IFIT does not support MAC address-based measurement. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When a device with IFIT enabled globally is attacked by a large number of invalid IFIT packets, the generation of dynamic IFIT instances may be affected, but dynamically learned IFIT instances are not affected. Plan services properly. Otherwise, dynamic IFIT instances are generated slowly or cannot be generated. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If rate limiting-based packet loss is processed on the eTM or subcard and rate limiting-based packet dropping is enabled on the outbound interface of the board, the downstream IFIT packet loss statistics are the statistics before rate limiting-based packet dropping is performed. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If IFIT is configured when SRv6 BE tunnels are used as public network tunnels, the load balancing paths change due to protocol encapsulation changes, which does not affect the load balancing effect. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| The IFIT packet forwarding delay and table delivery delay cause the start time of statistics collection on the ingress to be different from that on subsequent devices. As a result, there is a possibility that the first period on the egress is the second period on the ingress, causing end-to-end IFIT statistics in the third period to be inaccurate. ErrorInfo is reported in the first two periods of each instance for the controller to filter. The third period on the ingress corresponds to the second period on the egress. As such, the third period is filtered by the controller due to the ErrorInfo reported by the egress. Plan services properly. Otherwise, end-to-end IFIT statistics in the third period is inaccurate and will be filtered out by the controller. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When an SRv6 tunnel is used as the public network tunnel and PSP is configured, if the penultimate hop is a non-Huawei device, IFIT-incapable Huawei device, or IFIT-capable Huawei device with IFIT disabled, no IFIT statistics are available on the egress. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In HoVPN scenarios, segment-by-segment IFIT measurement is deployed between UPEs and SPEs and between NPEs and SPEs. Reverse IFIT instances dynamically generated using SPEs as reflectors are not supported. Use manually configured reverse IFIT instances or E2E IFIT instances between UPEs and NPEs. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When a PE and a CE are connected through physical interfaces, if the upstream and downstream AC interfaces of the traffic to be monitored are different on the AC side, the reverse IFIT instance cannot collect statistics on the reverse traffic.  This problem also exists in the scenario where a PE and a CE are connected through a trunk interface and upstream and downstream traffic is transmitted through different member interfaces.  Plan the configuration properly. Otherwise, IFIT statistics are inaccurate. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If a static IFIT instance conflicts with a dynamic IFIT instance on the reflector, the static IFIT instance takes precedence over the dynamic IFIT instance. After the static IFIT instance is deleted, the dynamic IFIT instance is restored. Plan the configuration properly. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In the Option B or HVPN scenario where the L2VPN public network is an MPLS tunnel, IFIT does not support end-to-end measurement. It supports only measurement from a PE to an ASBR or from a PE to an SPE. Properly plan configurations. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT cannot measure detection protocol packets such as 802.1ag or Y.1731 packets. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In an L2VPN accessing L3VPN scenario, IFIT does not support end-to-end measurement. It supports only L2VPN and L3VPN segment-based measurement. Properly plan configurations. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In an L2VPN tunnel scenario, if the AC interface fails and the bypass tunnel takes effect, traffic enters the public network again and is forwarded to the backup PE. In this case, IFIT does not generate an egress on the AC interface but on the inbound interface of the bypass tunnel. Plan the configuration properly. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If service traffic is sent upstream, IFIT statistics cannot be collected. If service traffic is discarded in the upstream direction, IFIT statistics cannot be collected in L2VPN scenarios. Properly plan configurations. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In IFIT scenarios where the entropy label is used, the hash key of the entropy label supports only the Layer 2 header. Plan the configuration properly. Otherwise, the load balancing capability deteriorates for traffic that is load balanced based on the entropy label. In this case, traffic cannot be load balanced as expected. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| The IFIT sub-interface path restoration function supports path restoration only for VLAN-type dot1q sub-interfaces (packets can contain only one VLAN tag). Path restoration for sub-interfaces of other sub-interfaces is not supported. Properly plan the configuration. Otherwise, IFIT path restoration for non-VLAN-type dot1q sub-interfaces is affected. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| The IFIT sub-interface path restoration function does not support the scenario where the same IFIT flow enters different network slices. That is, only one sub-interface can be restored, and information about other sub-interfaces cannot be restored. Plan the configuration properly. Otherwise, the sub-interface path restoration function of IFIT is affected. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT sub-interface path restoration supports only transit nodes (including the downstream direction of the ingress and upstream direction of the egress) and does not support the upstream direction of the ingress or downstream direction of the egress. Plan the configuration properly. Otherwise, the sub-interface path restoration function of IFIT is affected. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT does not support the MPLS over GRE scenario. In this scenario, no IFIT statistics are collected or no statistics are collected for the GRE segment. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| The maximum delay, minimum delay, and total delay reported by IFIT to the controller are the delay between the current measurement point and the ingress. The maximum delay and minimum delay between nodes cannot be calculated. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In an inter-AS IFIT Option A scenario where cloud and network PEs are co-deployed, if the Option A interface is a QinQ interface and the cloud PE functions as the IFIT ingress, the IFIT header cannot be encapsulated for measurement. Properly plan the configurations. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT does not support SRv6 over GRE scenarios. IFIT headers can be encapsulated properly. However, the GRE tunnel segment does not support IFIT measurement, and no hop-by-hop measurement data is available for the GRE tunnel segment. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When IFIT automatic learning of bidirectional flows is enabled, if the original interface IP address or a new interface IP address is added on the learned VPN interface that has traffic passing through, a dummy instance is generated and the instance corresponding to the traffic cannot be generated in real time. Restoration is performed after 10 minutes when the dummy instance ages. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If in-depth load balancing is not enabled on a P node of an MPLS tunnel, traffic with the IFIT header cannot be correctly load balanced on the node. Properly plan the configurations. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When deploying iFIT for a Layer 2 private line, ensure that the peer device specified by iFIT supports iFIT for the Layer 2 private line. Otherwise, the egress cannot remove the iFIT header, causing a service interruption. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| To implement IFIT for MPLS tunnels based on EVPL instances and peer IP addresses, ensure that the peer device is capable of removing IFIT headers in Layer 2 scenarios. Otherwise, the egress cannot remove IFIT headers, causing service interruptions. After an IFIT instance is configured, the device considers that the peer device has the IFIT capability, and the encapsulation nexthop command does not need to be run for all IFIT instances based on the peer IP address. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When IFIT supports global VE interfaces, delay measurement is not supported. As a result, the delay function and TTL message sending are affected. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT does not collect statistics about EOAM, Y.1731, or LPT packets. The packets are not encapsulated with the IFIT header, and therefore IFIT measurement is not performed. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When IFIT detects RFC 2544/Y.1564 return packets on the egress, that is, when the RFC 2544/Y.1564 transmit end receives packets, the IFIT egress instance cannot be generated. Statistics about RFC 2544/Y.1564 return packets collected by IFIT on the egress are affected, and no IFIT egress instance is generated. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| For the packets (including TWAMP, BFD, NQA, and other packets sent to the CPU) that are added with an IFIT header on the ingress but terminated on the egress, IFIT cannot collect statistics about the packets on the egress outbound interface. As a result, IFIT incorrectly considers that packet loss occurs. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When IFIT detects ping packets, ping packets are fast replied on the egress PE. The ping packets are not sent to the AC interface, but reflected back from the public network interface. Therefore, the IFIT-generated egress instance interface is a public network interface. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| Application-level IFIT and tunnel-level IFIT cannot be both configured for the same packet. If tunnel-level measurement and application-level measurement are configured on the same device, application-level measurement takes precedence over tunnel-level measurement. If tunnel-level measurement and application-level measurement are configured on different devices, the measurement type carried in the outer IFIT header takes effect. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In the scenario where IFIT monitors an SRv6 TE Policy list, if a board or chip is replaced after delay measurement is enabled, extra or no packets are collected for delay measurement on the node. As a result, no delay statistics are collected within two periods after the board or chip replacement. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In a scenario where IFIT is used to monitor an SRv6 TE Policy List, IFIT statistics cannot be collected for packets sent by the tunnel ingress or packets sent and received by hosts (such as upper-layer protocol packets such as ping, ETHOAM, BGP, IS-IS, OSPF and DHCP packets). | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In the scenario where IFIT monitors an SRv6 TE Policy List and the egress does not support IFIT for SRv6 TE Policy list, after IFIT is enabled, multiple instances are generated, resulting in incorrect statistics. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In a scenario where an SRv6 TE Policy segment list contains only one SID (link SID or node SID), if public network traffic entering the SRv6 TE Policy matches the IFIT instance, the Reduce function does not take effect. Even if there is only one SID, the SRH is still required. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In a scenario where the L3VPN outbound interface is a VLANIF interface, if the BUM process is triggered by MAC address association, BUM IFIT traffic statistics are generated on the egress. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| VLL or VPLS access through VLANIF inbound and outbound interfaces is not allowed in IFIT scenarios. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In a scenario where traffic is transmitted through a VLANIF interface on an SRv6 tunnel's transit node, if traffic triggers the BUM process due to MAC address association, IFIT cannot collect BUM traffic statistics. As a result, traffic statistics are abnormal. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| IFIT does not support BDIF interfaces or port extension interfaces as the inbound or outbound interface of traffic. Static instances on the ingress can be restricted using commands, but static instances on transit and egress nodes cannot be restricted using commands. When a global VE interface functions as a P node of a public network, IFIT is not supported. Global VE interfaces do not support IFIT delay measurement. During the measurement, if an unsupported interface is bound or traffic passes through an unsupported interface, no IFIT instances or statistics are generated. IFIT instances and statistics on a sub-interface are generated based on its main interface. Plan services properly. Otherwise, no IFIT statistics are displayed. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When single-device IFIT is bound to a public network VLANIF member interface, measurement instance cannot be generated. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When an automatic flow is bound to interface all, if the inbound interface of the flow is not a member interface of a VBDIF interface or VLANIF interface, the ingress IFIT instance of the VPN bound to the VLANIF interface or VBDIF interface cannot be automatically generated. To generate the IFIT instance, manually bind the flow to the inbound interface. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| If the egress of a forward IFIT flow resides on a VLANIF or VBDIF interface, no backward flow instance can be generated. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| In IFIT backward flow diffusion learning mode, multiple forward flows with different flow IDs have the same 5-tuple information and correspond to the same group of diffused backward flows. If one forward flow is deleted, the corresponding diffused backward flow is also deleted. If a forward flow with another flow ID exists, a backward flow will be regenerated within 30s. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |
| When the decapsulation peer-locator command is run for IFIT termination, if the next SRv6 Policy of the IFIT flow is configured with TE FRR, or the local End.X label is specified as the next hop, or the next SRv6 BE tunnel is configured with TI-LFA, the generated IFIT egress instance does not carry interface information. As a result, no backward flow can be generated, and out-of-order packet statistics cannot be collected. | NE40E-M2 | NE40E-M2K/NE40E-M2K-B |