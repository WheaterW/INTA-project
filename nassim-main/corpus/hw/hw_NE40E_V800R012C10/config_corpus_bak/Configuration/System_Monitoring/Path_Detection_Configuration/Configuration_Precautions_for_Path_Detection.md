Configuration Precautions for Path Detection
============================================

Configuration_Precautions_for_Path_Detection

#### Feature Requirements

**Table 1** Feature requirements
| Feature Requirements | Series | Models |
| --- | --- | --- |
| Path detection packets are not terminated by the device. After receiving the packets, the device sends them to the destination server or VM. Plan services properly. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The path detection function applies only to VXLAN tunnel scenarios and can detect only the ingress and egress PEs of VXLAN tunnels. Plan services properly. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If DSCP-based IPv4 path detection is used, the DSCP value used for identifying detection packets must be planned in advance and not be used by any other service traffic. If the DSCP value is used by service traffic, the packets are copied and sent to the CPU, occupying the bandwidth of the channel for sending the packets to the CPU. If the DSCP value is also used by the packets sent by the local device, the packets are incorrectly identified as packets in the path detection process. As a result, the packets cannot be processed in the original process. Properly plan the DSCP value. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| If DSCP-based IPv6 path detection is enabled, plan the DSCP value that is used to identify detection packets, and ensure that the DSCP values are not used by any other service traffic. If the DSCP value is used by service traffic, the packets are copied and sent to the CPU, occupying the bandwidth of the channel for sending the packets to the CPU. If the DSCP value is also used by the packets sent by the local device, the packets are incorrectly identified as packets in the path detection process. As a result, the packets cannot be processed in the original process. Properly plan the DSCP value. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| In multi-VR scenarios, path detection packets between VRs may be incorrectly matched and sent to the CPU. In this case, the controller needs to filter the packets based on the configured VR. Plan services properly. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| When the path detection function specifies an inter-board Eth-Trunk interface as the inbound interface to send packets, the forwarding path of path detection packets may be different from the forwarding path of data flows because the initial random salt value of the hash algorithm on different boards may be different, you can specify the actual inbound interface of a data flow, that is, a specific Eth-Trunk member interface, as the packet sending interface. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |
| The path detection result of GTP packets may be inaccurate. The device uses the TEID field in GTP packets to participate in hash-based route selection. As a result, the hash path of path detection packets configured based on 5-tuple information is different from that of GTP packets. When configuring packet sending, you also need to set the TEID value of GTP packets. | NE40E-M2 | NE40E-M2E/NE40E-M2F/NE40E-M2H/NE40E-M2K/NE40E-M2K-B |